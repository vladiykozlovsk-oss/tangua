const __vite__fileDeps=["./CB6HEiPZ.js","./DgDz-Izd.js","./index.C_qm3XGS.css","./BsLsv_mg.js","./buIs6uM7.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var oP=Object.defineProperty;var sP=(t,e,n)=>e in t?oP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var td=(t,e,n)=>sP(t,typeof e!="symbol"?e+"":e,n);/**
* @vue/shared v3.4.31
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ik(t,e){const n=new Set(t.split(","));return r=>n.has(r)}const Pt={},Tc=[],oo=()=>{},iP=()=>!1,ph=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),ak=t=>t.startsWith("onUpdate:"),en=Object.assign,lk=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},aP=Object.prototype.hasOwnProperty,yt=(t,e)=>aP.call(t,e),Ae=Array.isArray,Mc=t=>Pu(t)==="[object Map]",Ru=t=>Pu(t)==="[object Set]",s_=t=>Pu(t)==="[object Date]",lP=t=>Pu(t)==="[object RegExp]",We=t=>typeof t=="function",Bt=t=>typeof t=="string",ms=t=>typeof t=="symbol",Et=t=>t!==null&&typeof t=="object",ck=t=>(Et(t)||We(t))&&We(t.then)&&We(t.catch),P4=Object.prototype.toString,Pu=t=>P4.call(t),cP=t=>Pu(t).slice(8,-1),D4=t=>Pu(t)==="[object Object]",uk=t=>Bt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ec=ik(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ry=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},uP=/-(\w)/g,gs=ry(t=>t.replace(uP,(e,n)=>n?n.toUpperCase():"")),dP=/\B([A-Z])/g,Du=ry(t=>t.replace(dP,"-$1").toLowerCase()),oy=ry(t=>t.charAt(0).toUpperCase()+t.slice(1)),w0=ry(t=>t?`on${oy(t)}`:""),ca=(t,e)=>!Object.is(t,e),Oc=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},$4=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Mm=t=>{const e=parseFloat(t);return isNaN(e)?t:e},H4=t=>{const e=Bt(t)?Number(t):NaN;return isNaN(e)?t:e};let i_;const F4=()=>i_||(i_=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function mh(t){if(Ae(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],o=Bt(r)?mP(r):mh(r);if(o)for(const s in o)e[s]=o[s]}return e}else if(Bt(t)||Et(t))return t}const fP=/;(?![^(]*\))/g,hP=/:([^]+)/,pP=/\/\*[^]*?\*\//g;function mP(t){const e={};return t.replace(pP,"").split(fP).forEach(n=>{if(n){const r=n.split(hP);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function V(t){let e="";if(Bt(t))e=t;else if(Ae(t))for(let n=0;n<t.length;n++){const r=V(t[n]);r&&(e+=r+" ")}else if(Et(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const gP="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",yP=ik(gP);function B4(t){return!!t||t===""}function vP(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Sl(t[r],e[r]);return n}function Sl(t,e){if(t===e)return!0;let n=s_(t),r=s_(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=ms(t),r=ms(e),n||r)return t===e;if(n=Ae(t),r=Ae(e),n||r)return n&&r?vP(t,e):!1;if(n=Et(t),r=Et(e),n||r){if(!n||!r)return!1;const o=Object.keys(t).length,s=Object.keys(e).length;if(o!==s)return!1;for(const i in t){const a=t.hasOwnProperty(i),l=e.hasOwnProperty(i);if(a&&!l||!a&&l||!Sl(t[i],e[i]))return!1}}return String(t)===String(e)}function dk(t,e){return t.findIndex(n=>Sl(n,e))}const j4=t=>!!(t&&t.__v_isRef===!0),Le=t=>Bt(t)?t:t==null?"":Ae(t)||Et(t)&&(t.toString===P4||!We(t.toString))?j4(t)?Le(t.value):JSON.stringify(t,z4,2):String(t),z4=(t,e)=>j4(e)?z4(t,e.value):Mc(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,o],s)=>(n[k0(r,s)+" =>"]=o,n),{})}:Ru(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>k0(n))}:ms(e)?k0(e):Et(e)&&!Ae(e)&&!D4(e)?String(e):e,k0=(t,e="")=>{var n;return ms(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.31
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Rr;class V4{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Rr,!e&&Rr&&(this.index=(Rr.scopes||(Rr.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Rr;try{return Rr=this,e()}finally{Rr=n}}}on(){Rr=this}off(){Rr=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0,this._active=!1}}}function gh(t){return new V4(t)}function bP(t,e=Rr){e&&e.active&&e.effects.push(t)}function $u(){return Rr}function Tf(t){Rr&&Rr.cleanups.push(t)}let il;class fk{constructor(e,n,r,o){this.fn=e,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,bP(this,o)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,va();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(wP(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),ba()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=Ji,n=il;try{return Ji=!0,il=this,this._runnings++,a_(this),this.fn()}finally{l_(this),this._runnings--,il=n,Ji=e}}stop(){this.active&&(a_(this),l_(this),this.onStop&&this.onStop(),this.active=!1)}}function wP(t){return t.value}function a_(t){t._trackId++,t._depsLength=0}function l_(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)U4(t.deps[e],t);t.deps.length=t._depsLength}}function U4(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let Ji=!0,vb=0;const q4=[];function va(){q4.push(Ji),Ji=!1}function ba(){const t=q4.pop();Ji=t===void 0?!0:t}function hk(){vb++}function pk(){for(vb--;!vb&&bb.length;)bb.shift()()}function W4(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const r=t.deps[t._depsLength];r!==e?(r&&U4(r,t),t.deps[t._depsLength++]=e):t._depsLength++}}const bb=[];function K4(t,e,n){hk();for(const r of t.keys()){let o;r._dirtyLevel<e&&(o??(o=t.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=e),r._shouldSchedule&&(o??(o=t.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&bb.push(r.scheduler)))}pk()}const G4=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},Em=new WeakMap,al=Symbol(""),wb=Symbol("");function Cr(t,e,n){if(Ji&&il){let r=Em.get(t);r||Em.set(t,r=new Map);let o=r.get(n);o||r.set(n,o=G4(()=>r.delete(n))),W4(il,o)}}function Gs(t,e,n,r,o,s){const i=Em.get(t);if(!i)return;let a=[];if(e==="clear")a=[...i.values()];else if(n==="length"&&Ae(t)){const l=Number(r);i.forEach((c,u)=>{(u==="length"||!ms(u)&&u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(i.get(n)),e){case"add":Ae(t)?uk(n)&&a.push(i.get("length")):(a.push(i.get(al)),Mc(t)&&a.push(i.get(wb)));break;case"delete":Ae(t)||(a.push(i.get(al)),Mc(t)&&a.push(i.get(wb)));break;case"set":Mc(t)&&a.push(i.get(al));break}hk();for(const l of a)l&&K4(l,4);pk()}function kP(t,e){const n=Em.get(t);return n&&n.get(e)}const xP=ik("__proto__,__v_isRef,__isVue"),J4=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ms)),c_=CP();function CP(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=mt(this);for(let s=0,i=this.length;s<i;s++)Cr(r,"get",s+"");const o=r[e](...n);return o===-1||o===!1?r[e](...n.map(mt)):o}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){va(),hk();const r=mt(this)[e].apply(this,n);return pk(),ba(),r}}),t}function _P(t){ms(t)||(t=String(t));const e=mt(this);return Cr(e,"has",t),e.hasOwnProperty(t)}class Y4{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const o=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(o?s?$P:eO:s?Z4:Q4).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const i=Ae(e);if(!o){if(i&&yt(c_,n))return Reflect.get(c_,n,r);if(n==="hasOwnProperty")return _P}const a=Reflect.get(e,n,r);return(ms(n)?J4.has(n):xP(n))||(o||Cr(e,"get",n),s)?a:Ot(a)?i&&uk(n)?a:a.value:Et(a)?o?tO(a):tr(a):a}}class X4 extends Y4{constructor(e=!1){super(!1,e)}set(e,n,r,o){let s=e[n];if(!this._isShallow){const l=Wc(s);if(!Om(r)&&!Wc(r)&&(s=mt(s),r=mt(r)),!Ae(e)&&Ot(s)&&!Ot(r))return l?!1:(s.value=r,!0)}const i=Ae(e)&&uk(n)?Number(n)<e.length:yt(e,n),a=Reflect.set(e,n,r,o);return e===mt(o)&&(i?ca(r,s)&&Gs(e,"set",n,r):Gs(e,"add",n,r)),a}deleteProperty(e,n){const r=yt(e,n);e[n];const o=Reflect.deleteProperty(e,n);return o&&r&&Gs(e,"delete",n,void 0),o}has(e,n){const r=Reflect.has(e,n);return(!ms(n)||!J4.has(n))&&Cr(e,"has",n),r}ownKeys(e){return Cr(e,"iterate",Ae(e)?"length":al),Reflect.ownKeys(e)}}class SP extends Y4{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const TP=new X4,MP=new SP,EP=new X4(!0);const mk=t=>t,sy=t=>Reflect.getPrototypeOf(t);function ep(t,e,n=!1,r=!1){t=t.__v_raw;const o=mt(t),s=mt(e);n||(ca(e,s)&&Cr(o,"get",e),Cr(o,"get",s));const{has:i}=sy(o),a=r?mk:n?vk:Mf;if(i.call(o,e))return a(t.get(e));if(i.call(o,s))return a(t.get(s));t!==o&&t.get(e)}function tp(t,e=!1){const n=this.__v_raw,r=mt(n),o=mt(t);return e||(ca(t,o)&&Cr(r,"has",t),Cr(r,"has",o)),t===o?n.has(t):n.has(t)||n.has(o)}function np(t,e=!1){return t=t.__v_raw,!e&&Cr(mt(t),"iterate",al),Reflect.get(t,"size",t)}function u_(t){t=mt(t);const e=mt(this);return sy(e).has.call(e,t)||(e.add(t),Gs(e,"add",t,t)),this}function d_(t,e){e=mt(e);const n=mt(this),{has:r,get:o}=sy(n);let s=r.call(n,t);s||(t=mt(t),s=r.call(n,t));const i=o.call(n,t);return n.set(t,e),s?ca(e,i)&&Gs(n,"set",t,e):Gs(n,"add",t,e),this}function f_(t){const e=mt(this),{has:n,get:r}=sy(e);let o=n.call(e,t);o||(t=mt(t),o=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return o&&Gs(e,"delete",t,void 0),s}function h_(){const t=mt(this),e=t.size!==0,n=t.clear();return e&&Gs(t,"clear",void 0,void 0),n}function rp(t,e){return function(r,o){const s=this,i=s.__v_raw,a=mt(i),l=e?mk:t?vk:Mf;return!t&&Cr(a,"iterate",al),i.forEach((c,u)=>r.call(o,l(c),l(u),s))}}function op(t,e,n){return function(...r){const o=this.__v_raw,s=mt(o),i=Mc(s),a=t==="entries"||t===Symbol.iterator&&i,l=t==="keys"&&i,c=o[t](...r),u=n?mk:e?vk:Mf;return!e&&Cr(s,"iterate",l?wb:al),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function hi(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function OP(){const t={get(s){return ep(this,s)},get size(){return np(this)},has:tp,add:u_,set:d_,delete:f_,clear:h_,forEach:rp(!1,!1)},e={get(s){return ep(this,s,!1,!0)},get size(){return np(this)},has:tp,add:u_,set:d_,delete:f_,clear:h_,forEach:rp(!1,!0)},n={get(s){return ep(this,s,!0)},get size(){return np(this,!0)},has(s){return tp.call(this,s,!0)},add:hi("add"),set:hi("set"),delete:hi("delete"),clear:hi("clear"),forEach:rp(!0,!1)},r={get(s){return ep(this,s,!0,!0)},get size(){return np(this,!0)},has(s){return tp.call(this,s,!0)},add:hi("add"),set:hi("set"),delete:hi("delete"),clear:hi("clear"),forEach:rp(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=op(s,!1,!1),n[s]=op(s,!0,!1),e[s]=op(s,!1,!0),r[s]=op(s,!0,!0)}),[t,n,e,r]}const[IP,AP,NP,LP]=OP();function gk(t,e){const n=e?t?LP:NP:t?AP:IP;return(r,o,s)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?r:Reflect.get(yt(n,o)&&o in r?n:r,o,s)}const RP={get:gk(!1,!1)},PP={get:gk(!1,!0)},DP={get:gk(!0,!1)};const Q4=new WeakMap,Z4=new WeakMap,eO=new WeakMap,$P=new WeakMap;function HP(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function FP(t){return t.__v_skip||!Object.isExtensible(t)?0:HP(cP(t))}function tr(t){return Wc(t)?t:yk(t,!1,TP,RP,Q4)}function js(t){return yk(t,!1,EP,PP,Z4)}function tO(t){return yk(t,!0,MP,DP,eO)}function yk(t,e,n,r,o){if(!Et(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=o.get(t);if(s)return s;const i=FP(t);if(i===0)return t;const a=new Proxy(t,i===2?r:n);return o.set(t,a),a}function ll(t){return Wc(t)?ll(t.__v_raw):!!(t&&t.__v_isReactive)}function Wc(t){return!!(t&&t.__v_isReadonly)}function Om(t){return!!(t&&t.__v_isShallow)}function nO(t){return t?!!t.__v_raw:!1}function mt(t){const e=t&&t.__v_raw;return e?mt(e):t}function yh(t){return Object.isExtensible(t)&&$4(t,"__v_skip",!0),t}const Mf=t=>Et(t)?tr(t):t,vk=t=>Et(t)?tO(t):t;class rO{constructor(e,n,r,o){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new fk(()=>e(this._value),()=>jd(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=r}get value(){const e=mt(this);return(!e._cacheable||e.effect.dirty)&&ca(e._value,e._value=e.effect.run())&&jd(e,4),bk(e),e.effect._dirtyLevel>=2&&jd(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function BP(t,e,n=!1){let r,o;const s=We(t);return s?(r=t,o=oo):(r=t.get,o=t.set),new rO(r,o,s||!o,n)}function bk(t){var e;Ji&&il&&(t=mt(t),W4(il,(e=t.dep)!=null?e:t.dep=G4(()=>t.dep=void 0,t instanceof rO?t:void 0)))}function jd(t,e=4,n,r){t=mt(t);const o=t.dep;o&&K4(o,e)}function Ot(t){return!!(t&&t.__v_isRef===!0)}function ae(t){return oO(t,!1)}function Tl(t){return oO(t,!0)}function oO(t,e){return Ot(t)?t:new jP(t,e)}class jP{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:mt(e),this._value=n?e:Mf(e)}get value(){return bk(this),this._value}set value(e){const n=this.__v_isShallow||Om(e)||Wc(e);e=n?e:mt(e),ca(e,this._rawValue)&&(this._rawValue,this._rawValue=e,this._value=n?e:Mf(e),jd(this,4))}}function x(t){return Ot(t)?t.value:t}function Ga(t){return We(t)?t():x(t)}const zP={get:(t,e,n)=>x(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const o=t[e];return Ot(o)&&!Ot(n)?(o.value=n,!0):Reflect.set(t,e,n,r)}};function sO(t){return ll(t)?t:new Proxy(t,zP)}class VP{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:r}=e(()=>bk(this),()=>jd(this));this._get=n,this._set=r}get value(){return this._get()}set value(e){this._set(e)}}function wk(t){return new VP(t)}function UP(t){const e=Ae(t)?new Array(t.length):{};for(const n in t)e[n]=iO(t,n);return e}class qP{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return kP(mt(this._object),this._key)}}class WP{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function kk(t,e,n){return Ot(t)?t:We(t)?new WP(t):Et(t)&&arguments.length>1?iO(t,e,n):ae(t)}function iO(t,e,n){const r=t[e];return Ot(r)?r:new qP(t,e,n)}/**
* @vue/runtime-core v3.4.31
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Yi(t,e,n,r){try{return r?t(...r):t()}catch(o){Hu(o,e,n)}}function ao(t,e,n,r){if(We(t)){const o=Yi(t,e,n,r);return o&&ck(o)&&o.catch(s=>{Hu(s,e,n)}),o}if(Ae(t)){const o=[];for(let s=0;s<t.length;s++)o.push(ao(t[s],e,n,r));return o}}function Hu(t,e,n,r=!0){const o=e?e.vnode:null;if(e){let s=e.parent;const i=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,i,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){va(),Yi(l,null,10,[t,i,a]),ba();return}}KP(t,n,o,r)}function KP(t,e,n,r=!0){console.error(t)}let Ef=!1,kb=!1;const Hn=[];let es=0;const Ic=[];let Ti=null,Ja=0;const aO=Promise.resolve();let xk=null;function cr(t){const e=xk||aO;return t?e.then(this?t.bind(this):t):e}function GP(t){let e=es+1,n=Hn.length;for(;e<n;){const r=e+n>>>1,o=Hn[r],s=Of(o);s<t||s===t&&o.pre?e=r+1:n=r}return e}function iy(t){(!Hn.length||!Hn.includes(t,Ef&&t.allowRecurse?es+1:es))&&(t.id==null?Hn.push(t):Hn.splice(GP(t.id),0,t),lO())}function lO(){!Ef&&!kb&&(kb=!0,xk=aO.then(cO))}function JP(t){const e=Hn.indexOf(t);e>es&&Hn.splice(e,1)}function xb(t){Ae(t)?Ic.push(...t):(!Ti||!Ti.includes(t,t.allowRecurse?Ja+1:Ja))&&Ic.push(t),lO()}function p_(t,e,n=Ef?es+1:0){for(;n<Hn.length;n++){const r=Hn[n];if(r&&r.pre){if(t&&r.id!==t.uid)continue;Hn.splice(n,1),n--,r()}}}function Im(t){if(Ic.length){const e=[...new Set(Ic)].sort((n,r)=>Of(n)-Of(r));if(Ic.length=0,Ti){Ti.push(...e);return}for(Ti=e,Ja=0;Ja<Ti.length;Ja++){const n=Ti[Ja];n.active!==!1&&n()}Ti=null,Ja=0}}const Of=t=>t.id==null?1/0:t.id,YP=(t,e)=>{const n=Of(t)-Of(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function cO(t){kb=!1,Ef=!0,Hn.sort(YP);try{for(es=0;es<Hn.length;es++){const e=Hn[es];e&&e.active!==!1&&Yi(e,null,14)}}finally{es=0,Hn.length=0,Im(),Ef=!1,xk=null,(Hn.length||Ic.length)&&cO()}}function XP(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Pt;let o=n;const s=e.startsWith("update:"),i=s&&e.slice(7);if(i&&i in r){const u=`${i==="modelValue"?"model":i}Modifiers`,{number:d,trim:f}=r[u]||Pt;f&&(o=n.map(h=>Bt(h)?h.trim():h)),d&&(o=n.map(Mm))}let a,l=r[a=w0(e)]||r[a=w0(gs(e))];!l&&s&&(l=r[a=w0(Du(e))]),l&&ao(l,t,6,o);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,ao(c,t,6,o)}}function uO(t,e,n=!1){const r=e.emitsCache,o=r.get(t);if(o!==void 0)return o;const s=t.emits;let i={},a=!1;if(!We(t)){const l=c=>{const u=uO(c,e,!0);u&&(a=!0,en(i,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(Et(t)&&r.set(t,null),null):(Ae(s)?s.forEach(l=>i[l]=null):en(i,s),Et(t)&&r.set(t,i),i)}function ay(t,e){return!t||!ph(e)?!1:(e=e.slice(2).replace(/Once$/,""),yt(t,e[0].toLowerCase()+e.slice(1))||yt(t,Du(e))||yt(t,e))}let dn=null,dO=null;function Am(t){const e=dn;return dn=t,dO=t&&t.type.__scopeId||null,e}function At(t,e=dn,n){if(!e||t._n)return t;const r=(...o)=>{r._d&&I_(-1);const s=Am(e);let i;try{i=t(...o)}finally{Am(s),r._d&&I_(1)}return i};return r._n=!0,r._c=!0,r._d=!0,r}function x0(t){const{type:e,vnode:n,proxy:r,withProxy:o,propsOptions:[s],slots:i,attrs:a,emit:l,render:c,renderCache:u,props:d,data:f,setupState:h,ctx:p,inheritAttrs:m}=t,v=Am(t);let b,w;try{if(n.shapeFlag&4){const y=o||r,C=y;b=Xr(c.call(C,y,u,d,h,f,p)),w=a}else{const y=e;b=Xr(y.length>1?y(d,{attrs:a,slots:i,emit:l}):y(d,null)),w=e.props?a:ZP(a)}}catch(y){qd.length=0,Hu(y,t,1),b=he(In)}let k=b;if(w&&m!==!1){const y=Object.keys(w),{shapeFlag:C}=k;y.length&&C&7&&(s&&y.some(ak)&&(w=eD(w,s)),k=Zs(k,w,!1,!0))}return n.dirs&&(k=Zs(k,null,!1,!0),k.dirs=k.dirs?k.dirs.concat(n.dirs):n.dirs),n.transition&&(k.transition=n.transition),b=k,Am(v),b}function QP(t,e=!0){let n;for(let r=0;r<t.length;r++){const o=t[r];if(Gc(o)){if(o.type!==In||o.children==="v-if"){if(n)return;n=o}}else return}return n}const ZP=t=>{let e;for(const n in t)(n==="class"||n==="style"||ph(n))&&((e||(e={}))[n]=t[n]);return e},eD=(t,e)=>{const n={};for(const r in t)(!ak(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function tD(t,e,n){const{props:r,children:o,component:s}=t,{props:i,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?m_(r,i,c):!!i;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(i[f]!==r[f]&&!ay(c,f))return!0}}}else return(o||a)&&(!a||!a.$stable)?!0:r===i?!1:r?i?m_(r,i,c):!0:!!i;return!1}function m_(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let o=0;o<r.length;o++){const s=r[o];if(e[s]!==t[s]&&!ay(n,s))return!0}return!1}function Ck({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const fO="components";function If(t,e){return pO(fO,t,!0,e)||t}const hO=Symbol.for("v-ndc");function nD(t){return Bt(t)?pO(fO,t,!1)||t:t||hO}function pO(t,e,n=!0,r=!1){const o=dn||cn;if(o){const s=o.type;{const a=Lb(s,!1);if(a&&(a===e||a===gs(e)||a===oy(gs(e))))return s}const i=g_(o[t]||s[t],e)||g_(o.appContext[t],e);return!i&&r?s:i}}function g_(t,e){return t&&(t[e]||t[gs(e)]||t[oy(gs(e))])}const Cb=t=>t.__isSuspense;let _b=0;const rD={name:"Suspense",__isSuspense:!0,process(t,e,n,r,o,s,i,a,l,c){if(t==null)oD(e,n,r,o,s,i,a,l,c);else{if(s&&s.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}sD(t,e,n,r,o,i,a,l,c)}},hydrate:iD,normalize:aD},_k=rD;function Af(t,e){const n=t.props&&t.props[e];We(n)&&n()}function oD(t,e,n,r,o,s,i,a,l){const{p:c,o:{createElement:u}}=l,d=u("div"),f=t.suspense=mO(t,o,r,e,d,n,s,i,a,l);c(null,f.pendingBranch=t.ssContent,d,null,r,f,s,i),f.deps>0?(Af(t,"onPending"),Af(t,"onFallback"),c(null,t.ssFallback,e,n,r,null,s,i),Ac(f,t.ssFallback)):f.resolve(!1,!0)}function sD(t,e,n,r,o,s,i,a,{p:l,um:c,o:{createElement:u}}){const d=e.suspense=t.suspense;d.vnode=e,e.el=t.el;const f=e.ssContent,h=e.ssFallback,{activeBranch:p,pendingBranch:m,isInFallback:v,isHydrating:b}=d;if(m)d.pendingBranch=f,Ro(f,m)?(l(m,f,d.hiddenContainer,null,o,d,s,i,a),d.deps<=0?d.resolve():v&&(b||(l(p,h,n,r,o,null,s,i,a),Ac(d,h)))):(d.pendingId=_b++,b?(d.isHydrating=!1,d.activeBranch=m):c(m,o,d),d.deps=0,d.effects.length=0,d.hiddenContainer=u("div"),v?(l(null,f,d.hiddenContainer,null,o,d,s,i,a),d.deps<=0?d.resolve():(l(p,h,n,r,o,null,s,i,a),Ac(d,h))):p&&Ro(f,p)?(l(p,f,n,r,o,d,s,i,a),d.resolve(!0)):(l(null,f,d.hiddenContainer,null,o,d,s,i,a),d.deps<=0&&d.resolve()));else if(p&&Ro(f,p))l(p,f,n,r,o,d,s,i,a),Ac(d,f);else if(Af(e,"onPending"),d.pendingBranch=f,f.shapeFlag&512?d.pendingId=f.component.suspenseId:d.pendingId=_b++,l(null,f,d.hiddenContainer,null,o,d,s,i,a),d.deps<=0)d.resolve();else{const{timeout:w,pendingId:k}=d;w>0?setTimeout(()=>{d.pendingId===k&&d.fallback(h)},w):w===0&&d.fallback(h)}}function mO(t,e,n,r,o,s,i,a,l,c,u=!1){const{p:d,m:f,um:h,n:p,o:{parentNode:m,remove:v}}=c;let b;const w=lD(t);w&&e&&e.pendingBranch&&(b=e.pendingId,e.deps++);const k=t.props?H4(t.props.timeout):void 0,y=s,C={vnode:t,parent:e,parentComponent:n,namespace:i,container:r,hiddenContainer:o,deps:0,pendingId:_b++,timeout:typeof k=="number"?k:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(_=!1,M=!1){const{vnode:E,activeBranch:O,pendingBranch:N,pendingId:R,effects:I,parentComponent:j,container:de}=C;let te=!1;C.isHydrating?C.isHydrating=!1:_||(te=O&&N.transition&&N.transition.mode==="out-in",te&&(O.transition.afterLeave=()=>{R===C.pendingId&&(f(N,de,s===y?p(O):s,0),xb(I))}),O&&(m(O.el)!==C.hiddenContainer&&(s=p(O)),h(O,j,C,!0)),te||f(N,de,s,0)),Ac(C,N),C.pendingBranch=null,C.isInFallback=!1;let Q=C.parent,ie=!1;for(;Q;){if(Q.pendingBranch){Q.effects.push(...I),ie=!0;break}Q=Q.parent}!ie&&!te&&xb(I),C.effects=[],w&&e&&e.pendingBranch&&b===e.pendingId&&(e.deps--,e.deps===0&&!M&&e.resolve()),Af(E,"onResolve")},fallback(_){if(!C.pendingBranch)return;const{vnode:M,activeBranch:E,parentComponent:O,container:N,namespace:R}=C;Af(M,"onFallback");const I=p(E),j=()=>{C.isInFallback&&(d(null,_,N,I,O,null,R,a,l),Ac(C,_))},de=_.transition&&_.transition.mode==="out-in";de&&(E.transition.afterLeave=j),C.isInFallback=!0,h(E,O,null,!0),de||j()},move(_,M,E){C.activeBranch&&f(C.activeBranch,_,M,E),C.container=_},next(){return C.activeBranch&&p(C.activeBranch)},registerDep(_,M,E){const O=!!C.pendingBranch;O&&C.deps++;const N=_.vnode.el;_.asyncDep.catch(R=>{Hu(R,_,0)}).then(R=>{if(_.isUnmounted||C.isUnmounted||C.pendingId!==_.suspenseId)return;_.asyncResolved=!0;const{vnode:I}=_;Nb(_,R,!1),N&&(I.el=N);const j=!N&&_.subTree.el;M(_,I,m(N||_.subTree.el),N?null:p(_.subTree),C,i,E),j&&v(j),Ck(_,I.el),O&&--C.deps===0&&C.resolve()})},unmount(_,M){C.isUnmounted=!0,C.activeBranch&&h(C.activeBranch,n,_,M),C.pendingBranch&&h(C.pendingBranch,n,_,M)}};return C}function iD(t,e,n,r,o,s,i,a,l){const c=e.suspense=mO(e,r,n,t.parentNode,document.createElement("div"),null,o,s,i,a,!0),u=l(t,c.pendingBranch=e.ssContent,n,c,s,i);return c.deps===0&&c.resolve(!1,!0),u}function aD(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=y_(r?n.default:n),t.ssFallback=r?y_(n.fallback):he(In)}function y_(t){let e;if(We(t)){const n=Kc&&t._c;n&&(t._d=!1,S()),t=t(),n&&(t._d=!0,e=so,jO())}return Ae(t)&&(t=QP(t)),t=Xr(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function gO(t,e){e&&e.pendingBranch?Ae(t)?e.effects.push(...t):e.effects.push(t):xb(t)}function Ac(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let o=e.el;for(;!o&&e.component;)e=e.component.subTree,o=e.el;n.el=o,r&&r.subTree===n&&(r.vnode.el=o,Ck(r,o))}function lD(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}function ly(t,e,n=cn,r=!1){if(n){const o=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...i)=>{va();const a=Ol(n),l=ao(e,n,t,i);return a(),ba(),l});return r?o.unshift(s):o.push(s),s}}const ii=t=>(e,n=cn)=>{(!bh||t==="sp")&&ly(t,(...r)=>e(...r),n)},Sk=ii("bm"),xo=ii("m"),cD=ii("bu"),Tk=ii("u"),_s=ii("bum"),ql=ii("um"),uD=ii("sp"),dD=ii("rtg"),fD=ii("rtc");function yO(t,e=cn){ly("ec",t,e)}function qe(t,e){if(dn===null)return t;const n=cy(dn),r=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[s,i,a,l=Pt]=e[o];s&&(We(s)&&(s={mounted:s,updated:s}),s.deep&&Li(i),r.push({dir:s,instance:n,value:i,oldValue:void 0,arg:a,modifiers:l}))}return t}function Yo(t,e,n,r){const o=t.dirs,s=e&&e.dirs;for(let i=0;i<o.length;i++){const a=o[i];s&&(a.oldValue=s[i].value);let l=a.dir[r];l&&(va(),ao(l,n,8,[t.el,a,t,e]),ba())}}function Pe(t,e,n,r){let o;const s=n;if(Ae(t)||Bt(t)){o=new Array(t.length);for(let i=0,a=t.length;i<a;i++)o[i]=e(t[i],i,void 0,s)}else if(typeof t=="number"){o=new Array(t);for(let i=0;i<t;i++)o[i]=e(i+1,i,void 0,s)}else if(Et(t))if(t[Symbol.iterator])o=Array.from(t,(i,a)=>e(i,a,void 0,s));else{const i=Object.keys(t);o=new Array(i.length);for(let a=0,l=i.length;a<l;a++){const c=i[a];o[a]=e(t[c],c,a,s)}}else o=[];return o}/*! #__NO_SIDE_EFFECTS__ */function Ie(t,e){return We(t)?en({name:t.name},e,{setup:t}):t}const cl=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function jOe(t){We(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:o=200,timeout:s,suspensible:i=!0,onError:a}=t;let l=null,c,u=0;const d=()=>(u++,l=null,f()),f=()=>{let h;return l||(h=l=e().catch(p=>{if(p=p instanceof Error?p:new Error(String(p)),a)return new Promise((m,v)=>{a(p,()=>m(d()),()=>v(p),u+1)});throw p}).then(p=>h!==l&&l?l:(p&&(p.__esModule||p[Symbol.toStringTag]==="Module")&&(p=p.default),c=p,p)))};return Ie({name:"AsyncComponentWrapper",__asyncLoader:f,get __asyncResolved(){return c},setup(){const h=cn;if(c)return()=>C0(c,h);const p=w=>{l=null,Hu(w,h,13,!r)};if(i&&h.suspense||bh)return f().then(w=>()=>C0(w,h)).catch(w=>(p(w),()=>r?he(r,{error:w}):null));const m=ae(!1),v=ae(),b=ae(!!o);return o&&setTimeout(()=>{b.value=!1},o),s!=null&&setTimeout(()=>{if(!m.value&&!v.value){const w=new Error(`Async component timed out after ${s}ms.`);p(w),v.value=w}},s),f().then(()=>{m.value=!0,h.parent&&vh(h.parent.vnode)&&(h.parent.effect.dirty=!0,iy(h.parent.update))}).catch(w=>{p(w),v.value=w}),()=>{if(m.value&&c)return C0(c,h);if(v.value&&r)return he(r,{error:v.value});if(n&&!b.value)return he(n)}}})}function C0(t,e){const{ref:n,props:r,children:o,ce:s}=e.vnode,i=he(t,r,o);return i.ref=n,i.ce=s,delete e.vnode.ce,i}function Xt(t,e,n={},r,o){if(dn.isCE||dn.parent&&cl(dn.parent)&&dn.parent.isCE)return he("slot",n,r&&r());let s=t[e];s&&s._c&&(s._d=!1),S();const i=s&&vO(s(n)),a=$e(ye,{key:n.key||i&&i.key||`_${e}`},i||(r?r():[]),i&&t._===1?64:-2);return a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function vO(t){return t.some(e=>Gc(e)?!(e.type===In||e.type===ye&&!vO(e.children)):!0)?t:null}const Sb=t=>t?qO(t)?cy(t):Sb(t.parent):null,zd=en(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Sb(t.parent),$root:t=>Sb(t.root),$emit:t=>t.emit,$options:t=>Mk(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,iy(t.update)}),$nextTick:t=>t.n||(t.n=cr.bind(t.proxy)),$watch:t=>RD.bind(t)}),_0=(t,e)=>t!==Pt&&!t.__isScriptSetup&&yt(t,e),hD={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:o,props:s,accessCache:i,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const h=i[e];if(h!==void 0)switch(h){case 1:return r[e];case 2:return o[e];case 4:return n[e];case 3:return s[e]}else{if(_0(r,e))return i[e]=1,r[e];if(o!==Pt&&yt(o,e))return i[e]=2,o[e];if((c=t.propsOptions[0])&&yt(c,e))return i[e]=3,s[e];if(n!==Pt&&yt(n,e))return i[e]=4,n[e];Tb&&(i[e]=0)}}const u=zd[e];let d,f;if(u)return e==="$attrs"&&Cr(t.attrs,"get",""),u(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==Pt&&yt(n,e))return i[e]=4,n[e];if(f=l.config.globalProperties,yt(f,e))return f[e]},set({_:t},e,n){const{data:r,setupState:o,ctx:s}=t;return _0(o,e)?(o[e]=n,!0):r!==Pt&&yt(r,e)?(r[e]=n,!0):yt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:o,propsOptions:s}},i){let a;return!!n[i]||t!==Pt&&yt(t,i)||_0(e,i)||(a=s[0])&&yt(a,i)||yt(r,i)||yt(zd,i)||yt(o.config.globalProperties,i)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:yt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function v_(t){return Ae(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function zOe(t){const e=Co();let n=t();return Ab(),ck(n)&&(n=n.catch(r=>{throw Ol(e),r})),[n,()=>Ol(e)]}let Tb=!0;function pD(t){const e=Mk(t),n=t.proxy,r=t.ctx;Tb=!1,e.beforeCreate&&b_(e.beforeCreate,t,"bc");const{data:o,computed:s,methods:i,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:h,updated:p,activated:m,deactivated:v,beforeDestroy:b,beforeUnmount:w,destroyed:k,unmounted:y,render:C,renderTracked:_,renderTriggered:M,errorCaptured:E,serverPrefetch:O,expose:N,inheritAttrs:R,components:I,directives:j,filters:de}=e;if(c&&mD(c,r,null),i)for(const ie in i){const z=i[ie];We(z)&&(r[ie]=z.bind(n))}if(o){const ie=o.call(n,n);Et(ie)&&(t.data=tr(ie))}if(Tb=!0,s)for(const ie in s){const z=s[ie],ge=We(z)?z.bind(n,n):We(z.get)?z.get.bind(n,n):oo,ve=!We(z)&&We(z.set)?z.set.bind(n):oo,be=Y({get:ge,set:ve});Object.defineProperty(r,ie,{enumerable:!0,configurable:!0,get:()=>be.value,set:Se=>be.value=Se})}if(a)for(const ie in a)bO(a[ie],r,n,ie);if(l){const ie=We(l)?l.call(n):l;Reflect.ownKeys(ie).forEach(z=>{ul(z,ie[z])})}u&&b_(u,t,"c");function Q(ie,z){Ae(z)?z.forEach(ge=>ie(ge.bind(n))):z&&ie(z.bind(n))}if(Q(Sk,d),Q(xo,f),Q(cD,h),Q(Tk,p),Q(LO,m),Q(RO,v),Q(yO,E),Q(fD,_),Q(dD,M),Q(_s,w),Q(ql,y),Q(uD,O),Ae(N))if(N.length){const ie=t.exposed||(t.exposed={});N.forEach(z=>{Object.defineProperty(ie,z,{get:()=>n[z],set:ge=>n[z]=ge})})}else t.exposed||(t.exposed={});C&&t.render===oo&&(t.render=C),R!=null&&(t.inheritAttrs=R),I&&(t.components=I),j&&(t.directives=j)}function mD(t,e,n=oo){Ae(t)&&(t=Mb(t));for(const r in t){const o=t[r];let s;Et(o)?"default"in o?s=An(o.from||r,o.default,!0):s=An(o.from||r):s=An(o),Ot(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:i=>s.value=i}):e[r]=s}}function b_(t,e,n){ao(Ae(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function bO(t,e,n,r){const o=r.includes(".")?NO(n,r):()=>n[r];if(Bt(t)){const s=e[t];We(s)&&ot(o,s)}else if(We(t))ot(o,t.bind(n));else if(Et(t))if(Ae(t))t.forEach(s=>bO(s,e,n,r));else{const s=We(t.handler)?t.handler.bind(n):e[t.handler];We(s)&&ot(o,s,t)}}function Mk(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:o,optionsCache:s,config:{optionMergeStrategies:i}}=t.appContext,a=s.get(e);let l;return a?l=a:!o.length&&!n&&!r?l=e:(l={},o.length&&o.forEach(c=>Nm(l,c,i,!0)),Nm(l,e,i)),Et(e)&&s.set(e,l),l}function Nm(t,e,n,r=!1){const{mixins:o,extends:s}=e;s&&Nm(t,s,n,!0),o&&o.forEach(i=>Nm(t,i,n,!0));for(const i in e)if(!(r&&i==="expose")){const a=gD[i]||n&&n[i];t[i]=a?a(t[i],e[i]):e[i]}return t}const gD={data:w_,props:k_,emits:k_,methods:yd,computed:yd,beforeCreate:Jn,created:Jn,beforeMount:Jn,mounted:Jn,beforeUpdate:Jn,updated:Jn,beforeDestroy:Jn,beforeUnmount:Jn,destroyed:Jn,unmounted:Jn,activated:Jn,deactivated:Jn,errorCaptured:Jn,serverPrefetch:Jn,components:yd,directives:yd,watch:vD,provide:w_,inject:yD};function w_(t,e){return e?t?function(){return en(We(t)?t.call(this,this):t,We(e)?e.call(this,this):e)}:e:t}function yD(t,e){return yd(Mb(t),Mb(e))}function Mb(t){if(Ae(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Jn(t,e){return t?[...new Set([].concat(t,e))]:e}function yd(t,e){return t?en(Object.create(null),t,e):e}function k_(t,e){return t?Ae(t)&&Ae(e)?[...new Set([...t,...e])]:en(Object.create(null),v_(t),v_(e??{})):e}function vD(t,e){if(!t)return e;if(!e)return t;const n=en(Object.create(null),t);for(const r in e)n[r]=Jn(t[r],e[r]);return n}function wO(){return{app:null,config:{isNativeTag:iP,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let bD=0;function wD(t,e){return function(r,o=null){We(r)||(r=en({},r)),o!=null&&!Et(o)&&(o=null);const s=wO(),i=new WeakSet;let a=!1;const l=s.app={_uid:bD++,_component:r,_props:o,_container:null,_context:s,_instance:null,version:KO,get config(){return s.config},set config(c){},use(c,...u){return i.has(c)||(c&&We(c.install)?(i.add(c),c.install(l,...u)):We(c)&&(i.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,d){if(!a){const f=he(r,o);return f.appContext=s,d===!0?d="svg":d===!1&&(d=void 0),u&&e?e(f,c):t(f,c,d),a=!0,l._container=c,c.__vue_app__=l,cy(f.component)}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l},runWithContext(c){const u=Nc;Nc=l;try{return c()}finally{Nc=u}}};return l}}let Nc=null;function ul(t,e){if(cn){let n=cn.provides;const r=cn.parent&&cn.parent.provides;r===n&&(n=cn.provides=Object.create(r)),n[t]=e}}function An(t,e,n=!1){const r=cn||dn;if(r||Nc){const o=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Nc._context.provides;if(o&&t in o)return o[t];if(arguments.length>1)return n&&We(e)?e.call(r&&r.proxy):e}}function Ek(){return!!(cn||dn||Nc)}const kO={},xO=()=>Object.create(kO),CO=t=>Object.getPrototypeOf(t)===kO;function kD(t,e,n,r=!1){const o={},s=xO();t.propsDefaults=Object.create(null),_O(t,e,o,s);for(const i in t.propsOptions[0])i in o||(o[i]=void 0);n?t.props=r?o:js(o):t.type.props?t.props=o:t.props=s,t.attrs=s}function xD(t,e,n,r){const{props:o,attrs:s,vnode:{patchFlag:i}}=t,a=mt(o),[l]=t.propsOptions;let c=!1;if((r||i>0)&&!(i&16)){if(i&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(ay(t.emitsOptions,f))continue;const h=e[f];if(l)if(yt(s,f))h!==s[f]&&(s[f]=h,c=!0);else{const p=gs(f);o[p]=Eb(l,a,p,h,t,!1)}else h!==s[f]&&(s[f]=h,c=!0)}}}else{_O(t,e,o,s)&&(c=!0);let u;for(const d in a)(!e||!yt(e,d)&&((u=Du(d))===d||!yt(e,u)))&&(l?n&&(n[d]!==void 0||n[u]!==void 0)&&(o[d]=Eb(l,a,d,void 0,t,!0)):delete o[d]);if(s!==a)for(const d in s)(!e||!yt(e,d))&&(delete s[d],c=!0)}c&&Gs(t.attrs,"set","")}function _O(t,e,n,r){const[o,s]=t.propsOptions;let i=!1,a;if(e)for(let l in e){if(Ec(l))continue;const c=e[l];let u;o&&yt(o,u=gs(l))?!s||!s.includes(u)?n[u]=c:(a||(a={}))[u]=c:ay(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,i=!0)}if(s){const l=mt(n),c=a||Pt;for(let u=0;u<s.length;u++){const d=s[u];n[d]=Eb(o,l,d,c[d],t,!yt(c,d))}}return i}function Eb(t,e,n,r,o,s){const i=t[n];if(i!=null){const a=yt(i,"default");if(a&&r===void 0){const l=i.default;if(i.type!==Function&&!i.skipFactory&&We(l)){const{propsDefaults:c}=o;if(n in c)r=c[n];else{const u=Ol(o);r=c[n]=l.call(null,e),u()}}else r=l}i[0]&&(s&&!a?r=!1:i[1]&&(r===""||r===Du(n))&&(r=!0))}return r}function SO(t,e,n=!1){const r=e.propsCache,o=r.get(t);if(o)return o;const s=t.props,i={},a=[];let l=!1;if(!We(t)){const u=d=>{l=!0;const[f,h]=SO(d,e,!0);en(i,f),h&&a.push(...h)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!s&&!l)return Et(t)&&r.set(t,Tc),Tc;if(Ae(s))for(let u=0;u<s.length;u++){const d=gs(s[u]);x_(d)&&(i[d]=Pt)}else if(s)for(const u in s){const d=gs(u);if(x_(d)){const f=s[u],h=i[d]=Ae(f)||We(f)?{type:f}:en({},f);if(h){const p=S_(Boolean,h.type),m=S_(String,h.type);h[0]=p>-1,h[1]=m<0||p<m,(p>-1||yt(h,"default"))&&a.push(d)}}}const c=[i,a];return Et(t)&&r.set(t,c),c}function x_(t){return t[0]!=="$"&&!Ec(t)}function C_(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function __(t,e){return C_(t)===C_(e)}function S_(t,e){return Ae(e)?e.findIndex(n=>__(n,t)):We(e)&&__(e,t)?0:-1}const TO=t=>t[0]==="_"||t==="$stable",Ok=t=>Ae(t)?t.map(Xr):[Xr(t)],CD=(t,e,n)=>{if(e._n)return e;const r=At((...o)=>Ok(e(...o)),n);return r._c=!1,r},MO=(t,e,n)=>{const r=t._ctx;for(const o in t){if(TO(o))continue;const s=t[o];if(We(s))e[o]=CD(o,s,r);else if(s!=null){const i=Ok(s);e[o]=()=>i}}},EO=(t,e)=>{const n=Ok(e);t.slots.default=()=>n},_D=(t,e)=>{const n=t.slots=xO();if(t.vnode.shapeFlag&32){const r=e._;r?(en(n,e),$4(n,"_",r,!0)):MO(e,n)}else e&&EO(t,e)},SD=(t,e,n)=>{const{vnode:r,slots:o}=t;let s=!0,i=Pt;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:(en(o,e),!n&&a===1&&delete o._):(s=!e.$stable,MO(e,o)),i=e}else e&&(EO(t,e),i={default:1});if(s)for(const a in o)!TO(a)&&i[a]==null&&delete o[a]};function Lm(t,e,n,r,o=!1){if(Ae(t)){t.forEach((f,h)=>Lm(f,e&&(Ae(e)?e[h]:e),n,r,o));return}if(cl(r)&&!o)return;const s=r.shapeFlag&4?cy(r.component):r.el,i=o?null:s,{i:a,r:l}=t,c=e&&e.r,u=a.refs===Pt?a.refs={}:a.refs,d=a.setupState;if(c!=null&&c!==l&&(Bt(c)?(u[c]=null,yt(d,c)&&(d[c]=null)):Ot(c)&&(c.value=null)),We(l))Yi(l,a,12,[i,u]);else{const f=Bt(l),h=Ot(l);if(f||h){const p=()=>{if(t.f){const m=f?yt(d,l)?d[l]:u[l]:l.value;o?Ae(m)&&lk(m,s):Ae(m)?m.includes(s)||m.push(s):f?(u[l]=[s],yt(d,l)&&(d[l]=u[l])):(l.value=[s],t.k&&(u[t.k]=l.value))}else f?(u[l]=i,yt(d,l)&&(d[l]=i)):h&&(l.value=i,t.k&&(u[t.k]=i))};i?(p.id=-1,hn(p,n)):p()}}}let T_=!1;const Yl=()=>{T_||(console.error("Hydration completed but contains mismatches."),T_=!0)},TD=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",MD=t=>t.namespaceURI.includes("MathML"),sp=t=>{if(TD(t))return"svg";if(MD(t))return"mathml"},ip=t=>t.nodeType===8;function ED(t){const{mt:e,p:n,o:{patchProp:r,createText:o,nextSibling:s,parentNode:i,remove:a,insert:l,createComment:c}}=t,u=(k,y)=>{if(!y.hasChildNodes()){n(null,k,y),Im(),y._vnode=k;return}d(y.firstChild,k,null,null,null),Im(),y._vnode=k},d=(k,y,C,_,M,E=!1)=>{E=E||!!y.dynamicChildren;const O=ip(k)&&k.data==="[",N=()=>m(k,y,C,_,M,O),{type:R,ref:I,shapeFlag:j,patchFlag:de}=y;let te=k.nodeType;y.el=k,de===-2&&(E=!1,y.dynamicChildren=null);let Q=null;switch(R){case El:te!==3?y.children===""?(l(y.el=o(""),i(k),k),Q=k):Q=N():(k.data!==y.children&&(Yl(),k.data=y.children),Q=s(k));break;case In:w(k)?(Q=s(k),b(y.el=k.content.firstChild,k,C)):te!==8||O?Q=N():Q=s(k);break;case Ud:if(O&&(k=s(k),te=k.nodeType),te===1||te===3){Q=k;const ie=!y.children.length;for(let z=0;z<y.staticCount;z++)ie&&(y.children+=Q.nodeType===1?Q.outerHTML:Q.data),z===y.staticCount-1&&(y.anchor=Q),Q=s(Q);return O?s(Q):Q}else N();break;case ye:O?Q=p(k,y,C,_,M,E):Q=N();break;default:if(j&1)(te!==1||y.type.toLowerCase()!==k.tagName.toLowerCase())&&!w(k)?Q=N():Q=f(k,y,C,_,M,E);else if(j&6){y.slotScopeIds=M;const ie=i(k);if(O?Q=v(k):ip(k)&&k.data==="teleport start"?Q=v(k,k.data,"teleport end"):Q=s(k),e(y,ie,null,C,_,sp(ie),E),cl(y)){let z;O?(z=he(ye),z.anchor=Q?Q.previousSibling:ie.lastChild):z=k.nodeType===3?Ge(""):he("div"),z.el=k,y.component.subTree=z}}else j&64?te!==8?Q=N():Q=y.type.hydrate(k,y,C,_,M,E,t,h):j&128&&(Q=y.type.hydrate(k,y,C,_,sp(i(k)),M,E,t,d))}return I!=null&&Lm(I,null,_,y),Q},f=(k,y,C,_,M,E)=>{E=E||!!y.dynamicChildren;const{type:O,props:N,patchFlag:R,shapeFlag:I,dirs:j,transition:de}=y,te=O==="input"||O==="option";if(te||R!==-1){j&&Yo(y,null,C,"created");let Q=!1;if(w(k)){Q=IO(_,de)&&C&&C.vnode.props&&C.vnode.props.appear;const z=k.content.firstChild;Q&&de.beforeEnter(z),b(z,k,C),y.el=k=z}if(I&16&&!(N&&(N.innerHTML||N.textContent))){let z=h(k.firstChild,y,k,C,_,M,E);for(;z;){Yl();const ge=z;z=z.nextSibling,a(ge)}}else I&8&&k.textContent!==y.children&&(Yl(),k.textContent=y.children);if(N)if(te||!E||R&48)for(const z in N)(te&&(z.endsWith("value")||z==="indeterminate")||ph(z)&&!Ec(z)||z[0]===".")&&r(k,z,null,N[z],void 0,void 0,C);else N.onClick&&r(k,"onClick",null,N.onClick,void 0,void 0,C);let ie;(ie=N&&N.onVnodeBeforeMount)&&hr(ie,C,y),j&&Yo(y,null,C,"beforeMount"),((ie=N&&N.onVnodeMounted)||j||Q)&&gO(()=>{ie&&hr(ie,C,y),Q&&de.enter(k),j&&Yo(y,null,C,"mounted")},_)}return k.nextSibling},h=(k,y,C,_,M,E,O)=>{O=O||!!y.dynamicChildren;const N=y.children,R=N.length;for(let I=0;I<R;I++){const j=O?N[I]:N[I]=Xr(N[I]);k?k=d(k,j,_,M,E,O):j.type===El&&!j.children?l(j.el=o(""),C):(Yl(),n(null,j,C,null,_,M,sp(C),E))}return k},p=(k,y,C,_,M,E)=>{const{slotScopeIds:O}=y;O&&(M=M?M.concat(O):O);const N=i(k),R=h(s(k),y,N,C,_,M,E);return R&&ip(R)&&R.data==="]"?s(y.anchor=R):(Yl(),l(y.anchor=c("]"),N,R),R)},m=(k,y,C,_,M,E)=>{if(Yl(),y.el=null,E){const R=v(k);for(;;){const I=s(k);if(I&&I!==R)a(I);else break}}const O=s(k),N=i(k);return a(k),n(null,y,N,O,C,_,sp(N),M),O},v=(k,y="[",C="]")=>{let _=0;for(;k;)if(k=s(k),k&&ip(k)&&(k.data===y&&_++,k.data===C)){if(_===0)return s(k);_--}return k},b=(k,y,C)=>{const _=y.parentNode;_&&_.replaceChild(k,y);let M=C;for(;M;)M.vnode.el===y&&(M.vnode.el=M.subTree.el=k),M=M.parent},w=k=>k.nodeType===1&&k.tagName.toLowerCase()==="template";return[u,d]}const hn=gO;function OD(t){return OO(t)}function ID(t){return OO(t,ED)}function OO(t,e){const n=F4();n.__VUE__=!0;const{insert:r,remove:o,patchProp:s,createElement:i,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:h=oo,insertStaticContent:p}=t,m=(P,$,U,X=null,J=null,se=null,fe=void 0,A=null,L=!!$.dynamicChildren)=>{if(P===$)return;P&&!Ro(P,$)&&(X=K(P),Se(P,J,se,!0),P=null),$.patchFlag===-2&&(L=!1,$.dynamicChildren=null);const{type:F,ref:W,shapeFlag:ue}=$;switch(F){case El:v(P,$,U,X);break;case In:b(P,$,U,X);break;case Ud:P==null&&w($,U,X,fe);break;case ye:I(P,$,U,X,J,se,fe,A,L);break;default:ue&1?C(P,$,U,X,J,se,fe,A,L):ue&6?j(P,$,U,X,J,se,fe,A,L):(ue&64||ue&128)&&F.process(P,$,U,X,J,se,fe,A,L,Z)}W!=null&&J&&Lm(W,P&&P.ref,se,$||P,!$)},v=(P,$,U,X)=>{if(P==null)r($.el=a($.children),U,X);else{const J=$.el=P.el;$.children!==P.children&&c(J,$.children)}},b=(P,$,U,X)=>{P==null?r($.el=l($.children||""),U,X):$.el=P.el},w=(P,$,U,X)=>{[P.el,P.anchor]=p(P.children,$,U,X,P.el,P.anchor)},k=({el:P,anchor:$},U,X)=>{let J;for(;P&&P!==$;)J=f(P),r(P,U,X),P=J;r($,U,X)},y=({el:P,anchor:$})=>{let U;for(;P&&P!==$;)U=f(P),o(P),P=U;o($)},C=(P,$,U,X,J,se,fe,A,L)=>{$.type==="svg"?fe="svg":$.type==="math"&&(fe="mathml"),P==null?_($,U,X,J,se,fe,A,L):O(P,$,J,se,fe,A,L)},_=(P,$,U,X,J,se,fe,A)=>{let L,F;const{props:W,shapeFlag:ue,transition:ne,dirs:B}=P;if(L=P.el=i(P.type,se,W&&W.is,W),ue&8?u(L,P.children):ue&16&&E(P.children,L,null,X,J,S0(P,se),fe,A),B&&Yo(P,null,X,"created"),M(L,P,P.scopeId,fe,X),W){for(const Oe in W)Oe!=="value"&&!Ec(Oe)&&s(L,Oe,null,W[Oe],se,P.children,X,J,je);"value"in W&&s(L,"value",null,W.value,se),(F=W.onVnodeBeforeMount)&&hr(F,X,P)}B&&Yo(P,null,X,"beforeMount");const q=IO(J,ne);q&&ne.beforeEnter(L),r(L,$,U),((F=W&&W.onVnodeMounted)||q||B)&&hn(()=>{F&&hr(F,X,P),q&&ne.enter(L),B&&Yo(P,null,X,"mounted")},J)},M=(P,$,U,X,J)=>{if(U&&h(P,U),X)for(let se=0;se<X.length;se++)h(P,X[se]);if(J){let se=J.subTree;if($===se){const fe=J.vnode;M(P,fe,fe.scopeId,fe.slotScopeIds,J.parent)}}},E=(P,$,U,X,J,se,fe,A,L=0)=>{for(let F=L;F<P.length;F++){const W=P[F]=A?Ei(P[F]):Xr(P[F]);m(null,W,$,U,X,J,se,fe,A)}},O=(P,$,U,X,J,se,fe)=>{const A=$.el=P.el;let{patchFlag:L,dynamicChildren:F,dirs:W}=$;L|=P.patchFlag&16;const ue=P.props||Pt,ne=$.props||Pt;let B;if(U&&Ra(U,!1),(B=ne.onVnodeBeforeUpdate)&&hr(B,U,$,P),W&&Yo($,P,U,"beforeUpdate"),U&&Ra(U,!0),F?N(P.dynamicChildren,F,A,U,X,S0($,J),se):fe||z(P,$,A,null,U,X,S0($,J),se,!1),L>0){if(L&16)R(A,$,ue,ne,U,X,J);else if(L&2&&ue.class!==ne.class&&s(A,"class",null,ne.class,J),L&4&&s(A,"style",ue.style,ne.style,J),L&8){const q=$.dynamicProps;for(let Oe=0;Oe<q.length;Oe++){const Ne=q[Oe],bt=ue[Ne],tn=ne[Ne];(tn!==bt||Ne==="value")&&s(A,Ne,bt,tn,J,P.children,U,X,je)}}L&1&&P.children!==$.children&&u(A,$.children)}else!fe&&F==null&&R(A,$,ue,ne,U,X,J);((B=ne.onVnodeUpdated)||W)&&hn(()=>{B&&hr(B,U,$,P),W&&Yo($,P,U,"updated")},X)},N=(P,$,U,X,J,se,fe)=>{for(let A=0;A<$.length;A++){const L=P[A],F=$[A],W=L.el&&(L.type===ye||!Ro(L,F)||L.shapeFlag&70)?d(L.el):U;m(L,F,W,null,X,J,se,fe,!0)}},R=(P,$,U,X,J,se,fe)=>{if(U!==X){if(U!==Pt)for(const A in U)!Ec(A)&&!(A in X)&&s(P,A,U[A],null,fe,$.children,J,se,je);for(const A in X){if(Ec(A))continue;const L=X[A],F=U[A];L!==F&&A!=="value"&&s(P,A,F,L,fe,$.children,J,se,je)}"value"in X&&s(P,"value",U.value,X.value,fe)}},I=(P,$,U,X,J,se,fe,A,L)=>{const F=$.el=P?P.el:a(""),W=$.anchor=P?P.anchor:a("");let{patchFlag:ue,dynamicChildren:ne,slotScopeIds:B}=$;B&&(A=A?A.concat(B):B),P==null?(r(F,U,X),r(W,U,X),E($.children||[],U,W,J,se,fe,A,L)):ue>0&&ue&64&&ne&&P.dynamicChildren?(N(P.dynamicChildren,ne,U,J,se,fe,A),($.key!=null||J&&$===J.subTree)&&Ik(P,$,!0)):z(P,$,U,W,J,se,fe,A,L)},j=(P,$,U,X,J,se,fe,A,L)=>{$.slotScopeIds=A,P==null?$.shapeFlag&512?J.ctx.activate($,U,X,fe,L):de($,U,X,J,se,fe,L):te(P,$,L)},de=(P,$,U,X,J,se,fe)=>{const A=P.component=KD(P,X,J);if(vh(P)&&(A.ctx.renderer=Z),GD(A),A.asyncDep){if(J&&J.registerDep(A,Q,fe),!P.el){const L=A.subTree=he(In);b(null,L,$,U)}}else Q(A,P,$,U,J,se,fe)},te=(P,$,U)=>{const X=$.component=P.component;if(tD(P,$,U))if(X.asyncDep&&!X.asyncResolved){ie(X,$,U);return}else X.next=$,JP(X.update),X.effect.dirty=!0,X.update();else $.el=P.el,X.vnode=$},Q=(P,$,U,X,J,se,fe)=>{const A=()=>{if(P.isMounted){let{next:W,bu:ue,u:ne,parent:B,vnode:q}=P;{const kn=AO(P);if(kn){W&&(W.el=q.el,ie(P,W,fe)),kn.asyncDep.then(()=>{P.isUnmounted||A()});return}}let Oe=W,Ne;Ra(P,!1),W?(W.el=q.el,ie(P,W,fe)):W=q,ue&&Oc(ue),(Ne=W.props&&W.props.onVnodeBeforeUpdate)&&hr(Ne,B,W,q),Ra(P,!0);const bt=x0(P),tn=P.subTree;P.subTree=bt,m(tn,bt,d(tn.el),K(tn),P,J,se),W.el=bt.el,Oe===null&&Ck(P,bt.el),ne&&hn(ne,J),(Ne=W.props&&W.props.onVnodeUpdated)&&hn(()=>hr(Ne,B,W,q),J)}else{let W;const{el:ue,props:ne}=$,{bm:B,m:q,parent:Oe}=P,Ne=cl($);if(Ra(P,!1),B&&Oc(B),!Ne&&(W=ne&&ne.onVnodeBeforeMount)&&hr(W,Oe,$),Ra(P,!0),ue&&st){const bt=()=>{P.subTree=x0(P),st(ue,P.subTree,P,J,null)};Ne?$.type.__asyncLoader().then(()=>!P.isUnmounted&&bt()):bt()}else{const bt=P.subTree=x0(P);m(null,bt,U,X,P,J,se),$.el=bt.el}if(q&&hn(q,J),!Ne&&(W=ne&&ne.onVnodeMounted)){const bt=$;hn(()=>hr(W,Oe,bt),J)}($.shapeFlag&256||Oe&&cl(Oe.vnode)&&Oe.vnode.shapeFlag&256)&&P.a&&hn(P.a,J),P.isMounted=!0,$=U=X=null}},L=P.effect=new fk(A,oo,()=>iy(F),P.scope),F=P.update=()=>{L.dirty&&L.run()};F.id=P.uid,Ra(P,!0),F()},ie=(P,$,U)=>{$.component=P;const X=P.vnode.props;P.vnode=$,P.next=null,xD(P,$.props,X,U),SD(P,$.children,U),va(),p_(P),ba()},z=(P,$,U,X,J,se,fe,A,L=!1)=>{const F=P&&P.children,W=P?P.shapeFlag:0,ue=$.children,{patchFlag:ne,shapeFlag:B}=$;if(ne>0){if(ne&128){ve(F,ue,U,X,J,se,fe,A,L);return}else if(ne&256){ge(F,ue,U,X,J,se,fe,A,L);return}}B&8?(W&16&&je(F,J,se),ue!==F&&u(U,ue)):W&16?B&16?ve(F,ue,U,X,J,se,fe,A,L):je(F,J,se,!0):(W&8&&u(U,""),B&16&&E(ue,U,X,J,se,fe,A,L))},ge=(P,$,U,X,J,se,fe,A,L)=>{P=P||Tc,$=$||Tc;const F=P.length,W=$.length,ue=Math.min(F,W);let ne;for(ne=0;ne<ue;ne++){const B=$[ne]=L?Ei($[ne]):Xr($[ne]);m(P[ne],B,U,null,J,se,fe,A,L)}F>W?je(P,J,se,!0,!1,ue):E($,U,X,J,se,fe,A,L,ue)},ve=(P,$,U,X,J,se,fe,A,L)=>{let F=0;const W=$.length;let ue=P.length-1,ne=W-1;for(;F<=ue&&F<=ne;){const B=P[F],q=$[F]=L?Ei($[F]):Xr($[F]);if(Ro(B,q))m(B,q,U,null,J,se,fe,A,L);else break;F++}for(;F<=ue&&F<=ne;){const B=P[ue],q=$[ne]=L?Ei($[ne]):Xr($[ne]);if(Ro(B,q))m(B,q,U,null,J,se,fe,A,L);else break;ue--,ne--}if(F>ue){if(F<=ne){const B=ne+1,q=B<W?$[B].el:X;for(;F<=ne;)m(null,$[F]=L?Ei($[F]):Xr($[F]),U,q,J,se,fe,A,L),F++}}else if(F>ne)for(;F<=ue;)Se(P[F],J,se,!0),F++;else{const B=F,q=F,Oe=new Map;for(F=q;F<=ne;F++){const re=$[F]=L?Ei($[F]):Xr($[F]);re.key!=null&&Oe.set(re.key,F)}let Ne,bt=0;const tn=ne-q+1;let kn=!1,fi=0;const D=new Array(tn);for(F=0;F<tn;F++)D[F]=0;for(F=B;F<=ue;F++){const re=P[F];if(bt>=tn){Se(re,J,se,!0);continue}let Ce;if(re.key!=null)Ce=Oe.get(re.key);else for(Ne=q;Ne<=ne;Ne++)if(D[Ne-q]===0&&Ro(re,$[Ne])){Ce=Ne;break}Ce===void 0?Se(re,J,se,!0):(D[Ce-q]=F+1,Ce>=fi?fi=Ce:kn=!0,m(re,$[Ce],U,null,J,se,fe,A,L),bt++)}const ee=kn?AD(D):Tc;for(Ne=ee.length-1,F=tn-1;F>=0;F--){const re=q+F,Ce=$[re],_e=re+1<W?$[re+1].el:X;D[F]===0?m(null,Ce,U,_e,J,se,fe,A,L):kn&&(Ne<0||F!==ee[Ne]?be(Ce,U,_e,2):Ne--)}}},be=(P,$,U,X,J=null)=>{const{el:se,type:fe,transition:A,children:L,shapeFlag:F}=P;if(F&6){be(P.component.subTree,$,U,X);return}if(F&128){P.suspense.move($,U,X);return}if(F&64){fe.move(P,$,U,Z);return}if(fe===ye){r(se,$,U);for(let ue=0;ue<L.length;ue++)be(L[ue],$,U,X);r(P.anchor,$,U);return}if(fe===Ud){k(P,$,U);return}if(X!==2&&F&1&&A)if(X===0)A.beforeEnter(se),r(se,$,U),hn(()=>A.enter(se),J);else{const{leave:ue,delayLeave:ne,afterLeave:B}=A,q=()=>r(se,$,U),Oe=()=>{ue(se,()=>{q(),B&&B()})};ne?ne(se,q,Oe):Oe()}else r(se,$,U)},Se=(P,$,U,X=!1,J=!1)=>{const{type:se,props:fe,ref:A,children:L,dynamicChildren:F,shapeFlag:W,patchFlag:ue,dirs:ne,memoIndex:B}=P;if(ue===-2&&(J=!1),A!=null&&Lm(A,null,U,P,!0),B!=null&&($.renderCache[B]=void 0),W&256){$.ctx.deactivate(P);return}const q=W&1&&ne,Oe=!cl(P);let Ne;if(Oe&&(Ne=fe&&fe.onVnodeBeforeUnmount)&&hr(Ne,$,P),W&6)Ke(P.component,U,X);else{if(W&128){P.suspense.unmount(U,X);return}q&&Yo(P,null,$,"beforeUnmount"),W&64?P.type.remove(P,$,U,Z,X):F&&(se!==ye||ue>0&&ue&64)?je(F,$,U,!1,!0):(se===ye&&ue&384||!J&&W&16)&&je(L,$,U),X&&Ee(P)}(Oe&&(Ne=fe&&fe.onVnodeUnmounted)||q)&&hn(()=>{Ne&&hr(Ne,$,P),q&&Yo(P,null,$,"unmounted")},U)},Ee=P=>{const{type:$,el:U,anchor:X,transition:J}=P;if($===ye){Re(U,X);return}if($===Ud){y(P);return}const se=()=>{o(U),J&&!J.persisted&&J.afterLeave&&J.afterLeave()};if(P.shapeFlag&1&&J&&!J.persisted){const{leave:fe,delayLeave:A}=J,L=()=>fe(U,se);A?A(P.el,se,L):L()}else se()},Re=(P,$)=>{let U;for(;P!==$;)U=f(P),o(P),P=U;o($)},Ke=(P,$,U)=>{const{bum:X,scope:J,update:se,subTree:fe,um:A,m:L,a:F}=P;Rm(L),Rm(F),X&&Oc(X),J.stop(),se&&(se.active=!1,Se(fe,P,$,U)),A&&hn(A,$),hn(()=>{P.isUnmounted=!0},$),$&&$.pendingBranch&&!$.isUnmounted&&P.asyncDep&&!P.asyncResolved&&P.suspenseId===$.pendingId&&($.deps--,$.deps===0&&$.resolve())},je=(P,$,U,X=!1,J=!1,se=0)=>{for(let fe=se;fe<P.length;fe++)Se(P[fe],$,U,X,J)},K=P=>P.shapeFlag&6?K(P.component.subTree):P.shapeFlag&128?P.suspense.next():f(P.anchor||P.el);let le=!1;const G=(P,$,U)=>{P==null?$._vnode&&Se($._vnode,null,null,!0):m($._vnode||null,P,$,null,null,null,U),le||(le=!0,p_(),Im(),le=!1),$._vnode=P},Z={p:m,um:Se,m:be,r:Ee,mt:de,mc:E,pc:z,pbc:N,n:K,o:t};let ze,st;return e&&([ze,st]=e(Z)),{render:G,hydrate:ze,createApp:wD(G,ze)}}function S0({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ra({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function IO(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Ik(t,e,n=!1){const r=t.children,o=e.children;if(Ae(r)&&Ae(o))for(let s=0;s<r.length;s++){const i=r[s];let a=o[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=o[s]=Ei(o[s]),a.el=i.el),!n&&a.patchFlag!==-2&&Ik(i,a)),a.type===El&&(a.el=i.el)}}function AD(t){const e=t.slice(),n=[0];let r,o,s,i,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(o=n[n.length-1],t[o]<c){e[r]=o,n.push(r);continue}for(s=0,i=n.length-1;s<i;)a=s+i>>1,t[n[a]]<c?s=a+1:i=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,i=n[s-1];s-- >0;)n[s]=i,i=e[i];return n}function AO(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:AO(e)}function Rm(t){if(t)for(let e=0;e<t.length;e++)t[e].active=!1}const ND=Symbol.for("v-scx"),LD=()=>An(ND);function Ak(t,e){return Nk(t,null,e)}const ap={};function ot(t,e,n){return Nk(t,e,n)}function Nk(t,e,{immediate:n,deep:r,flush:o,once:s,onTrack:i,onTrigger:a}=Pt){if(e&&s){const _=e;e=(...M)=>{_(...M),C()}}const l=cn,c=_=>r===!0?_:Li(_,r===!1?1:void 0);let u,d=!1,f=!1;if(Ot(t)?(u=()=>t.value,d=Om(t)):ll(t)?(u=()=>c(t),d=!0):Ae(t)?(f=!0,d=t.some(_=>ll(_)||Om(_)),u=()=>t.map(_=>{if(Ot(_))return _.value;if(ll(_))return c(_);if(We(_))return Yi(_,l,2)})):We(t)?e?u=()=>Yi(t,l,2):u=()=>(h&&h(),ao(t,l,3,[p])):u=oo,e&&r){const _=u;u=()=>Li(_())}let h,p=_=>{h=k.onStop=()=>{Yi(_,l,4),h=k.onStop=void 0}},m;if(bh)if(p=oo,e?n&&ao(e,l,3,[u(),f?[]:void 0,p]):u(),o==="sync"){const _=LD();m=_.__watcherHandles||(_.__watcherHandles=[])}else return oo;let v=f?new Array(t.length).fill(ap):ap;const b=()=>{if(!(!k.active||!k.dirty))if(e){const _=k.run();(r||d||(f?_.some((M,E)=>ca(M,v[E])):ca(_,v)))&&(h&&h(),ao(e,l,3,[_,v===ap?void 0:f&&v[0]===ap?[]:v,p]),v=_)}else k.run()};b.allowRecurse=!!e;let w;o==="sync"?w=b:o==="post"?w=()=>hn(b,l&&l.suspense):(b.pre=!0,l&&(b.id=l.uid),w=()=>iy(b));const k=new fk(u,oo,w),y=$u(),C=()=>{k.stop(),y&&lk(y.effects,k)};return e?n?b():v=k.run():o==="post"?hn(k.run.bind(k),l&&l.suspense):k.run(),m&&m.push(C),C}function RD(t,e,n){const r=this.proxy,o=Bt(t)?t.includes(".")?NO(r,t):()=>r[t]:t.bind(r,r);let s;We(e)?s=e:(s=e.handler,n=e);const i=Ol(this),a=Nk(o,s.bind(r),n);return i(),a}function NO(t,e){const n=e.split(".");return()=>{let r=t;for(let o=0;o<n.length&&r;o++)r=r[n[o]];return r}}function Li(t,e=1/0,n){if(e<=0||!Et(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Ot(t))Li(t.value,e,n);else if(Ae(t))for(let r=0;r<t.length;r++)Li(t[r],e,n);else if(Ru(t)||Mc(t))t.forEach(r=>{Li(r,e,n)});else if(D4(t)){for(const r in t)Li(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Li(t[r],e,n)}return t}const vh=t=>t.type.__isKeepAlive,PD={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=Co(),r=n.ctx;if(!r.renderer)return()=>{const w=e.default&&e.default();return w&&w.length===1?w[0]:w};const o=new Map,s=new Set;let i=null;const a=n.suspense,{renderer:{p:l,m:c,um:u,o:{createElement:d}}}=r,f=d("div");r.activate=(w,k,y,C,_)=>{const M=w.component;c(w,k,y,0,a),l(M.vnode,w,k,y,M,a,C,w.slotScopeIds,_),hn(()=>{M.isDeactivated=!1,M.a&&Oc(M.a);const E=w.props&&w.props.onVnodeMounted;E&&hr(E,M.parent,w)},a)},r.deactivate=w=>{const k=w.component;Rm(k.m),Rm(k.a),c(w,f,null,1,a),hn(()=>{k.da&&Oc(k.da);const y=w.props&&w.props.onVnodeUnmounted;y&&hr(y,k.parent,w),k.isDeactivated=!0},a)};function h(w){T0(w),u(w,n,a,!0)}function p(w){o.forEach((k,y)=>{const C=Lb(k.type);C&&(!w||!w(C))&&m(y)})}function m(w){const k=o.get(w);!i||!Ro(k,i)?h(k):i&&T0(i),o.delete(w),s.delete(w)}ot(()=>[t.include,t.exclude],([w,k])=>{w&&p(y=>vd(w,y)),k&&p(y=>!vd(k,y))},{flush:"post",deep:!0});let v=null;const b=()=>{v!=null&&(Cb(n.subTree.type)?hn(()=>{o.set(v,lp(n.subTree))},n.subTree.suspense):o.set(v,lp(n.subTree)))};return xo(b),Tk(b),_s(()=>{o.forEach(w=>{const{subTree:k,suspense:y}=n,C=lp(k);if(w.type===C.type&&w.key===C.key){T0(C);const _=C.component.da;_&&hn(_,y);return}h(w)})}),()=>{if(v=null,!e.default)return null;const w=e.default(),k=w[0];if(w.length>1)return i=null,w;if(!Gc(k)||!(k.shapeFlag&4)&&!(k.shapeFlag&128))return i=null,k;let y=lp(k);const C=y.type,_=Lb(cl(y)?y.type.__asyncResolved||{}:C),{include:M,exclude:E,max:O}=t;if(M&&(!_||!vd(M,_))||E&&_&&vd(E,_))return i=y,k;const N=y.key==null?C:y.key,R=o.get(N);return y.el&&(y=Zs(y),k.shapeFlag&128&&(k.ssContent=y)),v=N,R?(y.el=R.el,y.component=R.component,y.transition&&Ml(y,y.transition),y.shapeFlag|=512,s.delete(N),s.add(N)):(s.add(N),O&&s.size>parseInt(O,10)&&m(s.values().next().value)),y.shapeFlag|=256,i=y,Cb(k.type)?k:y}}},DD=PD;function vd(t,e){return Ae(t)?t.some(n=>vd(n,e)):Bt(t)?t.split(",").includes(e):lP(t)?t.test(e):!1}function LO(t,e){PO(t,"a",e)}function RO(t,e){PO(t,"da",e)}function PO(t,e,n=cn){const r=t.__wdc||(t.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(ly(e,r,n),n){let o=n.parent;for(;o&&o.parent;)vh(o.parent.vnode)&&$D(r,e,n,o),o=o.parent}}function $D(t,e,n,r){const o=ly(e,t,r,!0);ql(()=>{lk(r[e],o)},n)}function T0(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function lp(t){return t.shapeFlag&128?t.ssContent:t}const Mi=Symbol("_leaveCb"),cp=Symbol("_enterCb");function DO(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return xo(()=>{t.isMounted=!0}),_s(()=>{t.isUnmounting=!0}),t}const Kr=[Function,Array],$O={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Kr,onEnter:Kr,onAfterEnter:Kr,onEnterCancelled:Kr,onBeforeLeave:Kr,onLeave:Kr,onAfterLeave:Kr,onLeaveCancelled:Kr,onBeforeAppear:Kr,onAppear:Kr,onAfterAppear:Kr,onAppearCancelled:Kr},HO=t=>{const e=t.subTree;return e.component?HO(e.component):e},HD={name:"BaseTransition",props:$O,setup(t,{slots:e}){const n=Co(),r=DO();return()=>{const o=e.default&&Lk(e.default(),!0);if(!o||!o.length)return;let s=o[0];if(o.length>1){for(const f of o)if(f.type!==In){s=f;break}}const i=mt(t),{mode:a}=i;if(r.isLeaving)return M0(s);const l=M_(s);if(!l)return M0(s);let c=Nf(l,i,r,n,f=>c=f);Ml(l,c);const u=n.subTree,d=u&&M_(u);if(d&&d.type!==In&&!Ro(l,d)&&HO(n).type!==In){const f=Nf(d,i,r,n);if(Ml(d,f),a==="out-in"&&l.type!==In)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},M0(s);a==="in-out"&&l.type!==In&&(f.delayLeave=(h,p,m)=>{const v=FO(r,d);v[String(d.key)]=d,h[Mi]=()=>{p(),h[Mi]=void 0,delete c.delayedLeave},c.delayedLeave=m})}return s}}},FD=HD;function FO(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Nf(t,e,n,r,o){const{appear:s,mode:i,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:f,onLeave:h,onAfterLeave:p,onLeaveCancelled:m,onBeforeAppear:v,onAppear:b,onAfterAppear:w,onAppearCancelled:k}=e,y=String(t.key),C=FO(n,t),_=(O,N)=>{O&&ao(O,r,9,N)},M=(O,N)=>{const R=N[1];_(O,N),Ae(O)?O.every(I=>I.length<=1)&&R():O.length<=1&&R()},E={mode:i,persisted:a,beforeEnter(O){let N=l;if(!n.isMounted)if(s)N=v||l;else return;O[Mi]&&O[Mi](!0);const R=C[y];R&&Ro(t,R)&&R.el[Mi]&&R.el[Mi](),_(N,[O])},enter(O){let N=c,R=u,I=d;if(!n.isMounted)if(s)N=b||c,R=w||u,I=k||d;else return;let j=!1;const de=O[cp]=te=>{j||(j=!0,te?_(I,[O]):_(R,[O]),E.delayedLeave&&E.delayedLeave(),O[cp]=void 0)};N?M(N,[O,de]):de()},leave(O,N){const R=String(t.key);if(O[cp]&&O[cp](!0),n.isUnmounting)return N();_(f,[O]);let I=!1;const j=O[Mi]=de=>{I||(I=!0,N(),de?_(m,[O]):_(p,[O]),O[Mi]=void 0,C[R]===t&&delete C[R])};C[R]=t,h?M(h,[O,j]):j()},clone(O){const N=Nf(O,e,n,r,o);return o&&o(N),N}};return E}function M0(t){if(vh(t))return t=Zs(t),t.children=null,t}function M_(t){if(!vh(t))return t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&We(n.default))return n.default()}}function Ml(t,e){t.shapeFlag&6&&t.component?Ml(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Lk(t,e=!1,n){let r=[],o=0;for(let s=0;s<t.length;s++){let i=t[s];const a=n==null?i.key:String(n)+String(i.key!=null?i.key:s);i.type===ye?(i.patchFlag&128&&o++,r=r.concat(Lk(i.children,e,a))):(e||i.type!==In)&&r.push(a!=null?Zs(i,{key:a}):i)}if(o>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}const BD=t=>t.__isTeleport,Vd=t=>t&&(t.disabled||t.disabled===""),E_=t=>typeof SVGElement<"u"&&t instanceof SVGElement,O_=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Ob=(t,e)=>{const n=t&&t.to;return Bt(n)?e?e(n):null:n},jD={name:"Teleport",__isTeleport:!0,process(t,e,n,r,o,s,i,a,l,c){const{mc:u,pc:d,pbc:f,o:{insert:h,querySelector:p,createText:m,createComment:v}}=c,b=Vd(e.props);let{shapeFlag:w,children:k,dynamicChildren:y}=e;if(t==null){const C=e.el=m(""),_=e.anchor=m("");h(C,n,r),h(_,n,r);const M=e.target=Ob(e.props,p),E=e.targetAnchor=m("");M&&(h(E,M),i==="svg"||E_(M)?i="svg":(i==="mathml"||O_(M))&&(i="mathml"));const O=(N,R)=>{w&16&&u(k,N,R,o,s,i,a,l)};b?O(n,_):M&&O(M,E)}else{e.el=t.el;const C=e.anchor=t.anchor,_=e.target=t.target,M=e.targetAnchor=t.targetAnchor,E=Vd(t.props),O=E?n:_,N=E?C:M;if(i==="svg"||E_(_)?i="svg":(i==="mathml"||O_(_))&&(i="mathml"),y?(f(t.dynamicChildren,y,O,o,s,i,a),Ik(t,e,!0)):l||d(t,e,O,N,o,s,i,a,!1),b)E?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):up(e,n,C,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const R=e.target=Ob(e.props,p);R&&up(e,R,null,c,0)}else E&&up(e,_,M,c,1)}BO(e)},remove(t,e,n,{um:r,o:{remove:o}},s){const{shapeFlag:i,children:a,anchor:l,targetAnchor:c,target:u,props:d}=t;if(u&&o(c),s&&o(l),i&16){const f=s||!Vd(d);for(let h=0;h<a.length;h++){const p=a[h];r(p,e,n,f,!!p.dynamicChildren)}}},move:up,hydrate:zD};function up(t,e,n,{o:{insert:r},m:o},s=2){s===0&&r(t.targetAnchor,e,n);const{el:i,anchor:a,shapeFlag:l,children:c,props:u}=t,d=s===2;if(d&&r(i,e,n),(!d||Vd(u))&&l&16)for(let f=0;f<c.length;f++)o(c[f],e,n,2);d&&r(a,e,n)}function zD(t,e,n,r,o,s,{o:{nextSibling:i,parentNode:a,querySelector:l}},c){const u=e.target=Ob(e.props,l);if(u){const d=u._lpa||u.firstChild;if(e.shapeFlag&16)if(Vd(e.props))e.anchor=c(i(t),e,a(t),n,r,o,s),e.targetAnchor=d;else{e.anchor=i(t);let f=d;for(;f;)if(f=i(f),f&&f.nodeType===8&&f.data==="teleport anchor"){e.targetAnchor=f,u._lpa=e.targetAnchor&&i(e.targetAnchor);break}c(d,e,u,n,r,o,s)}BO(e)}return e.anchor&&i(e.anchor)}const Rk=jD;function BO(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n&&n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const ye=Symbol.for("v-fgt"),El=Symbol.for("v-txt"),In=Symbol.for("v-cmt"),Ud=Symbol.for("v-stc"),qd=[];let so=null;function S(t=!1){qd.push(so=t?null:[])}function jO(){qd.pop(),so=qd[qd.length-1]||null}let Kc=1;function I_(t){Kc+=t}function zO(t){return t.dynamicChildren=Kc>0?so||Tc:null,jO(),Kc>0&&so&&so.push(t),t}function T(t,e,n,r,o,s){return zO(g(t,e,n,r,o,s,!0))}function $e(t,e,n,r,o){return zO(he(t,e,n,r,o,!0))}function Gc(t){return t?t.__v_isVNode===!0:!1}function Ro(t,e){return t.type===e.type&&t.key===e.key}const VO=({key:t})=>t??null,Up=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Bt(t)||Ot(t)||We(t)?{i:dn,r:t,k:e,f:!!n}:t:null);function g(t,e=null,n=null,r=0,o=null,s=t===ye?0:1,i=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&VO(e),ref:e&&Up(e),scopeId:dO,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:dn};return a?(Pk(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=Bt(n)?8:16),Kc>0&&!i&&so&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&so.push(l),l}const he=VD;function VD(t,e=null,n=null,r=0,o=null,s=!1){if((!t||t===hO)&&(t=In),Gc(t)){const a=Zs(t,e,!0);return n&&Pk(a,n),Kc>0&&!s&&so&&(a.shapeFlag&6?so[so.indexOf(t)]=a:so.push(a)),a.patchFlag=-2,a}if(QD(t)&&(t=t.__vccOpts),e){e=UD(e);let{class:a,style:l}=e;a&&!Bt(a)&&(e.class=V(a)),Et(l)&&(nO(l)&&!Ae(l)&&(l=en({},l)),e.style=mh(l))}const i=Bt(t)?1:Cb(t)?128:BD(t)?64:Et(t)?4:We(t)?2:0;return g(t,e,n,r,o,i,s,!0)}function UD(t){return t?nO(t)||CO(t)?en({},t):t:null}function Zs(t,e,n=!1,r=!1){const{props:o,ref:s,patchFlag:i,children:a,transition:l}=t,c=e?UO(o||{},e):o,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&VO(c),ref:e&&e.ref?n&&s?Ae(s)?s.concat(Up(e)):[s,Up(e)]:Up(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ye?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Zs(t.ssContent),ssFallback:t.ssFallback&&Zs(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Ml(u,l.clone(u)),u}function Ge(t=" ",e=0){return he(El,null,t,e)}function Fu(t,e){const n=he(Ud,null,t);return n.staticCount=e,n}function H(t="",e=!1){return e?(S(),$e(In,null,t)):he(In,null,t)}function Xr(t){return t==null||typeof t=="boolean"?he(In):Ae(t)?he(ye,null,t.slice()):typeof t=="object"?Ei(t):he(El,null,String(t))}function Ei(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Zs(t)}function Pk(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Ae(e))n=16;else if(typeof e=="object")if(r&65){const o=e.default;o&&(o._c&&(o._d=!1),Pk(t,o()),o._c&&(o._d=!0));return}else{n=32;const o=e._;!o&&!CO(e)?e._ctx=dn:o===3&&dn&&(dn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else We(e)?(e={default:e,_ctx:dn},n=32):(e=String(e),r&64?(n=16,e=[Ge(e)]):n=8);t.children=e,t.shapeFlag|=n}function UO(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const o in r)if(o==="class")e.class!==r.class&&(e.class=V([e.class,r.class]));else if(o==="style")e.style=mh([e.style,r.style]);else if(ph(o)){const s=e[o],i=r[o];i&&s!==i&&!(Ae(s)&&s.includes(i))&&(e[o]=s?[].concat(s,i):i)}else o!==""&&(e[o]=r[o])}return e}function hr(t,e,n,r=null){ao(t,e,7,[n,r])}const qD=wO();let WD=0;function KD(t,e,n){const r=t.type,o=(e?e.appContext:t.appContext)||qD,s={uid:WD++,vnode:t,type:r,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new V4(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:SO(r,o),emitsOptions:uO(r,o),emit:null,emitted:null,propsDefaults:Pt,inheritAttrs:r.inheritAttrs,ctx:Pt,data:Pt,props:Pt,attrs:Pt,slots:Pt,refs:Pt,setupState:Pt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=XP.bind(null,s),t.ce&&t.ce(s),s}let cn=null;const Co=()=>cn||dn;let Pm,Ib;{const t=F4(),e=(n,r)=>{let o;return(o=t[n])||(o=t[n]=[]),o.push(r),s=>{o.length>1?o.forEach(i=>i(s)):o[0](s)}};Pm=e("__VUE_INSTANCE_SETTERS__",n=>cn=n),Ib=e("__VUE_SSR_SETTERS__",n=>bh=n)}const Ol=t=>{const e=cn;return Pm(t),t.scope.on(),()=>{t.scope.off(),Pm(e)}},Ab=()=>{cn&&cn.scope.off(),Pm(null)};function qO(t){return t.vnode.shapeFlag&4}let bh=!1;function GD(t,e=!1){e&&Ib(e);const{props:n,children:r}=t.vnode,o=qO(t);kD(t,n,o,e),_D(t,r);const s=o?JD(t,e):void 0;return e&&Ib(!1),s}function JD(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,hD);const{setup:r}=n;if(r){const o=t.setupContext=r.length>1?XD(t):null,s=Ol(t);va();const i=Yi(r,t,0,[t.props,o]);if(ba(),s(),ck(i)){if(i.then(Ab,Ab),e)return i.then(a=>{Nb(t,a,e)}).catch(a=>{Hu(a,t,0)});t.asyncDep=i}else Nb(t,i,e)}else WO(t,e)}function Nb(t,e,n){We(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Et(e)&&(t.setupState=sO(e)),WO(t,n)}let A_;function WO(t,e,n){const r=t.type;if(!t.render){if(!e&&A_&&!r.render){const o=r.template||Mk(t).template;if(o){const{isCustomElement:s,compilerOptions:i}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=en(en({isCustomElement:s,delimiters:a},i),l);r.render=A_(o,c)}}t.render=r.render||oo}{const o=Ol(t);va();try{pD(t)}finally{ba(),o()}}}const YD={get(t,e){return Cr(t,"get",""),t[e]}};function XD(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,YD),slots:t.slots,emit:t.emit,expose:e}}function cy(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(sO(yh(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in zd)return zd[n](t)},has(e,n){return n in e||n in zd}})):t.proxy}function Lb(t,e=!0){return We(t)?t.displayName||t.name:t.name||e&&t.__name}function QD(t){return We(t)&&"__vccOpts"in t}const Y=(t,e)=>BP(t,e,bh);function Lt(t,e,n){const r=arguments.length;return r===2?Et(e)&&!Ae(e)?Gc(e)?he(t,null,[e]):he(t,e):he(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Gc(n)&&(n=[n]),he(t,e,n))}const KO="3.4.31";/**
* @vue/runtime-dom v3.4.31
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const ZD="http://www.w3.org/2000/svg",e$="http://www.w3.org/1998/Math/MathML",Ds=typeof document<"u"?document:null,N_=Ds&&Ds.createElement("template"),t$={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const o=e==="svg"?Ds.createElementNS(ZD,t):e==="mathml"?Ds.createElementNS(e$,t):n?Ds.createElement(t,{is:n}):Ds.createElement(t);return t==="select"&&r&&r.multiple!=null&&o.setAttribute("multiple",r.multiple),o},createText:t=>Ds.createTextNode(t),createComment:t=>Ds.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ds.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,o,s){const i=n?n.previousSibling:e.lastChild;if(o&&(o===s||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),n),!(o===s||!(o=o.nextSibling)););else{N_.innerHTML=r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t;const a=N_.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[i?i.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},pi="transition",nd="animation",Jc=Symbol("_vtc"),wh=(t,{slots:e})=>Lt(FD,JO(t),e);wh.displayName="Transition";const GO={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},n$=wh.props=en({},$O,GO),Pa=(t,e=[])=>{Ae(t)?t.forEach(n=>n(...e)):t&&t(...e)},L_=t=>t?Ae(t)?t.some(e=>e.length>1):t.length>1:!1;function JO(t){const e={};for(const I in t)I in GO||(e[I]=t[I]);if(t.css===!1)return e;const{name:n="v",type:r,duration:o,enterFromClass:s=`${n}-enter-from`,enterActiveClass:i=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=i,appearToClass:u=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=t,p=r$(o),m=p&&p[0],v=p&&p[1],{onBeforeEnter:b,onEnter:w,onEnterCancelled:k,onLeave:y,onLeaveCancelled:C,onBeforeAppear:_=b,onAppear:M=w,onAppearCancelled:E=k}=e,O=(I,j,de)=>{ki(I,j?u:a),ki(I,j?c:i),de&&de()},N=(I,j)=>{I._isLeaving=!1,ki(I,d),ki(I,h),ki(I,f),j&&j()},R=I=>(j,de)=>{const te=I?M:w,Q=()=>O(j,I,de);Pa(te,[j,Q]),R_(()=>{ki(j,I?l:s),Ps(j,I?u:a),L_(te)||P_(j,r,m,Q)})};return en(e,{onBeforeEnter(I){Pa(b,[I]),Ps(I,s),Ps(I,i)},onBeforeAppear(I){Pa(_,[I]),Ps(I,l),Ps(I,c)},onEnter:R(!1),onAppear:R(!0),onLeave(I,j){I._isLeaving=!0;const de=()=>N(I,j);Ps(I,d),Ps(I,f),XO(),R_(()=>{I._isLeaving&&(ki(I,d),Ps(I,h),L_(y)||P_(I,r,v,de))}),Pa(y,[I,de])},onEnterCancelled(I){O(I,!1),Pa(k,[I])},onAppearCancelled(I){O(I,!0),Pa(E,[I])},onLeaveCancelled(I){N(I),Pa(C,[I])}})}function r$(t){if(t==null)return null;if(Et(t))return[E0(t.enter),E0(t.leave)];{const e=E0(t);return[e,e]}}function E0(t){return H4(t)}function Ps(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Jc]||(t[Jc]=new Set)).add(e)}function ki(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Jc];n&&(n.delete(e),n.size||(t[Jc]=void 0))}function R_(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let o$=0;function P_(t,e,n,r){const o=t._endId=++o$,s=()=>{o===t._endId&&r()};if(n)return setTimeout(s,n);const{type:i,timeout:a,propCount:l}=YO(t,e);if(!i)return r();const c=i+"end";let u=0;const d=()=>{t.removeEventListener(c,f),s()},f=h=>{h.target===t&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),t.addEventListener(c,f)}function YO(t,e){const n=window.getComputedStyle(t),r=p=>(n[p]||"").split(", "),o=r(`${pi}Delay`),s=r(`${pi}Duration`),i=D_(o,s),a=r(`${nd}Delay`),l=r(`${nd}Duration`),c=D_(a,l);let u=null,d=0,f=0;e===pi?i>0&&(u=pi,d=i,f=s.length):e===nd?c>0&&(u=nd,d=c,f=l.length):(d=Math.max(i,c),u=d>0?i>c?pi:nd:null,f=u?u===pi?s.length:l.length:0);const h=u===pi&&/\b(transform|all)(,|$)/.test(r(`${pi}Property`).toString());return{type:u,timeout:d,propCount:f,hasTransform:h}}function D_(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>$_(n)+$_(t[r])))}function $_(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function XO(){return document.body.offsetHeight}function s$(t,e,n){const r=t[Jc];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Dm=Symbol("_vod"),QO=Symbol("_vsh"),Lf={beforeMount(t,{value:e},{transition:n}){t[Dm]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):rd(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),rd(t,!0),r.enter(t)):r.leave(t,()=>{rd(t,!1)}):rd(t,e))},beforeUnmount(t,{value:e}){rd(t,e)}};function rd(t,e){t.style.display=e?t[Dm]:"none",t[QO]=!e}const i$=Symbol(""),a$=/(^|;)\s*display\s*:/;function l$(t,e,n){const r=t.style,o=Bt(n);let s=!1;if(n&&!o){if(e)if(Bt(e))for(const i of e.split(";")){const a=i.slice(0,i.indexOf(":")).trim();n[a]==null&&qp(r,a,"")}else for(const i in e)n[i]==null&&qp(r,i,"");for(const i in n)i==="display"&&(s=!0),qp(r,i,n[i])}else if(o){if(e!==n){const i=r[i$];i&&(n+=";"+i),r.cssText=n,s=a$.test(n)}}else e&&t.removeAttribute("style");Dm in t&&(t[Dm]=s?r.display:"",t[QO]&&(r.display="none"))}const H_=/\s*!important$/;function qp(t,e,n){if(Ae(n))n.forEach(r=>qp(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=c$(t,e);H_.test(n)?t.setProperty(Du(r),n.replace(H_,""),"important"):t[r]=n}}const F_=["Webkit","Moz","ms"],O0={};function c$(t,e){const n=O0[e];if(n)return n;let r=gs(e);if(r!=="filter"&&r in t)return O0[e]=r;r=oy(r);for(let o=0;o<F_.length;o++){const s=F_[o]+r;if(s in t)return O0[e]=s}return e}const B_="http://www.w3.org/1999/xlink";function j_(t,e,n,r,o,s=yP(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(B_,e.slice(6,e.length)):t.setAttributeNS(B_,e,n):n==null||s&&!B4(n)?t.removeAttribute(e):t.setAttribute(e,s?"":ms(n)?String(n):n)}function u$(t,e,n,r,o,s,i){if(e==="innerHTML"||e==="textContent"){r&&i(r,o,s),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const c=a==="OPTION"?t.getAttribute("value")||"":t.value,u=n==null?"":String(n);(c!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let l=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=B4(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function Bs(t,e,n,r){t.addEventListener(e,n,r)}function d$(t,e,n,r){t.removeEventListener(e,n,r)}const z_=Symbol("_vei");function f$(t,e,n,r,o=null){const s=t[z_]||(t[z_]={}),i=s[e];if(r&&i)i.value=r;else{const[a,l]=h$(e);if(r){const c=s[e]=g$(r,o);Bs(t,a,c,l)}else i&&(d$(t,a,i,l),s[e]=void 0)}}const V_=/(?:Once|Passive|Capture)$/;function h$(t){let e;if(V_.test(t)){e={};let r;for(;r=t.match(V_);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Du(t.slice(2)),e]}let I0=0;const p$=Promise.resolve(),m$=()=>I0||(p$.then(()=>I0=0),I0=Date.now());function g$(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;ao(y$(r,n.value),e,5,[r])};return n.value=t,n.attached=m$(),n}function y$(t,e){if(Ae(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>o=>!o._stopped&&r&&r(o))}else return e}const U_=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,v$=(t,e,n,r,o,s,i,a,l)=>{const c=o==="svg";e==="class"?s$(t,r,c):e==="style"?l$(t,n,r):ph(e)?ak(e)||f$(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):b$(t,e,r,c))?(u$(t,e,r,s,i,a,l),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&j_(t,e,r,c,i,e!=="value")):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),j_(t,e,r,c))};function b$(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&U_(e)&&We(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const o=t.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return U_(e)&&Bt(n)?!1:e in t}const ZO=new WeakMap,eI=new WeakMap,$m=Symbol("_moveCb"),q_=Symbol("_enterCb"),tI={name:"TransitionGroup",props:en({},n$,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Co(),r=DO();let o,s;return Tk(()=>{if(!o.length)return;const i=t.moveClass||`${t.name||"v"}-move`;if(!S$(o[0].el,n.vnode.el,i))return;o.forEach(x$),o.forEach(C$);const a=o.filter(_$);XO(),a.forEach(l=>{const c=l.el,u=c.style;Ps(c,i),u.transform=u.webkitTransform=u.transitionDuration="";const d=c[$m]=f=>{f&&f.target!==c||(!f||/transform$/.test(f.propertyName))&&(c.removeEventListener("transitionend",d),c[$m]=null,ki(c,i))};c.addEventListener("transitionend",d)})}),()=>{const i=mt(t),a=JO(i);let l=i.tag||ye;if(o=[],s)for(let c=0;c<s.length;c++){const u=s[c];u.el&&u.el instanceof Element&&(o.push(u),Ml(u,Nf(u,a,r,n)),ZO.set(u,u.el.getBoundingClientRect()))}s=e.default?Lk(e.default()):[];for(let c=0;c<s.length;c++){const u=s[c];u.key!=null&&Ml(u,Nf(u,a,r,n))}return he(l,null,s)}}},w$=t=>delete t.mode;tI.props;const k$=tI;function x$(t){const e=t.el;e[$m]&&e[$m](),e[q_]&&e[q_]()}function C$(t){eI.set(t,t.el.getBoundingClientRect())}function _$(t){const e=ZO.get(t),n=eI.get(t),r=e.left-n.left,o=e.top-n.top;if(r||o){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${o}px)`,s.transitionDuration="0s",t}}function S$(t,e,n){const r=t.cloneNode(),o=t[Jc];o&&o.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:i}=YO(r);return s.removeChild(r),i}const ua=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Ae(e)?n=>Oc(e,n):e};function T$(t){t.target.composing=!0}function W_(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const lo=Symbol("_assign"),mn={created(t,{modifiers:{lazy:e,trim:n,number:r}},o){t[lo]=ua(o);const s=r||o.props&&o.props.type==="number";Bs(t,e?"change":"input",i=>{if(i.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=Mm(a)),t[lo](a)}),n&&Bs(t,"change",()=>{t.value=t.value.trim()}),e||(Bs(t,"compositionstart",T$),Bs(t,"compositionend",W_),Bs(t,"change",W_))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:o,number:s}},i){if(t[lo]=ua(i),t.composing)return;const a=(s||t.type==="number")&&!/^0\d/.test(t.value)?Mm(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||o&&t.value.trim()===l)||(t.value=l))}},Il={deep:!0,created(t,e,n){t[lo]=ua(n),Bs(t,"change",()=>{const r=t._modelValue,o=Yc(t),s=t.checked,i=t[lo];if(Ae(r)){const a=dk(r,o),l=a!==-1;if(s&&!l)i(r.concat(o));else if(!s&&l){const c=[...r];c.splice(a,1),i(c)}}else if(Ru(r)){const a=new Set(r);s?a.add(o):a.delete(o),i(a)}else i(nI(t,s))})},mounted:K_,beforeUpdate(t,e,n){t[lo]=ua(n),K_(t,e,n)}};function K_(t,{value:e,oldValue:n},r){t._modelValue=e,Ae(e)?t.checked=dk(e,r.props.value)>-1:Ru(e)?t.checked=e.has(r.props.value):e!==n&&(t.checked=Sl(e,nI(t,!0)))}const zs={created(t,{value:e},n){t.checked=Sl(e,n.props.value),t[lo]=ua(n),Bs(t,"change",()=>{t[lo](Yc(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[lo]=ua(r),e!==n&&(t.checked=Sl(e,r.props.value))}},mo={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const o=Ru(e);Bs(t,"change",()=>{const s=Array.prototype.filter.call(t.options,i=>i.selected).map(i=>n?Mm(Yc(i)):Yc(i));t[lo](t.multiple?o?new Set(s):s:s[0]),t._assigning=!0,cr(()=>{t._assigning=!1})}),t[lo]=ua(r)},mounted(t,{value:e,modifiers:{number:n}}){G_(t,e)},beforeUpdate(t,e,n){t[lo]=ua(n)},updated(t,{value:e,modifiers:{number:n}}){t._assigning||G_(t,e)}};function G_(t,e,n){const r=t.multiple,o=Ae(e);if(!(r&&!o&&!Ru(e))){for(let s=0,i=t.options.length;s<i;s++){const a=t.options[s],l=Yc(a);if(r)if(o){const c=typeof l;c==="string"||c==="number"?a.selected=e.some(u=>String(u)===String(l)):a.selected=dk(e,l)>-1}else a.selected=e.has(l);else if(Sl(Yc(a),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Yc(t){return"_value"in t?t._value:t.value}function nI(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const rI={created(t,e,n){dp(t,e,n,null,"created")},mounted(t,e,n){dp(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){dp(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){dp(t,e,n,r,"updated")}};function M$(t,e){switch(t){case"SELECT":return mo;case"TEXTAREA":return mn;default:switch(e){case"checkbox":return Il;case"radio":return zs;default:return mn}}}function dp(t,e,n,r,o){const i=M$(t.tagName,n.props&&n.props.type)[o];i&&i(t,e,n,r)}const E$=["ctrl","shift","alt","meta"],O$={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>E$.some(n=>t[`${n}Key`]&&!e.includes(n))},rt=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(o,...s)=>{for(let i=0;i<e.length;i++){const a=O$[e[i]];if(a&&a(o,e))return}return t(o,...s)})},oI=en({patchProp:v$},t$);let Wd,J_=!1;function I$(){return Wd||(Wd=OD(oI))}function A$(){return Wd=J_?Wd:ID(oI),J_=!0,Wd}const N$=(...t)=>{const e=I$().createApp(...t),{mount:n}=e;return e.mount=r=>{const o=iI(r);if(!o)return;const s=e._component;!We(s)&&!s.render&&!s.template&&(s.template=o.innerHTML),o.innerHTML="";const i=n(o,!1,sI(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),i},e},L$=(...t)=>{const e=A$().createApp(...t),{mount:n}=e;return e.mount=r=>{const o=iI(r);if(o)return n(o,!0,sI(o))},e};function sI(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function iI(t){return Bt(t)?document.querySelector(t):t}const R$=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,P$=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,D$=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function $$(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){H$(t);return}return e}function H$(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Rf(t,e={}){if(typeof t!="string")return t;const n=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\"))return n.slice(1,-1);if(n.length<=9){const r=n.toLowerCase();if(r==="true")return!0;if(r==="false")return!1;if(r==="undefined")return;if(r==="null")return null;if(r==="nan")return Number.NaN;if(r==="infinity")return Number.POSITIVE_INFINITY;if(r==="-infinity")return Number.NEGATIVE_INFINITY}if(!D$.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(R$.test(t)||P$.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,$$)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}const F$=/#/g,B$=/&/g,j$=/\//g,z$=/=/g,Dk=/\+/g,V$=/%5e/gi,U$=/%60/gi,q$=/%7c/gi,W$=/%20/gi;function K$(t){return encodeURI(""+t).replace(q$,"|")}function Rb(t){return K$(typeof t=="string"?t:JSON.stringify(t)).replace(Dk,"%2B").replace(W$,"+").replace(F$,"%23").replace(B$,"%26").replace(U$,"`").replace(V$,"^").replace(j$,"%2F")}function A0(t){return Rb(t).replace(z$,"%3D")}function Hm(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function G$(t){return Hm(t.replace(Dk," "))}function J$(t){return Hm(t.replace(Dk," "))}function $k(t=""){const e={};t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const r=n.match(/([^=]+)=?(.*)/)||[];if(r.length<2)continue;const o=G$(r[1]);if(o==="__proto__"||o==="constructor")continue;const s=J$(r[2]||"");e[o]===void 0?e[o]=s:Array.isArray(e[o])?e[o].push(s):e[o]=[e[o],s]}return e}function Y$(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>`${A0(t)}=${Rb(n)}`).join("&"):`${A0(t)}=${Rb(e)}`:A0(t)}function X$(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>Y$(e,t[e])).filter(Boolean).join("&")}const Q$=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Z$=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,e9=/^([/\\]\s*){2,}[^/\\]/,t9=/^[\s\0]*(blob|data|javascript|vbscript):$/i,n9=/\/$|\/\?|\/#/,r9=/^\.?\//;function _o(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?Q$.test(t):Z$.test(t)||(e.acceptRelative?e9.test(t):!1)}function o9(t){return!!t&&t9.test(t)}function Pb(t="",e){return e?n9.test(t):t.endsWith("/")}function kh(t="",e){if(!e)return(Pb(t)?t.slice(0,-1):t)||"/";if(!Pb(t,!0))return t||"/";let n=t,r="";const o=t.indexOf("#");o>=0&&(n=t.slice(0,o),r=t.slice(o));const[s,...i]=n.split("?");return((s.endsWith("/")?s.slice(0,-1):s)||"/")+(i.length>0?`?${i.join("?")}`:"")+r}function Pf(t="",e){if(!e)return t.endsWith("/")?t:t+"/";if(Pb(t,!0))return t||"/";let n=t,r="";const o=t.indexOf("#");if(o>=0&&(n=t.slice(0,o),r=t.slice(o),!n))return r;const[s,...i]=n.split("?");return s+"/"+(i.length>0?`?${i.join("?")}`:"")+r}function s9(t=""){return t.startsWith("/")}function Y_(t=""){return s9(t)?t:"/"+t}function i9(t,e){if(aI(e)||_o(t))return t;const n=kh(e);return t.startsWith(n)?t:Wl(n,t)}function X_(t,e){if(aI(e))return t;const n=kh(e);if(!t.startsWith(n))return t;const r=t.slice(n.length);return r[0]==="/"?r:"/"+r}function Hk(t,e){const n=l9(t),r={...$k(n.search),...e};return n.search=X$(r),c9(n)}function aI(t){return!t||t==="/"}function a9(t){return t&&t!=="/"}function Wl(t,...e){let n=t||"";for(const r of e.filter(o=>a9(o)))if(n){const o=r.replace(r9,"");n=Pf(n)+o}else n=r;return n}function lI(...t){var i,a,l,c;const e=/\/(?!\/)/,n=t.filter(Boolean),r=[];let o=0;for(const u of n)if(!(!u||u==="/")){for(const[d,f]of u.split(e).entries())if(!(!f||f===".")){if(f===".."){if(r.length===1&&_o(r[0]))continue;r.pop(),o--;continue}if(d===1&&((i=r[r.length-1])!=null&&i.endsWith(":/"))){r[r.length-1]+="/"+f;continue}r.push(f),o++}}let s=r.join("/");return o>=0?(a=n[0])!=null&&a.startsWith("/")&&!s.startsWith("/")?s="/"+s:(l=n[0])!=null&&l.startsWith("./")&&!s.startsWith("./")&&(s="./"+s):s="../".repeat(-1*o)+s,(c=n[n.length-1])!=null&&c.endsWith("/")&&!s.endsWith("/")&&(s+="/"),s}function Db(t,e,n={}){return n.trailingSlash||(t=Pf(t),e=Pf(e)),n.leadingSlash||(t=Y_(t),e=Y_(e)),n.encoding||(t=Hm(t),e=Hm(e)),t===e}const cI=Symbol.for("ufo:protocolRelative");function l9(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,d,f=""]=n;return{protocol:d.toLowerCase(),pathname:f,href:d+f,auth:"",host:"",search:"",hash:""}}if(!_o(t,{acceptRelative:!0}))return $b(t);const[,r="",o,s=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,i="",a=""]=s.match(/([^#/?]*)(.*)?/)||[],{pathname:l,search:c,hash:u}=$b(a.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:r.toLowerCase(),auth:o?o.slice(0,Math.max(0,o.length-1)):"",host:i,pathname:l,search:c,hash:u,[cI]:!r}}function $b(t=""){const[e="",n="",r=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:r}}function c9(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",r=t.hash||"",o=t.auth?t.auth+"@":"",s=t.host||"";return(t.protocol||t[cI]?(t.protocol||"")+"//":"")+o+s+e+n+r}class u9 extends Error{constructor(e,n){super(e,n),this.name="FetchError",n!=null&&n.cause&&!this.cause&&(this.cause=n.cause)}}function d9(t){var l,c,u,d,f;const e=((l=t.error)==null?void 0:l.message)||((c=t.error)==null?void 0:c.toString())||"",n=((u=t.request)==null?void 0:u.method)||((d=t.options)==null?void 0:d.method)||"GET",r=((f=t.request)==null?void 0:f.url)||String(t.request)||"/",o=`[${n}] ${JSON.stringify(r)}`,s=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",i=`${o}: ${s}${e?` ${e}`:""}`,a=new u9(i,t.error?{cause:t.error}:void 0);for(const h of["request","options","response"])Object.defineProperty(a,h,{get(){return t[h]}});for(const[h,p]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(a,h,{get(){return t.response&&t.response[p]}});return a}const f9=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function Q_(t="GET"){return f9.has(t.toUpperCase())}function h9(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const p9=new Set(["image/svg","application/xml","application/xhtml","application/html"]),m9=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function g9(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return m9.test(e)?"json":p9.has(e)||e.startsWith("text/")?"text":"blob"}function y9(t,e,n=globalThis.Headers){const r={...e,...t};if(e!=null&&e.params&&(t!=null&&t.params)&&(r.params={...e==null?void 0:e.params,...t==null?void 0:t.params}),e!=null&&e.query&&(t!=null&&t.query)&&(r.query={...e==null?void 0:e.query,...t==null?void 0:t.query}),e!=null&&e.headers&&(t!=null&&t.headers)){r.headers=new n((e==null?void 0:e.headers)||{});for(const[o,s]of new n((t==null?void 0:t.headers)||{}))r.headers.set(o,s)}return r}const v9=new Set([408,409,425,429,500,502,503,504]),b9=new Set([101,204,205,304]);function uI(t={}){const{fetch:e=globalThis.fetch,Headers:n=globalThis.Headers,AbortController:r=globalThis.AbortController}=t;async function o(a){const l=a.error&&a.error.name==="AbortError"&&!a.options.timeout||!1;if(a.options.retry!==!1&&!l){let u;typeof a.options.retry=="number"?u=a.options.retry:u=Q_(a.options.method)?0:1;const d=a.response&&a.response.status||500;if(u>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(d):v9.has(d))){const f=a.options.retryDelay||0;return f>0&&await new Promise(h=>setTimeout(h,f)),s(a.request,{...a.options,retry:u-1})}}const c=d9(a);throw Error.captureStackTrace&&Error.captureStackTrace(c,s),c}const s=async function(l,c={}){var h;const u={request:l,options:y9(c,t.defaults,n),response:void 0,error:void 0};u.options.method=(h=u.options.method)==null?void 0:h.toUpperCase(),u.options.onRequest&&await u.options.onRequest(u),typeof u.request=="string"&&(u.options.baseURL&&(u.request=i9(u.request,u.options.baseURL)),(u.options.query||u.options.params)&&(u.request=Hk(u.request,{...u.options.params,...u.options.query}))),u.options.body&&Q_(u.options.method)&&(h9(u.options.body)?(u.options.body=typeof u.options.body=="string"?u.options.body:JSON.stringify(u.options.body),u.options.headers=new n(u.options.headers||{}),u.options.headers.has("content-type")||u.options.headers.set("content-type","application/json"),u.options.headers.has("accept")||u.options.headers.set("accept","application/json")):("pipeTo"in u.options.body&&typeof u.options.body.pipeTo=="function"||typeof u.options.body.pipe=="function")&&("duplex"in u.options||(u.options.duplex="half")));let d;if(!u.options.signal&&u.options.timeout){const p=new r;d=setTimeout(()=>p.abort(),u.options.timeout),u.options.signal=p.signal}try{u.response=await e(u.request,u.options)}catch(p){return u.error=p,u.options.onRequestError&&await u.options.onRequestError(u),await o(u)}finally{d&&clearTimeout(d)}if(u.response.body&&!b9.has(u.response.status)&&u.options.method!=="HEAD"){const p=(u.options.parseResponse?"json":u.options.responseType)||g9(u.response.headers.get("content-type")||"");switch(p){case"json":{const m=await u.response.text(),v=u.options.parseResponse||Rf;u.response._data=v(m);break}case"stream":{u.response._data=u.response.body;break}default:u.response._data=await u.response[p]()}}return u.options.onResponse&&await u.options.onResponse(u),!u.options.ignoreResponseError&&u.response.status>=400&&u.response.status<600?(u.options.onResponseError&&await u.options.onResponseError(u),await o(u)):u.response},i=async function(l,c){return(await s(l,c))._data};return i.raw=s,i.native=(...a)=>e(...a),i.create=(a={})=>uI({...t,defaults:{...t.defaults,...a}}),i}const Fk=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),w9=Fk.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),k9=Fk.Headers,x9=Fk.AbortController,C9=uI({fetch:w9,Headers:k9,AbortController:x9}),_9=C9,S9=()=>{var t;return((t=window==null?void 0:window.__NUXT__)==null?void 0:t.config)||{}},Fm=S9().app,T9=()=>Fm.baseURL,M9=()=>Fm.buildAssetsDir,Bk=(...t)=>lI(dI(),M9(),...t),dI=(...t)=>{const e=Fm.cdnURL||Fm.baseURL;return t.length?lI(e,...t):e};globalThis.__buildAssetsURL=Bk,globalThis.__publicAssetsURL=dI;globalThis.$fetch||(globalThis.$fetch=_9.create({baseURL:T9()}));function Hb(t,e={},n){for(const r in t){const o=t[r],s=n?`${n}:${r}`:r;typeof o=="object"&&o!==null?Hb(o,e,s):typeof o=="function"&&(e[s]=o)}return e}const E9={run:t=>t()},O9=()=>E9,fI=typeof console.createTask<"u"?console.createTask:O9;function I9(t,e){const n=e.shift(),r=fI(n);return t.reduce((o,s)=>o.then(()=>r.run(()=>s(...e))),Promise.resolve())}function A9(t,e){const n=e.shift(),r=fI(n);return Promise.all(t.map(o=>r.run(()=>o(...e))))}function N0(t,e){for(const n of[...t])n(e)}class N9{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,n,r={}){if(!e||typeof n!="function")return()=>{};const o=e;let s;for(;this._deprecatedHooks[e];)s=this._deprecatedHooks[e],e=s.to;if(s&&!r.allowDeprecated){let i=s.message;i||(i=`${o} hook has been deprecated`+(s.to?`, please use ${s.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(i)||(console.warn(i),this._deprecatedMessages.add(i))}if(!n.name)try{Object.defineProperty(n,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(n),()=>{n&&(this.removeHook(e,n),n=void 0)}}hookOnce(e,n){let r,o=(...s)=>(typeof r=="function"&&r(),r=void 0,o=void 0,n(...s));return r=this.hook(e,o),r}removeHook(e,n){if(this._hooks[e]){const r=this._hooks[e].indexOf(n);r!==-1&&this._hooks[e].splice(r,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,n){this._deprecatedHooks[e]=typeof n=="string"?{to:n}:n;const r=this._hooks[e]||[];delete this._hooks[e];for(const o of r)this.hook(e,o)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const n in e)this.deprecateHook(n,e[n])}addHooks(e){const n=Hb(e),r=Object.keys(n).map(o=>this.hook(o,n[o]));return()=>{for(const o of r.splice(0,r.length))o()}}removeHooks(e){const n=Hb(e);for(const r in n)this.removeHook(r,n[r])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...n){return n.unshift(e),this.callHookWith(I9,e,...n)}callHookParallel(e,...n){return n.unshift(e),this.callHookWith(A9,e,...n)}callHookWith(e,n,...r){const o=this._before||this._after?{name:n,args:r,context:{}}:void 0;this._before&&N0(this._before,o);const s=e(n in this._hooks?[...this._hooks[n]]:[],r);return s instanceof Promise?s.finally(()=>{this._after&&o&&N0(this._after,o)}):(this._after&&o&&N0(this._after,o),s)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const n=this._before.indexOf(e);n!==-1&&this._before.splice(n,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const n=this._after.indexOf(e);n!==-1&&this._after.splice(n,1)}}}}function hI(){return new N9}function L9(t={}){let e,n=!1;const r=i=>{if(e&&e!==i)throw new Error("Context conflict")};let o;if(t.asyncContext){const i=t.AsyncLocalStorage||globalThis.AsyncLocalStorage;i?o=new i:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const s=()=>{if(o&&e===void 0){const i=o.getStore();if(i!==void 0)return i}return e};return{use:()=>{const i=s();if(i===void 0)throw new Error("Context is not available");return i},tryUse:()=>s(),set:(i,a)=>{a||r(i),e=i,n=!0},unset:()=>{e=void 0,n=!1},call:(i,a)=>{r(i),e=i;try{return o?o.run(i,a):a()}finally{n||(e=void 0)}},async callAsync(i,a){e=i;const l=()=>{e=i},c=()=>e===i?l:void 0;Fb.add(c);try{const u=o?o.run(i,a):a();return n||(e=void 0),await u}finally{Fb.delete(c)}}}}function R9(t={}){const e={};return{get(n,r={}){return e[n]||(e[n]=L9({...t,...r})),e[n],e[n]}}}const Bm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},Z_="__unctx__",P9=Bm[Z_]||(Bm[Z_]=R9()),D9=(t,e={})=>P9.get(t,e),e5="__unctx_async_handlers__",Fb=Bm[e5]||(Bm[e5]=new Set);function ts(t){const e=[];for(const o of Fb){const s=o();s&&e.push(s)}const n=()=>{for(const o of e)o()};let r=t();return r&&typeof r=="object"&&"catch"in r&&(r=r.catch(o=>{throw n(),o})),[r,n]}const $9=!1,Bb=!1,H9=!1,F9={componentName:"NuxtLink"},kc={value:null,errorValue:null,deep:!0},B9=null,j9={},z9="#__nuxt",pI="nuxt-app",t5=36e5;function mI(t=pI){return D9(t,{asyncContext:!1})}const V9="__nuxt_plugin";function U9(t){let e=0;const n={_name:pI,_scope:gh(),provide:void 0,globalName:"nuxt",versions:{get nuxt(){return"3.12.2"},get vue(){return n.vueApp.version}},payload:js({data:js({}),state:tr({}),once:new Set,_errors:js({})}),static:{data:{}},runWithContext(o){return n._scope.active&&!$u()?n._scope.run(()=>n5(n,o)):n5(n,o)},isHydrating:!0,deferHydration(){if(!n.isHydrating)return()=>{};e++;let o=!1;return()=>{if(!o&&(o=!0,e--,e===0))return n.isHydrating=!1,n.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:js({}),_payloadRevivers:{},...t};if(window.__NUXT__)for(const o in window.__NUXT__)switch(o){case"data":case"state":case"_errors":Object.assign(n.payload[o],window.__NUXT__[o]);break;default:n.payload[o]=window.__NUXT__[o]}n.hooks=hI(),n.hook=n.hooks.hook,n.callHook=n.hooks.callHook,n.provide=(o,s)=>{const i="$"+o;fp(n,i,s),fp(n.vueApp.config.globalProperties,i,s)},fp(n.vueApp,"$nuxt",n),fp(n.vueApp.config.globalProperties,"$nuxt",n);{window.addEventListener("nuxt.preloadError",s=>{n.callHook("app:chunkError",{error:s.payload})}),window.useNuxtApp=window.useNuxtApp||ut;const o=n.hook("app:error",(...s)=>{console.error("[nuxt] error caught during app initialization",...s)});n.hook("app:mounted",o)}const r=n.payload.config;return n.provide("config",r),n}function q9(t,e){e.hooks&&t.hooks.addHooks(e.hooks)}async function W9(t,e){if(typeof e=="function"){const{provide:n}=await t.runWithContext(()=>e(t))||{};if(n&&typeof n=="object")for(const r in n)t.provide(r,n[r])}}async function K9(t,e){const n=[],r=[],o=[],s=[];let i=0;async function a(l){var u;const c=((u=l.dependsOn)==null?void 0:u.filter(d=>e.some(f=>f._name===d)&&!n.includes(d)))??[];if(c.length>0)r.push([new Set(c),l]);else{const d=W9(t,l).then(async()=>{l._name&&(n.push(l._name),await Promise.all(r.map(async([f,h])=>{f.has(l._name)&&(f.delete(l._name),f.size===0&&(i++,await a(h)))})))});l.parallel?o.push(d.catch(f=>s.push(f))):await d}}for(const l of e)q9(t,l);for(const l of e)await a(l);if(await Promise.all(o),i)for(let l=0;l<i;l++)await Promise.all(o);if(s.length)throw s[0]}function ur(t){if(typeof t=="function")return t;const e=t._name||t.name;return delete t.name,Object.assign(t.setup||(()=>{}),t,{[V9]:!0,_name:e})}function n5(t,e,n){const r=()=>e();return mI(t._name).set(t),t.vueApp.runWithContext(r)}function G9(t){var n;let e;return Ek()&&(e=(n=Co())==null?void 0:n.appContext.app.$nuxt),e=e||mI(t).tryUse(),e||null}function ut(t){const e=G9(t);if(!e)throw new Error("[nuxt] instance unavailable");return e}function Yt(t){return ut().$config}function fp(t,e,n){Object.defineProperty(t,e,{get:()=>n})}const hp=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function J9(t,e){if(typeof t!="string")throw new TypeError("argument str must be a string");const n={},o=(e||{}).decode||Q9;let s=0;for(;s<t.length;){const i=t.indexOf("=",s);if(i===-1)break;let a=t.indexOf(";",s);if(a===-1)a=t.length;else if(a<i){s=t.lastIndexOf(";",i-1)+1;continue}const l=t.slice(s,i).trim();if(n[l]===void 0){let c=t.slice(i+1,a).trim();c.codePointAt(0)===34&&(c=c.slice(1,-1)),n[l]=X9(c,o)}s=a+1}return n}function r5(t,e,n){const r=n||{},o=r.encode||Z9;if(typeof o!="function")throw new TypeError("option encode is invalid");if(!hp.test(t))throw new TypeError("argument name is invalid");const s=o(e);if(s&&!hp.test(s))throw new TypeError("argument val is invalid");let i=t+"="+s;if(r.maxAge!==void 0&&r.maxAge!==null){const a=r.maxAge-0;if(Number.isNaN(a)||!Number.isFinite(a))throw new TypeError("option maxAge is invalid");i+="; Max-Age="+Math.floor(a)}if(r.domain){if(!hp.test(r.domain))throw new TypeError("option domain is invalid");i+="; Domain="+r.domain}if(r.path){if(!hp.test(r.path))throw new TypeError("option path is invalid");i+="; Path="+r.path}if(r.expires){if(!Y9(r.expires)||Number.isNaN(r.expires.valueOf()))throw new TypeError("option expires is invalid");i+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():r.priority){case"low":{i+="; Priority=Low";break}case"medium":{i+="; Priority=Medium";break}case"high":{i+="; Priority=High";break}default:throw new TypeError("option priority is invalid")}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:{i+="; SameSite=Strict";break}case"lax":{i+="; SameSite=Lax";break}case"strict":{i+="; SameSite=Strict";break}case"none":{i+="; SameSite=None";break}default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(i+="; Partitioned"),i}function Y9(t){return Object.prototype.toString.call(t)==="[object Date]"||t instanceof Date}function X9(t,e){try{return e(t)}catch{return t}}function Q9(t){return t.includes("%")?decodeURIComponent(t):t}function Z9(t){return encodeURIComponent(t)}const o5=Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0});function jb(t,e){e?e={...o5,...e}:e=o5;const n=gI(e);return n.dispatch(t),n.toString()}const eH=Object.freeze(["prototype","__proto__","constructor"]);function gI(t){let e="",n=new Map;const r=o=>{e+=o};return{toString(){return e},getContext(){return n},dispatch(o){return t.replacer&&(o=t.replacer(o)),this[o===null?"null":typeof o](o)},object(o){if(o&&typeof o.toJSON=="function")return this.object(o.toJSON());const s=Object.prototype.toString.call(o);let i="";const a=s.length;a<10?i="unknown:["+s+"]":i=s.slice(8,a-1),i=i.toLowerCase();let l=null;if((l=n.get(o))===void 0)n.set(o,n.size);else return this.dispatch("[CIRCULAR:"+l+"]");if(typeof Buffer<"u"&&Buffer.isBuffer&&Buffer.isBuffer(o))return r("buffer:"),r(o.toString("utf8"));if(i!=="object"&&i!=="function"&&i!=="asyncfunction")this[i]?this[i](o):t.ignoreUnknown||this.unkown(o,i);else{let c=Object.keys(o);t.unorderedObjects&&(c=c.sort());let u=[];t.respectType!==!1&&!s5(o)&&(u=eH),t.excludeKeys&&(c=c.filter(f=>!t.excludeKeys(f)),u=u.filter(f=>!t.excludeKeys(f))),r("object:"+(c.length+u.length)+":");const d=f=>{this.dispatch(f),r(":"),t.excludeValues||this.dispatch(o[f]),r(",")};for(const f of c)d(f);for(const f of u)d(f)}},array(o,s){if(s=s===void 0?t.unorderedArrays!==!1:s,r("array:"+o.length+":"),!s||o.length<=1){for(const l of o)this.dispatch(l);return}const i=new Map,a=o.map(l=>{const c=gI(t);c.dispatch(l);for(const[u,d]of c.getContext())i.set(u,d);return c.toString()});return n=i,a.sort(),this.array(a,!1)},date(o){return r("date:"+o.toJSON())},symbol(o){return r("symbol:"+o.toString())},unkown(o,s){if(r(s),!!o&&(r(":"),o&&typeof o.entries=="function"))return this.array(Array.from(o.entries()),!0)},error(o){return r("error:"+o.toString())},boolean(o){return r("bool:"+o)},string(o){r("string:"+o.length+":"),r(o)},function(o){r("fn:"),s5(o)?this.dispatch("[native]"):this.dispatch(o.toString()),t.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(o.name)),t.respectFunctionProperties&&this.object(o)},number(o){return r("number:"+o)},xml(o){return r("xml:"+o.toString())},null(){return r("Null")},undefined(){return r("Undefined")},regexp(o){return r("regex:"+o.toString())},uint8array(o){return r("uint8array:"),this.dispatch(Array.prototype.slice.call(o))},uint8clampedarray(o){return r("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(o))},int8array(o){return r("int8array:"),this.dispatch(Array.prototype.slice.call(o))},uint16array(o){return r("uint16array:"),this.dispatch(Array.prototype.slice.call(o))},int16array(o){return r("int16array:"),this.dispatch(Array.prototype.slice.call(o))},uint32array(o){return r("uint32array:"),this.dispatch(Array.prototype.slice.call(o))},int32array(o){return r("int32array:"),this.dispatch(Array.prototype.slice.call(o))},float32array(o){return r("float32array:"),this.dispatch(Array.prototype.slice.call(o))},float64array(o){return r("float64array:"),this.dispatch(Array.prototype.slice.call(o))},arraybuffer(o){return r("arraybuffer:"),this.dispatch(new Uint8Array(o))},url(o){return r("url:"+o.toString())},map(o){r("map:");const s=[...o];return this.array(s,t.unorderedSets!==!1)},set(o){r("set:");const s=[...o];return this.array(s,t.unorderedSets!==!1)},file(o){return r("file:"),this.dispatch([o.name,o.size,o.type,o.lastModfied])},blob(){if(t.ignoreUnknown)return r("[blob]");throw new Error(`Hashing Blob objects is currently not supported
Use "options.replacer" or "options.ignoreUnknown"
`)},domwindow(){return r("domwindow")},bigint(o){return r("bigint:"+o.toString())},process(){return r("process")},timer(){return r("timer")},pipe(){return r("pipe")},tcp(){return r("tcp")},udp(){return r("udp")},tty(){return r("tty")},statwatcher(){return r("statwatcher")},securecontext(){return r("securecontext")},connection(){return r("connection")},zlib(){return r("zlib")},context(){return r("context")},nodescript(){return r("nodescript")},httpparser(){return r("httpparser")},dataview(){return r("dataview")},signal(){return r("signal")},fsevent(){return r("fsevent")},tlswrap(){return r("tlswrap")}}}const yI="[native code] }",tH=yI.length;function s5(t){return typeof t!="function"?!1:Function.prototype.toString.call(t).slice(-tH)===yI}class Xi{constructor(e,n){e=this.words=e||[],this.sigBytes=n===void 0?e.length*4:n}toString(e){return(e||nH).stringify(this)}concat(e){if(this.clamp(),this.sigBytes%4)for(let n=0;n<e.sigBytes;n++){const r=e.words[n>>>2]>>>24-n%4*8&255;this.words[this.sigBytes+n>>>2]|=r<<24-(this.sigBytes+n)%4*8}else for(let n=0;n<e.sigBytes;n+=4)this.words[this.sigBytes+n>>>2]=e.words[n>>>2];return this.sigBytes+=e.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new Xi([...this.words])}}const nH={stringify(t){const e=[];for(let n=0;n<t.sigBytes;n++){const r=t.words[n>>>2]>>>24-n%4*8&255;e.push((r>>>4).toString(16),(r&15).toString(16))}return e.join("")}},rH={stringify(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[];for(let r=0;r<t.sigBytes;r+=3){const o=t.words[r>>>2]>>>24-r%4*8&255,s=t.words[r+1>>>2]>>>24-(r+1)%4*8&255,i=t.words[r+2>>>2]>>>24-(r+2)%4*8&255,a=o<<16|s<<8|i;for(let l=0;l<4&&r*8+l*6<t.sigBytes*8;l++)n.push(e.charAt(a>>>6*(3-l)&63))}return n.join("")}},oH={parse(t){const e=t.length,n=[];for(let r=0;r<e;r++)n[r>>>2]|=(t.charCodeAt(r)&255)<<24-r%4*8;return new Xi(n,e)}},sH={parse(t){return oH.parse(unescape(encodeURIComponent(t)))}};class iH{constructor(){this._data=new Xi,this._nDataBytes=0,this._minBufferSize=0,this.blockSize=512/32}reset(){this._data=new Xi,this._nDataBytes=0}_append(e){typeof e=="string"&&(e=sH.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_doProcessBlock(e,n){}_process(e){let n,r=this._data.sigBytes/(this.blockSize*4);e?r=Math.ceil(r):r=Math.max((r|0)-this._minBufferSize,0);const o=r*this.blockSize,s=Math.min(o*4,this._data.sigBytes);if(o){for(let i=0;i<o;i+=this.blockSize)this._doProcessBlock(this._data.words,i);n=this._data.words.splice(0,o),this._data.sigBytes-=s}return new Xi(n,s)}}class aH extends iH{update(e){return this._append(e),this._process(),this}finalize(e){e&&this._append(e)}}const i5=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],lH=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Da=[];class cH extends aH{constructor(){super(...arguments),this._hash=new Xi([...i5])}reset(){super.reset(),this._hash=new Xi([...i5])}_doProcessBlock(e,n){const r=this._hash.words;let o=r[0],s=r[1],i=r[2],a=r[3],l=r[4],c=r[5],u=r[6],d=r[7];for(let f=0;f<64;f++){if(f<16)Da[f]=e[n+f]|0;else{const k=Da[f-15],y=(k<<25|k>>>7)^(k<<14|k>>>18)^k>>>3,C=Da[f-2],_=(C<<15|C>>>17)^(C<<13|C>>>19)^C>>>10;Da[f]=y+Da[f-7]+_+Da[f-16]}const h=l&c^~l&u,p=o&s^o&i^s&i,m=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),v=(l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25),b=d+v+h+lH[f]+Da[f],w=m+p;d=u,u=c,c=l,l=a+b|0,a=i,i=s,s=o,o=b+w|0}r[0]=r[0]+o|0,r[1]=r[1]+s|0,r[2]=r[2]+i|0,r[3]=r[3]+a|0,r[4]=r[4]+l|0,r[5]=r[5]+c|0,r[6]=r[6]+u|0,r[7]=r[7]+d|0}finalize(e){super.finalize(e);const n=this._nDataBytes*8,r=this._data.sigBytes*8;return this._data.words[r>>>5]|=128<<24-r%32,this._data.words[(r+64>>>9<<4)+14]=Math.floor(n/4294967296),this._data.words[(r+64>>>9<<4)+15]=n,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}}function uH(t){return new cH().finalize(t).toString(rH)}function dH(t,e={}){const n=typeof t=="string"?t:jb(t,e);return uH(n).slice(0,10)}function fH(t,e,n={}){return t===e||jb(t,n)===jb(e,n)}function hH(t,e){return{ctx:{table:t},matchAll:n=>bI(n,t)}}function vI(t){const e={};for(const n in t)e[n]=n==="dynamic"?new Map(Object.entries(t[n]).map(([r,o])=>[r,vI(o)])):new Map(Object.entries(t[n]));return e}function pH(t){return hH(vI(t))}function bI(t,e,n){t.endsWith("/")&&(t=t.slice(0,-1)||"/");const r=[];for(const[s,i]of a5(e.wildcard))(t===s||t.startsWith(s+"/"))&&r.push(i);for(const[s,i]of a5(e.dynamic))if(t.startsWith(s+"/")){const a="/"+t.slice(s.length).split("/").splice(2).join("/");r.push(...bI(a,i))}const o=e.static.get(t);return o&&r.push(o),r.filter(Boolean)}function a5(t){return[...t.entries()].sort((e,n)=>e[0].length-n[0].length)}function L0(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function zb(t,e,n=".",r){if(!L0(e))return zb(t,{},n,r);const o=Object.assign({},e);for(const s in t){if(s==="__proto__"||s==="constructor")continue;const i=t[s];i!=null&&(r&&r(o,s,i,n)||(Array.isArray(i)&&Array.isArray(o[s])?o[s]=[...i,...o[s]]:L0(i)&&L0(o[s])?o[s]=zb(i,o[s],(n?`${n}.`:"")+s.toString(),r):o[s]=i))}return o}function mH(t){return(...e)=>e.reduce((n,r)=>zb(n,r,"",t),{})}const wI=mH();function gH(t,e){try{return e in t}catch{return!1}}var yH=Object.defineProperty,vH=(t,e,n)=>e in t?yH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ja=(t,e,n)=>(vH(t,typeof e!="symbol"?e+"":e,n),n);class Vb extends Error{constructor(e,n={}){super(e,n),ja(this,"statusCode",500),ja(this,"fatal",!1),ja(this,"unhandled",!1),ja(this,"statusMessage"),ja(this,"data"),ja(this,"cause"),n.cause&&!this.cause&&(this.cause=n.cause)}toJSON(){const e={message:this.message,statusCode:qb(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=kI(this.statusMessage)),this.data!==void 0&&(e.data=this.data),e}}ja(Vb,"__h3_error__",!0);function Ub(t){if(typeof t=="string")return new Vb(t);if(bH(t))return t;const e=new Vb(t.message??t.statusMessage??"",{cause:t.cause||t});if(gH(t,"stack"))try{Object.defineProperty(e,"stack",{get(){return t.stack}})}catch{try{e.stack=t.stack}catch{}}if(t.data&&(e.data=t.data),t.statusCode?e.statusCode=qb(t.statusCode,e.statusCode):t.status&&(e.statusCode=qb(t.status,e.statusCode)),t.statusMessage?e.statusMessage=t.statusMessage:t.statusText&&(e.statusMessage=t.statusText),e.statusMessage){const n=e.statusMessage;kI(e.statusMessage)!==n&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return t.fatal!==void 0&&(e.fatal=t.fatal),t.unhandled!==void 0&&(e.unhandled=t.unhandled),e}function bH(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.__h3_error__)===!0}const wH=/[^\u0009\u0020-\u007E]/g;function kI(t=""){return t.replace(wH,"")}function qb(t,e=200){return!t||(typeof t=="string"&&(t=Number.parseInt(t,10)),t<100||t>999)?e:t}const xI=Symbol("layout-meta"),xh=Symbol("route"),nr=()=>{var t;return(t=ut())==null?void 0:t.$router},uy=()=>Ek()?An(xh,ut()._route):ut()._route;function VOe(t){return t}const kH=(t,e,n={})=>{const r=ut(),o=n.global||typeof t!="string",s=e;if(!s){console.warn("[nuxt] No route middleware passed to `addRouteMiddleware`.",t);return}o?r._middleware.global.push(s):r._middleware.named[t]=s},xH=()=>{try{if(ut()._processingMiddleware)return!0}catch{return!1}return!1},CI=(t,e)=>{t||(t="/");const n=typeof t=="string"?t:Hk(t.path||"/",t.query||{})+(t.hash||"");if(e!=null&&e.open){const{target:a="_blank",windowFeatures:l={}}=e.open,c=Object.entries(l).filter(([u,d])=>d!==void 0).map(([u,d])=>`${u.toLowerCase()}=${d}`).join(", ");return open(n,a,c),Promise.resolve()}const r=(e==null?void 0:e.external)||_o(n,{acceptRelative:!0});if(r){if(!(e!=null&&e.external))throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:a}=new URL(n,window.location.href);if(a&&o9(a))throw new Error(`Cannot navigate to a URL with '${a}' protocol.`)}const o=xH();if(!r&&o)return t;const s=nr(),i=ut();return r?(i._scope.stop(),e!=null&&e.replace?location.replace(n):location.href=n,o?i.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):e!=null&&e.replace?s.replace(t):s.push(t)},_I="__nuxt_error",dy=()=>kk(ut().payload,"error"),xc=t=>{const e=Ch(t);try{const n=ut(),r=dy();n.hooks.callHook("app:error",e),r.value=r.value||e}catch{throw e}return e},SI=async(t={})=>{const e=ut(),n=dy();e.callHook("app:error:cleared",t),t.redirect&&await nr().replace(t.redirect),n.value=B9},CH=t=>!!t&&typeof t=="object"&&_I in t,Ch=t=>{const e=Ub(t);return Object.defineProperty(e,_I,{value:!0,configurable:!1,writable:!1}),e},_H=-1,SH=-2,TH=-3,MH=-4,EH=-5,OH=-6;function IH(t,e){return AH(JSON.parse(t),e)}function AH(t,e){if(typeof t=="number")return o(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const n=t,r=Array(n.length);function o(s,i=!1){if(s===_H)return;if(s===TH)return NaN;if(s===MH)return 1/0;if(s===EH)return-1/0;if(s===OH)return-0;if(i)throw new Error("Invalid input");if(s in r)return r[s];const a=n[s];if(!a||typeof a!="object")r[s]=a;else if(Array.isArray(a))if(typeof a[0]=="string"){const l=a[0],c=e==null?void 0:e[l];if(c)return r[s]=c(o(a[1]));switch(l){case"Date":r[s]=new Date(a[1]);break;case"Set":const u=new Set;r[s]=u;for(let h=1;h<a.length;h+=1)u.add(o(a[h]));break;case"Map":const d=new Map;r[s]=d;for(let h=1;h<a.length;h+=2)d.set(o(a[h]),o(a[h+1]));break;case"RegExp":r[s]=new RegExp(a[1],a[2]);break;case"Object":r[s]=Object(a[1]);break;case"BigInt":r[s]=BigInt(a[1]);break;case"null":const f=Object.create(null);r[s]=f;for(let h=1;h<a.length;h+=2)f[a[h]]=o(a[h+1]);break;default:throw new Error(`Unknown type ${l}`)}}else{const l=new Array(a.length);r[s]=l;for(let c=0;c<a.length;c+=1){const u=a[c];u!==SH&&(l[c]=o(u))}}else{const l={};r[s]=l;for(const c in a){const u=a[c];l[c]=o(u)}}return r[s]}return o(0)}function NH(t){return Array.isArray(t)?t:[t]}const LH=["title","titleTemplate","script","style","noscript"],Wp=["base","meta","link","style","script","noscript"],RH=["title","titleTemplate","templateParams","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"],PH=["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"],TI=["tagPosition","tagPriority","tagDuplicateStrategy","children","innerHTML","textContent","processTemplateParams"],DH=typeof window<"u";function jk(t){let e=9;for(let n=0;n<t.length;)e=Math.imul(e^t.charCodeAt(n++),9**9);return((e^e>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function l5(t){return t._h||jk(t._d?t._d:`${t.tag}:${t.textContent||t.innerHTML||""}:${Object.entries(t.props).map(([e,n])=>`${e}:${String(n)}`).join(",")}`)}function MI(t,e){const{props:n,tag:r}=t;if(PH.includes(r))return r;if(r==="link"&&n.rel==="canonical")return"canonical";if(n.charset)return"charset";const o=["id"];r==="meta"&&o.push("name","property","http-equiv");for(const s of o)if(typeof n[s]<"u"){const i=String(n[s]);return`${r}:${s}:${i}`}return!1}function c5(t,e){return t==null?e||null:typeof t=="function"?t(e):t}async function $H(t,e,n){const r={tag:t,props:await EI(typeof e=="object"&&typeof e!="function"&&!(e instanceof Promise)?{...e}:{[["script","noscript","style"].includes(t)?"innerHTML":"textContent"]:e},["templateParams","titleTemplate"].includes(t))};return TI.forEach(o=>{const s=typeof r.props[o]<"u"?r.props[o]:n[o];typeof s<"u"&&((!["innerHTML","textContent","children"].includes(o)||LH.includes(r.tag))&&(r[o==="children"?"innerHTML":o]=s),delete r.props[o])}),r.props.body&&(r.tagPosition="bodyClose",delete r.props.body),r.tag==="script"&&typeof r.innerHTML=="object"&&(r.innerHTML=JSON.stringify(r.innerHTML),r.props.type=r.props.type||"application/json"),Array.isArray(r.props.content)?r.props.content.map(o=>({...r,props:{...r.props,content:o}})):r}function HH(t,e){var r;const n=t==="class"?" ":";";return typeof e=="object"&&!Array.isArray(e)&&(e=Object.entries(e).filter(([,o])=>o).map(([o,s])=>t==="style"?`${o}:${s}`:o)),(r=String(Array.isArray(e)?e.join(n):e))==null?void 0:r.split(n).filter(o=>o.trim()).filter(Boolean).join(n)}async function EI(t,e){for(const n of Object.keys(t)){if(["class","style"].includes(n)){t[n]=HH(n,t[n]);continue}if(t[n]instanceof Promise&&(t[n]=await t[n]),!e&&!TI.includes(n)){const r=String(t[n]),o=n.startsWith("data-");r==="true"||r===""?t[n]=o?"true":!0:t[n]||(o&&r==="false"?t[n]="false":delete t[n])}}return t}const FH=10;async function BH(t){const e=[];return Object.entries(t.resolvedInput).filter(([n,r])=>typeof r<"u"&&RH.includes(n)).forEach(([n,r])=>{const o=NH(r);e.push(...o.map(s=>$H(n,s,t)).flat())}),(await Promise.all(e)).flat().filter(Boolean).map((n,r)=>(n._e=t._i,t.mode&&(n._m=t.mode),n._p=(t._i<<FH)+r,n))}const u5={base:-10,title:10},d5={critical:-80,high:-10,low:20};function jm(t){let e=100;const n=t.tagPriority;return typeof n=="number"?n:(t.tag==="meta"?(t.props["http-equiv"]==="content-security-policy"&&(e=-30),t.props.charset&&(e=-20),t.props.name==="viewport"&&(e=-15)):t.tag==="link"&&t.props.rel==="preconnect"?e=20:t.tag in u5&&(e=u5[t.tag]),typeof n=="string"&&n in d5?e+d5[n]:e)}const jH=[{prefix:"before:",offset:-1},{prefix:"after:",offset:1}],f5=["onload","onerror","onabort","onprogress","onloadstart"],mi="%separator";function Kp(t,e,n){if(typeof t!="string"||!t.includes("%"))return t;function r(i){let a;return["s","pageTitle"].includes(i)?a=e.pageTitle:i.includes(".")?a=i.split(".").reduce((l,c)=>l&&l[c]||void 0,e):a=e[i],typeof a<"u"?(a||"").replace(/"/g,'\\"'):!1}let o=t;try{o=decodeURI(t)}catch{}return(o.match(/%(\w+\.+\w+)|%(\w+)/g)||[]).sort().reverse().forEach(i=>{const a=r(i.slice(1));typeof a=="string"&&(t=t.replace(new RegExp(`\\${i}(\\W|$)`,"g"),(l,c)=>`${a}${c}`).trim())}),t.includes(mi)&&(t.endsWith(mi)&&(t=t.slice(0,-mi.length).trim()),t.startsWith(mi)&&(t=t.slice(mi.length).trim()),t=t.replace(new RegExp(`\\${mi}\\s*\\${mi}`,"g"),mi),t=Kp(t,{separator:n},n)),t}async function OI(t,e={}){var u;const n=e.document||t.resolvedOptions.document;if(!n||!t.dirty)return;const r={shouldRender:!0,tags:[]};if(await t.hooks.callHook("dom:beforeRender",r),!r.shouldRender)return;const o=(await t.resolveTags()).map(d=>({tag:d,id:Wp.includes(d.tag)?l5(d):d.tag,shouldRender:!0}));let s=t._dom;if(!s){s={elMap:{htmlAttrs:n.documentElement,bodyAttrs:n.body}};for(const d of["body","head"]){const f=(u=n[d])==null?void 0:u.children,h=[];for(const p of[...f].filter(m=>Wp.includes(m.tagName.toLowerCase()))){const m={tag:p.tagName.toLowerCase(),props:await EI(p.getAttributeNames().reduce((w,k)=>({...w,[k]:p.getAttribute(k)}),{})),innerHTML:p.innerHTML};let v=1,b=MI(m);for(;b&&h.find(w=>w._d===b);)b=`${b}:${v++}`;m._d=b||void 0,h.push(m),s.elMap[p.getAttribute("data-hid")||l5(m)]=p}}}s.pendingSideEffects={...s.sideEffects||{}},s.sideEffects={};function i(d,f,h){const p=`${d}:${f}`;s.sideEffects[p]=h,delete s.pendingSideEffects[p]}function a({id:d,$el:f,tag:h}){const p=h.tag.endsWith("Attrs");s.elMap[d]=f,p||(["textContent","innerHTML"].forEach(m=>{h[m]&&h[m]!==f[m]&&(f[m]=h[m])}),i(d,"el",()=>{var m;(m=s.elMap[d])==null||m.remove(),delete s.elMap[d]}));for(const[m,v]of Object.entries(h._eventHandlers||{}))f.getAttribute(`data-${m}`)!==""&&((h.tag==="bodyAttrs"?n.defaultView:f).addEventListener(m.replace("on",""),v.bind(f)),f.setAttribute(`data-${m}`,""));Object.entries(h.props).forEach(([m,v])=>{const b=`attr:${m}`;if(m==="class")for(const w of(v||"").split(" ").filter(Boolean))p&&i(d,`${b}:${w}`,()=>f.classList.remove(w)),!f.classList.contains(w)&&f.classList.add(w);else if(m==="style")for(const w of(v||"").split(";").filter(Boolean)){const[k,...y]=w.split(":").map(C=>C.trim());i(d,`${b}:${k}`,()=>{f.style.removeProperty(k)}),f.style.setProperty(k,y.join(":"))}else f.getAttribute(m)!==v&&f.setAttribute(m,v===!0?"":String(v)),p&&i(d,b,()=>f.removeAttribute(m))})}const l=[],c={bodyClose:void 0,bodyOpen:void 0,head:void 0};for(const d of o){const{tag:f,shouldRender:h,id:p}=d;if(h){if(f.tag==="title"){n.title=f.textContent;continue}d.$el=d.$el||s.elMap[p],d.$el?a(d):Wp.includes(f.tag)&&l.push(d)}}for(const d of l){const f=d.tag.tagPosition||"head";d.$el=n.createElement(d.tag.tag),a(d),c[f]=c[f]||n.createDocumentFragment(),c[f].appendChild(d.$el)}for(const d of o)await t.hooks.callHook("dom:renderTag",d,n,i);c.head&&n.head.appendChild(c.head),c.bodyOpen&&n.body.insertBefore(c.bodyOpen,n.body.firstChild),c.bodyClose&&n.body.appendChild(c.bodyClose),Object.values(s.pendingSideEffects).forEach(d=>d()),t._dom=s,t.dirty=!1,await t.hooks.callHook("dom:rendered",{renders:o})}async function zH(t,e={}){const n=e.delayFn||(r=>setTimeout(r,10));return t._domUpdatePromise=t._domUpdatePromise||new Promise(r=>n(async()=>{await OI(t,e),delete t._domUpdatePromise,r()}))}function VH(t){return e=>{var r,o;const n=((o=(r=e.resolvedOptions.document)==null?void 0:r.head.querySelector('script[id="unhead:payload"]'))==null?void 0:o.innerHTML)||!1;return n&&e.push(JSON.parse(n)),{mode:"client",hooks:{"entries:updated":function(s){zH(s,t)}}}}}const UH=["templateParams","htmlAttrs","bodyAttrs"],qH={hooks:{"tag:normalise":function({tag:t}){["hid","vmid","key"].forEach(r=>{t.props[r]&&(t.key=t.props[r],delete t.props[r])});const n=MI(t)||(t.key?`${t.tag}:${t.key}`:!1);n&&(t._d=n)},"tags:resolve":function(t){const e={};t.tags.forEach(r=>{const o=(r.key?`${r.tag}:${r.key}`:r._d)||r._p,s=e[o];if(s){let a=r==null?void 0:r.tagDuplicateStrategy;if(!a&&UH.includes(r.tag)&&(a="merge"),a==="merge"){const l=s.props;["class","style"].forEach(c=>{l[c]&&(r.props[c]?(c==="style"&&!l[c].endsWith(";")&&(l[c]+=";"),r.props[c]=`${l[c]} ${r.props[c]}`):r.props[c]=l[c])}),e[o].props={...l,...r.props};return}else if(r._e===s._e){s._duped=s._duped||[],r._d=`${s._d}:${s._duped.length+1}`,s._duped.push(r);return}else if(jm(r)>jm(s))return}const i=Object.keys(r.props).length+(r.innerHTML?1:0)+(r.textContent?1:0);if(Wp.includes(r.tag)&&i===0){delete e[o];return}e[o]=r});const n=[];Object.values(e).forEach(r=>{const o=r._duped;delete r._duped,n.push(r),o&&n.push(...o)}),t.tags=n,t.tags=t.tags.filter(r=>!(r.tag==="meta"&&(r.props.name||r.props.property)&&!r.props.content))}}},WH={mode:"server",hooks:{"tags:resolve":function(t){const e={};t.tags.filter(n=>["titleTemplate","templateParams","title"].includes(n.tag)&&n._m==="server").forEach(n=>{e[n.tag]=n.tag.startsWith("title")?n.textContent:n.props}),Object.keys(e).length&&t.tags.push({tag:"script",innerHTML:JSON.stringify(e),props:{id:"unhead:payload",type:"application/json"}})}}},KH=["script","link","bodyAttrs"],GH=t=>({hooks:{"tags:resolve":function(e){for(const n of e.tags.filter(r=>KH.includes(r.tag)))Object.entries(n.props).forEach(([r,o])=>{r.startsWith("on")&&typeof o=="function"&&(t.ssr&&f5.includes(r)?n.props[r]=`this.dataset.${r}fired = true`:delete n.props[r],n._eventHandlers=n._eventHandlers||{},n._eventHandlers[r]=o)}),t.ssr&&n._eventHandlers&&(n.props.src||n.props.href)&&(n.key=n.key||jk(n.props.src||n.props.href))},"dom:renderTag":function({$el:e,tag:n}){var r,o;for(const s of Object.keys((e==null?void 0:e.dataset)||{}).filter(i=>f5.some(a=>`${a}fired`===i))){const i=s.replace("fired","");(o=(r=n._eventHandlers)==null?void 0:r[i])==null||o.call(e,new Event(i.replace("on","")))}}}}),JH=["link","style","script","noscript"],YH={hooks:{"tag:normalise":({tag:t})=>{t.key&&JH.includes(t.tag)&&(t.props["data-hid"]=t._h=jk(t.key))}}},XH={hooks:{"tags:resolve":t=>{const e=n=>{var r;return(r=t.tags.find(o=>o._d===n))==null?void 0:r._p};for(const{prefix:n,offset:r}of jH)for(const o of t.tags.filter(s=>typeof s.tagPriority=="string"&&s.tagPriority.startsWith(n))){const s=e(o.tagPriority.replace(n,""));typeof s<"u"&&(o._p=s+r)}t.tags.sort((n,r)=>n._p-r._p).sort((n,r)=>jm(n)-jm(r))}}},QH={meta:"content",link:"href",htmlAttrs:"lang"},ZH=t=>({hooks:{"tags:resolve":e=>{var a;const{tags:n}=e,r=(a=n.find(l=>l.tag==="title"))==null?void 0:a.textContent,o=n.findIndex(l=>l.tag==="templateParams"),s=o!==-1?n[o].props:{},i=s.separator||"|";delete s.separator,s.pageTitle=Kp(s.pageTitle||r||"",s,i);for(const l of n.filter(c=>c.processTemplateParams!==!1)){const c=QH[l.tag];c&&typeof l.props[c]=="string"?l.props[c]=Kp(l.props[c],s,i):(l.processTemplateParams===!0||["titleTemplate","title"].includes(l.tag))&&["innerHTML","textContent"].forEach(u=>{typeof l[u]=="string"&&(l[u]=Kp(l[u],s,i))})}t._templateParams=s,t._separator=i,e.tags=n.filter(l=>l.tag!=="templateParams")}}}),eF={hooks:{"tags:resolve":t=>{const{tags:e}=t;let n=e.findIndex(o=>o.tag==="titleTemplate");const r=e.findIndex(o=>o.tag==="title");if(r!==-1&&n!==-1){const o=c5(e[n].textContent,e[r].textContent);o!==null?e[r].textContent=o||e[r].textContent:delete e[r]}else if(n!==-1){const o=c5(e[n].textContent);o!==null&&(e[n].textContent=o,e[n].tag="title",n=-1)}n!==-1&&delete e[n],t.tags=e.filter(Boolean)}}},tF={hooks:{"tags:afterResolve":function(t){for(const e of t.tags)typeof e.innerHTML=="string"&&(e.innerHTML&&["application/ld+json","application/json"].includes(e.props.type)?e.innerHTML=e.innerHTML.replace(/</g,"\\u003C"):e.innerHTML=e.innerHTML.replace(new RegExp(`</${e.tag}`,"g"),`<\\/${e.tag}`))}}};let II;function nF(t={}){const e=rF(t);return e.use(VH()),II=e}function h5(t,e){return!t||t==="server"&&e||t==="client"&&!e}function rF(t={}){const e=hI();e.addHooks(t.hooks||{}),t.document=t.document||(DH?document:void 0);const n=!t.document,r=()=>{a.dirty=!0,e.callHook("entries:updated",a)};let o=0,s=[];const i=[],a={plugins:i,dirty:!1,resolvedOptions:t,hooks:e,headEntries(){return s},use(l){const c=typeof l=="function"?l(a):l;(!c.key||!i.some(u=>u.key===c.key))&&(i.push(c),h5(c.mode,n)&&e.addHooks(c.hooks||{}))},push(l,c){c==null||delete c.head;const u={_i:o++,input:l,...c};return h5(u.mode,n)&&(s.push(u),r()),{dispose(){s=s.filter(d=>d._i!==u._i),e.callHook("entries:updated",a),r()},patch(d){s=s.map(f=>(f._i===u._i&&(f.input=u.input=d),f)),r()}}},async resolveTags(){const l={tags:[],entries:[...s]};await e.callHook("entries:resolve",l);for(const c of l.entries){const u=c.resolvedInput||c.input;if(c.resolvedInput=await(c.transform?c.transform(u):u),c.resolvedInput)for(const d of await BH(c)){const f={tag:d,entry:c,resolvedOptions:a.resolvedOptions};await e.callHook("tag:normalise",f),l.tags.push(f.tag)}}return await e.callHook("tags:beforeResolve",l),await e.callHook("tags:resolve",l),await e.callHook("tags:afterResolve",l),l.tags},ssr:n};return[qH,WH,GH,YH,XH,ZH,eF,tF,...(t==null?void 0:t.plugins)||[]].forEach(l=>a.use(l)),a.hooks.callHook("init",a),a}function AI(){return II}const oF=KO.startsWith("3");function sF(t){return typeof t=="function"?t():x(t)}function zm(t,e=""){if(t instanceof Promise)return t;const n=sF(t);return!t||!n?n:Array.isArray(n)?n.map(r=>zm(r,e)):typeof n=="object"?Object.fromEntries(Object.entries(n).map(([r,o])=>r==="titleTemplate"||r.startsWith("on")?[r,x(o)]:[r,zm(o,r)])):n}const iF={hooks:{"entries:resolve":function(t){for(const e of t.entries)e.resolvedInput=zm(e.input)}}},NI="usehead";function aF(t){return{install(n){oF&&(n.config.globalProperties.$unhead=t,n.config.globalProperties.$head=t,n.provide(NI,t))}}.install}function lF(t={}){t.domDelayFn=t.domDelayFn||(n=>cr(()=>setTimeout(()=>n(),0)));const e=nF(t);return e.use(iF),e.install=aF(e),e}const Wb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Kb="__unhead_injection_handler__";function cF(t){Wb[Kb]=t}function uF(){if(Kb in Wb)return Wb[Kb]();const t=An(NI);return t||AI()}function dF(t,e={}){const n=e.head||uF();if(n)return n.ssr?n.push(t,e):fF(n,t,e)}function fF(t,e,n={}){const r=ae(!1),o=ae({});Ak(()=>{o.value=r.value?{}:zm(e)});const s=t.push(o.value,n);return ot(o,a=>{s.patch(a)}),Co()&&(_s(()=>{s.dispose()}),RO(()=>{r.value=!0}),LO(()=>{r.value=!1})),s}let Gp,Jp;function hF(){return Gp=$fetch(Bk(`builds/meta/${Yt().app.buildId}.json`),{responseType:"json"}),Gp.then(t=>{Jp=pH(t.matcher)}).catch(t=>{console.error("[nuxt] Error fetching app manifest.",t)}),Gp}function fy(){return Gp||hF()}async function zk(t){if(await fy(),!Jp)return console.error("[nuxt] Error creating app manifest matcher.",Jp),{};try{return wI({},...Jp.matchAll(t).reverse())}catch(e){return console.error("[nuxt] Error matching route rules.",e),{}}}async function p5(t,e={}){const n=await mF(t,e),r=ut(),o=r._payloadCache=r._payloadCache||{};return n in o||(o[n]=RI(t).then(s=>s?LI(n).then(i=>i||(delete o[n],null)):(o[n]=null,null))),o[n]}const pF="_payload.json";async function mF(t,e={}){const n=new URL(t,"http://localhost");if(n.host!=="localhost"||_o(n.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+t);const r=Yt(),o=e.hash||(e.fresh?Date.now():r.app.buildId),s=r.app.cdnURL,i=s&&await RI(t)?s:r.app.baseURL;return Wl(i,n.pathname,pF+(o?`?${o}`:""))}async function LI(t){const e=fetch(t).then(n=>n.text().then(PI));try{return await e}catch(n){console.warn("[nuxt] Cannot load payload ",t,n)}return null}async function RI(t=uy().path){if(t=kh(t),(await fy()).prerendered.includes(t))return!0;const n=await zk(t);return!!n.prerender&&!n.redirect}let pp=null;async function gF(){if(pp)return pp;const t=document.getElementById("__NUXT_DATA__");if(!t)return{};const e=await PI(t.textContent||""),n=t.dataset.src?await LI(t.dataset.src):void 0;return pp={...e,...n,...window.__NUXT__},pp}async function PI(t){return await IH(t,ut()._payloadRevivers)}function yF(t,e){ut()._payloadRevivers[t]=e}const m5={NuxtError:t=>Ch(t),EmptyShallowRef:t=>Tl(t==="_"?void 0:t==="0n"?BigInt(0):Rf(t)),EmptyRef:t=>ae(t==="_"?void 0:t==="0n"?BigInt(0):Rf(t)),ShallowRef:t=>Tl(t),ShallowReactive:t=>js(t),Ref:t=>ae(t),Reactive:t=>tr(t)},vF=ur({name:"nuxt:revive-payload:client",order:-30,async setup(t){let e,n;for(const r in m5)yF(r,m5[r]);Object.assign(t.payload,([e,n]=ts(()=>t.runWithContext(gF)),e=await e,n(),e)),window.__NUXT__=t.payload}}),bF=[],wF=ur({name:"nuxt:head",enforce:"pre",setup(t){const e=lF({plugins:bF});cF(()=>ut().vueApp._context.provides.usehead),t.vueApp.use(e);{let n=!0;const r=async()=>{n=!1,await OI(e)};e.hooks.hook("dom:beforeRender",o=>{o.shouldRender=!n}),t.hooks.hook("page:start",()=>{n=!0}),t.hooks.hook("page:finish",()=>{t.isHydrating||r()}),t.hooks.hook("app:error",r),t.hooks.hook("app:suspense:resolve",r)}}});/*!
  * vue-router v4.4.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const sc=typeof document<"u";function kF(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Ct=Object.assign;function R0(t,e){const n={};for(const r in e){const o=e[r];n[r]=Bo(o)?o.map(t):t(o)}return n}const Kd=()=>{},Bo=Array.isArray,DI=/#/g,xF=/&/g,CF=/\//g,_F=/=/g,SF=/\?/g,$I=/\+/g,TF=/%5B/g,MF=/%5D/g,HI=/%5E/g,EF=/%60/g,FI=/%7B/g,OF=/%7C/g,BI=/%7D/g,IF=/%20/g;function Vk(t){return encodeURI(""+t).replace(OF,"|").replace(TF,"[").replace(MF,"]")}function AF(t){return Vk(t).replace(FI,"{").replace(BI,"}").replace(HI,"^")}function Gb(t){return Vk(t).replace($I,"%2B").replace(IF,"+").replace(DI,"%23").replace(xF,"%26").replace(EF,"`").replace(FI,"{").replace(BI,"}").replace(HI,"^")}function NF(t){return Gb(t).replace(_F,"%3D")}function LF(t){return Vk(t).replace(DI,"%23").replace(SF,"%3F")}function RF(t){return t==null?"":LF(t).replace(CF,"%2F")}function Df(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const PF=/\/$/,DF=t=>t.replace(PF,"");function P0(t,e,n="/"){let r,o={},s="",i="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),o=t(s)),a>-1&&(r=r||e.slice(0,a),i=e.slice(a,e.length)),r=BF(r??e,n),{fullPath:r+(s&&"?")+s+i,path:r,query:o,hash:Df(i)}}function $F(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function g5(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function HF(t,e,n){const r=e.matched.length-1,o=n.matched.length-1;return r>-1&&r===o&&Xc(e.matched[r],n.matched[o])&&jI(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Xc(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function jI(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!FF(t[n],e[n]))return!1;return!0}function FF(t,e){return Bo(t)?y5(t,e):Bo(e)?y5(e,t):t===e}function y5(t,e){return Bo(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function BF(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),o=r[r.length-1];(o===".."||o===".")&&r.push("");let s=n.length-1,i,a;for(i=0;i<r.length;i++)if(a=r[i],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(i).join("/")}const Oo={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var $f;(function(t){t.pop="pop",t.push="push"})($f||($f={}));var Gd;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Gd||(Gd={}));function jF(t){if(!t)if(sc){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),DF(t)}const zF=/^[^#]+#/;function VF(t,e){return t.replace(zF,"#")+e}function UF(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const hy=()=>({left:window.scrollX,top:window.scrollY});function qF(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;e=UF(o,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function v5(t,e){return(history.state?history.state.position-e:-1)+t}const Jb=new Map;function WF(t,e){Jb.set(t,e)}function KF(t){const e=Jb.get(t);return Jb.delete(t),e}let GF=()=>location.protocol+"//"+location.host;function zI(t,e){const{pathname:n,search:r,hash:o}=e,s=t.indexOf("#");if(s>-1){let a=o.includes(t.slice(s))?t.slice(s).length:1,l=o.slice(a);return l[0]!=="/"&&(l="/"+l),g5(l,"")}return g5(n,t)+r+o}function JF(t,e,n,r){let o=[],s=[],i=null;const a=({state:f})=>{const h=zI(t,location),p=n.value,m=e.value;let v=0;if(f){if(n.value=h,e.value=f,i&&i===p){i=null;return}v=m?f.position-m.position:0}else r(h);o.forEach(b=>{b(n.value,p,{delta:v,type:$f.pop,direction:v?v>0?Gd.forward:Gd.back:Gd.unknown})})};function l(){i=n.value}function c(f){o.push(f);const h=()=>{const p=o.indexOf(f);p>-1&&o.splice(p,1)};return s.push(h),h}function u(){const{history:f}=window;f.state&&f.replaceState(Ct({},f.state,{scroll:hy()}),"")}function d(){for(const f of s)f();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function b5(t,e,n,r=!1,o=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:o?hy():null}}function YF(t){const{history:e,location:n}=window,r={value:zI(t,n)},o={value:e.state};o.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const d=t.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:GF()+t+l;try{e[u?"replaceState":"pushState"](c,"",f),o.value=c}catch(h){console.error(h),n[u?"replace":"assign"](f)}}function i(l,c){const u=Ct({},e.state,b5(o.value.back,l,o.value.forward,!0),c,{position:o.value.position});s(l,u,!0),r.value=l}function a(l,c){const u=Ct({},o.value,e.state,{forward:l,scroll:hy()});s(u.current,u,!0);const d=Ct({},b5(r.value,l,null),{position:u.position+1},c);s(l,d,!1),r.value=l}return{location:r,state:o,push:a,replace:i}}function VI(t){t=jF(t);const e=YF(t),n=JF(t,e.state,e.location,e.replace);function r(s,i=!0){i||n.pauseListeners(),history.go(s)}const o=Ct({location:"",base:t,go:r,createHref:VF.bind(null,t)},e,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>e.state.value}),o}function XF(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),VI(t)}function QF(t){return typeof t=="string"||t&&typeof t=="object"}function UI(t){return typeof t=="string"||typeof t=="symbol"}const qI=Symbol("");var w5;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(w5||(w5={}));function Qc(t,e){return Ct(new Error,{type:t,[qI]:!0},e)}function Ns(t,e){return t instanceof Error&&qI in t&&(e==null||!!(t.type&e))}const k5="[^/]+?",ZF={sensitive:!1,strict:!1,start:!0,end:!0},eB=/[.+*?^${}()[\]/\\]/g;function tB(t,e){const n=Ct({},ZF,e),r=[];let o=n.start?"^":"";const s=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(o+="/");for(let d=0;d<c.length;d++){const f=c[d];let h=40+(n.sensitive?.25:0);if(f.type===0)d||(o+="/"),o+=f.value.replace(eB,"\\$&"),h+=40;else if(f.type===1){const{value:p,repeatable:m,optional:v,regexp:b}=f;s.push({name:p,repeatable:m,optional:v});const w=b||k5;if(w!==k5){h+=10;try{new RegExp(`(${w})`)}catch(y){throw new Error(`Invalid custom RegExp for param "${p}" (${w}): `+y.message)}}let k=m?`((?:${w})(?:/(?:${w}))*)`:`(${w})`;d||(k=v&&c.length<2?`(?:/${k})`:"/"+k),v&&(k+="?"),o+=k,h+=20,v&&(h+=-8),m&&(h+=-20),w===".*"&&(h+=-50)}u.push(h)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&(o+="(?:/|$)");const i=new RegExp(o,n.sensitive?"":"i");function a(c){const u=c.match(i),d={};if(!u)return null;for(let f=1;f<u.length;f++){const h=u[f]||"",p=s[f-1];d[p.name]=h&&p.repeatable?h.split("/"):h}return d}function l(c){let u="",d=!1;for(const f of t){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const h of f)if(h.type===0)u+=h.value;else if(h.type===1){const{value:p,repeatable:m,optional:v}=h,b=p in c?c[p]:"";if(Bo(b)&&!m)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const w=Bo(b)?b.join("/"):b;if(!w)if(v)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${p}"`);u+=w}}return u||"/"}return{re:i,score:r,keys:s,parse:a,stringify:l}}function nB(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function WI(t,e){let n=0;const r=t.score,o=e.score;for(;n<r.length&&n<o.length;){const s=nB(r[n],o[n]);if(s)return s;n++}if(Math.abs(o.length-r.length)===1){if(x5(r))return 1;if(x5(o))return-1}return o.length-r.length}function x5(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const rB={type:0,value:""},oB=/[a-zA-Z0-9_]/;function sB(t){if(!t)return[[]];if(t==="/")return[[rB]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(h){throw new Error(`ERR (${n})/"${c}": ${h}`)}let n=0,r=n;const o=[];let s;function i(){s&&o.push(s),s=[]}let a=0,l,c="",u="";function d(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&d(),i()):l===":"?(d(),n=1):f();break;case 4:f(),n=r;break;case 1:l==="("?n=2:oB.test(l)?f():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),i(),o}function iB(t,e,n){const r=tB(sB(t.path),n),o=Ct(r,{record:t,parent:e,children:[],alias:[]});return e&&!o.record.aliasOf==!e.record.aliasOf&&e.children.push(o),o}function aB(t,e){const n=[],r=new Map;e=S5({strict:!1,end:!0,sensitive:!1},e);function o(d){return r.get(d)}function s(d,f,h){const p=!h,m=lB(d);m.aliasOf=h&&h.record;const v=S5(e,d),b=[m];if("alias"in d){const y=typeof d.alias=="string"?[d.alias]:d.alias;for(const C of y)b.push(Ct({},m,{components:h?h.record.components:m.components,path:C,aliasOf:h?h.record:m}))}let w,k;for(const y of b){const{path:C}=y;if(f&&C[0]!=="/"){const _=f.record.path,M=_[_.length-1]==="/"?"":"/";y.path=f.record.path+(C&&M+C)}if(w=iB(y,f,v),h?h.alias.push(w):(k=k||w,k!==w&&k.alias.push(w),p&&d.name&&!_5(w)&&i(d.name)),KI(w)&&l(w),m.children){const _=m.children;for(let M=0;M<_.length;M++)s(_[M],w,h&&h.children[M])}h=h||w}return k?()=>{i(k)}:Kd}function i(d){if(UI(d)){const f=r.get(d);f&&(r.delete(d),n.splice(n.indexOf(f),1),f.children.forEach(i),f.alias.forEach(i))}else{const f=n.indexOf(d);f>-1&&(n.splice(f,1),d.record.name&&r.delete(d.record.name),d.children.forEach(i),d.alias.forEach(i))}}function a(){return n}function l(d){const f=dB(d,n);n.splice(f,0,d),d.record.name&&!_5(d)&&r.set(d.record.name,d)}function c(d,f){let h,p={},m,v;if("name"in d&&d.name){if(h=r.get(d.name),!h)throw Qc(1,{location:d});v=h.record.name,p=Ct(C5(f.params,h.keys.filter(k=>!k.optional).concat(h.parent?h.parent.keys.filter(k=>k.optional):[]).map(k=>k.name)),d.params&&C5(d.params,h.keys.map(k=>k.name))),m=h.stringify(p)}else if(d.path!=null)m=d.path,h=n.find(k=>k.re.test(m)),h&&(p=h.parse(m),v=h.record.name);else{if(h=f.name?r.get(f.name):n.find(k=>k.re.test(f.path)),!h)throw Qc(1,{location:d,currentLocation:f});v=h.record.name,p=Ct({},f.params,d.params),m=h.stringify(p)}const b=[];let w=h;for(;w;)b.unshift(w.record),w=w.parent;return{name:v,path:m,params:p,matched:b,meta:uB(b)}}t.forEach(d=>s(d));function u(){n.length=0,r.clear()}return{addRoute:s,resolve:c,removeRoute:i,clearRoutes:u,getRoutes:a,getRecordMatcher:o}}function C5(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function lB(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:cB(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function cB(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function _5(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function uB(t){return t.reduce((e,n)=>Ct(e,n.meta),{})}function S5(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function dB(t,e){let n=0,r=e.length;for(;n!==r;){const s=n+r>>1;WI(t,e[s])<0?r=s:n=s+1}const o=fB(t);return o&&(r=e.lastIndexOf(o,r-1)),r}function fB(t){let e=t;for(;e=e.parent;)if(KI(e)&&WI(t,e)===0)return e}function KI({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function hB(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let o=0;o<r.length;++o){const s=r[o].replace($I," "),i=s.indexOf("="),a=Df(i<0?s:s.slice(0,i)),l=i<0?null:Df(s.slice(i+1));if(a in e){let c=e[a];Bo(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function T5(t){let e="";for(let n in t){const r=t[n];if(n=NF(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Bo(r)?r.map(s=>s&&Gb(s)):[r&&Gb(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function pB(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Bo(r)?r.map(o=>o==null?null:""+o):r==null?r:""+r)}return e}const mB=Symbol(""),M5=Symbol(""),Uk=Symbol(""),qk=Symbol(""),Yb=Symbol("");function od(){let t=[];function e(r){return t.push(r),()=>{const o=t.indexOf(r);o>-1&&t.splice(o,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Oi(t,e,n,r,o,s=i=>i()){const i=r&&(r.enterCallbacks[o]=r.enterCallbacks[o]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(Qc(4,{from:n,to:e})):f instanceof Error?l(f):QF(f)?l(Qc(2,{from:e,to:f})):(i&&r.enterCallbacks[o]===i&&typeof f=="function"&&i.push(f),a())},u=s(()=>t.call(r&&r.instances[o],e,n,c));let d=Promise.resolve(u);t.length<3&&(d=d.then(c)),d.catch(f=>l(f))})}function D0(t,e,n,r,o=s=>s()){const s=[];for(const i of t)for(const a in i.components){let l=i.components[a];if(!(e!=="beforeRouteEnter"&&!i.instances[a]))if(gB(l)){const u=(l.__vccOpts||l)[e];u&&s.push(Oi(u,n,r,i,a,o))}else{let c=l();s.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${i.path}"`));const d=kF(u)?u.default:u;i.components[a]=d;const h=(d.__vccOpts||d)[e];return h&&Oi(h,n,r,i,a,o)()}))}}return s}function gB(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function E5(t){const e=An(Uk),n=An(qk),r=Y(()=>{const l=x(t.to);return e.resolve(l)}),o=Y(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],d=n.matched;if(!u||!d.length)return-1;const f=d.findIndex(Xc.bind(null,u));if(f>-1)return f;const h=O5(l[c-2]);return c>1&&O5(u)===h&&d[d.length-1].path!==h?d.findIndex(Xc.bind(null,l[c-2])):f}),s=Y(()=>o.value>-1&&wB(n.params,r.value.params)),i=Y(()=>o.value>-1&&o.value===n.matched.length-1&&jI(n.params,r.value.params));function a(l={}){return bB(l)?e[x(t.replace)?"replace":"push"](x(t.to)).catch(Kd):Promise.resolve()}return{route:r,href:Y(()=>r.value.href),isActive:s,isExactActive:i,navigate:a}}const yB=Ie({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:E5,setup(t,{slots:e}){const n=tr(E5(t)),{options:r}=An(Uk),o=Y(()=>({[I5(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[I5(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&e.default(n);return t.custom?s:Lt("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},s)}}}),vB=yB;function bB(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function wB(t,e){for(const n in e){const r=e[n],o=t[n];if(typeof r=="string"){if(r!==o)return!1}else if(!Bo(o)||o.length!==r.length||r.some((s,i)=>s!==o[i]))return!1}return!0}function O5(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const I5=(t,e,n)=>t??e??n,kB=Ie({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=An(Yb),o=Y(()=>t.route||r.value),s=An(M5,0),i=Y(()=>{let c=x(s);const{matched:u}=o.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=Y(()=>o.value.matched[i.value]);ul(M5,Y(()=>i.value+1)),ul(mB,a),ul(Yb,o);const l=ae();return ot(()=>[l.value,a.value,t.name],([c,u,d],[f,h,p])=>{u&&(u.instances[d]=c,h&&h!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=h.leaveGuards),u.updateGuards.size||(u.updateGuards=h.updateGuards))),c&&u&&(!h||!Xc(u,h)||!f)&&(u.enterCallbacks[d]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=o.value,u=t.name,d=a.value,f=d&&d.components[u];if(!f)return A5(n.default,{Component:f,route:c});const h=d.props[u],p=h?h===!0?c.params:typeof h=="function"?h(c):h:null,v=Lt(f,Ct({},p,e,{onVnodeUnmounted:b=>{b.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return A5(n.default,{Component:v,route:c})||v}}});function A5(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const GI=kB;function xB(t){const e=aB(t.routes,t),n=t.parseQuery||hB,r=t.stringifyQuery||T5,o=t.history,s=od(),i=od(),a=od(),l=Tl(Oo);let c=Oo;sc&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=R0.bind(null,K=>""+K),d=R0.bind(null,RF),f=R0.bind(null,Df);function h(K,le){let G,Z;return UI(K)?(G=e.getRecordMatcher(K),Z=le):Z=K,e.addRoute(Z,G)}function p(K){const le=e.getRecordMatcher(K);le&&e.removeRoute(le)}function m(){return e.getRoutes().map(K=>K.record)}function v(K){return!!e.getRecordMatcher(K)}function b(K,le){if(le=Ct({},le||l.value),typeof K=="string"){const $=P0(n,K,le.path),U=e.resolve({path:$.path},le),X=o.createHref($.fullPath);return Ct($,U,{params:f(U.params),hash:Df($.hash),redirectedFrom:void 0,href:X})}let G;if(K.path!=null)G=Ct({},K,{path:P0(n,K.path,le.path).path});else{const $=Ct({},K.params);for(const U in $)$[U]==null&&delete $[U];G=Ct({},K,{params:d($)}),le.params=d(le.params)}const Z=e.resolve(G,le),ze=K.hash||"";Z.params=u(f(Z.params));const st=$F(r,Ct({},K,{hash:AF(ze),path:Z.path})),P=o.createHref(st);return Ct({fullPath:st,hash:ze,query:r===T5?pB(K.query):K.query||{}},Z,{redirectedFrom:void 0,href:P})}function w(K){return typeof K=="string"?P0(n,K,l.value.path):Ct({},K)}function k(K,le){if(c!==K)return Qc(8,{from:le,to:K})}function y(K){return M(K)}function C(K){return y(Ct(w(K),{replace:!0}))}function _(K){const le=K.matched[K.matched.length-1];if(le&&le.redirect){const{redirect:G}=le;let Z=typeof G=="function"?G(K):G;return typeof Z=="string"&&(Z=Z.includes("?")||Z.includes("#")?Z=w(Z):{path:Z},Z.params={}),Ct({query:K.query,hash:K.hash,params:Z.path!=null?{}:K.params},Z)}}function M(K,le){const G=c=b(K),Z=l.value,ze=K.state,st=K.force,P=K.replace===!0,$=_(G);if($)return M(Ct(w($),{state:typeof $=="object"?Ct({},ze,$.state):ze,force:st,replace:P}),le||G);const U=G;U.redirectedFrom=le;let X;return!st&&HF(r,Z,G)&&(X=Qc(16,{to:U,from:Z}),be(Z,Z,!0,!1)),(X?Promise.resolve(X):N(U,Z)).catch(J=>Ns(J)?Ns(J,2)?J:ve(J):z(J,U,Z)).then(J=>{if(J){if(Ns(J,2))return M(Ct({replace:P},w(J.to),{state:typeof J.to=="object"?Ct({},ze,J.to.state):ze,force:st}),le||U)}else J=I(U,Z,!0,P,ze);return R(U,Z,J),J})}function E(K,le){const G=k(K,le);return G?Promise.reject(G):Promise.resolve()}function O(K){const le=Re.values().next().value;return le&&typeof le.runWithContext=="function"?le.runWithContext(K):K()}function N(K,le){let G;const[Z,ze,st]=CB(K,le);G=D0(Z.reverse(),"beforeRouteLeave",K,le);for(const $ of Z)$.leaveGuards.forEach(U=>{G.push(Oi(U,K,le))});const P=E.bind(null,K,le);return G.push(P),je(G).then(()=>{G=[];for(const $ of s.list())G.push(Oi($,K,le));return G.push(P),je(G)}).then(()=>{G=D0(ze,"beforeRouteUpdate",K,le);for(const $ of ze)$.updateGuards.forEach(U=>{G.push(Oi(U,K,le))});return G.push(P),je(G)}).then(()=>{G=[];for(const $ of st)if($.beforeEnter)if(Bo($.beforeEnter))for(const U of $.beforeEnter)G.push(Oi(U,K,le));else G.push(Oi($.beforeEnter,K,le));return G.push(P),je(G)}).then(()=>(K.matched.forEach($=>$.enterCallbacks={}),G=D0(st,"beforeRouteEnter",K,le,O),G.push(P),je(G))).then(()=>{G=[];for(const $ of i.list())G.push(Oi($,K,le));return G.push(P),je(G)}).catch($=>Ns($,8)?$:Promise.reject($))}function R(K,le,G){a.list().forEach(Z=>O(()=>Z(K,le,G)))}function I(K,le,G,Z,ze){const st=k(K,le);if(st)return st;const P=le===Oo,$=sc?history.state:{};G&&(Z||P?o.replace(K.fullPath,Ct({scroll:P&&$&&$.scroll},ze)):o.push(K.fullPath,ze)),l.value=K,be(K,le,G,P),ve()}let j;function de(){j||(j=o.listen((K,le,G)=>{if(!Ke.listening)return;const Z=b(K),ze=_(Z);if(ze){M(Ct(ze,{replace:!0}),Z).catch(Kd);return}c=Z;const st=l.value;sc&&WF(v5(st.fullPath,G.delta),hy()),N(Z,st).catch(P=>Ns(P,12)?P:Ns(P,2)?(M(P.to,Z).then($=>{Ns($,20)&&!G.delta&&G.type===$f.pop&&o.go(-1,!1)}).catch(Kd),Promise.reject()):(G.delta&&o.go(-G.delta,!1),z(P,Z,st))).then(P=>{P=P||I(Z,st,!1),P&&(G.delta&&!Ns(P,8)?o.go(-G.delta,!1):G.type===$f.pop&&Ns(P,20)&&o.go(-1,!1)),R(Z,st,P)}).catch(Kd)}))}let te=od(),Q=od(),ie;function z(K,le,G){ve(K);const Z=Q.list();return Z.length?Z.forEach(ze=>ze(K,le,G)):console.error(K),Promise.reject(K)}function ge(){return ie&&l.value!==Oo?Promise.resolve():new Promise((K,le)=>{te.add([K,le])})}function ve(K){return ie||(ie=!K,de(),te.list().forEach(([le,G])=>K?G(K):le()),te.reset()),K}function be(K,le,G,Z){const{scrollBehavior:ze}=t;if(!sc||!ze)return Promise.resolve();const st=!G&&KF(v5(K.fullPath,0))||(Z||!G)&&history.state&&history.state.scroll||null;return cr().then(()=>ze(K,le,st)).then(P=>P&&qF(P)).catch(P=>z(P,K,le))}const Se=K=>o.go(K);let Ee;const Re=new Set,Ke={currentRoute:l,listening:!0,addRoute:h,removeRoute:p,clearRoutes:e.clearRoutes,hasRoute:v,getRoutes:m,resolve:b,options:t,push:y,replace:C,go:Se,back:()=>Se(-1),forward:()=>Se(1),beforeEach:s.add,beforeResolve:i.add,afterEach:a.add,onError:Q.add,isReady:ge,install(K){const le=this;K.component("RouterLink",vB),K.component("RouterView",GI),K.config.globalProperties.$router=le,Object.defineProperty(K.config.globalProperties,"$route",{enumerable:!0,get:()=>x(l)}),sc&&!Ee&&l.value===Oo&&(Ee=!0,y(o.location).catch(ze=>{}));const G={};for(const ze in Oo)Object.defineProperty(G,ze,{get:()=>l.value[ze],enumerable:!0});K.provide(Uk,le),K.provide(qk,js(G)),K.provide(Yb,l);const Z=K.unmount;Re.add(K),K.unmount=function(){Re.delete(K),Re.size<1&&(c=Oo,j&&j(),j=null,l.value=Oo,Ee=!1,ie=!1),Z()}}};function je(K){return K.reduce((le,G)=>le.then(()=>O(G)),Promise.resolve())}return Ke}function CB(t,e){const n=[],r=[],o=[],s=Math.max(e.matched.length,t.matched.length);for(let i=0;i<s;i++){const a=e.matched[i];a&&(t.matched.find(c=>Xc(c,a))?r.push(a):n.push(a));const l=t.matched[i];l&&(e.matched.find(c=>Xc(c,l))||o.push(l))}return[n,r,o]}function _B(t){return An(qk)}const SB=(t,e)=>e.path.replace(/(:\w+)\([^)]+\)/g,"$1").replace(/(:\w+)[?+*]/g,"$1").replace(/:\w+/g,n=>{var r;return((r=t.params[n.slice(1)])==null?void 0:r.toString())||""}),Xb=(t,e)=>{const n=t.route.matched.find(o=>{var s;return((s=o.components)==null?void 0:s.default)===t.Component.type}),r=e??(n==null?void 0:n.meta.key)??(n&&SB(t.route,n));return typeof r=="function"?r(t.route):r},TB=(t,e)=>({default:()=>t?Lt(DD,t===!0?{}:t,e):e});function Wk(t){return Array.isArray(t)?t:[t]}const MB="modulepreload",EB=function(t,e){return t[0]==="."?new URL(t,e).href:t},N5={},OB=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.all(n.map(l=>{if(l=EB(l,r),l in N5)return;N5[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(!!r)for(let h=s.length-1;h>=0;h--){const p=s[h];if(p.href===l&&(!c||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":MB,c||(f.as="script",f.crossOrigin=""),f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}return o.then(()=>e()).catch(s=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s,window.dispatchEvent(i),!i.defaultPrevented)throw s})},Vm=(...t)=>OB(...t).catch(e=>{const n=new Event("nuxt.preloadError");throw n.payload=e,window.dispatchEvent(n),e}),L5={middleware:["delay"]},$0=null,IB={},R5=[{name:"slug___en",path:"/:slug(.*)*",meta:L5||{},component:()=>Vm(()=>import("./CB6HEiPZ.js").then(t=>t.i),__vite__mapDeps([0,1,2]),import.meta.url).then(t=>t.default||t)},{name:"slug___ja",path:"/ja/:slug(.*)*",meta:L5||{},component:()=>Vm(()=>import("./CB6HEiPZ.js").then(t=>t.i),__vite__mapDeps([0,1,2]),import.meta.url).then(t=>t.default||t)},{name:$0==null?void 0:$0.name,path:"/sitemap.xml",component:IB}],JI=(t,e,n)=>(e=e===!0?{}:e,{default:()=>{var r;return e?Lt(t,e,n):(r=n.default)==null?void 0:r.call(n)}});function P5(t){const e=(t==null?void 0:t.meta.key)??t.path.replace(/(:\w+)\([^)]+\)/g,"$1").replace(/(:\w+)[?+*]/g,"$1").replace(/:\w+/g,n=>{var r;return((r=t.params[n.slice(1)])==null?void 0:r.toString())||""});return typeof e=="function"?e(t):e}function AB(t,e){return t===e||e===Oo?!1:P5(t)!==P5(e)?!0:!t.matched.every((r,o)=>{var s,i;return r.components&&r.components.default===((i=(s=e.matched[o])==null?void 0:s.components)==null?void 0:i.default)})}const NB={scrollBehavior(t,e,n){var c;const r=ut(),o=((c=nr().options)==null?void 0:c.scrollBehaviorType)??"auto";let s=n||void 0;const i=typeof t.meta.scrollToTop=="function"?t.meta.scrollToTop(t,e):t.meta.scrollToTop;if(!s&&e&&t&&i!==!1&&AB(t,e)&&(s={left:0,top:0}),t.path===e.path)return e.hash&&!t.hash?{left:0,top:0}:t.hash?{el:t.hash,top:D5(t.hash),behavior:o}:!1;const a=u=>!!(u.meta.pageTransition??Bb),l=a(e)&&a(t)?"page:transition:finish":"page:finish";return new Promise(u=>{r.hooks.hookOnce(l,async()=>{await new Promise(d=>setTimeout(d,0)),t.hash&&(s={el:t.hash,top:D5(t.hash),behavior:o}),u(s)})})}};function D5(t){try{const e=document.querySelector(t);if(e)return Number.parseFloat(getComputedStyle(e).scrollMarginTop)}catch{}return 0}const LB={hashMode:!1,scrollBehaviorType:"auto"},Ir={...LB,...NB},RB=async t=>{var l;let e,n;if(!((l=t.meta)!=null&&l.validate))return;const r=ut(),o=nr();if(([e,n]=ts(()=>Promise.resolve(t.meta.validate(t))),e=await e,n(),e)===!0)return;const i=Ch({statusCode:404,statusMessage:`Page Not Found: ${t.fullPath}`,data:{path:t.fullPath}}),a=o.beforeResolve(c=>{if(a(),c===t){const u=o.afterEach(async()=>{u(),await r.runWithContext(()=>xc(i)),window.history.pushState({},"",t.fullPath)});return!1}})},PB=async t=>{let e,n;const r=([e,n]=ts(()=>zk(t.path)),e=await e,n(),e);if(r.redirect)return _o(r.redirect,{acceptRelative:!0})?(window.location.href=r.redirect,!1):r.redirect},DB=[RB,PB],Jd={delay:()=>Vm(()=>import("./BsLsv_mg.js"),__vite__mapDeps([3,1]),import.meta.url)};function $B(t,e,n){const{pathname:r,search:o,hash:s}=e,i=t.indexOf("#");if(i>-1){const c=s.includes(t.slice(i))?t.slice(i).length:1;let u=s.slice(c);return u[0]!=="/"&&(u="/"+u),X_(u,"")}const a=X_(r,t),l=!n||Db(a,n,{trailingSlash:!0})?a:n;return l+(l.includes("?")?"":o)+s}const HB=ur({name:"nuxt:router",enforce:"pre",async setup(t){var v,b;let e,n,r=Yt().app.baseURL;Ir.hashMode&&!r.includes("#")&&(r+="#");const o=((v=Ir.history)==null?void 0:v.call(Ir,r))??(Ir.hashMode?XF(r):VI(r)),s=((b=Ir.routes)==null?void 0:b.call(Ir,R5))??R5;let i;const a=xB({...Ir,scrollBehavior:(w,k,y)=>{if(k===Oo){i=y;return}if(Ir.scrollBehavior){if(a.options.scrollBehavior=Ir.scrollBehavior,"scrollRestoration"in window.history){const C=a.beforeEach(()=>{C(),window.history.scrollRestoration="manual"})}return Ir.scrollBehavior(w,Oo,i||y)}},history:o,routes:s});"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto"),t.vueApp.use(a);const l=Tl(a.currentRoute.value);a.afterEach((w,k)=>{l.value=k}),Object.defineProperty(t.vueApp.config.globalProperties,"previousRoute",{get:()=>l.value});const c=$B(r,window.location,t.payload.path),u=Tl(a.currentRoute.value),d=()=>{u.value=a.currentRoute.value};t.hook("page:finish",d),a.afterEach((w,k)=>{var y,C,_,M;((C=(y=w.matched[0])==null?void 0:y.components)==null?void 0:C.default)===((M=(_=k.matched[0])==null?void 0:_.components)==null?void 0:M.default)&&d()});const f={};for(const w in u.value)Object.defineProperty(f,w,{get:()=>u.value[w]});t._route=js(f),t._middleware=t._middleware||{global:[],named:{}};const h=dy();a.afterEach(async(w,k,y)=>{delete t._processingMiddleware,!t.isHydrating&&h.value&&await t.runWithContext(SI),y&&await t.callHook("page:loading:end"),w.matched.length===0&&await t.runWithContext(()=>xc(Ub({statusCode:404,fatal:!1,statusMessage:`Page not found: ${w.fullPath}`,data:{path:w.fullPath}})))});try{[e,n]=ts(()=>a.isReady()),await e,n()}catch(w){[e,n]=ts(()=>t.runWithContext(()=>xc(w))),await e,n()}const p=c!==a.currentRoute.value.fullPath?a.resolve(c):a.currentRoute.value;d();const m=t.payload.state._layout;return a.beforeEach(async(w,k)=>{var y;await t.callHook("page:loading:start"),w.meta=tr(w.meta),t.isHydrating&&m&&!Wc(w.meta.layout)&&(w.meta.layout=m),t._processingMiddleware=!0;{const C=new Set([...DB,...t._middleware.global]);for(const _ of w.matched){const M=_.meta.middleware;if(M)for(const E of Wk(M))C.add(E)}{const _=await t.runWithContext(()=>zk(w.path));if(_.appMiddleware)for(const M in _.appMiddleware)_.appMiddleware[M]?C.add(M):C.delete(M)}for(const _ of C){const M=typeof _=="string"?t._middleware.named[_]||await((y=Jd[_])==null?void 0:y.call(Jd).then(O=>O.default||O)):_;if(!M)throw new Error(`Unknown route middleware: '${_}'.`);const E=await t.runWithContext(()=>M(w,k));if(!t.payload.serverRendered&&t.isHydrating&&(E===!1||E instanceof Error)){const O=E||Ub({statusCode:404,statusMessage:`Page Not Found: ${c}`});return await t.runWithContext(()=>xc(O)),!1}if(E!==!0&&(E||E===!1))return E}}}),a.onError(async()=>{delete t._processingMiddleware,await t.callHook("page:loading:end")}),t.hooks.hookOnce("app:created",async()=>{try{"name"in p&&(p.name=void 0),await a.replace({...p,force:!0}),a.options.scrollBehavior=Ir.scrollBehavior}catch(w){await t.runWithContext(()=>xc(w))}}),{provide:{router:a}}}}),FB="$s";function Kk(...t){const e=typeof t[t.length-1]=="string"?t.pop():void 0;typeof t[0]!="string"&&t.unshift(e);const[n,r]=t;if(!n||typeof n!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+n);if(r!==void 0&&typeof r!="function")throw new Error("[nuxt] [useState] init must be a function: "+r);const o=FB+n,s=ut(),i=kk(s.payload.state,o);if(i.value===void 0&&r){const a=r();if(Ot(a))return s.payload.state[o]=a,a;i.value=a}return i}const BB=ur({name:"nuxt-site-config:init",enforce:"pre",async setup(t){const e=Kk("site-config");let n={};return n=e.value||window.__NUXT_SITE_CONFIG__,{provide:{nuxtSiteConfig:n}}}}),Qb=globalThis.requestIdleCallback||(t=>{const e=Date.now(),n={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-e))};return setTimeout(()=>{t(n)},1)}),jB=globalThis.cancelIdleCallback||(t=>{clearTimeout(t)}),Gk=t=>{const e=ut();e.isHydrating?e.hooks.hookOnce("app:suspense:resolve",()=>{Qb(()=>t())}):Qb(()=>t())},zB=ur({name:"nuxt:payload",setup(t){nr().beforeResolve(async(e,n)=>{if(e.path===n.path)return;const r=await p5(e.path);r&&Object.assign(t.static.data,r.data)}),Gk(()=>{var e;t.hooks.hook("link:prefetch",async n=>{const{hostname:r}=new URL(n,window.location.href);r===window.location.hostname&&await p5(n)}),((e=navigator.connection)==null?void 0:e.effectiveType)!=="slow-2g"&&setTimeout(fy,1e3)})}}),VB=ur(t=>{let e;async function n(){const r=await fy();e&&clearTimeout(e),e=setTimeout(n,t5);try{const o=await $fetch(Bk("builds/latest.json")+`?${Date.now()}`);o.id!==r.id&&t.hooks.callHook("app:manifest:update",o)}catch{}}Gk(()=>{e=setTimeout(n,t5)})}),UB=ur({name:"nuxt:global-components"}),Bi={default:()=>Vm(()=>import("./buIs6uM7.js"),__vite__mapDeps([4,1]),import.meta.url).then(t=>t.default||t)},qB=ur({name:"nuxt:prefetch",setup(t){const e=nr();t.hooks.hook("app:mounted",()=>{e.beforeEach(async n=>{var o;const r=(o=n==null?void 0:n.meta)==null?void 0:o.layout;r&&typeof Bi[r]=="function"&&await Bi[r]()})}),t.hooks.hook("link:prefetch",n=>{if(_o(n))return;const r=e.resolve(n);if(!r)return;const o=r.meta.layout;let s=Wk(r.meta.middleware);s=s.filter(i=>typeof i=="string");for(const i of s)typeof Jd[i]=="function"&&Jd[i]();o&&typeof Bi[o]=="function"&&Bi[o]()})}});/*!
  * shared v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const Um=typeof window<"u",wa=(t,e=!1)=>e?Symbol.for(t):Symbol(t),WB=(t,e,n)=>KB({l:t,k:e,s:n}),KB=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),pn=t=>typeof t=="number"&&isFinite(t),GB=t=>XI(t)==="[object Date]",qm=t=>XI(t)==="[object RegExp]",py=t=>pt(t)&&Object.keys(t).length===0,Zt=Object.assign;let $5;const Jk=()=>$5||($5=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function H5(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const JB=Object.prototype.hasOwnProperty;function Wm(t,e){return JB.call(t,e)}const Qt=Array.isArray,_t=t=>typeof t=="function",ke=t=>typeof t=="string",Ft=t=>typeof t=="boolean",YB=t=>typeof t=="symbol",ct=t=>t!==null&&typeof t=="object",XB=t=>ct(t)&&_t(t.then)&&_t(t.catch),YI=Object.prototype.toString,XI=t=>YI.call(t),pt=t=>{if(!ct(t))return!1;const e=Object.getPrototypeOf(t);return e===null||e.constructor===Object},QB=t=>t==null?"":Qt(t)||pt(t)&&t.toString===YI?JSON.stringify(t,null,2):String(t);function Yk(t,e=""){return t.reduce((n,r,o)=>o===0?n+r:n+e+r,"")}function my(t){let e=t;return()=>++e}function ZB(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const mp=t=>!ct(t)||Qt(t);function dl(t,e){if(mp(t)||mp(e))throw new Error("Invalid value");const n=[{src:t,des:e}];for(;n.length;){const{src:r,des:o}=n.pop();Object.keys(r).forEach(s=>{mp(r[s])||mp(o[s])?o[s]=r[s]:n.push({src:r[s],des:o[s]})})}}/*!
  * message-compiler v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function ej(t,e,n){return{line:t,column:e,offset:n}}function Km(t,e,n){return{start:t,end:e}}const QI={USE_MODULO_SYNTAX:1,__EXTEND_POINT__:2};function tj(t,e,...n){const o={message:String(t),code:t};return e&&(o.location=e),o}const xt={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17};function gy(t,e,n={}){const{domain:r,messages:o,args:s}=n,i=t,a=new SyntaxError(String(i));return a.code=t,e&&(a.location=e),a.domain=r,a}function nj(t){throw t}const Ls=" ",rj="\r",Qn=`
`,oj="\u2028",sj="\u2029";function ij(t){const e=t;let n=0,r=1,o=1,s=0;const i=M=>e[M]===rj&&e[M+1]===Qn,a=M=>e[M]===Qn,l=M=>e[M]===sj,c=M=>e[M]===oj,u=M=>i(M)||a(M)||l(M)||c(M),d=()=>n,f=()=>r,h=()=>o,p=()=>s,m=M=>i(M)||l(M)||c(M)?Qn:e[M],v=()=>m(n),b=()=>m(n+s);function w(){return s=0,u(n)&&(r++,o=0),i(n)&&n++,n++,o++,e[n]}function k(){return i(n+s)&&s++,s++,e[n+s]}function y(){n=0,r=1,o=1,s=0}function C(M=0){s=M}function _(){const M=n+s;for(;M!==n;)w();s=0}return{index:d,line:f,column:h,peekOffset:p,charAt:m,currentChar:v,currentPeek:b,next:w,peek:k,reset:y,resetPeek:C,skipToPeek:_}}const gi=void 0,aj=".",F5="'",lj="tokenizer";function cj(t,e={}){const n=e.location!==!1,r=ij(t),o=()=>r.index(),s=()=>ej(r.line(),r.column(),r.index()),i=s(),a=o(),l={currentType:14,offset:a,startLoc:i,endLoc:i,lastType:14,lastOffset:a,lastStartLoc:i,lastEndLoc:i,braceNest:0,inLinked:!1,text:""},c=()=>l,{onError:u}=e;function d(A,L,F,...W){const ue=c();if(L.column+=F,L.offset+=F,u){const ne=n?Km(ue.startLoc,L):null,B=gy(A,ne,{domain:lj,args:W});u(B)}}function f(A,L,F){A.endLoc=s(),A.currentType=L;const W={type:L};return n&&(W.loc=Km(A.startLoc,A.endLoc)),F!=null&&(W.value=F),W}const h=A=>f(A,14);function p(A,L){return A.currentChar()===L?(A.next(),L):(d(xt.EXPECTED_TOKEN,s(),0,L),"")}function m(A){let L="";for(;A.currentPeek()===Ls||A.currentPeek()===Qn;)L+=A.currentPeek(),A.peek();return L}function v(A){const L=m(A);return A.skipToPeek(),L}function b(A){if(A===gi)return!1;const L=A.charCodeAt(0);return L>=97&&L<=122||L>=65&&L<=90||L===95}function w(A){if(A===gi)return!1;const L=A.charCodeAt(0);return L>=48&&L<=57}function k(A,L){const{currentType:F}=L;if(F!==2)return!1;m(A);const W=b(A.currentPeek());return A.resetPeek(),W}function y(A,L){const{currentType:F}=L;if(F!==2)return!1;m(A);const W=A.currentPeek()==="-"?A.peek():A.currentPeek(),ue=w(W);return A.resetPeek(),ue}function C(A,L){const{currentType:F}=L;if(F!==2)return!1;m(A);const W=A.currentPeek()===F5;return A.resetPeek(),W}function _(A,L){const{currentType:F}=L;if(F!==8)return!1;m(A);const W=A.currentPeek()===".";return A.resetPeek(),W}function M(A,L){const{currentType:F}=L;if(F!==9)return!1;m(A);const W=b(A.currentPeek());return A.resetPeek(),W}function E(A,L){const{currentType:F}=L;if(!(F===8||F===12))return!1;m(A);const W=A.currentPeek()===":";return A.resetPeek(),W}function O(A,L){const{currentType:F}=L;if(F!==10)return!1;const W=()=>{const ne=A.currentPeek();return ne==="{"?b(A.peek()):ne==="@"||ne==="%"||ne==="|"||ne===":"||ne==="."||ne===Ls||!ne?!1:ne===Qn?(A.peek(),W()):I(A,!1)},ue=W();return A.resetPeek(),ue}function N(A){m(A);const L=A.currentPeek()==="|";return A.resetPeek(),L}function R(A){const L=m(A),F=A.currentPeek()==="%"&&A.peek()==="{";return A.resetPeek(),{isModulo:F,hasSpace:L.length>0}}function I(A,L=!0){const F=(ue=!1,ne="",B=!1)=>{const q=A.currentPeek();return q==="{"?ne==="%"?!1:ue:q==="@"||!q?ne==="%"?!0:ue:q==="%"?(A.peek(),F(ue,"%",!0)):q==="|"?ne==="%"||B?!0:!(ne===Ls||ne===Qn):q===Ls?(A.peek(),F(!0,Ls,B)):q===Qn?(A.peek(),F(!0,Qn,B)):!0},W=F();return L&&A.resetPeek(),W}function j(A,L){const F=A.currentChar();return F===gi?gi:L(F)?(A.next(),F):null}function de(A){const L=A.charCodeAt(0);return L>=97&&L<=122||L>=65&&L<=90||L>=48&&L<=57||L===95||L===36}function te(A){return j(A,de)}function Q(A){const L=A.charCodeAt(0);return L>=97&&L<=122||L>=65&&L<=90||L>=48&&L<=57||L===95||L===36||L===45}function ie(A){return j(A,Q)}function z(A){const L=A.charCodeAt(0);return L>=48&&L<=57}function ge(A){return j(A,z)}function ve(A){const L=A.charCodeAt(0);return L>=48&&L<=57||L>=65&&L<=70||L>=97&&L<=102}function be(A){return j(A,ve)}function Se(A){let L="",F="";for(;L=ge(A);)F+=L;return F}function Ee(A){v(A);const L=A.currentChar();return L!=="%"&&d(xt.EXPECTED_TOKEN,s(),0,L),A.next(),"%"}function Re(A){let L="";for(;;){const F=A.currentChar();if(F==="{"||F==="}"||F==="@"||F==="|"||!F)break;if(F==="%")if(I(A))L+=F,A.next();else break;else if(F===Ls||F===Qn)if(I(A))L+=F,A.next();else{if(N(A))break;L+=F,A.next()}else L+=F,A.next()}return L}function Ke(A){v(A);let L="",F="";for(;L=ie(A);)F+=L;return A.currentChar()===gi&&d(xt.UNTERMINATED_CLOSING_BRACE,s(),0),F}function je(A){v(A);let L="";return A.currentChar()==="-"?(A.next(),L+=`-${Se(A)}`):L+=Se(A),A.currentChar()===gi&&d(xt.UNTERMINATED_CLOSING_BRACE,s(),0),L}function K(A){return A!==F5&&A!==Qn}function le(A){v(A),p(A,"'");let L="",F="";for(;L=j(A,K);)L==="\\"?F+=G(A):F+=L;const W=A.currentChar();return W===Qn||W===gi?(d(xt.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,s(),0),W===Qn&&(A.next(),p(A,"'")),F):(p(A,"'"),F)}function G(A){const L=A.currentChar();switch(L){case"\\":case"'":return A.next(),`\\${L}`;case"u":return Z(A,L,4);case"U":return Z(A,L,6);default:return d(xt.UNKNOWN_ESCAPE_SEQUENCE,s(),0,L),""}}function Z(A,L,F){p(A,L);let W="";for(let ue=0;ue<F;ue++){const ne=be(A);if(!ne){d(xt.INVALID_UNICODE_ESCAPE_SEQUENCE,s(),0,`\\${L}${W}${A.currentChar()}`);break}W+=ne}return`\\${L}${W}`}function ze(A){return A!=="{"&&A!=="}"&&A!==Ls&&A!==Qn}function st(A){v(A);let L="",F="";for(;L=j(A,ze);)F+=L;return F}function P(A){let L="",F="";for(;L=te(A);)F+=L;return F}function $(A){const L=F=>{const W=A.currentChar();return W==="{"||W==="%"||W==="@"||W==="|"||W==="("||W===")"||!W||W===Ls?F:(F+=W,A.next(),L(F))};return L("")}function U(A){v(A);const L=p(A,"|");return v(A),L}function X(A,L){let F=null;switch(A.currentChar()){case"{":return L.braceNest>=1&&d(xt.NOT_ALLOW_NEST_PLACEHOLDER,s(),0),A.next(),F=f(L,2,"{"),v(A),L.braceNest++,F;case"}":return L.braceNest>0&&L.currentType===2&&d(xt.EMPTY_PLACEHOLDER,s(),0),A.next(),F=f(L,3,"}"),L.braceNest--,L.braceNest>0&&v(A),L.inLinked&&L.braceNest===0&&(L.inLinked=!1),F;case"@":return L.braceNest>0&&d(xt.UNTERMINATED_CLOSING_BRACE,s(),0),F=J(A,L)||h(L),L.braceNest=0,F;default:{let ue=!0,ne=!0,B=!0;if(N(A))return L.braceNest>0&&d(xt.UNTERMINATED_CLOSING_BRACE,s(),0),F=f(L,1,U(A)),L.braceNest=0,L.inLinked=!1,F;if(L.braceNest>0&&(L.currentType===5||L.currentType===6||L.currentType===7))return d(xt.UNTERMINATED_CLOSING_BRACE,s(),0),L.braceNest=0,se(A,L);if(ue=k(A,L))return F=f(L,5,Ke(A)),v(A),F;if(ne=y(A,L))return F=f(L,6,je(A)),v(A),F;if(B=C(A,L))return F=f(L,7,le(A)),v(A),F;if(!ue&&!ne&&!B)return F=f(L,13,st(A)),d(xt.INVALID_TOKEN_IN_PLACEHOLDER,s(),0,F.value),v(A),F;break}}return F}function J(A,L){const{currentType:F}=L;let W=null;const ue=A.currentChar();switch((F===8||F===9||F===12||F===10)&&(ue===Qn||ue===Ls)&&d(xt.INVALID_LINKED_FORMAT,s(),0),ue){case"@":return A.next(),W=f(L,8,"@"),L.inLinked=!0,W;case".":return v(A),A.next(),f(L,9,".");case":":return v(A),A.next(),f(L,10,":");default:return N(A)?(W=f(L,1,U(A)),L.braceNest=0,L.inLinked=!1,W):_(A,L)||E(A,L)?(v(A),J(A,L)):M(A,L)?(v(A),f(L,12,P(A))):O(A,L)?(v(A),ue==="{"?X(A,L)||W:f(L,11,$(A))):(F===8&&d(xt.INVALID_LINKED_FORMAT,s(),0),L.braceNest=0,L.inLinked=!1,se(A,L))}}function se(A,L){let F={type:14};if(L.braceNest>0)return X(A,L)||h(L);if(L.inLinked)return J(A,L)||h(L);switch(A.currentChar()){case"{":return X(A,L)||h(L);case"}":return d(xt.UNBALANCED_CLOSING_BRACE,s(),0),A.next(),f(L,3,"}");case"@":return J(A,L)||h(L);default:{if(N(A))return F=f(L,1,U(A)),L.braceNest=0,L.inLinked=!1,F;const{isModulo:ue,hasSpace:ne}=R(A);if(ue)return ne?f(L,0,Re(A)):f(L,4,Ee(A));if(I(A))return f(L,0,Re(A));break}}return F}function fe(){const{currentType:A,offset:L,startLoc:F,endLoc:W}=l;return l.lastType=A,l.lastOffset=L,l.lastStartLoc=F,l.lastEndLoc=W,l.offset=o(),l.startLoc=s(),r.currentChar()===gi?f(l,14):se(r,l)}return{nextToken:fe,currentOffset:o,currentPosition:s,context:c}}const uj="parser",dj=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function fj(t,e,n){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const r=parseInt(e||n,16);return r<=55295||r>=57344?String.fromCodePoint(r):""}}}function hj(t={}){const e=t.location!==!1,{onError:n,onWarn:r}=t;function o(k,y,C,_,...M){const E=k.currentPosition();if(E.offset+=_,E.column+=_,n){const O=e?Km(C,E):null,N=gy(y,O,{domain:uj,args:M});n(N)}}function s(k,y,C,_,...M){const E=k.currentPosition();if(E.offset+=_,E.column+=_,r){const O=e?Km(C,E):null;r(tj(y,O,M))}}function i(k,y,C){const _={type:k};return e&&(_.start=y,_.end=y,_.loc={start:C,end:C}),_}function a(k,y,C,_){e&&(k.end=y,k.loc&&(k.loc.end=C))}function l(k,y){const C=k.context(),_=i(3,C.offset,C.startLoc);return _.value=y,a(_,k.currentOffset(),k.currentPosition()),_}function c(k,y){const C=k.context(),{lastOffset:_,lastStartLoc:M}=C,E=i(5,_,M);return E.index=parseInt(y,10),k.nextToken(),a(E,k.currentOffset(),k.currentPosition()),E}function u(k,y,C){const _=k.context(),{lastOffset:M,lastStartLoc:E}=_,O=i(4,M,E);return O.key=y,C===!0&&(O.modulo=!0),k.nextToken(),a(O,k.currentOffset(),k.currentPosition()),O}function d(k,y){const C=k.context(),{lastOffset:_,lastStartLoc:M}=C,E=i(9,_,M);return E.value=y.replace(dj,fj),k.nextToken(),a(E,k.currentOffset(),k.currentPosition()),E}function f(k){const y=k.nextToken(),C=k.context(),{lastOffset:_,lastStartLoc:M}=C,E=i(8,_,M);return y.type!==12?(o(k,xt.UNEXPECTED_EMPTY_LINKED_MODIFIER,C.lastStartLoc,0),E.value="",a(E,_,M),{nextConsumeToken:y,node:E}):(y.value==null&&o(k,xt.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,To(y)),E.value=y.value||"",a(E,k.currentOffset(),k.currentPosition()),{node:E})}function h(k,y){const C=k.context(),_=i(7,C.offset,C.startLoc);return _.value=y,a(_,k.currentOffset(),k.currentPosition()),_}function p(k){const y=k.context(),C=i(6,y.offset,y.startLoc);let _=k.nextToken();if(_.type===9){const M=f(k);C.modifier=M.node,_=M.nextConsumeToken||k.nextToken()}switch(_.type!==10&&o(k,xt.UNEXPECTED_LEXICAL_ANALYSIS,y.lastStartLoc,0,To(_)),_=k.nextToken(),_.type===2&&(_=k.nextToken()),_.type){case 11:_.value==null&&o(k,xt.UNEXPECTED_LEXICAL_ANALYSIS,y.lastStartLoc,0,To(_)),C.key=h(k,_.value||"");break;case 5:_.value==null&&o(k,xt.UNEXPECTED_LEXICAL_ANALYSIS,y.lastStartLoc,0,To(_)),C.key=u(k,_.value||"");break;case 6:_.value==null&&o(k,xt.UNEXPECTED_LEXICAL_ANALYSIS,y.lastStartLoc,0,To(_)),C.key=c(k,_.value||"");break;case 7:_.value==null&&o(k,xt.UNEXPECTED_LEXICAL_ANALYSIS,y.lastStartLoc,0,To(_)),C.key=d(k,_.value||"");break;default:{o(k,xt.UNEXPECTED_EMPTY_LINKED_KEY,y.lastStartLoc,0);const M=k.context(),E=i(7,M.offset,M.startLoc);return E.value="",a(E,M.offset,M.startLoc),C.key=E,a(C,M.offset,M.startLoc),{nextConsumeToken:_,node:C}}}return a(C,k.currentOffset(),k.currentPosition()),{node:C}}function m(k){const y=k.context(),C=y.currentType===1?k.currentOffset():y.offset,_=y.currentType===1?y.endLoc:y.startLoc,M=i(2,C,_);M.items=[];let E=null,O=null;do{const I=E||k.nextToken();switch(E=null,I.type){case 0:I.value==null&&o(k,xt.UNEXPECTED_LEXICAL_ANALYSIS,y.lastStartLoc,0,To(I)),M.items.push(l(k,I.value||""));break;case 6:I.value==null&&o(k,xt.UNEXPECTED_LEXICAL_ANALYSIS,y.lastStartLoc,0,To(I)),M.items.push(c(k,I.value||""));break;case 4:O=!0;break;case 5:I.value==null&&o(k,xt.UNEXPECTED_LEXICAL_ANALYSIS,y.lastStartLoc,0,To(I)),M.items.push(u(k,I.value||"",!!O)),O&&(s(k,QI.USE_MODULO_SYNTAX,y.lastStartLoc,0,To(I)),O=null);break;case 7:I.value==null&&o(k,xt.UNEXPECTED_LEXICAL_ANALYSIS,y.lastStartLoc,0,To(I)),M.items.push(d(k,I.value||""));break;case 8:{const j=p(k);M.items.push(j.node),E=j.nextConsumeToken||null;break}}}while(y.currentType!==14&&y.currentType!==1);const N=y.currentType===1?y.lastOffset:k.currentOffset(),R=y.currentType===1?y.lastEndLoc:k.currentPosition();return a(M,N,R),M}function v(k,y,C,_){const M=k.context();let E=_.items.length===0;const O=i(1,y,C);O.cases=[],O.cases.push(_);do{const N=m(k);E||(E=N.items.length===0),O.cases.push(N)}while(M.currentType!==14);return E&&o(k,xt.MUST_HAVE_MESSAGES_IN_PLURAL,C,0),a(O,k.currentOffset(),k.currentPosition()),O}function b(k){const y=k.context(),{offset:C,startLoc:_}=y,M=m(k);return y.currentType===14?M:v(k,C,_,M)}function w(k){const y=cj(k,Zt({},t)),C=y.context(),_=i(0,C.offset,C.startLoc);return e&&_.loc&&(_.loc.source=k),_.body=b(y),t.onCacheKey&&(_.cacheKey=t.onCacheKey(k)),C.currentType!==14&&o(y,xt.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,k[C.offset]||""),a(_,y.currentOffset(),y.currentPosition()),_}return{parse:w}}function To(t){if(t.type===14)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"":e}function pj(t,e={}){const n={ast:t,helpers:new Set};return{context:()=>n,helper:s=>(n.helpers.add(s),s)}}function B5(t,e){for(let n=0;n<t.length;n++)Xk(t[n],e)}function Xk(t,e){switch(t.type){case 1:B5(t.cases,e),e.helper("plural");break;case 2:B5(t.items,e);break;case 6:{Xk(t.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function mj(t,e={}){const n=pj(t);n.helper("normalize"),t.body&&Xk(t.body,n);const r=n.context();t.helpers=Array.from(r.helpers)}function gj(t){const e=t.body;return e.type===2?j5(e):e.cases.forEach(n=>j5(n)),t}function j5(t){if(t.items.length===1){const e=t.items[0];(e.type===3||e.type===9)&&(t.static=e.value,delete e.value)}else{const e=[];for(let n=0;n<t.items.length;n++){const r=t.items[n];if(!(r.type===3||r.type===9)||r.value==null)break;e.push(r.value)}if(e.length===t.items.length){t.static=Yk(e);for(let n=0;n<t.items.length;n++){const r=t.items[n];(r.type===3||r.type===9)&&delete r.value}}}}function ic(t){switch(t.t=t.type,t.type){case 0:{const e=t;ic(e.body),e.b=e.body,delete e.body;break}case 1:{const e=t,n=e.cases;for(let r=0;r<n.length;r++)ic(n[r]);e.c=n,delete e.cases;break}case 2:{const e=t,n=e.items;for(let r=0;r<n.length;r++)ic(n[r]);e.i=n,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=t;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=t;ic(e.key),e.k=e.key,delete e.key,e.modifier&&(ic(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=t;e.i=e.index,delete e.index;break}case 4:{const e=t;e.k=e.key,delete e.key;break}}delete t.type}function yj(t,e){const{sourceMap:n,filename:r,breakLineCode:o,needIndent:s}=e,i=e.location!==!1,a={filename:r,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:o,needIndent:s,indentLevel:0};i&&t.loc&&(a.source=t.loc.source);const l=()=>a;function c(v,b){a.code+=v}function u(v,b=!0){const w=b?o:"";c(s?w+"  ".repeat(v):w)}function d(v=!0){const b=++a.indentLevel;v&&u(b)}function f(v=!0){const b=--a.indentLevel;v&&u(b)}function h(){u(a.indentLevel)}return{context:l,push:c,indent:d,deindent:f,newline:h,helper:v=>`_${v}`,needIndent:()=>a.needIndent}}function vj(t,e){const{helper:n}=t;t.push(`${n("linked")}(`),Zc(t,e.key),e.modifier?(t.push(", "),Zc(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function bj(t,e){const{helper:n,needIndent:r}=t;t.push(`${n("normalize")}([`),t.indent(r());const o=e.items.length;for(let s=0;s<o&&(Zc(t,e.items[s]),s!==o-1);s++)t.push(", ");t.deindent(r()),t.push("])")}function wj(t,e){const{helper:n,needIndent:r}=t;if(e.cases.length>1){t.push(`${n("plural")}([`),t.indent(r());const o=e.cases.length;for(let s=0;s<o&&(Zc(t,e.cases[s]),s!==o-1);s++)t.push(", ");t.deindent(r()),t.push("])")}}function kj(t,e){e.body?Zc(t,e.body):t.push("null")}function Zc(t,e){const{helper:n}=t;switch(e.type){case 0:kj(t,e);break;case 1:wj(t,e);break;case 2:bj(t,e);break;case 6:vj(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${n("interpolate")}(${n("list")}(${e.index}))`,e);break;case 4:t.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break}}const xj=(t,e={})=>{const n=ke(e.mode)?e.mode:"normal",r=ke(e.filename)?e.filename:"message.intl",o=!!e.sourceMap,s=e.breakLineCode!=null?e.breakLineCode:n==="arrow"?";":`
`,i=e.needIndent?e.needIndent:n!=="arrow",a=t.helpers||[],l=yj(t,{mode:n,filename:r,sourceMap:o,breakLineCode:s,needIndent:i});l.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(i),a.length>0&&(l.push(`const { ${Yk(a.map(d=>`${d}: _${d}`),", ")} } = ctx`),l.newline()),l.push("return "),Zc(l,t),l.deindent(i),l.push("}"),delete t.helpers;const{code:c,map:u}=l.context();return{ast:t,code:c,map:u?u.toJSON():void 0}};function Cj(t,e={}){const n=Zt({},e),r=!!n.jit,o=!!n.minify,s=n.optimize==null?!0:n.optimize,a=hj(n).parse(t);return r?(s&&gj(a),o&&ic(a),{ast:a,code:""}):(mj(a,n),xj(a,n))}/*!
  * core-base v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function _j(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Jk().__INTLIFY_PROD_DEVTOOLS__=!1)}const ka=[];ka[0]={w:[0],i:[3,0],"[":[4],o:[7]};ka[1]={w:[1],".":[2],"[":[4],o:[7]};ka[2]={w:[2],i:[3,0],0:[3,0]};ka[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};ka[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};ka[5]={"'":[4,0],o:8,l:[5,0]};ka[6]={'"':[4,0],o:8,l:[6,0]};const Sj=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function Tj(t){return Sj.test(t)}function Mj(t){const e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e===n&&(e===34||e===39)?t.slice(1,-1):t}function Ej(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function Oj(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:Tj(e)?Mj(e):"*"+e}function Ij(t){const e=[];let n=-1,r=0,o=0,s,i,a,l,c,u,d;const f=[];f[0]=()=>{i===void 0?i=a:i+=a},f[1]=()=>{i!==void 0&&(e.push(i),i=void 0)},f[2]=()=>{f[0](),o++},f[3]=()=>{if(o>0)o--,r=4,f[0]();else{if(o=0,i===void 0||(i=Oj(i),i===!1))return!1;f[1]()}};function h(){const p=t[n+1];if(r===5&&p==="'"||r===6&&p==='"')return n++,a="\\"+p,f[0](),!0}for(;r!==null;)if(n++,s=t[n],!(s==="\\"&&h())){if(l=Ej(s),d=ka[r],c=d[l]||d.l||8,c===8||(r=c[0],c[1]!==void 0&&(u=f[c[1]],u&&(a=s,u()===!1))))return;if(r===7)return e}}const z5=new Map;function Aj(t,e){return ct(t)?t[e]:null}function Nj(t,e){if(!ct(t))return null;let n=z5.get(e);if(n||(n=Ij(e),n&&z5.set(e,n)),!n)return null;const r=n.length;let o=t,s=0;for(;s<r;){const i=o[n[s]];if(i===void 0||_t(o))return null;o=i,s++}return o}const Lj=t=>t,Rj=t=>"",Pj="text",Dj=t=>t.length===0?"":Yk(t),$j=QB;function V5(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function Hj(t){const e=pn(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(pn(t.named.count)||pn(t.named.n))?pn(t.named.count)?t.named.count:pn(t.named.n)?t.named.n:e:e}function Fj(t,e){e.count||(e.count=t),e.n||(e.n=t)}function Bj(t={}){const e=t.locale,n=Hj(t),r=ct(t.pluralRules)&&ke(e)&&_t(t.pluralRules[e])?t.pluralRules[e]:V5,o=ct(t.pluralRules)&&ke(e)&&_t(t.pluralRules[e])?V5:void 0,s=b=>b[r(n,b.length,o)],i=t.list||[],a=b=>i[b],l=t.named||{};pn(t.pluralIndex)&&Fj(n,l);const c=b=>l[b];function u(b){const w=_t(t.messages)?t.messages(b):ct(t.messages)?t.messages[b]:!1;return w||(t.parent?t.parent.message(b):Rj)}const d=b=>t.modifiers?t.modifiers[b]:Lj,f=pt(t.processor)&&_t(t.processor.normalize)?t.processor.normalize:Dj,h=pt(t.processor)&&_t(t.processor.interpolate)?t.processor.interpolate:$j,p=pt(t.processor)&&ke(t.processor.type)?t.processor.type:Pj,v={list:a,named:c,plural:s,linked:(b,...w)=>{const[k,y]=w;let C="text",_="";w.length===1?ct(k)?(_=k.modifier||_,C=k.type||C):ke(k)&&(_=k||_):w.length===2&&(ke(k)&&(_=k||_),ke(y)&&(C=y||C));const M=u(b)(v),E=C==="vnode"&&Qt(M)&&_?M[0]:M;return _?d(_)(E,C):E},message:u,type:p,interpolate:h,normalize:f,values:Zt({},i,l)};return v}let Hf=null;function jj(t){Hf=t}function zj(t,e,n){Hf&&Hf.emit("i18n:init",{timestamp:Date.now(),i18n:t,version:e,meta:n})}const Vj=Uj("function:translate");function Uj(t){return e=>Hf&&Hf.emit(t,e)}const ZI=QI.__EXTEND_POINT__,$a=my(ZI),qj={NOT_FOUND_KEY:ZI,FALLBACK_TO_TRANSLATE:$a(),CANNOT_FORMAT_NUMBER:$a(),FALLBACK_TO_NUMBER_FORMAT:$a(),CANNOT_FORMAT_DATE:$a(),FALLBACK_TO_DATE_FORMAT:$a(),EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:$a(),__EXTEND_POINT__:$a()},e3=xt.__EXTEND_POINT__,Ha=my(e3),ss={INVALID_ARGUMENT:e3,INVALID_DATE_ARGUMENT:Ha(),INVALID_ISO_DATE_ARGUMENT:Ha(),NOT_SUPPORT_NON_STRING_MESSAGE:Ha(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:Ha(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:Ha(),NOT_SUPPORT_LOCALE_TYPE:Ha(),__EXTEND_POINT__:Ha()};function Vs(t){return gy(t,null,void 0)}function Qk(t,e){return e.locale!=null?U5(e.locale):U5(t.locale)}let H0;function U5(t){if(ke(t))return t;if(_t(t)){if(t.resolvedOnce&&H0!=null)return H0;if(t.constructor.name==="Function"){const e=t();if(XB(e))throw Vs(ss.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return H0=e}else throw Vs(ss.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw Vs(ss.NOT_SUPPORT_LOCALE_TYPE)}function Wj(t,e,n){return[...new Set([n,...Qt(e)?e:ct(e)?Object.keys(e):ke(e)?[e]:[n]])]}function t3(t,e,n){const r=ke(n)?n:Gm,o=t;o.__localeChainCache||(o.__localeChainCache=new Map);let s=o.__localeChainCache.get(r);if(!s){s=[];let i=[n];for(;Qt(i);)i=q5(s,i,e);const a=Qt(e)||!pt(e)?e:e.default?e.default:null;i=ke(a)?[a]:a,Qt(i)&&q5(s,i,!1),o.__localeChainCache.set(r,s)}return s}function q5(t,e,n){let r=!0;for(let o=0;o<e.length&&Ft(r);o++){const s=e[o];ke(s)&&(r=Kj(t,e[o],n))}return r}function Kj(t,e,n){let r;const o=e.split("-");do{const s=o.join("-");r=Gj(t,s,n),o.splice(-1,1)}while(o.length&&r===!0);return r}function Gj(t,e,n){let r=!1;if(!t.includes(e)&&(r=!0,e)){r=e[e.length-1]!=="!";const o=e.replace(/!/g,"");t.push(o),(Qt(n)||pt(n))&&n[o]&&(r=n[o])}return r}const Jj="9.13.1",yy=-1,Gm="en-US",W5="",K5=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function Yj(){return{upper:(t,e)=>e==="text"&&ke(t)?t.toUpperCase():e==="vnode"&&ct(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&ke(t)?t.toLowerCase():e==="vnode"&&ct(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&ke(t)?K5(t):e==="vnode"&&ct(t)&&"__v_isVNode"in t?K5(t.children):t}}let n3;function Xj(t){n3=t}let r3;function Qj(t){r3=t}let o3;function Zj(t){o3=t}let s3=null;const ez=t=>{s3=t},tz=()=>s3;let i3=null;const G5=t=>{i3=t},nz=()=>i3;let J5=0;function rz(t={}){const e=_t(t.onWarn)?t.onWarn:ZB,n=ke(t.version)?t.version:Jj,r=ke(t.locale)||_t(t.locale)?t.locale:Gm,o=_t(r)?Gm:r,s=Qt(t.fallbackLocale)||pt(t.fallbackLocale)||ke(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:o,i=pt(t.messages)?t.messages:{[o]:{}},a=pt(t.datetimeFormats)?t.datetimeFormats:{[o]:{}},l=pt(t.numberFormats)?t.numberFormats:{[o]:{}},c=Zt({},t.modifiers||{},Yj()),u=t.pluralRules||{},d=_t(t.missing)?t.missing:null,f=Ft(t.missingWarn)||qm(t.missingWarn)?t.missingWarn:!0,h=Ft(t.fallbackWarn)||qm(t.fallbackWarn)?t.fallbackWarn:!0,p=!!t.fallbackFormat,m=!!t.unresolving,v=_t(t.postTranslation)?t.postTranslation:null,b=pt(t.processor)?t.processor:null,w=Ft(t.warnHtmlMessage)?t.warnHtmlMessage:!0,k=!!t.escapeParameter,y=_t(t.messageCompiler)?t.messageCompiler:n3,C=_t(t.messageResolver)?t.messageResolver:r3||Aj,_=_t(t.localeFallbacker)?t.localeFallbacker:o3||Wj,M=ct(t.fallbackContext)?t.fallbackContext:void 0,E=t,O=ct(E.__datetimeFormatters)?E.__datetimeFormatters:new Map,N=ct(E.__numberFormatters)?E.__numberFormatters:new Map,R=ct(E.__meta)?E.__meta:{};J5++;const I={version:n,cid:J5,locale:r,fallbackLocale:s,messages:i,modifiers:c,pluralRules:u,missing:d,missingWarn:f,fallbackWarn:h,fallbackFormat:p,unresolving:m,postTranslation:v,processor:b,warnHtmlMessage:w,escapeParameter:k,messageCompiler:y,messageResolver:C,localeFallbacker:_,fallbackContext:M,onWarn:e,__meta:R};return I.datetimeFormats=a,I.numberFormats=l,I.__datetimeFormatters=O,I.__numberFormatters=N,__INTLIFY_PROD_DEVTOOLS__&&zj(I,n,R),I}function Zk(t,e,n,r,o){const{missing:s,onWarn:i}=t;if(s!==null){const a=s(t,n,e,o);return ke(a)?a:e}else return e}function sd(t,e,n){const r=t;r.__localeChainCache=new Map,t.localeFallbacker(t,n,e)}function oz(t,e){return t===e?!1:t.split("-")[0]===e.split("-")[0]}function sz(t,e){const n=e.indexOf(t);if(n===-1)return!1;for(let r=n+1;r<e.length;r++)if(oz(t,e[r]))return!0;return!1}function F0(t){return n=>iz(n,t)}function iz(t,e){const n=e.b||e.body;if((n.t||n.type)===1){const r=n,o=r.c||r.cases;return t.plural(o.reduce((s,i)=>[...s,Y5(t,i)],[]))}else return Y5(t,n)}function Y5(t,e){const n=e.s||e.static;if(n)return t.type==="text"?n:t.normalize([n]);{const r=(e.i||e.items).reduce((o,s)=>[...o,Zb(t,s)],[]);return t.normalize(r)}}function Zb(t,e){const n=e.t||e.type;switch(n){case 3:{const r=e;return r.v||r.value}case 9:{const r=e;return r.v||r.value}case 4:{const r=e;return t.interpolate(t.named(r.k||r.key))}case 5:{const r=e;return t.interpolate(t.list(r.i!=null?r.i:r.index))}case 6:{const r=e,o=r.m||r.modifier;return t.linked(Zb(t,r.k||r.key),o?Zb(t,o):void 0,t.type)}case 7:{const r=e;return r.v||r.value}case 8:{const r=e;return r.v||r.value}default:throw new Error(`unhandled node type on format message part: ${n}`)}}const az=t=>t;let gp=Object.create(null);const eu=t=>ct(t)&&(t.t===0||t.type===0)&&("b"in t||"body"in t);function lz(t,e={}){let n=!1;const r=e.onError||nj;return e.onError=o=>{n=!0,r(o)},{...Cj(t,e),detectError:n}}function cz(t,e){if(ke(t)){Ft(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||az)(t),o=gp[r];if(o)return o;const{ast:s,detectError:i}=lz(t,{...e,location:!1,jit:!0}),a=F0(s);return i?a:gp[r]=a}else{const n=t.cacheKey;if(n){const r=gp[n];return r||(gp[n]=F0(t))}else return F0(t)}}const X5=()=>"",Qr=t=>_t(t);function Q5(t,...e){const{fallbackFormat:n,postTranslation:r,unresolving:o,messageCompiler:s,fallbackLocale:i,messages:a}=t,[l,c]=e1(...e),u=Ft(c.missingWarn)?c.missingWarn:t.missingWarn,d=Ft(c.fallbackWarn)?c.fallbackWarn:t.fallbackWarn,f=Ft(c.escapeParameter)?c.escapeParameter:t.escapeParameter,h=!!c.resolvedMessage,p=ke(c.default)||Ft(c.default)?Ft(c.default)?s?l:()=>l:c.default:n?s?l:()=>l:"",m=n||p!=="",v=Qk(t,c);f&&uz(c);let[b,w,k]=h?[l,v,a[v]||{}]:a3(t,l,v,i,d,u),y=b,C=l;if(!h&&!(ke(y)||eu(y)||Qr(y))&&m&&(y=p,C=y),!h&&(!(ke(y)||eu(y)||Qr(y))||!ke(w)))return o?yy:l;let _=!1;const M=()=>{_=!0},E=Qr(y)?y:l3(t,l,w,y,C,M);if(_)return y;const O=hz(t,w,k,c),N=Bj(O),R=dz(t,E,N),I=r?r(R,l):R;if(__INTLIFY_PROD_DEVTOOLS__){const j={timestamp:Date.now(),key:ke(l)?l:Qr(y)?y.key:"",locale:w||(Qr(y)?y.locale:""),format:ke(y)?y:Qr(y)?y.source:"",message:I};j.meta=Zt({},t.__meta,tz()||{}),Vj(j)}return I}function uz(t){Qt(t.list)?t.list=t.list.map(e=>ke(e)?H5(e):e):ct(t.named)&&Object.keys(t.named).forEach(e=>{ke(t.named[e])&&(t.named[e]=H5(t.named[e]))})}function a3(t,e,n,r,o,s){const{messages:i,onWarn:a,messageResolver:l,localeFallbacker:c}=t,u=c(t,r,n);let d={},f,h=null;const p="translate";for(let m=0;m<u.length&&(f=u[m],d=i[f]||{},(h=l(d,e))===null&&(h=d[e]),!(ke(h)||eu(h)||Qr(h)));m++)if(!sz(f,u)){const v=Zk(t,e,f,s,p);v!==e&&(h=v)}return[h,f,d]}function l3(t,e,n,r,o,s){const{messageCompiler:i,warnHtmlMessage:a}=t;if(Qr(r)){const c=r;return c.locale=c.locale||n,c.key=c.key||e,c}if(i==null){const c=()=>r;return c.locale=n,c.key=e,c}const l=i(r,fz(t,n,o,r,a,s));return l.locale=n,l.key=e,l.source=r,l}function dz(t,e,n){return e(n)}function e1(...t){const[e,n,r]=t,o={};if(!ke(e)&&!pn(e)&&!Qr(e)&&!eu(e))throw Vs(ss.INVALID_ARGUMENT);const s=pn(e)?String(e):(Qr(e),e);return pn(n)?o.plural=n:ke(n)?o.default=n:pt(n)&&!py(n)?o.named=n:Qt(n)&&(o.list=n),pn(r)?o.plural=r:ke(r)?o.default=r:pt(r)&&Zt(o,r),[s,o]}function fz(t,e,n,r,o,s){return{locale:e,key:n,warnHtmlMessage:o,onError:i=>{throw s&&s(i),i},onCacheKey:i=>WB(e,n,i)}}function hz(t,e,n,r){const{modifiers:o,pluralRules:s,messageResolver:i,fallbackLocale:a,fallbackWarn:l,missingWarn:c,fallbackContext:u}=t,f={locale:e,modifiers:o,pluralRules:s,messages:h=>{let p=i(n,h);if(p==null&&u){const[,,m]=a3(u,h,e,a,l,c);p=i(m,h)}if(ke(p)||eu(p)){let m=!1;const b=l3(t,h,e,p,h,()=>{m=!0});return m?X5:b}else return Qr(p)?p:X5}};return t.processor&&(f.processor=t.processor),r.list&&(f.list=r.list),r.named&&(f.named=r.named),pn(r.plural)&&(f.pluralIndex=r.plural),f}function Z5(t,...e){const{datetimeFormats:n,unresolving:r,fallbackLocale:o,onWarn:s,localeFallbacker:i}=t,{__datetimeFormatters:a}=t,[l,c,u,d]=t1(...e),f=Ft(u.missingWarn)?u.missingWarn:t.missingWarn;Ft(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn;const h=!!u.part,p=Qk(t,u),m=i(t,o,p);if(!ke(l)||l==="")return new Intl.DateTimeFormat(p,d).format(c);let v={},b,w=null;const k="datetime format";for(let _=0;_<m.length&&(b=m[_],v=n[b]||{},w=v[l],!pt(w));_++)Zk(t,l,b,f,k);if(!pt(w)||!ke(b))return r?yy:l;let y=`${b}__${l}`;py(d)||(y=`${y}__${JSON.stringify(d)}`);let C=a.get(y);return C||(C=new Intl.DateTimeFormat(b,Zt({},w,d)),a.set(y,C)),h?C.formatToParts(c):C.format(c)}const c3=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function t1(...t){const[e,n,r,o]=t,s={};let i={},a;if(ke(e)){const l=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw Vs(ss.INVALID_ISO_DATE_ARGUMENT);const c=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();a=new Date(c);try{a.toISOString()}catch{throw Vs(ss.INVALID_ISO_DATE_ARGUMENT)}}else if(GB(e)){if(isNaN(e.getTime()))throw Vs(ss.INVALID_DATE_ARGUMENT);a=e}else if(pn(e))a=e;else throw Vs(ss.INVALID_ARGUMENT);return ke(n)?s.key=n:pt(n)&&Object.keys(n).forEach(l=>{c3.includes(l)?i[l]=n[l]:s[l]=n[l]}),ke(r)?s.locale=r:pt(r)&&(i=r),pt(o)&&(i=o),[s.key||"",a,s,i]}function eS(t,e,n){const r=t;for(const o in n){const s=`${e}__${o}`;r.__datetimeFormatters.has(s)&&r.__datetimeFormatters.delete(s)}}function tS(t,...e){const{numberFormats:n,unresolving:r,fallbackLocale:o,onWarn:s,localeFallbacker:i}=t,{__numberFormatters:a}=t,[l,c,u,d]=n1(...e),f=Ft(u.missingWarn)?u.missingWarn:t.missingWarn;Ft(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn;const h=!!u.part,p=Qk(t,u),m=i(t,o,p);if(!ke(l)||l==="")return new Intl.NumberFormat(p,d).format(c);let v={},b,w=null;const k="number format";for(let _=0;_<m.length&&(b=m[_],v=n[b]||{},w=v[l],!pt(w));_++)Zk(t,l,b,f,k);if(!pt(w)||!ke(b))return r?yy:l;let y=`${b}__${l}`;py(d)||(y=`${y}__${JSON.stringify(d)}`);let C=a.get(y);return C||(C=new Intl.NumberFormat(b,Zt({},w,d)),a.set(y,C)),h?C.formatToParts(c):C.format(c)}const u3=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function n1(...t){const[e,n,r,o]=t,s={};let i={};if(!pn(e))throw Vs(ss.INVALID_ARGUMENT);const a=e;return ke(n)?s.key=n:pt(n)&&Object.keys(n).forEach(l=>{u3.includes(l)?i[l]=n[l]:s[l]=n[l]}),ke(r)?s.locale=r:pt(r)&&(i=r),pt(o)&&(i=o),[s.key||"",a,s,i]}function nS(t,e,n){const r=t;for(const o in n){const s=`${e}__${o}`;r.__numberFormatters.has(s)&&r.__numberFormatters.delete(s)}}_j();/*!
  * vue-i18n v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const pz="9.13.1";function mz(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Jk().__INTLIFY_PROD_DEVTOOLS__=!1)}const d3=qj.__EXTEND_POINT__,Rs=my(d3);Rs(),Rs(),Rs(),Rs(),Rs(),Rs(),Rs(),Rs(),Rs();const f3=ss.__EXTEND_POINT__,dr=my(f3),go={UNEXPECTED_RETURN_TYPE:f3,INVALID_ARGUMENT:dr(),MUST_BE_CALL_SETUP_TOP:dr(),NOT_INSTALLED:dr(),NOT_AVAILABLE_IN_LEGACY_MODE:dr(),REQUIRED_VALUE:dr(),INVALID_VALUE:dr(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:dr(),NOT_INSTALLED_WITH_PROVIDE:dr(),UNEXPECTED_ERROR:dr(),NOT_COMPATIBLE_LEGACY_VUE_I18N:dr(),BRIDGE_SUPPORT_VUE_2_ONLY:dr(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:dr(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:dr(),__EXTEND_POINT__:dr()};function jo(t,...e){return gy(t,null,void 0)}const r1=wa("__translateVNode"),o1=wa("__datetimeParts"),s1=wa("__numberParts"),gz=wa("__setPluralRules"),yz=wa("__injectWithOption"),i1=wa("__dispose");function Ff(t){if(!ct(t))return t;for(const e in t)if(Wm(t,e))if(!e.includes("."))ct(t[e])&&Ff(t[e]);else{const n=e.split("."),r=n.length-1;let o=t,s=!1;for(let i=0;i<r;i++){if(n[i]in o||(o[n[i]]={}),!ct(o[n[i]])){s=!0;break}o=o[n[i]]}s||(o[n[r]]=t[e],delete t[e]),ct(o[n[r]])&&Ff(o[n[r]])}return t}function h3(t,e){const{messages:n,__i18n:r,messageResolver:o,flatJson:s}=e,i=pt(n)?n:Qt(r)?{}:{[t]:{}};if(Qt(r)&&r.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:l,resource:c}=a;l?(i[l]=i[l]||{},dl(c,i[l])):dl(c,i)}else ke(a)&&dl(JSON.parse(a),i)}),o==null&&s)for(const a in i)Wm(i,a)&&Ff(i[a]);return i}function p3(t){return t.type}function vz(t,e,n){let r=ct(e.messages)?e.messages:{};"__i18nGlobal"in n&&(r=h3(t.locale.value,{messages:r,__i18n:n.__i18nGlobal}));const o=Object.keys(r);o.length&&o.forEach(s=>{t.mergeLocaleMessage(s,r[s])});{if(ct(e.datetimeFormats)){const s=Object.keys(e.datetimeFormats);s.length&&s.forEach(i=>{t.mergeDateTimeFormat(i,e.datetimeFormats[i])})}if(ct(e.numberFormats)){const s=Object.keys(e.numberFormats);s.length&&s.forEach(i=>{t.mergeNumberFormat(i,e.numberFormats[i])})}}}function rS(t){return he(El,null,t,0)}const oS="__INTLIFY_META__",sS=()=>[],bz=()=>!1;let iS=0;function aS(t){return(e,n,r,o)=>t(n,r,Co()||void 0,o)}const wz=()=>{const t=Co();let e=null;return t&&(e=p3(t)[oS])?{[oS]:e}:null};function m3(t={},e){const{__root:n,__injectWithOption:r}=t,o=n===void 0,s=t.flatJson,i=Um?ae:Tl,a=!!t.translateExistCompatible;let l=Ft(t.inheritLocale)?t.inheritLocale:!0;const c=i(n&&l?n.locale.value:ke(t.locale)?t.locale:Gm),u=i(n&&l?n.fallbackLocale.value:ke(t.fallbackLocale)||Qt(t.fallbackLocale)||pt(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:c.value),d=i(h3(c.value,t)),f=i(pt(t.datetimeFormats)?t.datetimeFormats:{[c.value]:{}}),h=i(pt(t.numberFormats)?t.numberFormats:{[c.value]:{}});let p=n?n.missingWarn:Ft(t.missingWarn)||qm(t.missingWarn)?t.missingWarn:!0,m=n?n.fallbackWarn:Ft(t.fallbackWarn)||qm(t.fallbackWarn)?t.fallbackWarn:!0,v=n?n.fallbackRoot:Ft(t.fallbackRoot)?t.fallbackRoot:!0,b=!!t.fallbackFormat,w=_t(t.missing)?t.missing:null,k=_t(t.missing)?aS(t.missing):null,y=_t(t.postTranslation)?t.postTranslation:null,C=n?n.warnHtmlMessage:Ft(t.warnHtmlMessage)?t.warnHtmlMessage:!0,_=!!t.escapeParameter;const M=n?n.modifiers:pt(t.modifiers)?t.modifiers:{};let E=t.pluralRules||n&&n.pluralRules,O;O=(()=>{o&&G5(null);const B={version:pz,locale:c.value,fallbackLocale:u.value,messages:d.value,modifiers:M,pluralRules:E,missing:k===null?void 0:k,missingWarn:p,fallbackWarn:m,fallbackFormat:b,unresolving:!0,postTranslation:y===null?void 0:y,warnHtmlMessage:C,escapeParameter:_,messageResolver:t.messageResolver,messageCompiler:t.messageCompiler,__meta:{framework:"vue"}};B.datetimeFormats=f.value,B.numberFormats=h.value,B.__datetimeFormatters=pt(O)?O.__datetimeFormatters:void 0,B.__numberFormatters=pt(O)?O.__numberFormatters:void 0;const q=rz(B);return o&&G5(q),q})(),sd(O,c.value,u.value);function R(){return[c.value,u.value,d.value,f.value,h.value]}const I=Y({get:()=>c.value,set:B=>{c.value=B,O.locale=c.value}}),j=Y({get:()=>u.value,set:B=>{u.value=B,O.fallbackLocale=u.value,sd(O,c.value,B)}}),de=Y(()=>d.value),te=Y(()=>f.value),Q=Y(()=>h.value);function ie(){return _t(y)?y:null}function z(B){y=B,O.postTranslation=B}function ge(){return w}function ve(B){B!==null&&(k=aS(B)),w=B,O.missing=k}const be=(B,q,Oe,Ne,bt,tn)=>{R();let kn;try{__INTLIFY_PROD_DEVTOOLS__,o||(O.fallbackContext=n?nz():void 0),kn=B(O)}finally{__INTLIFY_PROD_DEVTOOLS__,o||(O.fallbackContext=void 0)}if(Oe!=="translate exists"&&pn(kn)&&kn===yy||Oe==="translate exists"&&!kn){const[fi,D]=q();return n&&v?Ne(n):bt(fi)}else{if(tn(kn))return kn;throw jo(go.UNEXPECTED_RETURN_TYPE)}};function Se(...B){return be(q=>Reflect.apply(Q5,null,[q,...B]),()=>e1(...B),"translate",q=>Reflect.apply(q.t,q,[...B]),q=>q,q=>ke(q))}function Ee(...B){const[q,Oe,Ne]=B;if(Ne&&!ct(Ne))throw jo(go.INVALID_ARGUMENT);return Se(q,Oe,Zt({resolvedMessage:!0},Ne||{}))}function Re(...B){return be(q=>Reflect.apply(Z5,null,[q,...B]),()=>t1(...B),"datetime format",q=>Reflect.apply(q.d,q,[...B]),()=>W5,q=>ke(q))}function Ke(...B){return be(q=>Reflect.apply(tS,null,[q,...B]),()=>n1(...B),"number format",q=>Reflect.apply(q.n,q,[...B]),()=>W5,q=>ke(q))}function je(B){return B.map(q=>ke(q)||pn(q)||Ft(q)?rS(String(q)):q)}const le={normalize:je,interpolate:B=>B,type:"vnode"};function G(...B){return be(q=>{let Oe;const Ne=q;try{Ne.processor=le,Oe=Reflect.apply(Q5,null,[Ne,...B])}finally{Ne.processor=null}return Oe},()=>e1(...B),"translate",q=>q[r1](...B),q=>[rS(q)],q=>Qt(q))}function Z(...B){return be(q=>Reflect.apply(tS,null,[q,...B]),()=>n1(...B),"number format",q=>q[s1](...B),sS,q=>ke(q)||Qt(q))}function ze(...B){return be(q=>Reflect.apply(Z5,null,[q,...B]),()=>t1(...B),"datetime format",q=>q[o1](...B),sS,q=>ke(q)||Qt(q))}function st(B){E=B,O.pluralRules=E}function P(B,q){return be(()=>{if(!B)return!1;const Oe=ke(q)?q:c.value,Ne=X(Oe),bt=O.messageResolver(Ne,B);return a?bt!=null:eu(bt)||Qr(bt)||ke(bt)},()=>[B],"translate exists",Oe=>Reflect.apply(Oe.te,Oe,[B,q]),bz,Oe=>Ft(Oe))}function $(B){let q=null;const Oe=t3(O,u.value,c.value);for(let Ne=0;Ne<Oe.length;Ne++){const bt=d.value[Oe[Ne]]||{},tn=O.messageResolver(bt,B);if(tn!=null){q=tn;break}}return q}function U(B){const q=$(B);return q??(n?n.tm(B)||{}:{})}function X(B){return d.value[B]||{}}function J(B,q){if(s){const Oe={[B]:q};for(const Ne in Oe)Wm(Oe,Ne)&&Ff(Oe[Ne]);q=Oe[B]}d.value[B]=q,O.messages=d.value}function se(B,q){d.value[B]=d.value[B]||{};const Oe={[B]:q};if(s)for(const Ne in Oe)Wm(Oe,Ne)&&Ff(Oe[Ne]);q=Oe[B],dl(q,d.value[B]),O.messages=d.value}function fe(B){return f.value[B]||{}}function A(B,q){f.value[B]=q,O.datetimeFormats=f.value,eS(O,B,q)}function L(B,q){f.value[B]=Zt(f.value[B]||{},q),O.datetimeFormats=f.value,eS(O,B,q)}function F(B){return h.value[B]||{}}function W(B,q){h.value[B]=q,O.numberFormats=h.value,nS(O,B,q)}function ue(B,q){h.value[B]=Zt(h.value[B]||{},q),O.numberFormats=h.value,nS(O,B,q)}iS++,n&&Um&&(ot(n.locale,B=>{l&&(c.value=B,O.locale=B,sd(O,c.value,u.value))}),ot(n.fallbackLocale,B=>{l&&(u.value=B,O.fallbackLocale=B,sd(O,c.value,u.value))}));const ne={id:iS,locale:I,fallbackLocale:j,get inheritLocale(){return l},set inheritLocale(B){l=B,B&&n&&(c.value=n.locale.value,u.value=n.fallbackLocale.value,sd(O,c.value,u.value))},get availableLocales(){return Object.keys(d.value).sort()},messages:de,get modifiers(){return M},get pluralRules(){return E||{}},get isGlobal(){return o},get missingWarn(){return p},set missingWarn(B){p=B,O.missingWarn=p},get fallbackWarn(){return m},set fallbackWarn(B){m=B,O.fallbackWarn=m},get fallbackRoot(){return v},set fallbackRoot(B){v=B},get fallbackFormat(){return b},set fallbackFormat(B){b=B,O.fallbackFormat=b},get warnHtmlMessage(){return C},set warnHtmlMessage(B){C=B,O.warnHtmlMessage=B},get escapeParameter(){return _},set escapeParameter(B){_=B,O.escapeParameter=B},t:Se,getLocaleMessage:X,setLocaleMessage:J,mergeLocaleMessage:se,getPostTranslationHandler:ie,setPostTranslationHandler:z,getMissingHandler:ge,setMissingHandler:ve,[gz]:st};return ne.datetimeFormats=te,ne.numberFormats=Q,ne.rt=Ee,ne.te=P,ne.tm=U,ne.d=Re,ne.n=Ke,ne.getDateTimeFormat=fe,ne.setDateTimeFormat=A,ne.mergeDateTimeFormat=L,ne.getNumberFormat=F,ne.setNumberFormat=W,ne.mergeNumberFormat=ue,ne[yz]=r,ne[r1]=G,ne[o1]=ze,ne[s1]=Z,ne}const ex={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function kz({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((r,o)=>[...r,...o.type===ye?o.children:[o]],[]):e.reduce((n,r)=>{const o=t[r];return o&&(n[r]=o()),n},{})}function g3(t){return ye}const xz=Ie({name:"i18n-t",props:Zt({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>pn(t)||!isNaN(t)}},ex),setup(t,e){const{slots:n,attrs:r}=e,o=t.i18n||da({useScope:t.scope,__useComponent:!0});return()=>{const s=Object.keys(n).filter(d=>d!=="_"),i={};t.locale&&(i.locale=t.locale),t.plural!==void 0&&(i.plural=ke(t.plural)?+t.plural:t.plural);const a=kz(e,s),l=o[r1](t.keypath,a,i),c=Zt({},r),u=ke(t.tag)||ct(t.tag)?t.tag:g3();return Lt(u,c,l)}}}),lS=xz;function Cz(t){return Qt(t)&&!ke(t[0])}function y3(t,e,n,r){const{slots:o,attrs:s}=e;return()=>{const i={part:!0};let a={};t.locale&&(i.locale=t.locale),ke(t.format)?i.key=t.format:ct(t.format)&&(ke(t.format.key)&&(i.key=t.format.key),a=Object.keys(t.format).reduce((f,h)=>n.includes(h)?Zt({},f,{[h]:t.format[h]}):f,{}));const l=r(t.value,i,a);let c=[i.key];Qt(l)?c=l.map((f,h)=>{const p=o[f.type],m=p?p({[f.type]:f.value,index:h,parts:l}):[f.value];return Cz(m)&&(m[0].key=`${f.type}-${h}`),m}):ke(l)&&(c=[l]);const u=Zt({},s),d=ke(t.tag)||ct(t.tag)?t.tag:g3();return Lt(d,u,c)}}const _z=Ie({name:"i18n-n",props:Zt({value:{type:Number,required:!0},format:{type:[String,Object]}},ex),setup(t,e){const n=t.i18n||da({useScope:t.scope,__useComponent:!0});return y3(t,e,u3,(...r)=>n[s1](...r))}}),cS=_z,Sz=Ie({name:"i18n-d",props:Zt({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},ex),setup(t,e){const n=t.i18n||da({useScope:t.scope,__useComponent:!0});return y3(t,e,c3,(...r)=>n[o1](...r))}}),uS=Sz;function Tz(t,e){const n=t;if(t.mode==="composition")return n.__getInstance(e)||t.global;{const r=n.__getInstance(e);return r!=null?r.__composer:t.global.__composer}}function Mz(t){const e=i=>{const{instance:a,modifiers:l,value:c}=i;if(!a||!a.$)throw jo(go.UNEXPECTED_ERROR);const u=Tz(t,a.$),d=dS(c);return[Reflect.apply(u.t,u,[...fS(d)]),u]};return{created:(i,a)=>{const[l,c]=e(a);Um&&t.global===c&&(i.__i18nWatcher=ot(c.locale,()=>{a.instance&&a.instance.$forceUpdate()})),i.__composer=c,i.textContent=l},unmounted:i=>{Um&&i.__i18nWatcher&&(i.__i18nWatcher(),i.__i18nWatcher=void 0,delete i.__i18nWatcher),i.__composer&&(i.__composer=void 0,delete i.__composer)},beforeUpdate:(i,{value:a})=>{if(i.__composer){const l=i.__composer,c=dS(a);i.textContent=Reflect.apply(l.t,l,[...fS(c)])}},getSSRProps:i=>{const[a]=e(i);return{textContent:a}}}}function dS(t){if(ke(t))return{path:t};if(pt(t)){if(!("path"in t))throw jo(go.REQUIRED_VALUE,"path");return t}else throw jo(go.INVALID_VALUE)}function fS(t){const{path:e,locale:n,args:r,choice:o,plural:s}=t,i={},a=r||{};return ke(n)&&(i.locale=n),pn(o)&&(i.plural=o),pn(s)&&(i.plural=s),[e,a,i]}function Ez(t,e,...n){const r=pt(n[0])?n[0]:{},o=!!r.useI18nComponentName;(Ft(r.globalInstall)?r.globalInstall:!0)&&([o?"i18n":lS.name,"I18nT"].forEach(i=>t.component(i,lS)),[cS.name,"I18nN"].forEach(i=>t.component(i,cS)),[uS.name,"I18nD"].forEach(i=>t.component(i,uS))),t.directive("t",Mz(e))}const Oz=wa("global-vue-i18n");function Iz(t={},e){const n=Ft(t.globalInjection)?t.globalInjection:!0,r=!0,o=new Map,[s,i]=Az(t),a=wa("");function l(d){return o.get(d)||null}function c(d,f){o.set(d,f)}function u(d){o.delete(d)}{const d={get mode(){return"composition"},get allowComposition(){return r},async install(f,...h){if(f.__VUE_I18N_SYMBOL__=a,f.provide(f.__VUE_I18N_SYMBOL__,d),pt(h[0])){const v=h[0];d.__composerExtend=v.__composerExtend,d.__vueI18nExtend=v.__vueI18nExtend}let p=null;n&&(p=Fz(f,d.global)),Ez(f,d,...h);const m=f.unmount;f.unmount=()=>{p&&p(),d.dispose(),m()}},get global(){return i},dispose(){s.stop()},__instances:o,__getInstance:l,__setInstance:c,__deleteInstance:u};return d}}function da(t={}){const e=Co();if(e==null)throw jo(go.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw jo(go.NOT_INSTALLED);const n=Nz(e),r=Rz(n),o=p3(e),s=Lz(t,o);if(s==="global")return vz(r,t,o),r;if(s==="parent"){let l=Pz(n,e,t.__useComponent);return l==null&&(l=r),l}const i=n;let a=i.__getInstance(e);if(a==null){const l=Zt({},t);"__i18n"in o&&(l.__i18n=o.__i18n),r&&(l.__root=r),a=m3(l),i.__composerExtend&&(a[i1]=i.__composerExtend(a)),$z(i,e,a),i.__setInstance(e,a)}return a}function Az(t,e,n){const r=gh();{const o=r.run(()=>m3(t));if(o==null)throw jo(go.UNEXPECTED_ERROR);return[r,o]}}function Nz(t){{const e=An(t.isCE?Oz:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw jo(t.isCE?go.NOT_INSTALLED_WITH_PROVIDE:go.UNEXPECTED_ERROR);return e}}function Lz(t,e){return py(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function Rz(t){return t.mode==="composition"?t.global:t.global.__composer}function Pz(t,e,n=!1){let r=null;const o=e.root;let s=Dz(e,n);for(;s!=null;){const i=t;if(t.mode==="composition"&&(r=i.__getInstance(s)),r!=null||o===s)break;s=s.parent}return r}function Dz(t,e=!1){return t==null?null:e&&t.vnode.ctx||t.parent}function $z(t,e,n){xo(()=>{},e),ql(()=>{const r=n;t.__deleteInstance(e);const o=r[i1];o&&(o(),delete r[i1])},e)}const Hz=["locale","fallbackLocale","availableLocales"],hS=["t","rt","d","n","tm","te"];function Fz(t,e){const n=Object.create(null);return Hz.forEach(o=>{const s=Object.getOwnPropertyDescriptor(e,o);if(!s)throw jo(go.UNEXPECTED_ERROR);const i=Ot(s.value)?{get(){return s.value.value},set(a){s.value.value=a}}:{get(){return s.get&&s.get()}};Object.defineProperty(n,o,i)}),t.config.globalProperties.$i18n=n,hS.forEach(o=>{const s=Object.getOwnPropertyDescriptor(e,o);if(!s||!s.value)throw jo(go.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${o}`,s)}),()=>{delete t.config.globalProperties.$i18n,hS.forEach(o=>{delete t.config.globalProperties[`$${o}`]})}}mz();Xj(cz);Qj(Nj);Zj(t3);if(__INTLIFY_PROD_DEVTOOLS__){const t=Jk();t.__INTLIFY__=!0,jj(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const Bz={"404Title":{t:0,b:{t:2,i:[{t:3}],s:"Page not found"}},"404SubTitle":{t:0,b:{t:2,i:[{t:3}],s:"Unfortunately, the page you are looking for is not available."}},"404Paragraph":{t:0,b:{t:2,i:[{t:3}],s:"You may have mistyped the address or the page may have moved."}},"404Link":{t:0,b:{t:2,i:[{t:3}],s:"Go back to home page"}},goToProduct:{t:0,b:{t:2,i:[{t:3}],s:"Go to product"}},seeAll:{t:0,b:{t:2,i:[{t:3}],s:"See all"}},outOf:{t:0,b:{t:2,i:[{t:3}],s:"out of"}},fullName:{t:0,b:{t:2,i:[{t:3}],s:"Full name"}},email:{t:0,b:{t:2,i:[{t:3}],s:"Email address"}},phone:{t:0,b:{t:2,i:[{t:3}],s:"Phone number"}},message:{t:0,b:{t:2,i:[{t:3}],s:"Message"}},submit:{t:0,b:{t:2,i:[{t:3}],s:"Submit"}},sending:{t:0,b:{t:2,i:[{t:3}],s:"Sending..."}},orders:{t:0,b:{t:2,i:[{t:3}],s:"Orders"}},finance:{t:0,b:{t:2,i:[{t:3}],s:"Finance"}},tel:{t:0,b:{t:2,i:[{t:3}],s:"Tel"}},RequestReceived:{t:0,b:{t:2,i:[{t:3}],s:"Thank you for your inquiry"}},viewAll:{t:0,b:{t:2,i:[{t:3}],s:"View all"}},acceptMessage:{t:0,b:{t:2,i:[{t:3}],s:"I accept the processing of my personal data"}},privacyPolicy:{t:0,b:{t:2,i:[{t:3}],s:"privacy policy"}},country:{t:0,b:{t:2,i:[{t:3}],s:"Country"}}},jz={"404Title":{t:0,b:{t:2,i:[{t:3}],s:""}},"404SubTitle":{t:0,b:{t:2,i:[{t:3}],s:""}},"404Paragraph":{t:0,b:{t:2,i:[{t:3}],s:""}},"404Link":{t:0,b:{t:2,i:[{t:3}],s:""}},goToProduct:{t:0,b:{t:2,i:[{t:3}],s:""}},seeAll:{t:0,b:{t:2,i:[{t:3}],s:""}},outOf:{t:0,b:{t:2,i:[{t:3}],s:""}},fullName:{t:0,b:{t:2,i:[{t:3}],s:""}},email:{t:0,b:{t:2,i:[{t:3}],s:""}},phone:{t:0,b:{t:2,i:[{t:3}],s:""}},message:{t:0,b:{t:2,i:[{t:3}],s:""}},submit:{t:0,b:{t:2,i:[{t:3}],s:""}},sending:{t:0,b:{t:2,i:[{t:3}],s:"..."}},orders:{t:0,b:{t:2,i:[{t:3}],s:""}},finance:{t:0,b:{t:2,i:[{t:3}],s:""}},tel:{t:0,b:{t:2,i:[{t:3}],s:""}},viewAll:{t:0,b:{t:2,i:[{t:3}],s:""}},privacyPolicy:{t:0,b:{t:2,i:[{t:3}],s:""}},country:{t:0,b:{t:2,i:[{t:3}],s:""}}},Al=["en","ja"],Jm={en:[{key:"../lang/en.js",load:()=>Promise.resolve(Bz),cache:!0}],ja:[{key:"../lang/ja.js",load:()=>Promise.resolve(jz),cache:!0}]},zz=[],vy=[{code:"en",iso:"en-US",name:"English",dir:"ltr",files:[{path:"lang/en.js"}]},{code:"ja",iso:"ja-JP",name:"",dir:"ltr",sitemap:!1,files:[{path:"lang/ja.js"}]}],v3="@nuxtjs/i18n",Vz=!1,Uz=!1,qz="nuxtI18n",Wz="i18n_redirected",pS="nuxt-i18n-slp",Yd=new Map;async function Kz(t,e){const n={messages:{}};for(const r of t){const{default:o}=await r(),s=typeof o=="function"?await e.runWithContext(async()=>await o()):o;dl(s,n)}return n}function b3(t,e){let n=[];if(Qt(t))n=t;else if(ct(t)){const r=[...e,"default"];for(const o of r)t[o]&&(n=[...n,...t[o].filter(Boolean)])}else ke(t)&&e.every(r=>r!==t)&&n.push(t);return n}async function Gz(t,e,n){const{defaultLocale:r,initialLocale:o,localeCodes:s,fallbackLocale:i,lazy:a}=n;if(a&&i){const c=b3(i,[r,o]);await Promise.all(c.map(u=>mS(u,e,t)))}const l=a?[...new Set().add(r).add(o)]:s;return await Promise.all(l.map(c=>mS(c,e,t))),t}async function Jz(t,{key:e,load:n}){let r=null;try{const o=await n().then(s=>s.default||s);_t(o)?r=await o(t):(r=o,r!=null&&Yd&&Yd.set(e,r))}catch(o){console.error("Failed locale loading: "+o.message)}return r}async function Ym(t,e,n){const r=e[t];if(r==null){console.warn("Could not find messages for locale code: "+t);return}const o={};for(const s of r){let i=null;Yd&&Yd.has(s.key)&&s.cache?i=Yd.get(s.key):i=await Jz(t,s),i!=null&&dl(i,o)}n(t,o)}async function mS(t,e,n){await Ym(t,e,(o,s)=>{const i=n[o]||{};dl(s,i),n[o]=i})}function Go(t){if(typeof t!="object")return t;var e,n,r=Object.prototype.toString.call(t);if(r==="[object Object]"){if(t.constructor!==Object&&typeof t.constructor=="function"){n=new t.constructor;for(e in t)t.hasOwnProperty(e)&&n[e]!==t[e]&&(n[e]=Go(t[e]))}else{n={};for(e in t)e==="__proto__"?Object.defineProperty(n,e,{value:Go(t[e]),configurable:!0,enumerable:!0,writable:!0}):n[e]=Go(t[e])}return n}if(r==="[object Array]"){for(e=t.length,n=Array(e);e--;)n[e]=Go(t[e]);return n}return r==="[object Set]"?(n=new Set,t.forEach(function(o){n.add(Go(o))}),n):r==="[object Map]"?(n=new Map,t.forEach(function(o,s){n.set(Go(s),Go(o))}),n):r==="[object Date]"?new Date(+t):r==="[object RegExp]"?(n=new RegExp(t.source,t.flags),n.lastIndex=t.lastIndex,n):r==="[object DataView]"?new t.constructor(Go(t.buffer)):r==="[object ArrayBuffer]"?t.slice(0):r.slice(-6)==="Array]"?new t.constructor(t):t}const Yz={path:"/",watch:!0,decode:t=>Rf(decodeURIComponent(t)),encode:t=>encodeURIComponent(typeof t=="string"?t:JSON.stringify(t))},B0=window.cookieStore;function Xz(t,e){var l;const n={...Yz,...e},r=gS(n)||{};let o;n.maxAge!==void 0?o=n.maxAge*1e3:n.expires&&(o=n.expires.getTime()-Date.now());const s=o!==void 0&&o<=0,i=Go(s?void 0:r[t]??((l=n.default)==null?void 0:l.call(n))),a=o&&!s?eV(i,o,n.watch&&n.watch!=="shallow"):ae(i);{let c=null;try{!B0&&typeof BroadcastChannel<"u"&&(c=new BroadcastChannel(`nuxt:cookies:${t}`))}catch{}const u=()=>{n.readonly||fH(a.value,r[t])||(Zz(t,a.value,n),r[t]=Go(a.value),c==null||c.postMessage({value:n.encode(a.value)}))},d=h=>{var m;const p=h.refresh?(m=gS(n))==null?void 0:m[t]:n.decode(h.value);f=!0,r[t]=a.value=p,cr(()=>{f=!1})};let f=!1;$u()&&Tf(()=>{f=!0,u(),c==null||c.close()}),B0?B0.onchange=h=>{const p=h.changed.find(m=>m.name===t);p&&d({value:p.value})}:c&&(c.onmessage=({data:h})=>d(h)),n.watch?ot(a,()=>{f||u()},{deep:n.watch!=="shallow"}):u()}return a}function gS(t={}){return J9(document.cookie,t)}function Qz(t,e,n={}){return e==null?r5(t,e,{...n,maxAge:-1}):r5(t,e,n)}function Zz(t,e,n={}){document.cookie=Qz(t,e,n)}const yS=2147483647;function eV(t,e,n){let r,o,s=0;const i=n?ae(t):{value:t};return $u()&&Tf(()=>{o==null||o(),clearTimeout(r)}),wk((a,l)=>{n&&(o=ot(i,l));function c(){s=0,clearTimeout(r);const u=e-s,d=u<yS?u:yS;r=setTimeout(()=>{if(s+=d,s<e)return c();i.value=void 0,l()},d)}return{get(){return a(),i.value},set(u){c(),i.value=u,l()}}})}const tV=typeof window<"u";function nV(t){t=t||[];const e=[];for(const n of t)ke(n)?e.push({code:n}):e.push(n);return e}function rV(t){return t!=null&&"global"in t&&"mode"in t}function oV(t){return t!=null&&!("__composer"in t)&&"locale"in t&&Ot(t.locale)}function w3(t){return t!=null&&"__composer"in t}function xa(t){return rV(t)?t.global:t}function fa(t){const e=xa(t);return oV(e)?e:w3(e)?e.__composer:e}function _h(t){return x(xa(t).locale)}function k3(t){return x(xa(t).locales)}function sV(t){return x(xa(t).localeCodes)}function x3(t,e){const n=xa(t);Ot(n.locale)?n.locale.value=e:n.locale=e}function C3(t){return ke(t)?t:YB(t)?t.toString():"(null)"}function vS(t,e,{defaultLocale:n,strategy:r,routesNameSeparator:o,defaultLocaleRouteNameSuffix:s}){let i=C3(t)+(r==="no_prefix"?"":o+e);return e===n&&r==="prefix_and_default"&&(i+=o+s),i}function bS(t,e){return _t(t)?t(e):t}function iV(t,e){const n=[];for(const[r,o]of e.entries()){const s=t.find(i=>i.iso.toLowerCase()===o.toLowerCase());if(s){n.push({code:s.code,score:1-r/e.length});break}}for(const[r,o]of e.entries()){const s=o.split("-")[0].toLowerCase(),i=t.find(a=>a.iso.split("-")[0].toLowerCase()===s);if(i){n.push({code:i.code,score:.999-r/e.length});break}}return n}const aV=iV;function lV(t,e){return t.score===e.score?e.code.length-t.code.length:e.score-t.score}const cV=lV;function uV(t,e,{matcher:n=aV,comparer:r=cV}={}){const o=[];for(const i of t){const{code:a}=i,l=i.iso||a;o.push({code:a,iso:l})}const s=n(o,e);return s.length>1&&s.sort(r),s.length?s[0].code:""}function Xm(t){return new RegExp(`^/(${t.join("|")})(?:/|$)`,"i")}function dV(t,e){return[t.slice(0,e),t.slice(e)]}function fV(t){const{fullPath:e,query:n,hash:r,name:o,path:s,params:i,meta:a,redirectedFrom:l,matched:c}=t;return{fullPath:e,params:i,query:n,hash:r,name:o,path:s,meta:a,matched:c,redirectedFrom:l}}function hV({router:t},e,n,r){var c,u;if(n!=="prefix")return t.resolve(e);const[o,s]=dV(e.path,1),i=`${o}${r}${s===""?s:`/${s}`}`,a=(u=(c=t.options)==null?void 0:c.routes)==null?void 0:u.find(d=>d.path===i);if(a==null)return e;const l=Zt({},e,a);return l.path=i,t.resolve(l)}const pV=new Set(["prefix_and_default","prefix_except_default"]);function mV(t){const{currentLocale:e,defaultLocale:n,strategy:r}=t;return!(e===n&&pV.has(r))&&r!=="no_prefix"}const gV=mV;function tu(t,e){const{routesNameSeparator:n}=t.runtimeConfig.public.i18n,r=x(e);return r==null||!r.name?void 0:C3(r.name).split(n)[0]}function tx(t,e,n){var o;if(typeof e=="string"&&_o(e,{acceptRelative:!0}))return e;const r=by(t,e,n);return r==null?"":((o=r.redirectedFrom)==null?void 0:o.fullPath)||r.fullPath}function nx(t,e,n){return by(t,e,n)??void 0}function yV(t,e,n){return by(t,e,n)??void 0}function by(t,e,n){const{router:r,i18n:o}=t,s=n||_h(o),{routesNameSeparator:i,defaultLocale:a,defaultLocaleRouteNameSuffix:l,strategy:c,trailingSlash:u}=t.runtimeConfig.public.i18n,d=TV(t.runtimeConfig);let f;if(ke(e))if(e[0]==="/"){const{pathname:m,search:v,hash:b}=$b(e),w=$k(v);f={path:m,query:w,hash:b}}else f={name:e};else f=e;let h=Zt({},f);if((m=>"path"in m&&!!m.path&&!("name"in m))(h)){const m=hV(t,h,c,s),v=tu(t,m);ke(v)?(h={name:vS(v,s,{defaultLocale:a,strategy:c,routesNameSeparator:i,defaultLocaleRouteNameSuffix:l}),params:m.params,query:m.query,hash:m.hash},h.state=m.state):(d({currentLocale:s,defaultLocale:a,strategy:c})&&(h.path=`/${s}${h.path}`),h.path=u?Pf(h.path,!0):kh(h.path,!0))}else!h.name&&!("path"in h)&&(h.name=tu(t,r.currentRoute.value)),h.name=vS(h.name,s,{defaultLocale:a,strategy:c,routesNameSeparator:i,defaultLocaleRouteNameSuffix:l});try{const m=r.resolve(h);return m.name?m:r.resolve(e)}catch(m){if(typeof m=="object"&&"type"in m&&m.type===1)return null}}const vV=t=>t;function bV(t,e){var r;if(t.runtimeConfig.public.i18n.experimental.switchLocalePathLinkSSR)return x(t.metaState.value);const n=e.meta||{};return((r=x(n))==null?void 0:r[qz])||{}}function nu(t,e,n){const r=n??t.router.currentRoute.value,o=tu(t,r);if(!o)return"";const s=MV(t.runtimeConfig),i=fV(r),a=bV(t,r)[e],l={...i,name:o,params:{...i.params,...a}},c=tx(t,l,e);return s(c,e)}function rx(t,{addDirAttribute:e=!1,addSeoAttributes:n=!0,identifierAttribute:r="hid"}){const{defaultDirection:o}=Yt().public.i18n,s=fa(t.i18n),i={htmlAttrs:{},link:[],meta:[]};if(x(s.locales)==null||x(s.baseUrl)==null)return i;const a=_h(t.i18n),l=k3(t.i18n),c=nV(l).find(f=>f.code===a)||{code:a},u=c.iso,d=c.dir||o;return e&&(i.htmlAttrs.dir=d),n&&a&&x(s.locales)&&(u&&(i.htmlAttrs.lang=u),i.link.push(..._3(t,x(l),r),...T3(t,r,n)),i.meta.push(...M3(t,r,n),...E3(c,u,r),...O3(x(l),u,r))),i}function ox(){const t=ut(),e=fa(t.$i18n);return Wl(x(e.baseUrl),t.$config.app.baseURL)}function _3(t,e,n){const r=ox(),{defaultLocale:o,strategy:s}=Yt().public.i18n,i=[];if(s==="no_prefix")return i;const a=new Map;for(const l of e){const c=l.iso;if(!c){console.warn("Locale ISO code is required to generate alternate link");continue}const[u,d]=c.split("-");u&&d&&(l.isCatchallLocale||!a.has(u))&&a.set(u,l),a.set(c,l)}for(const[l,c]of a.entries()){const u=nu(t,c.code);u&&i.push({[n]:`i18n-alt-${l}`,rel:"alternate",href:a1(u,r),hreflang:l})}if(o){const l=nu(t,o);l&&i.push({[n]:"i18n-xd",rel:"alternate",href:a1(l,r),hreflang:"x-default"})}return i}function S3(t,e,n){const r=t.router.currentRoute.value,o=nx(t,{...r,path:void 0,name:tu(t,r)});if(!o)return"";let s=a1(o.path,e);const i=ct(n)&&n.canonicalQueries||[],a=o.query,l=new URLSearchParams;for(const u of i)if(u in a){const d=a[u];Qt(d)?d.forEach(f=>l.append(u,f||"")):l.append(u,d||"")}const c=l.toString();return c&&(s=`${s}?${c}`),s}function T3(t,e,n){const r=ox(),o=S3(t,r,n);return o?[{[e]:"i18n-can",rel:"canonical",href:o}]:[]}function M3(t,e,n){const r=ox(),o=S3(t,r,n);return o?[{[e]:"i18n-og-url",property:"og:url",content:o}]:[]}function E3(t,e,n){return!t||!e?[]:[{[n]:"i18n-og",property:"og:locale",content:I3(e)}]}function O3(t,e,n){return t.filter(o=>o.iso&&o.iso!==e).map(o=>({[n]:`i18n-og-alt-${o.iso}`,property:"og:locale:alternate",content:I3(o.iso)}))}function I3(t){return(t||"").replace(/-/g,"_")}function a1(t,e){return t.match(/^https?:\/\//)?t:Wl(e,t)}function wV(t,e){return wy(t,"setLocaleCookie",e)}function A3(t,e,n){return wy(t,"mergeLocaleMessage",e,n)}function kV(t,e,n,r,o){return wy(t,"onBeforeLanguageSwitch",e,n,r,o)}function xV(t,e,n){return wy(t,"onLanguageSwitched",e,n)}function Sh(t){return{i18n:t??ut().$i18n,router:nr(),runtimeConfig:Yt(),metaState:Kk("nuxt-i18n-meta",()=>({}))}}async function wS(t,e,n,r=!1){const{differentDomains:o,skipSettingLocaleOnNavigate:s,lazy:i}=n,a=Th(n),l=ut(),c=_h(e),u=sV(e);function d(h=c){a===!1||!a.useCookie||s||wV(e,h)}if(!t||!r&&o||c===t)return d(),!1;const f=await kV(e,c,t,r,l);if(f&&u.includes(f)){if(c===f)return d(),!1;t=f}if(i){const h=OV(e,"fallbackLocale"),p=(m,v)=>A3(e,m,v);if(h){const m=b3(h,[t]);await Promise.all(m.map(v=>Ym(v,Jm,p)))}await Ym(t,Jm,p)}return s?!1:(d(t),x3(e,t),await xV(e,c,t),!0)}function kS(t,e,n,r,o,s){const{strategy:i,defaultLocale:a,differentDomains:l}=s,c=Th(s),u=_t(r)?r():r,{ssg:d,callType:f,firstAccess:h,localeCookie:p}=o,{locale:m,stat:v,reason:b,from:w}=c?LV(t,n,o,u):NV;if(b==="detect_ignore_on_ssg")return u;if((w==="navigator_or_header"||w==="cookie"||w==="fallback")&&m)return m;let k=m;return k||(l?k=PV(vy,i,t):i!=="no_prefix"?k=e(t):c||(k=u)),!k&&c&&c.useCookie&&(k=p||""),k||(k=a||""),k}function xS({route:t,targetLocale:e,routeLocaleGetter:n,calledWithRouting:r=!1}){const o=ut(),s=Sh(),{strategy:i,differentDomains:a}=s.runtimeConfig.public.i18n;let l="";const{fullPath:c}=t.to;if(!a&&(r||i!=="no_prefix")&&n(t.to)!==e){const u=o.$switchLocalePath(e)||o.$localePath(c,e);ke(u)&&u&&!Db(u,c)&&!u.startsWith("//")&&(l=t.from&&t.from.fullPath===u?"":u)}if((a||Uz)&&n(t.to)!==e){const u=nu(s,e,t.to);ke(u)&&u&&!Db(u,c)&&!u.startsWith("//")&&(l=u)}return l}function CV(t){return ct(t)&&"path"in t&&"statusCode"in t}const _V=()=>Kk(v3+":redirect",()=>"");function CS(t,e){return CI(t,{redirectCode:e})}async function _S(t,{status:e=302,enableNavigate:n=!1}={}){const{nuxtApp:r,i18n:o,locale:s,route:i}=t,{rootRedirect:a,differentDomains:l,skipSettingLocaleOnNavigate:c}=r.$config.public.i18n;let{redirectPath:u}=t;if(i.path==="/"&&a)return ke(a)?u="/"+a:CV(a)&&(u="/"+a.path,e=a.statusCode),u=r.$localePath(u,s),CS(u,e);if(!(c&&(o.__pendingLocale=s,o.__pendingLocalePromise=new Promise(d=>{o.__resolvePendingLocalePromise=d}),!n))){if(l){const d=_V();d.value&&d.value!==u&&(d.value="",window.location.assign(u))}else if(u)return CS(u,e)}}function SV(t,e){Xl(t,"$i18n",xa(e)),Xl(t,"$getRouteBaseName",Dr(tu)),Xl(t,"$localePath",Dr(tx)),Xl(t,"$localeRoute",Dr(nx)),Xl(t,"$switchLocalePath",Dr(nu)),Xl(t,"$localeHead",Dr(rx))}function TV(t=Yt()){return e=>gV(e)&&!t.public.i18n.differentDomains}function MV(t=Yt()){return(e,n)=>{if(t.public.i18n.differentDomains){const r=R3(n);return r?Wl(r,e):e}else return vV(e)}}function EV(){return()=>{const t=ut(),{baseUrl:e,defaultLocale:n,differentDomains:r}=t.$config.public.i18n;if(_t(e))return e(t);const o=_t(n)?n():n;if(r&&o){const s=R3(o);if(s)return s}return e}}function SS(t){const e=[];for(const n of t){if(ke(n)){e.push({code:n});continue}e.push(n)}return e}function N3(t){return v3+" "+t}function wy(t,e,...n){const r=xa(t),[o,s]=[r,r[e]];return Reflect.apply(s,o,[...n])}function OV(t,e){const n=xa(t);return x(n[e])}function Xl(t,e,n){Object.defineProperty(t,e,{get:()=>n})}function Dr(t,e=Sh()){return(...n)=>t(e,...n)}function L3(){let t;return navigator.languages&&(t=uV(vy,navigator.languages)),t}function IV(){const t=Th(),e=t&&t.cookieKey||Wz,n=new Date,r={expires:new Date(n.setDate(n.getDate()+365)),path:"/",sameSite:t&&t.cookieCrossOrigin?"none":"lax",secure:t&&t.cookieCrossOrigin||t&&t.cookieSecure};return t&&t.cookieDomain&&(r.domain=t.cookieDomain),Xz(e,r)}function j0(t,e,n){if(e===!1||!e.useCookie)return;const r=t.value??void 0;if(r!=null){if(Al.includes(r))return r;if(n)return t.value=n,n;t.value=void 0}}function AV(t,e,n){n===!1||!n.useCookie||(t.value=e)}const NV={locale:"",stat:!1,reason:"unknown",from:"unknown"};function LV(t,e,n,r=""){const{strategy:o}=Yt().public.i18n,{ssg:s,callType:i,firstAccess:a,localeCookie:l}=n;if(!a)return{locale:o==="no_prefix"?r:"",stat:!1,reason:"first_access_only"};const{redirectOn:c,alwaysRedirect:u,useCookie:d,fallbackLocale:f}=Th(),h=ke(t)?t:t.path;if(o!=="no_prefix"){if(c==="root"){if(h!=="/")return{locale:"",stat:!1,reason:"not_redirect_on_root"}}else if(c==="no prefix"&&!u&&h.match(Xm(Al)))return{locale:"",stat:!1,reason:"not_redirect_on_no_prefix"}}let p="unknown",m,v;d&&(v=m=l,p="cookie"),v||(v=L3(),p="navigator_or_header");const b=v||f;!v&&f&&(p="fallback");const w=r||e;if(b&&(!d||u||!m)){if(o==="no_prefix")return{locale:b,stat:!0,from:p};if(i==="setup"&&b!==w)return{locale:b,stat:!0,from:p};if(u){const k=h==="/",y=c==="all",C=c==="no prefix"&&!h.match(Xm(Al));if(k||y||C)return{locale:b,stat:!0,from:p}}}return s==="ssg_setup"&&b?{locale:b,stat:!0,from:p}:(p==="navigator_or_header"||p==="cookie")&&b?{locale:b,stat:!0,from:p}:{locale:"",stat:!1,reason:"not_found_match"}}function RV(){let t;return t=window.location.host,t}function PV(t,e,n){let r=RV()||"";if(r){let o;const s=t.filter(i=>{if(i&&i.domain){let a=i.domain;return _o(i.domain)&&(a=i.domain.replace(/(http|https):\/\//,"")),a===r}return!1});if(s.length===1)o=s[0];else if(s.length>1)if(e==="no_prefix")console.warn(N3("Multiple matching domains found! This is not supported for no_prefix strategy in combination with differentDomains!")),o=s[0];else{if(n){const i=ct(n)?n.path:ke(n)?n:"";if(i&&i!==""){const a=i.match(Xm(s.map(l=>l.code)));a&&a.length>1&&(o=s.find(l=>l.code===a[1]))}}o||(o=s.find(i=>i.domainDefault))}if(o)return o.code;r=""}return r}function R3(t){var s,i;const e=Yt();ut();const n=e.public.i18n,r=vy.find(a=>a.code===t),o=((i=(s=n==null?void 0:n.locales)==null?void 0:s[t])==null?void 0:i.domain)??(r==null?void 0:r.domain);if(o){if(_o(o,{strict:!0}))return o;let a;return a=new URL(window.location.origin).protocol,a+"//"+o}console.warn(N3("Could not find domain name for locale "+t))}const Th=(t=Yt().public.i18n)=>(t==null?void 0:t.detectBrowserLanguage)===!1?!1:t==null?void 0:t.detectBrowserLanguage;function UOe(t){const e=Sh(),n=AI(),r=fa(e.i18n),o=e.router,s=_h(r),i=SS(k3(r)),a=ae({}),l=e.runtimeConfig.public.i18n.experimental.switchLocalePathLinkSSR,c=Y({get(){return l?e.metaState.value:o.currentRoute.value.meta.nuxtI18n??{}},set(p){e.metaState.value=p,a.value=p,o.currentRoute.value.meta.nuxtI18n=p}}),u=ot(()=>o.currentRoute.value.fullPath,()=>{o.currentRoute.value.meta.nuxtI18n=l?e.metaState.value:a.value});ql(()=>{u()});const d=SS(i).find(p=>p.code===s)||{code:s},f=d.iso,h=()=>{const p={link:[],meta:[]};if(s&&r.locales){const m="id";p.link.push(..._3(e,i,m),...T3(e,m,t)),p.meta.push(...M3(e,m,t),...E3(d,f,m),...O3(i,f,m))}n==null||n.push(p)};return function(p){c.value={...p},h()}}function DV({addDirAttribute:t=!1,addSeoAttributes:e=!1,identifierAttribute:n="hid"}={}){const r=Sh(),o=ae({htmlAttrs:{},link:[],meta:[]});function s(){o.value={htmlAttrs:{},link:[],meta:[]}}function i(){o.value=rx(r,{addDirAttribute:t,addSeoAttributes:e,identifierAttribute:n})}{const a=fa(r.i18n),l=ot([()=>r.router.currentRoute.value,a.locale],()=>{s(),i()},{immediate:!0});ql(()=>l())}return o}function sx(){return Dr(nu)}function $V(t,{locales:e=[],localeCodes:n=[],baseUrl:r="",hooks:o={},context:s={}}={}){const i=gh(),a=t.install;return t.install=(l,...c)=>{const u=BV(c[0])?Zt({},c[0]):{inject:!0};u.inject==null&&(u.inject=!0);const d=u.__composerExtend;if(u.__composerExtend=m=>{const v=fa(t);m.locales=Y(()=>v.locales.value),m.localeCodes=Y(()=>v.localeCodes.value),m.baseUrl=Y(()=>v.baseUrl.value);let b;return _t(d)&&(b=Reflect.apply(d,u,[m])),()=>{b&&b()}},t.mode==="legacy"){const m=u.__vueI18nExtend;u.__vueI18nExtend=v=>{TS(v,o.onExtendVueI18n);let b;return _t(m)&&(b=Reflect.apply(m,u,[v])),()=>{b&&b()}}}c[0]=u,Reflect.apply(a,t,[l,...c]);const f=fa(t);i.run(()=>{HV(f,{locales:e,localeCodes:n,baseUrl:r,hooks:o,context:s}),t.mode==="legacy"&&w3(t.global)&&TS(t.global,o.onExtendVueI18n)});const h=l,p=t.mode==="composition"?h.config.globalProperties.$i18n:null;if(p&&FV(p,f,o.onExtendExportedGlobal),u.inject){const m=Sh(t);l.mixin({methods:{getRouteBaseName:Dr(tu,m),resolveRoute:Dr(by,m),localePath:Dr(tx,m),localeRoute:Dr(nx,m),localeLocation:Dr(yV,m),switchLocalePath:Dr(nu,m),localeHead:Dr(rx,m)}})}if(h.unmount){const m=h.unmount;h.unmount=()=>{i.stop(),m()}}},i}function HV(t,e){const{locales:n,localeCodes:r,baseUrl:o,context:s}=e,i=ae(n),a=ae(r),l=ae("");t.locales=Y(()=>i.value),t.localeCodes=Y(()=>a.value),t.baseUrl=Y(()=>l.value),tV?ot(t.locale,()=>{l.value=bS(o,s)},{immediate:!0}):l.value=bS(o,s),e.hooks&&e.hooks.onExtendComposer&&e.hooks.onExtendComposer(t)}function P3(t,e,n){const r=[{locales:{get(){return t.locales.value}},localeCodes:{get(){return t.localeCodes.value}},baseUrl:{get(){return t.baseUrl.value}}}];n&&r.push(n(t));for(const o of r)for(const[s,i]of Object.entries(o))Object.defineProperty(e,s,i)}function FV(t,e,n){P3(e,t,n)}function TS(t,e){const n=fa(t);P3(n,t,e)}function BV(t){return ct(t)&&("inject"in t||"__composerExtend"in t||"__vueI18nExtend"in t)}const jV=t=>t==="defer"||t===!1;function zV(...t){var p;const e=typeof t[t.length-1]=="string"?t.pop():void 0;typeof t[0]!="string"&&t.unshift(e);let[n,r,o={}]=t;if(typeof n!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof r!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const s=ut(),i=r,a=()=>kc.value,l=()=>s.isHydrating?s.payload.data[n]:s.static.data[n];o.server=o.server??!0,o.default=o.default??a,o.getCachedData=o.getCachedData??l,o.lazy=o.lazy??!1,o.immediate=o.immediate??!0,o.deep=o.deep??kc.deep,o.dedupe=o.dedupe??"cancel";const c=()=>o.getCachedData(n,s)!=null;if(!s._asyncData[n]||!o.immediate){(p=s.payload._errors)[n]??(p[n]=kc.errorValue);const m=o.deep?ae:Tl;s._asyncData[n]={data:m(o.getCachedData(n,s)??o.default()),pending:ae(!c()),error:kk(s.payload._errors,n),status:ae("idle"),_default:o.default}}const u={...s._asyncData[n]};delete u._default,u.refresh=u.execute=(m={})=>{if(s._asyncDataPromises[n]){if(jV(m.dedupe??o.dedupe))return s._asyncDataPromises[n];s._asyncDataPromises[n].cancelled=!0}if((m._initial||s.isHydrating&&m._initial!==!1)&&c())return Promise.resolve(o.getCachedData(n,s));u.pending.value=!0,u.status.value="pending";const v=new Promise((b,w)=>{try{b(i(s))}catch(k){w(k)}}).then(async b=>{if(v.cancelled)return s._asyncDataPromises[n];let w=b;o.transform&&(w=await o.transform(b)),o.pick&&(w=UV(w,o.pick)),s.payload.data[n]=w,u.data.value=w,u.error.value=kc.errorValue,u.status.value="success"}).catch(b=>{if(v.cancelled)return s._asyncDataPromises[n];u.error.value=Ch(b),u.data.value=x(o.default()),u.status.value="error"}).finally(()=>{v.cancelled||(u.pending.value=!1,delete s._asyncDataPromises[n])});return s._asyncDataPromises[n]=v,s._asyncDataPromises[n]},u.clear=()=>VV(s,n);const d=()=>u.refresh({_initial:!0}),f=o.server!==!1&&s.payload.serverRendered;{const m=Co();if(m&&!m._nuxtOnBeforeMountCbs){m._nuxtOnBeforeMountCbs=[];const w=m._nuxtOnBeforeMountCbs;Sk(()=>{w.forEach(k=>{k()}),w.splice(0,w.length)}),ql(()=>w.splice(0,w.length))}f&&s.isHydrating&&(u.error.value||c())?(u.pending.value=!1,u.status.value=u.error.value?"error":"success"):m&&(s.payload.serverRendered&&s.isHydrating||o.lazy)&&o.immediate?m._nuxtOnBeforeMountCbs.push(d):o.immediate&&d();const v=$u();if(o.watch){const w=ot(o.watch,()=>u.refresh());v&&Tf(w)}const b=s.hook("app:data:refresh",async w=>{(!w||w.includes(n))&&await u.refresh()});v&&Tf(b)}const h=Promise.resolve(s._asyncDataPromises[n]).then(()=>u);return Object.assign(h,u),h}function VV(t,e){e in t.payload.data&&(t.payload.data[e]=void 0),e in t.payload._errors&&(t.payload._errors[e]=kc.errorValue),t._asyncData[e]&&(t._asyncData[e].data.value=void 0,t._asyncData[e].error.value=kc.errorValue,t._asyncData[e].pending.value=!1,t._asyncData[e].status.value="idle"),e in t._asyncDataPromises&&(t._asyncDataPromises[e].cancelled=!0,t._asyncDataPromises[e]=void 0)}function UV(t,e){const n={};for(const r of e)n[r]=t[r];return n}function qV(t,e,n){const[r={},o]=typeof e=="string"?[{},e]:[e,n],s=Y(()=>Ga(t)),i=r.key||dH([o,typeof s.value=="string"?s.value:"",...WV(r)]);if(!i||typeof i!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+i);if(!t)throw new Error("[nuxt] [useFetch] request is missing.");const a=i===o?"$f"+i:i;if(!r.baseURL&&typeof s.value=="string"&&s.value[0]==="/"&&s.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:l,lazy:c,default:u,transform:d,pick:f,watch:h,immediate:p,getCachedData:m,deep:v,dedupe:b,...w}=r,k=tr({...j9,...w,cache:typeof r.cache=="boolean"?void 0:r.cache}),y={server:l,lazy:c,default:u,transform:d,pick:f,immediate:p,getCachedData:m,deep:v,dedupe:b,watch:h===!1?[]:[k,s,...h||[]]};let C;return zV(a,()=>{var N;(N=C==null?void 0:C.abort)==null||N.call(C),C=typeof AbortController<"u"?new AbortController:{};const M=Ga(r.timeout);let E;return M&&(E=setTimeout(()=>C.abort(),M),C.signal.onabort=()=>clearTimeout(E)),(r.$fetch||globalThis.$fetch)(s.value,{signal:C.signal,...k}).finally(()=>{clearTimeout(E)})},y)}function WV(t){var n;const e=[((n=Ga(t.method))==null?void 0:n.toUpperCase())||"GET",Ga(t.baseURL)];for(const r of[t.params||t.query]){const o=Ga(r);if(!o)continue;const s={};for(const[i,a]of Object.entries(o))s[Ga(i)]=Ga(a);e.push(s)}return e}async function D3(t,e=nr()){const{path:n,matched:r}=e.resolve(t);if(!r.length||(e._routePreloaded||(e._routePreloaded=new Set),e._routePreloaded.has(n)))return;const o=e._preloadPromises=e._preloadPromises||[];if(o.length>4)return Promise.all(o).then(()=>D3(t,e));e._routePreloaded.add(n);const s=r.map(i=>{var a;return(a=i.components)==null?void 0:a.default}).filter(i=>typeof i=="function");for(const i of s){const a=Promise.resolve(i()).catch(()=>{}).finally(()=>o.splice(o.indexOf(a)));o.push(a)}await Promise.all(o)}function KV(t={}){const e=t.path||window.location.pathname;let n={};try{n=Rf(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(t.force||(n==null?void 0:n.path)!==e||(n==null?void 0:n.expires)<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:e,expires:Date.now()+(t.ttl??1e4)}))}catch{}if(t.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:ut().payload.state}))}catch{}window.location.pathname!==e?window.location.href=e:window.location.reload()}}const GV=(...t)=>t.find(e=>e!==void 0);function JV(t){const e=t.componentName||"NuxtLink";function n(o,s){if(!o||t.trailingSlash!=="append"&&t.trailingSlash!=="remove")return o;if(typeof o=="string")return MS(o,t.trailingSlash);const i="path"in o&&o.path!==void 0?o.path:s(o).path;return{...o,name:void 0,path:MS(i,t.trailingSlash)}}function r(o){const s=nr(),i=Yt(),a=Y(()=>!!o.target&&o.target!=="_self"),l=Y(()=>{const m=o.to||o.href||"";return typeof m=="string"&&_o(m,{acceptRelative:!0})}),c=If("RouterLink"),u=c&&typeof c!="string"?c.useLink:void 0,d=Y(()=>{if(o.external)return!0;const m=o.to||o.href||"";return typeof m=="object"?!1:m===""||l.value}),f=Y(()=>{const m=o.to||o.href||"";return d.value?m:n(m,s.resolve)}),h=d.value||u==null?void 0:u({...o,to:f}),p=Y(()=>{var m;if(!f.value||l.value)return f.value;if(d.value){const v=typeof f.value=="object"?ES(f.value):f.value;return n(v,s.resolve)}return typeof f.value=="object"?((m=s.resolve(f.value))==null?void 0:m.href)??null:n(Wl(i.app.baseURL,f.value),s.resolve)});return{to:f,hasTarget:a,isAbsoluteUrl:l,isExternal:d,href:p,isActive:(h==null?void 0:h.isActive)??Y(()=>f.value===s.currentRoute.value.path),isExactActive:(h==null?void 0:h.isExactActive)??Y(()=>f.value===s.currentRoute.value.path),route:(h==null?void 0:h.route)??Y(()=>s.resolve(f.value)),async navigate(){await CI(p.value,{replace:o.replace,external:d.value||a.value})}}}return Ie({name:e,props:{to:{type:[String,Object],default:void 0,required:!1},href:{type:[String,Object],default:void 0,required:!1},target:{type:String,default:void 0,required:!1},rel:{type:String,default:void 0,required:!1},noRel:{type:Boolean,default:void 0,required:!1},prefetch:{type:Boolean,default:void 0,required:!1},noPrefetch:{type:Boolean,default:void 0,required:!1},activeClass:{type:String,default:void 0,required:!1},exactActiveClass:{type:String,default:void 0,required:!1},prefetchedClass:{type:String,default:void 0,required:!1},replace:{type:Boolean,default:void 0,required:!1},ariaCurrentValue:{type:String,default:void 0,required:!1},external:{type:Boolean,default:void 0,required:!1},custom:{type:Boolean,default:void 0,required:!1}},useLink:r,setup(o,{slots:s}){const i=nr(),{to:a,href:l,navigate:c,isExternal:u,hasTarget:d,isAbsoluteUrl:f}=r(o),h=ae(!1),p=ae(null),m=v=>{var b;p.value=o.custom?(b=v==null?void 0:v.$el)==null?void 0:b.nextElementSibling:v==null?void 0:v.$el};if(o.prefetch!==!1&&o.noPrefetch!==!0&&o.target!=="_blank"&&!XV()){const b=ut();let w,k=null;xo(()=>{const y=YV();Gk(()=>{w=Qb(()=>{var C;(C=p==null?void 0:p.value)!=null&&C.tagName&&(k=y.observe(p.value,async()=>{k==null||k(),k=null;const _=typeof a.value=="string"?a.value:u.value?ES(a.value):i.resolve(a.value).fullPath;await Promise.all([b.hooks.callHook("link:prefetch",_).catch(()=>{}),!u.value&&!d.value&&D3(a.value,i).catch(()=>{})]),h.value=!0}))})})}),_s(()=>{w&&jB(w),k==null||k(),k=null})}return()=>{var w;if(!u.value&&!d.value){const k={ref:m,to:a.value,activeClass:o.activeClass||t.activeClass,exactActiveClass:o.exactActiveClass||t.exactActiveClass,replace:o.replace,ariaCurrentValue:o.ariaCurrentValue,custom:o.custom};return o.custom||(h.value&&(k.class=o.prefetchedClass||t.prefetchedClass),k.rel=o.rel||void 0),Lt(If("RouterLink"),k,s.default)}const v=o.target||null,b=GV(o.noRel?"":o.rel,t.externalRelAttribute,f.value||d.value?"noopener noreferrer":"")||null;return o.custom?s.default?s.default({href:l.value,navigate:c,get route(){if(!l.value)return;const k=new URL(l.value,window.location.href);return{path:k.pathname,fullPath:k.pathname,get query(){return $k(k.search)},hash:k.hash,params:{},name:void 0,matched:[],redirectedFrom:void 0,meta:{},href:l.value}},rel:b,target:v,isExternal:u.value||d.value,isActive:!1,isExactActive:!1}):null:Lt("a",{ref:p,href:l.value||null,rel:b,target:v},(w=s.default)==null?void 0:w.call(s))}}})}const ix=JV(F9);function MS(t,e){const n=e==="append"?Pf:kh;return _o(t)&&!t.startsWith("http")?t:n(t,!0)}function YV(){const t=ut();if(t._observer)return t._observer;let e=null;const n=new Map,r=(s,i)=>(e||(e=new IntersectionObserver(a=>{for(const l of a){const c=n.get(l.target);(l.isIntersecting||l.intersectionRatio>0)&&c&&c()}})),n.set(s,i),e.observe(s),()=>{n.delete(s),e.unobserve(s),n.size===0&&(e.disconnect(),e=null)});return t._observer={observe:r}}function XV(){const t=navigator.connection;return!!(t&&(t.saveData||/2g/.test(t.effectiveType)))}function ES(t){return Hk(t.path||"",t.query||{})+(t.hash?"#"+t.hash:"")}function QV(){const{routesNameSeparator:t,defaultLocaleRouteNameSuffix:e}=Yt().public.i18n,n=`(${Al.join("|")})`,r=`(?:${t}${e})?`,o=new RegExp(`${t}${n}${r}$`,"i"),s=Xm(Al);return a=>{if(ct(a)){if(a.name){const c=(ke(a.name)?a.name:a.name.toString()).match(o);if(c&&c.length>1)return c[1]}else if(a.path){const l=a.path.match(s);if(l&&l.length>1)return l[1]}}else if(ke(a)){const l=a.match(s);if(l&&l.length>1)return l[1]}return""}}const ZV=ur({name:"i18n:plugin",parallel:Vz,async setup(t){let e,n;const r=uy(),{vueApp:o}=t,s=t,i={...s.$config.public.i18n};i.baseUrl=EV();const a=Th(),l=([e,n]=ts(()=>Kz(zz,ut())),e=await e,n(),e);l.messages=l.messages||{},l.fallbackLocale=l.fallbackLocale??!1;const c=QV(),u=w=>w||l.locale||"en-US",d=IV();let f=kS(r,c,l.locale,u(i.defaultLocale),{ssg:"normal",callType:"setup",firstAccess:!0,localeCookie:j0(d,a,i.defaultLocale)},i);l.messages=([e,n]=ts(()=>Gz(l.messages,Jm,{localeCodes:Al,initialLocale:f,lazy:i.lazy,defaultLocale:i.defaultLocale,fallbackLocale:l.fallbackLocale})),e=await e,n(),e),f=u(f);const h=Iz({...l,locale:f});let p=!0;const m=w=>f!==w&&p;$V(h,{locales:i.configLocales,localeCodes:Al,baseUrl:i.baseUrl,context:s,hooks:{onExtendComposer(w){w.strategy=i.strategy,w.localeProperties=Y(()=>vy.find(k=>k.code===w.locale.value)||{code:w.locale.value}),w.setLocale=async k=>{const y=m(k);await wS(k,h,i,y)&&y&&(p=!1);const _=await s.runWithContext(()=>xS({route:{to:r},targetLocale:k,routeLocaleGetter:c}));await s.runWithContext(async()=>await _S({nuxtApp:s,i18n:h,redirectPath:_,locale:k,route:r},{enableNavigate:!0}))},w.loadLocaleMessages=async k=>{await Ym(k,Jm,(C,_)=>A3(h,C,_))},w.differentDomains=i.differentDomains,w.defaultLocale=i.defaultLocale,w.getBrowserLocale=()=>L3(),w.getLocaleCookie=()=>j0(d,a,i.defaultLocale),w.setLocaleCookie=k=>AV(d,k,a),w.onBeforeLanguageSwitch=(k,y,C,_)=>t.callHook("i18n:beforeLocaleSwitch",{oldLocale:k,newLocale:y,initialSetup:C,context:_}),w.onLanguageSwitched=(k,y)=>t.callHook("i18n:localeSwitched",{oldLocale:k,newLocale:y}),w.finalizePendingLocaleChange=async()=>{h.__pendingLocale&&(x3(h,h.__pendingLocale),h.__resolvePendingLocalePromise&&await h.__resolvePendingLocalePromise(),h.__pendingLocale=void 0)},w.waitForPendingLocaleChange=async()=>{h.__pendingLocale&&h.__pendingLocalePromise&&await h.__pendingLocalePromise}},onExtendExportedGlobal(w){return{strategy:{get(){return w.strategy}},localeProperties:{get(){return w.localeProperties.value}},setLocale:{get(){return async k=>Reflect.apply(w.setLocale,w,[k])}},differentDomains:{get(){return w.differentDomains}},defaultLocale:{get(){return w.defaultLocale}},getBrowserLocale:{get(){return()=>Reflect.apply(w.getBrowserLocale,w,[])}},getLocaleCookie:{get(){return()=>Reflect.apply(w.getLocaleCookie,w,[])}},setLocaleCookie:{get(){return k=>Reflect.apply(w.setLocaleCookie,w,[k])}},onBeforeLanguageSwitch:{get(){return(k,y,C,_)=>Reflect.apply(w.onBeforeLanguageSwitch,w,[k,y,C,_])}},onLanguageSwitched:{get(){return(k,y)=>Reflect.apply(w.onLanguageSwitched,w,[k,y])}},finalizePendingLocaleChange:{get(){return()=>Reflect.apply(w.finalizePendingLocaleChange,w,[])}},waitForPendingLocaleChange:{get(){return()=>Reflect.apply(w.waitForPendingLocaleChange,w,[])}}}},onExtendVueI18n(w){return{strategy:{get(){return w.strategy}},localeProperties:{get(){return w.localeProperties.value}},setLocale:{get(){return async k=>Reflect.apply(w.setLocale,w,[k])}},loadLocaleMessages:{get(){return async k=>Reflect.apply(w.loadLocaleMessages,w,[k])}},differentDomains:{get(){return w.differentDomains}},defaultLocale:{get(){return w.defaultLocale}},getBrowserLocale:{get(){return()=>Reflect.apply(w.getBrowserLocale,w,[])}},getLocaleCookie:{get(){return()=>Reflect.apply(w.getLocaleCookie,w,[])}},setLocaleCookie:{get(){return k=>Reflect.apply(w.setLocaleCookie,w,[k])}},onBeforeLanguageSwitch:{get(){return(k,y,C,_)=>Reflect.apply(w.onBeforeLanguageSwitch,w,[k,y,C,_])}},onLanguageSwitched:{get(){return(k,y)=>Reflect.apply(w.onLanguageSwitched,w,[k,y])}},finalizePendingLocaleChange:{get(){return()=>Reflect.apply(w.finalizePendingLocaleChange,w,[])}},waitForPendingLocaleChange:{get(){return()=>Reflect.apply(w.waitForPendingLocaleChange,w,[])}}}}}});const v={__composerExtend:w=>{const k=fa(h);return w.strategy=k.strategy,w.localeProperties=Y(()=>k.localeProperties.value),w.setLocale=k.setLocale,w.differentDomains=k.differentDomains,w.getBrowserLocale=k.getBrowserLocale,w.getLocaleCookie=k.getLocaleCookie,w.setLocaleCookie=k.setLocaleCookie,w.onBeforeLanguageSwitch=k.onBeforeLanguageSwitch,w.onLanguageSwitched=k.onLanguageSwitched,w.finalizePendingLocaleChange=k.finalizePendingLocaleChange,w.waitForPendingLocaleChange=k.waitForPendingLocaleChange,()=>{}}};if(o.use(h,v),SV(s,h),i.experimental.switchLocalePathLinkSSR===!0){const w=sx(),k=new RegExp([`<!--${pS}-\\[(\\w+)\\]-->`,".+?",`<!--/${pS}-->`].join(""),"g");t.hook("app:rendered",y=>{var C;((C=y.renderResult)==null?void 0:C.html)!=null&&(y.renderResult.html=y.renderResult.html.replaceAll(k,(_,M)=>_.replace(/href="([^"]+)"/,`href="${w(M??"")}"`)))})}let b=0;kH("locale-changing",async(w,k)=>{let y,C;const _=kS(w,c,l.locale,()=>_h(h)||u(i.defaultLocale),{ssg:"normal",callType:"routing",firstAccess:b===0,localeCookie:j0(d,a,i.defaultLocale)},i),M=m(_);([y,C]=ts(()=>wS(_,h,i,M)),y=await y,C(),y)&&M&&(p=!1);const O=([y,C]=ts(()=>s.runWithContext(()=>xS({route:{to:w,from:k},targetLocale:_,routeLocaleGetter:i.strategy==="no_prefix"?()=>_:c,calledWithRouting:!0}))),y=await y,C(),y);return b++,[y,C]=ts(()=>s.runWithContext(async()=>_S({nuxtApp:s,i18n:h,redirectPath:O,locale:_,route:w}))),y=await y,C(),y},{global:!0})}}),eU=ur({name:"nuxt:chunk-reload",setup(t){const e=nr(),n=Yt(),r=new Set;e.beforeEach(()=>{r.clear()}),t.hook("app:chunkError",({error:s})=>{r.add(s)});function o(s){const a="href"in s&&s.href[0]==="#"?n.app.baseURL+s.href:Wl(n.app.baseURL,s.fullPath);KV({path:a,persistState:!0})}t.hook("app:manifest:update",()=>{e.beforeResolve(o)}),e.onError((s,i)=>{r.has(s)&&o(i)})}}),tU=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let $3;const Mh=t=>$3=t,H3=Symbol();function l1(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Xd;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Xd||(Xd={}));function nU(){const t=gh(!0),e=t.run(()=>ae({}));let n=[],r=[];const o=yh({install(s){Mh(o),o._a=s,s.provide(H3,o),s.config.globalProperties.$pinia=o,r.forEach(i=>n.push(i)),r=[]},use(s){return!this._a&&!tU?r.push(s):n.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return o}const F3=()=>{};function OS(t,e,n,r=F3){t.push(e);const o=()=>{const s=t.indexOf(e);s>-1&&(t.splice(s,1),r())};return!n&&$u()&&Tf(o),o}function Ql(t,...e){t.slice().forEach(n=>{n(...e)})}const rU=t=>t();function c1(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,r)=>t.set(r,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],o=t[n];l1(o)&&l1(r)&&t.hasOwnProperty(n)&&!Ot(r)&&!ll(r)?t[n]=c1(o,r):t[n]=r}return t}const oU=Symbol();function sU(t){return!l1(t)||!t.hasOwnProperty(oU)}const{assign:xi}=Object;function iU(t){return!!(Ot(t)&&t.effect)}function aU(t,e,n,r){const{state:o,actions:s,getters:i}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=o?o():{});const u=UP(n.state.value[t]);return xi(u,s,Object.keys(i||{}).reduce((d,f)=>(d[f]=yh(Y(()=>{Mh(n);const h=n._s.get(t);return i[f].call(h,h)})),d),{}))}return l=B3(t,c,e,n,r,!0),l}function B3(t,e,n={},r,o,s){let i;const a=xi({actions:{}},n),l={deep:!0};let c,u,d=[],f=[],h;const p=r.state.value[t];!s&&!p&&(r.state.value[t]={}),ae({});let m;function v(E){let O;c=u=!1,typeof E=="function"?(E(r.state.value[t]),O={type:Xd.patchFunction,storeId:t,events:h}):(c1(r.state.value[t],E),O={type:Xd.patchObject,payload:E,storeId:t,events:h});const N=m=Symbol();cr().then(()=>{m===N&&(c=!0)}),u=!0,Ql(d,O,r.state.value[t])}const b=s?function(){const{state:O}=n,N=O?O():{};this.$patch(R=>{xi(R,N)})}:F3;function w(){i.stop(),d=[],f=[],r._s.delete(t)}function k(E,O){return function(){Mh(r);const N=Array.from(arguments),R=[],I=[];function j(Q){R.push(Q)}function de(Q){I.push(Q)}Ql(f,{args:N,name:E,store:C,after:j,onError:de});let te;try{te=O.apply(this&&this.$id===t?this:C,N)}catch(Q){throw Ql(I,Q),Q}return te instanceof Promise?te.then(Q=>(Ql(R,Q),Q)).catch(Q=>(Ql(I,Q),Promise.reject(Q))):(Ql(R,te),te)}}const y={_p:r,$id:t,$onAction:OS.bind(null,f),$patch:v,$reset:b,$subscribe(E,O={}){const N=OS(d,E,O.detached,()=>R()),R=i.run(()=>ot(()=>r.state.value[t],I=>{(O.flush==="sync"?u:c)&&E({storeId:t,type:Xd.direct,events:h},I)},xi({},l,O)));return N},$dispose:w},C=tr(y);r._s.set(t,C);const M=(r._a&&r._a.runWithContext||rU)(()=>r._e.run(()=>(i=gh()).run(e)));for(const E in M){const O=M[E];if(Ot(O)&&!iU(O)||ll(O))s||(p&&sU(O)&&(Ot(O)?O.value=p[E]:c1(O,p[E])),r.state.value[t][E]=O);else if(typeof O=="function"){const N=k(E,O);M[E]=N,a.actions[E]=O}}return xi(C,M),xi(mt(C),M),Object.defineProperty(C,"$state",{get:()=>r.state.value[t],set:E=>{v(O=>{xi(O,E)})}}),r._p.forEach(E=>{xi(C,i.run(()=>E({store:C,app:r._a,pinia:r,options:a})))}),p&&s&&n.hydrate&&n.hydrate(C.$state,p),c=!0,u=!0,C}function Vr(t,e,n){let r,o;const s=typeof e=="function";typeof t=="string"?(r=t,o=s?n:e):(o=t,r=t.id);function i(a,l){const c=Ek();return a=a||(c?An(H3,null):null),a&&Mh(a),a=$3,a._s.has(r)||(s?B3(r,e,o,a):aU(r,o,a)),a._s.get(r)}return i.$id=r,i}const lU=ur(t=>{const e=nU();return t.vueApp.use(e),Mh(e),t.payload&&t.payload.pinia&&(e.state.value=t.payload.pinia),{provide:{pinia:e}}});function j3(t={}){const{useProxy:e=!0}=t,n=Yt(),r=n.public.backendUrl,o=n.public.apiProxyUrl!==void 0&&n.public.apiProxyUrl!==null?n.public.apiProxyUrl:!1;let s=r+"/wp-json";return e&&o!==!1&&(s=o+"/wp-json"),n.public.flowmateEnabled&&(s=n.public.backendUrl+"/wp-json"),{admin:r,api:s,apiProxy:o,backendRewriteUrls:n.public.backendRewriteUrls,cacheKey:null}}function IS(t,e={}){const{admin:n,backendRewriteUrls:r}=j3();if(!t||t===""||t===void 0)return console.error("URL is empty"),{path:!1,url:!1,isInternal:!1};let o=null;try{o=new URL(t)}catch{return console.error("URL is not valid",t),{path:!1,url:!1,isInternal:!1}}let s=t,i=!1,a=r!==void 0?r.split(","):[];return a.includes(n)||a.push(n),typeof window<"u"&&!a.includes(window.location.origin)&&a.push(window.location.origin),o&&r&&a.forEach(l=>{if(l.indexOf("localhost")===0)o&&o.host==="localhost"&&(i=!0,s=o.pathname);else{const c=new URL(l);o&&o.host===c.host&&(i=!0,s=o.pathname)}}),{path:s,url:o,isInternal:i}}const cU=ur(t=>{const e=j3();function n(s){let i=e.api;return s&&(i=i+s),i}function r(s){let i;s.hasOwnProperty("url")&&(i=s.url);const{isInternal:a,path:l}=IS(i);return a?l:""}function o(s){let i=s;s&&s.hasOwnProperty("url")&&(i=s.url);const{isInternal:a}=IS(i);return a}return{provide:{apiReqUrl:(s,i)=>n(s),isInternalLink:s=>o(s),getInternalPath:s=>r(s)}}});var Qm={},uU=Object.defineProperty,dU=(t,e,n)=>e in t?uU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rn=(t,e,n)=>(dU(t,typeof e!="symbol"?e+"":e,n),n);const dt=Vr("flowstore",{state:()=>({context:{},revision:{},editorOptions:[],options:{backend:"https://checkmate-theme.staging-test.dk",frontend:"http://localhost:5173",backendDriver:"wordpress",availableBlocks:null},loading:!1,preLoading:!0,flexPopupOpen:!1,mediaPopupOpen:!1,editMode:!0,backdrop:!1,currentPath:"#/",collaborationStopped:!1,shareActive:!1,shareId:0}),getters:{getShareActive(t){return t.shareActive},getShareId(t){return t.shareId},pageContext(t){return t.context},revisionContext(t){return t.revision},getEditMode(t){return t.editMode},getOptions(t){return t.options},getAvailableBlocks(t){return t.options.availableBlocks},getLoading(t){return t.loading},getPreloading(t){return t.preLoading},getFlexPopupOpen(t){return t.flexPopupOpen},getMediaPopupOpen(t){return t.mediaPopupOpen},getBackdrop(t){return t.backdrop},getCurrentPath(t){return t.currentPath},isErrorPage(t){return t.currentPath==="#/404"||t.collaborationStopped},getCollaborationStopped(t){return t.collaborationStopped},getLoadingClass(){return"fm-opacity-50 fm-pointer-events-none"},getBreadcrumbs(t){if(!t.context.yoast_head_json)return[];const e=t.context.yoast_head_json.schema["@graph"].find(n=>n["@type"]==="BreadcrumbList");return e?e.itemListElement:[]}},actions:{setContext(t){this.context=t},setRevision(t){this.revision=t},setLoading(t){this.loading=t},setShareActive(t){this.shareActive=t},setShareId(t){this.shareId=t},isBlockAvailable(t){return this.options.availableBlocks?this.options.availableBlocks.split(",").includes(t):!0},setCollaborationStopped(t){this.collaborationStopped=t},resetRevision(){this.revision={}},setPreloading(t){this.preLoading=t},setOptions(t){this.options=t},unsetContext(){this.context={}},toggleFlexPopup(){this.flexPopupOpen=!this.flexPopupOpen},toggleMediaPopup(){this.mediaPopupOpen=!this.mediaPopupOpen},setBackdrop(t){this.backdrop=t},setCurrentPath(t){this.currentPath=t},removeBlock(t){this.context.acf.content.splice(t,1),document.dispatchEvent(new CustomEvent("flowmate-block-removed",{}))},addFlexBlock(t,e){e&&e.data_models[t]&&(this.context.acf.content||(this.context.acf.content=[]),this.context.acf.content.push(JSON.parse(JSON.stringify(e.data_models[t]))),this.flexPopupOpen&&(this.flexPopupOpen=!1),document.dispatchEvent(new CustomEvent("flowmate-block-added",{})))},async savePage(){if(this.loading=!0,console.log("savePage"),this.options.backend){const t=this.options.backend+"/wp-json/flowmate/v1/content/"+this.context.id;await fetch(t,{method:"PUT",body:JSON.stringify(this.context),headers:{"Content-Type":"application/json"}}).then(e=>{console.log(e)})}else console.log("No backend url set");this.loading=!1}}}),ai=Vr("navigationStore",{state:()=>({menues:["organizer","revisions"],openStatus:{left:{main:!0,organizer:!1,revisions:!1},right:{status:!0,options:!1,seo:!1},debugger:!1,user:!1}}),getters:{getOpenStatuses(t){return t.openStatus},getLeftOpenStatus(t){return t.openStatus.left.main},getRightOpenStatus(t){return t.openStatus.right},getUserMenuOpenStatus(t){return t.openStatus.user},getCollaborateOpenStatus(t){return t.openStatus.left.collaborate},getDebuggerOpenStatus(t){return t.openStatus.debugger}},actions:{getOpenStatus(t,e){return t?this.openStatus[t][e]:this.openStatus[e]},toggleNavigation(t,e){t?(this.menues.includes(e)&&this.menues.forEach(n=>{n!==e&&(this.openStatus[t][n]=!1,typeof window<"u"&&localStorage.setItem(t+"-"+n+"-open","false"))}),this.openStatus[t][e]=!this.openStatus[t][e],typeof window<"u"&&localStorage.setItem(t+"-"+e+"-open",this.openStatus[t][e])):(this.openStatus[e]=!this.openStatus[e],typeof window<"u"&&localStorage.setItem(e+"-open",this.openStatus[e]))},setStatesFromLocalStorage(){if(typeof window<"u")for(const t in this.openStatus)if(t==="left"||t==="right")for(const e in this.openStatus[t])localStorage.getItem(t+"-"+e+"-open")&&(this.openStatus[t][e]=localStorage.getItem(t+"-"+e+"-open")==="true");else localStorage.getItem(t+"-open")&&(this.openStatus[t]=localStorage.getItem(t+"-open")==="true")}}}),Bu=Vr("collaborateStore",{state:()=>({collaborateMode:!1,currentMessage:"",messages:[],chatOpen:!1,unreadMessages:0,collaborationID:null,collaborationGuests:[],notificationsOn:!0,guestColors:[{bg:"fm-bg-green-500",border:"fm-border-green-500",ring:"fm-ring-green-500",hex:"green"},{bg:"fm-bg-blue-500",border:"fm-border-blue-500",ring:"fm-ring-blue-500",hex:"blue"},{bg:"fm-bg-red-500",border:"fm-border-red-500",ring:"fm-ring-red-500",hex:"red"},{bg:"fm-bg-indigo-500",border:"fm-border-indigo-500",ring:"fm-ring-indigo-500",hex:"indigo"},{bg:"fm-bg-pink-500",border:"fm-border-pink-500",ring:"fm-ring-pink-500",hex:"pink"},{bg:"fm-bg-purple-500",border:"fm-border-purple-500",ring:"fm-ring-purple-500",hex:"purple"},{bg:"fm-bg-yellow-500",border:"fm-border-yellow-500",ring:"fm-ring-yellow-500",hex:"yellow"}],firebaseUser:null}),getters:{getCollaborateMode(t){return t.collaborateMode},getCurrentMessage(t){return t.currentMessage},getMessages(t){return t.messages},getChatOpen(t){return t.chatOpen},getNotificationsOn(t){return t.notificationsOn},getUnreadMessageCount(t){return t.unreadMessages},getCollaborationID(t){return t.collaborationID},getCollaborationGuests(t){return t.collaborationGuests},getGuestColor:t=>e=>{const n=Object.keys(t.collaborationGuests).findIndex(r=>t.collaborationGuests[r].uid===e.uid);return t.guestColors[n%t.guestColors.length]},getGuestInitials:t=>e=>{var n,r;let o=new RegExp(/(\p{L}{1})\p{L}+/,"gu"),s=[...e.name.matchAll(o)];return((((n=s.shift())==null?void 0:n[1])||"")+(((r=s.pop())==null?void 0:r[1])||"")).toUpperCase()},getFirebaseUser(t){return t.firebaseUser}},actions:{setCollaborateMode(t){this.collaborateMode=t},setUnreadMessageCount(t){this.unreadMessages=t},setMessages(t){t.length!==this.messages.length&&(this.messages=t)},clearCurrentMessage(){this.currentMessage=""},resetCollaboration(){this.collaborationID=null,this.collaborationGuests=[],this.collaborateMode=!1},setCollaborationID(t){this.collaborationID=t},toggleChat(){this.chatOpen=!this.chatOpen},setCollaborationGuests(t){this.collaborationGuests=t},setFirebaseUser(t){this.firebaseUser=t}}});/*!
  * @soerenmartius/vue3-clipboard v0.1.2
  * (c) 2021 Soeren Martius
  * @license MIT
  */var fU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hU(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function pU(t,e,n){return n={path:e,exports:{},require:function(r,o){return mU(r,o??n.path)}},t(n,n.exports),n.exports}function mU(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var gU=pU(function(t,e){/*!
 * clipboard.js v2.0.6
 * https://clipboardjs.com/
 * 
 * Licensed MIT  Zeno Rocha
 */(function(n,r){t.exports=r()})(fU,function(){return function(n){var r={};function o(s){if(r[s])return r[s].exports;var i=r[s]={i:s,l:!1,exports:{}};return n[s].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=n,o.c=r,o.d=function(s,i,a){o.o(s,i)||Object.defineProperty(s,i,{enumerable:!0,get:a})},o.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},o.t=function(s,i){if(i&1&&(s=o(s)),i&8||i&4&&typeof s=="object"&&s&&s.__esModule)return s;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:s}),i&2&&typeof s!="string")for(var l in s)o.d(a,l,(function(c){return s[c]}).bind(null,l));return a},o.n=function(s){var i=s&&s.__esModule?function(){return s.default}:function(){return s};return o.d(i,"a",i),i},o.o=function(s,i){return Object.prototype.hasOwnProperty.call(s,i)},o.p="",o(o.s=6)}([function(n,r){function o(s){var i;if(s.nodeName==="SELECT")s.focus(),i=s.value;else if(s.nodeName==="INPUT"||s.nodeName==="TEXTAREA"){var a=s.hasAttribute("readonly");a||s.setAttribute("readonly",""),s.select(),s.setSelectionRange(0,s.value.length),a||s.removeAttribute("readonly"),i=s.value}else{s.hasAttribute("contenteditable")&&s.focus();var l=window.getSelection(),c=document.createRange();c.selectNodeContents(s),l.removeAllRanges(),l.addRange(c),i=l.toString()}return i}n.exports=o},function(n,r){function o(){}o.prototype={on:function(s,i,a){var l=this.e||(this.e={});return(l[s]||(l[s]=[])).push({fn:i,ctx:a}),this},once:function(s,i,a){var l=this;function c(){l.off(s,c),i.apply(a,arguments)}return c._=i,this.on(s,c,a)},emit:function(s){var i=[].slice.call(arguments,1),a=((this.e||(this.e={}))[s]||[]).slice(),l=0,c=a.length;for(l;l<c;l++)a[l].fn.apply(a[l].ctx,i);return this},off:function(s,i){var a=this.e||(this.e={}),l=a[s],c=[];if(l&&i)for(var u=0,d=l.length;u<d;u++)l[u].fn!==i&&l[u].fn._!==i&&c.push(l[u]);return c.length?a[s]=c:delete a[s],this}},n.exports=o,n.exports.TinyEmitter=o},function(n,r,o){var s=o(3),i=o(4);function a(d,f,h){if(!d&&!f&&!h)throw new Error("Missing required arguments");if(!s.string(f))throw new TypeError("Second argument must be a String");if(!s.fn(h))throw new TypeError("Third argument must be a Function");if(s.node(d))return l(d,f,h);if(s.nodeList(d))return c(d,f,h);if(s.string(d))return u(d,f,h);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function l(d,f,h){return d.addEventListener(f,h),{destroy:function(){d.removeEventListener(f,h)}}}function c(d,f,h){return Array.prototype.forEach.call(d,function(p){p.addEventListener(f,h)}),{destroy:function(){Array.prototype.forEach.call(d,function(p){p.removeEventListener(f,h)})}}}function u(d,f,h){return i(document.body,d,f,h)}n.exports=a},function(n,r){r.node=function(o){return o!==void 0&&o instanceof HTMLElement&&o.nodeType===1},r.nodeList=function(o){var s=Object.prototype.toString.call(o);return o!==void 0&&(s==="[object NodeList]"||s==="[object HTMLCollection]")&&"length"in o&&(o.length===0||r.node(o[0]))},r.string=function(o){return typeof o=="string"||o instanceof String},r.fn=function(o){var s=Object.prototype.toString.call(o);return s==="[object Function]"}},function(n,r,o){var s=o(5);function i(c,u,d,f,h){var p=l.apply(this,arguments);return c.addEventListener(d,p,h),{destroy:function(){c.removeEventListener(d,p,h)}}}function a(c,u,d,f,h){return typeof c.addEventListener=="function"?i.apply(null,arguments):typeof d=="function"?i.bind(null,document).apply(null,arguments):(typeof c=="string"&&(c=document.querySelectorAll(c)),Array.prototype.map.call(c,function(p){return i(p,u,d,f,h)}))}function l(c,u,d,f){return function(h){h.delegateTarget=s(h.target,u),h.delegateTarget&&f.call(c,h)}}n.exports=a},function(n,r){var o=9;if(typeof Element<"u"&&!Element.prototype.matches){var s=Element.prototype;s.matches=s.matchesSelector||s.mozMatchesSelector||s.msMatchesSelector||s.oMatchesSelector||s.webkitMatchesSelector}function i(a,l){for(;a&&a.nodeType!==o;){if(typeof a.matches=="function"&&a.matches(l))return a;a=a.parentNode}}n.exports=i},function(n,r,o){o.r(r);var s=o(0),i=o.n(s),a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},l=function(){function M(E,O){for(var N=0;N<O.length;N++){var R=O[N];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(E,R.key,R)}}return function(E,O,N){return O&&M(E.prototype,O),N&&M(E,N),E}}();function c(M,E){if(!(M instanceof E))throw new TypeError("Cannot call a class as a function")}var u=function(){function M(E){c(this,M),this.resolveOptions(E),this.initSelection()}return l(M,[{key:"resolveOptions",value:function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=E.action,this.container=E.container,this.emitter=E.emitter,this.target=E.target,this.text=E.text,this.trigger=E.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var E=this,O=document.documentElement.getAttribute("dir")=="rtl";this.removeFake(),this.fakeHandlerCallback=function(){return E.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[O?"right":"left"]="-9999px";var N=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=N+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=i()(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=i()(this.target),this.copyText()}},{key:"copyText",value:function(){var E=void 0;try{E=document.execCommand(this.action)}catch{E=!1}this.handleResult(E)}},{key:"handleResult",value:function(E){this.emitter.emit(E?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),document.activeElement.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"copy";if(this._action=E,this._action!=="copy"&&this._action!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(E){if(E!==void 0)if(E&&(typeof E>"u"?"undefined":a(E))==="object"&&E.nodeType===1){if(this.action==="copy"&&E.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(this.action==="cut"&&(E.hasAttribute("readonly")||E.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`);this._target=E}else throw new Error('Invalid "target" value, use a valid Element')},get:function(){return this._target}}]),M}(),d=u,f=o(1),h=o.n(f),p=o(2),m=o.n(p),v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},b=function(){function M(E,O){for(var N=0;N<O.length;N++){var R=O[N];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(E,R.key,R)}}return function(E,O,N){return O&&M(E.prototype,O),N&&M(E,N),E}}();function w(M,E){if(!(M instanceof E))throw new TypeError("Cannot call a class as a function")}function k(M,E){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:M}function y(M,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);M.prototype=Object.create(E&&E.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(M,E):M.__proto__=E)}var C=function(M){y(E,M);function E(O,N){w(this,E);var R=k(this,(E.__proto__||Object.getPrototypeOf(E)).call(this));return R.resolveOptions(N),R.listenClick(O),R}return b(E,[{key:"resolveOptions",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof O.action=="function"?O.action:this.defaultAction,this.target=typeof O.target=="function"?O.target:this.defaultTarget,this.text=typeof O.text=="function"?O.text:this.defaultText,this.container=v(O.container)==="object"?O.container:document.body}},{key:"listenClick",value:function(O){var N=this;this.listener=m()(O,"click",function(R){return N.onClick(R)})}},{key:"onClick",value:function(O){var N=O.delegateTarget||O.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new d({action:this.action(N),target:this.target(N),text:this.text(N),container:this.container,trigger:N,emitter:this})}},{key:"defaultAction",value:function(O){return _("action",O)}},{key:"defaultTarget",value:function(O){var N=_("target",O);if(N)return document.querySelector(N)}},{key:"defaultText",value:function(O){return _("text",O)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],N=typeof O=="string"?[O]:O,R=!!document.queryCommandSupported;return N.forEach(function(I){R=R&&!!document.queryCommandSupported(I)}),R}}]),E}(h.a);function _(M,E){var O="data-clipboard-"+M;if(E.hasAttribute(O))return E.getAttribute(O)}r.default=C}]).default})}),yU=hU(gU);const z3=(t,e="copy")=>new Promise((n,r)=>{const o=document.createElement("button"),s=new yU(o,{text:()=>t,action:()=>e});s.on("success",i=>{s.destroy(),n(i)}),s.on("error",i=>{s.destroy(),r(i)}),document.body.appendChild(o),o.click(),document.body.removeChild(o)});let ky=class{constructor(e){Rn(this,"name"),Rn(this,"features"),this.name=e.name,this.features=e.features}hasFeature(e){return this.features.some(n=>n.name===e)}getFeature(e){return this.hasFeature(e)?this.getFeatures().find(n=>n.name===e):[]}getFeatures(){return this.features}};class ju{constructor({name:e,value:n,defaultValue:r,permissions:o}){Rn(this,"name"),Rn(this,"defaultValue"),Rn(this,"permissions"),Rn(this,"enabled"),this.name=e,this.enabled=n,this.defaultValue=r,this.permissions=o}get isEnabled(){return this.enabled}get isDisabled(){return!this.enabled}resetFeature(){this.enabled=this.defaultValue}setValue(e){this.enabled=e}withPermisions(e){const n=[];return e.forEach(r=>{var o;(o=this.permissions)!=null&&o.includes(r)&&n.push(r)}),this.permissions=n,this}asEnabled(){return this.enabled=!0,this}asDisabled(){return this.enabled=!1,this}toJSON(){return{...this}}}const vU=()=>new ju({name:"dashboard",value:!0,defaultValue:!0}),xy=()=>new ju({name:"design",value:!0,defaultValue:!0,permissions:["create","read","update","delete","publish","share"]}),ax=()=>new ju({name:"revisions",value:!0,defaultValue:!0,permissions:["create","read","update","delete","share"]}),Cy=()=>new ju({name:"collaborate",value:!0,defaultValue:!0,permissions:["create","read","update","delete","chat"]}),V3=()=>new ju({name:"content",value:!0,defaultValue:!0,permissions:["read"]}),_y=()=>new ju({name:"ui",value:!0,defaultValue:!0,permissions:["navbar","navbar.editToggle","navbar.collaborateToggle","navigation","navigationRight","navigationLeft","share","editor"]}),bU=new ky({name:"default",features:[V3(),vU(),ax(),xy(),Cy(),_y()]}),wU=new ky({name:"guest",features:[xy().asEnabled().withPermisions(["read"]),Cy().asEnabled().withPermisions(["read","update"]),ax().asDisabled(),_y()]}),kU=new ky({name:"collaborator",features:[xy().withPermisions(["read","update"]),Cy().withPermisions(["read","update","chat"]),_y()]}),AS=new ky({name:"visitor",features:[ax().asDisabled(),Cy().asDisabled(),xy().asDisabled(),V3().withPermisions(["read"]),_y().withPermisions(["editor"])]}),Ss=Vr("featureStore",{state:()=>({currentRole:"visitor",guestRole:"guest",roles:[wU,kU,bU,AS],features:[...AS.getFeatures()],contextualFilters:{}}),getters:{getContextualFilters(t){return t.contextualFilters},getGuestRole(t){return t.guestRole},getCurrentRole(t){return t.currentRole},getRoles(t){return t.roles},getRole:t=>e=>t.roles.find(n=>n.name===e),getFeatures(t){return t.features},getFeature:t=>e=>t.features.find(n=>n.name===e)},actions:{resetContextualFilters(){this.contextualFilters={}},setContextualFilter(t,e){this.contextualFilters[t]=e},setGuestRole(t){this.guestRole=t},setFeatures(t){this.features=t},setCurrentRole(t){const e=this.getRole(t);e!==void 0?(this.currentRole=t,this.setFeatures(e.getFeatures())):console.error("Role not found")}}}),cs=Vr("userStore",{state:()=>({user:null,role:"guest",token:null,loginRedirectUri:"#/",allowGuestLogin:!1}),getters:{getUser(t){if(typeof window<"u"){let e=localStorage.getItem("fm-user");if(e)try{t.user=JSON.parse(atob(e))}catch{}}return t.user},getToken(t){if(typeof window<"u"){let e=localStorage.getItem("fm-token");e&&(t.token=e)}return t.token},getUserRole(t){if(typeof window<"u"&&window.localStorage){let e=window.localStorage.getItem("fm-user-role");e&&(t.role=e)}return t.role},getLoginRedirectUri(t){return t.loginRedirectUri},isGuestLoginAllowed(t){return t.allowGuestLogin}},actions:{signOut(){this.setUser(null),this.setToken(null),this.setUserRole(null)},setUser(t){typeof window<"u"&&(t?localStorage.setItem("fm-user",btoa(JSON.stringify(t))):localStorage.removeItem("fm-user")),this.user=t},setToken(t){typeof window<"u"&&(t?localStorage.setItem("fm-token",t):localStorage.removeItem("fm-token")),this.token=t},setUserRole(t){const{setCurrentRole:e}=Ss();typeof window<"u"&&window.localStorage&&(t?window.localStorage.setItem("fm-user-role",t):window.localStorage.removeItem("fm-user-role")),e(t)},setLoginRedirectUri(t){this.loginRedirectUri=t},enableGuestLogin(){this.allowGuestLogin=!0},disableGuestLogin(){this.allowGuestLogin=!1}}}),rn=()=>{const t=cs(),e=Ss(),n=()=>t.getUser,r=()=>n()?n().id:null,o=p=>{t.setUser(p)},s=p=>{t.setToken(p)},i=()=>t.getToken,a=()=>n()?n().avatar:null,l=()=>n()?n().name:null,c=()=>t.getUserRole,u=p=>{t.setUserRole(p)},d=Y(()=>!!n()),f=Y(()=>d?l():null),h=Y(()=>d?a():null);return{getUser:n,setUser:o,setToken:s,getAuthToken:i,getAvatar:a,getUserId:r,getUsername:l,getUserRole:c,setRole:u,initUser:()=>{const p=n(),m=i(),v=c();return p?(m?e.setCurrentRole("default"):(v==="collaborator"||v==="guest")&&e.setCurrentRole(v),u(e.getCurrentRole),e.getCurrentRole):!1},signOut:()=>{t.signOut(),e.setCurrentRole("guest")},isUserLoggedIn:d,userName:f,userAvatar:h}},U3=Vr("messageStore",{state:()=>({messages:[]}),getters:{getMessages(t){return t.messages}},actions:{writeMessage(t,e,n,r=!1,o){const s={message:t,errorCode:e,type:n,clickToClose:r,timestamp:o};this.messages.unshift(s)},removeMessage(t){const e=this.messages.findIndex(n=>n.timestamp===t);e!==-1&&this.messages.splice(e,1)}}}),co=()=>{const t=U3();return{writeMessage:(e,n,r,o=!1,s=5)=>{const i=Date.now();t.writeMessage(e,n,r,o,i),o||setTimeout(()=>{t.removeMessage(i)},s*1e3)},removeMessage:e=>{t.removeMessage(e)}}},xU=t=>{const e="revisions",n=cs();return{name:e,getItem:async(r,o)=>{n.getToken;const s=t+"/wp-json/flowmate/v1/revision/"+r,i={"Content-Type":"application/json"};return o!==void 0&&o.requestToken!==void 0&&(i.Authorization="Bearer "+o.requestToken),await fetch(s,{method:"GET",headers:i}).then(a=>a.json())},getAll:async(r,o=20,s)=>{console.log("GET ALL REVISIONS VIA API",r,o);const i=t+"/wp-json/flowmate/v1/content/"+r+"/revisions",a={"Content-Type":"application/json"};return s!==void 0&&s.requestToken!==void 0&&(a.Authorization="Bearer "+s.requestToken),await fetch(i,{method:"GET",headers:a}).then(l=>l.json())},updateItem:async(r,o,s)=>{const{writeMessage:i}=co(),a=t+"/wp-json/flowmate/v1/revision/"+r,l={"Content-Type":"application/json"};s!==void 0&&s.requestToken!==void 0&&(l.Authorization="Bearer "+s.requestToken);let c=await fetch(a,{method:"PUT",body:JSON.stringify(o),headers:l}).then(u=>u.json());if(c.id)return i("Revision updated",null,"success"),c;c.data&&c.data.status&&c.data.status>299&&i(c.message,c.data.status,"error",!0)},updateStatus:async(r,o,s)=>{const i=t+"/wp-json/flowmate/v1/revision/"+r+"/status",a={"Content-Type":"application/json"};return s!==void 0&&s.requestToken!==void 0&&(a.Authorization="Bearer "+s.requestToken),await fetch(i,{method:"PUT",body:JSON.stringify({status:o}),headers:a}).then(l=>l.json())},deleteItem:async(r,o)=>{const{writeMessage:s}=co(),i=t+"/wp-json/flowmate/v1/revision/"+r,a={"Content-Type":"application/json"};o!==void 0&&o.requestToken!==void 0&&(a.Authorization="Bearer "+o.requestToken);let l=await fetch(i,{method:"DELETE",headers:a}).then(c=>c.json());if(l.message)return s(l.message,null,"success"),l;l.data&&l.data.status&&l.data.status>299&&s(l.message,l.data.status,"error",!0)},createItem:async(r,o)=>{const{writeMessage:s}=co(),i=t+"/wp-json/flowmate/v1/revisions",a={"Content-Type":"application/json"};o!==void 0&&o.requestToken!==void 0&&(a.Authorization="Bearer "+o.requestToken);let l=await fetch(i,{method:"POST",body:JSON.stringify(r),headers:a}).then(c=>c.json());if(console.log("RES RES",l),l.id)return s("Revision created",null,"success"),l;l.data&&l.data.status&&l.data.status>299&&s(l.message,l.data.status,"error",!0)},getByShareId:async(r,o)=>{const s=t+"/wp-json/flowmate/v1/revision/share/"+r;return o!==void 0&&o.requestToken!==void 0&&""+o.requestToken,await fetch(s,{method:"GET"}).then(i=>i.json())}}},CU=t=>({name:"content",getItem:async(e,n)=>{const r=t+"/wp-json/wp/v2/pages?lazy=true&acf_format=standard&acf_content=true&id="+e,o={"Content-Type":"application/json"};return n!==void 0&&n.requestToken!==void 0&&(o.Authorization="Bearer "+n.requestToken),await fetch(r,{method:"GET",headers:o}).then(s=>s.json())},getAll:async(e=1,n=20,r)=>{let o=t+"/wp-json/flowmate/v1/content?per_page="+n+"&page="+e;const s={"Content-Type":"application/json"};return r!==void 0&&r.requestToken!==void 0&&(s.Authorization="Bearer "+r.requestToken),await fetch(o,{method:"GET",headers:s}).then(i=>i.json())},updateItem:async(e,n)=>{},createItem:async e=>{},deleteItem:async e=>{}}),_U=t=>({name:"config",getItem:async(e,n)=>{let r=t+"/wp-json/flowmate/v1/content/config/";const o={"Content-Type":"application/json"};return n!==void 0&&n.requestToken!==void 0&&(o.Authorization="Bearer "+n.requestToken),await fetch(r,{method:"GET",headers:{...o}}).then(s=>s.json())},getAll:async(e,n=20,r)=>{console.log("GET ALL REVISIONS VIA API",e,n)},updateItem:async(e,n,r)=>{},createItem:async(e,n)=>{},deleteItem:async(e,n)=>{}}),SU=t=>(cs(),{name:"auth",login:async(n,r)=>{const o=t+"/wp-json/flowmate/v1/auth";return await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,pass:r})}).then(s=>s.json())},renewToken:async n=>{let r=t+"/wp-json/flowmate/v1/auth/renew";return await fetch(r,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then(o=>o.json())},validateToken:async n=>{const r=t+"/wp-json/flowmate/v1/auth/validate";return await fetch(r,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then(o=>o.json())}}),TU=t=>({services:()=>[xU(t),CU(t),SU(t),_U(t)]}),qo=()=>{const t=dt(),e=t.options.backendDriver?t.options.backendDriver:"wordpress",n=t.options.backend,r=()=>{switch(e){case"wordpress":default:return TU(n);case"laravel":break}},o=()=>r().services(),s=a=>!!o().find(l=>l.name===a),i=a=>o().find(l=>l.name===a)??!1;return{getService:i,hasService:s,auth:()=>i("auth"),revisions:()=>i("revisions"),content:()=>i("content"),config:()=>i("config")}},ru=()=>{console.log("useAuth()");const t=cs(),e=qo(),n=rn(),r=async(c,u)=>{const{writeMessage:d}=co(),f=await e.auth().login(c,u);return f.token&&f.user?(n.setToken(f.token),n.setUser(f.user),n.setRole("default")):d(f.message,"Error","error"),f},o=async(c,u)=>{n.setUser({name:c}),n.setRole(u)},s=async(c,u)=>{const{writeMessage:d}=co();return parseInt(c)===l(u)?(n.setUser({name:"visitor"}),n.setRole("visitor"),!0):(d("Try again...","Wrong password","error"),!1)},i=async c=>await e.auth().validateToken(c),a=async c=>{const u=await e.auth().renewToken(c);return t.setToken(u.token),t.setUser(u.user),u},l=(c,u=0)=>{let d=3735928559^u,f=1103547991^u;for(let h=0,p;h<c.length;h++)p=c.charCodeAt(h),d=Math.imul(d^p,2654435761),f=Math.imul(f^p,1597334677);return d=Math.imul(d^d>>>16,2246822507)^Math.imul(f^f>>>13,3266489909),f=Math.imul(f^f>>>16,2246822507)^Math.imul(d^d>>>13,3266489909),4294967296*(2097151&f)+(d>>>0)};return{auth:r,authGuest:o,authVisitor:s,validate:i,renew:a,generateHash:l}},MU=()=>{const{validate:t}=ru();dt();const e=Ss(),n=cs();return{path:"#/redirect/wp-edit",callback:async r=>{const o=r.params.get("auth"),s=JSON.parse(atob(o));if(!n.getToken){console.log("WE ARE NOT LOGGED IN");const i=await t(s.token);if(!i)return{redirectUrl:"#/login"};n.setToken(i.token),n.setUser(i.user),e.setCurrentRole("default")}return{redirectUrl:"#/design/"+s.id}}}},Fr=()=>{const t=dt(),e=s=>{console.log("SET CONTEXT",s),t.setContext(s)},n=()=>t.pageContext,r=Y(()=>n().id),o=Y(()=>n());return{setContext:e,getContext:n,context:o,contextId:r}},De=(t,e)=>{const n=Ss();let r="",o=t;if(t.includes(".")){const l=t.split(".");o=l[0],r=l[1]}const s=n.getFeature(o),i=l=>!a(),a=l=>{const c=n.getContextualFilters;return s?c[t]!==void 0?c[t]:s.enabled&&r?s.permissions!==void 0?s.permissions.includes(r):!1:s.enabled:!1};return{asDisabled:l=>{n.setContextualFilter(t,!1)},asEnabled:l=>{n.setContextualFilter(t,!0)},isDisabled:i,isEnabled:a}},Hr=t=>{const e=dt(),n=ae(!0),r=ae(null),o=rn(),s=qo(),i=async(v,b=!0)=>{const{redirect:w}=_r(),k=await u(v);k.context?e.setRevision(k):w("#/404"),k.context&&b&&e.setContext(k.context)},a=()=>Object.keys(e.revisionContext).length===0&&e.revisionContext.constructor===Object?!1:e.revisionContext,l=()=>e.revisionContext.hasOwnProperty("id")?e.revisionContext.id:!1,c=async(v,b)=>{n.value=!0;const w=await s.revisions().getAll(v,50,{...b,requestToken:o.getAuthToken()});n.value=!1,r.value=w},u=async v=>await s.getService("revisions").getItem(v,{requestToken:o.getAuthToken()}),d=async(v,b)=>{const w=await s.revisions().updateItem(v,b,{requestToken:o.getAuthToken()});return e.setRevision(w),e.setContext(w.context),w},f=async v=>await s.revisions().deleteItem(v,{requestToken:o.getAuthToken()}),h=async v=>{const b=await s.revisions().createItem(v,{requestToken:o.getAuthToken()});return e.setRevision(b),e.setContext(b.context),b},p=async(v,b)=>{const w=await s.revisions().updateStatus(v,b,{requestToken:o.getAuthToken()});return e.setRevision(w),w},m=()=>{e.resetRevision()};return t&&c(t),{getRevision:u,getRevisions:c,getCurrentRevision:a,getCurrentRevisionId:l,deleteRevision:f,updateRevision:d,createRevision:h,updateStatus:p,setRevision:i,resetRevision:m,loading:n,revisions:r}},Ur=Vr("useEditableStore",{state:()=>({blockContext:{},blockIndex:null,fieldName:null,layoutName:null,activeMediaType:null,activeFieldType:null,activeParent:null,activeRepeaterIndex:null,isSetting:!1,updatedAt:null,mediaUpdatedAt:null,postsUpdatedAt:null,config:{layouts:!1},options:{backend:"https://checkmate-theme.staging-test.dk"},editMode:!0,darkMode:!1}),getters:{getUpdatedAt(t){return t.updatedAt},getMediaUpdatedAt(t){return t.mediaUpdatedAt},getPostsUpdatedAt(t){return t.postsUpdatedAt},getIsSetting(t){return t.isSetting},getBlockContext(t){return t.blockContext},getBlockIndex(t){return t.blockIndex},getFieldName(t){return t.fieldName},getActiveParent(t){return t.activeParent},getActiveRepeaterIndex(t){return t.activeRepeaterIndex},getLayoutName(t){return t.layoutName},getActiveFieldType(t){return t.activeFieldType},getActiveMediaTypes(t){return t.activeMediaType},getConfig(t){return t.config},getOptions(t){return t.options},getEditMode(t){return t.editMode},getDarkMode(t){return t.darkMode}},actions:{setValues(t,e,n,r,o,s,i,a,l,c){console.log("setValues",t,e,n,r,o,s,i,a,l,c),this.blockContext=t,this.blockIndex=e,this.fieldName=n,this.layoutName=i,this.activeMediaType=r,this.activeFieldType=o,this.activeRepeaterIndex=c,this.isSetting=a,this.activeParent=l,s==="media"?this.mediaUpdatedAt=Date.now():s==="posts"&&(this.postsUpdatedAt=Date.now())},setOptions(t){this.options=t},setEditMode(t){this.editMode=t,typeof window<"u"&&localStorage.setItem("edit-mode",this.editMode.toString())},setDarkMode(t){this.darkMode=t,typeof window<"u"&&localStorage.setItem("dark-mode",this.darkMode.toString())},setConfig(t){t.hasOwnProperty("layouts")||(t.layouts=t.data_models),this.config=t},setStatesFromLocalStorage(){typeof window<"u"&&(localStorage.getItem("edit-mode")&&(this.editMode=localStorage.getItem("edit-mode")==="true"),localStorage.getItem("dark-mode")&&(this.darkMode=localStorage.getItem("dark-mode")==="true"))}}}),EU=()=>{const t=dt(),e=qo(),n=rn(),r=Ur();return{path:"#/design/:id",callback:async o=>{_r();const s=o.uriSegments[2];if(!n.isUserLoggedIn.value||!De("design").isEnabled())return{redirectUrl:"#/login?redirect="+o.path};{const i=await e.content().getItem(s,{requestToken:n.getAuthToken()});if(De("revisions").isEnabled()&&Hr().resetRevision(),i.length===0)return{redirectUrl:De("content.read").isEnabled()?"/#/content":"/#/404"};console.log("RESPONSE",i),r.setEditMode(!0),Fr().setContext(i[0])}t.setPreloading(!1)}}},q3=Vr("pluginStore",{state:()=>({pluginDefinitions:[]}),getters:{getPluginDefinitions(t){return t.pluginDefinitions},getPluginDefinition(t){return e=>t.pluginDefinitions.find(n=>n.name===e)||null},getPluginConfig(t){return e=>{const n=t.pluginDefinitions.find(r=>r.name===e);return n?n.config:null}}},actions:{addPluginDefinition(t){if(this.pluginDefinitions.find(e=>e.name===t.name))throw new Error("Plugin already exists");this.pluginDefinitions.push(t)},removePluginDefinition(t){const e=this.pluginDefinitions.findIndex(n=>n.name===t);e>-1&&this.pluginDefinitions.splice(e,1)},setPluginDefinitions(t){this.pluginDefinitions=t}}});var NS;const OU=typeof window<"u",LS=()=>{};OU&&(NS=window==null?void 0:window.navigator)!=null&&NS.userAgent&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function RS(t){return typeof t=="function"?t():x(t)}function IU(t,e){function n(...r){return new Promise((o,s)=>{Promise.resolve(t(()=>e.apply(this,r),{fn:e,thisArg:this,args:r})).then(o).catch(s)})}return n}const AU=t=>t();function NU(t,e={}){let n,r,o=LS;const s=i=>{clearTimeout(i),o(),o=LS};return i=>{const a=RS(t),l=RS(e.maxWait);return n&&s(n),a<=0||l!==void 0&&l<=0?(r&&(s(r),r=null),Promise.resolve(i())):new Promise((c,u)=>{o=e.rejectOnCancel?u:c,l&&!r&&(r=setTimeout(()=>{n&&s(n),r=null,c(i())},l)),n=setTimeout(()=>{r&&s(r),r=null,c(i())},a)})}}var PS=Object.getOwnPropertySymbols,LU=Object.prototype.hasOwnProperty,RU=Object.prototype.propertyIsEnumerable,PU=(t,e)=>{var n={};for(var r in t)LU.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&PS)for(var r of PS(t))e.indexOf(r)<0&&RU.call(t,r)&&(n[r]=t[r]);return n};function DU(t,e,n={}){const r=n,{eventFilter:o=AU}=r,s=PU(r,["eventFilter"]);return ot(t,IU(o,e),s)}var $U=Object.defineProperty,HU=Object.defineProperties,FU=Object.getOwnPropertyDescriptors,Zm=Object.getOwnPropertySymbols,W3=Object.prototype.hasOwnProperty,K3=Object.prototype.propertyIsEnumerable,DS=(t,e,n)=>e in t?$U(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,BU=(t,e)=>{for(var n in e||(e={}))W3.call(e,n)&&DS(t,n,e[n]);if(Zm)for(var n of Zm(e))K3.call(e,n)&&DS(t,n,e[n]);return t},jU=(t,e)=>HU(t,FU(e)),zU=(t,e)=>{var n={};for(var r in t)W3.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Zm)for(var r of Zm(t))e.indexOf(r)<0&&K3.call(t,r)&&(n[r]=t[r]);return n};function VU(t,e,n={}){const r=n,{debounce:o=0,maxWait:s=void 0}=r,i=zU(r,["debounce","maxWait"]);return DU(t,e,jU(BU({},i),{eventFilter:NU(o,{maxWait:s})}))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe=function(t,e){if(!t)throw zu(e)},zu=function(t){return new Error("Firebase Database ("+G3.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let o=t.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},UU=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const o=t[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const s=t[n++];e[r++]=String.fromCharCode((o&31)<<6|s&63)}else if(o>239&&o<365){const s=t[n++],i=t[n++],a=t[n++],l=((o&7)<<18|(s&63)<<12|(i&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],i=t[n++];e[r++]=String.fromCharCode((o&15)<<12|(s&63)<<6|i&63)}}return e.join("")},lx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<t.length;o+=3){const s=t[o],i=o+1<t.length,a=i?t[o+1]:0,l=o+2<t.length,c=l?t[o+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,h=c&63;l||(h=64,i||(f=64)),r.push(n[u],n[d],n[f],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(J3(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):UU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<t.length;){const s=n[t.charAt(o++)],i=o<t.length?n[t.charAt(o)]:0;++o;const a=o<t.length?n[t.charAt(o)]:64;++o;const l=o<t.length?n[t.charAt(o)]:64;if(++o,s==null||i==null||a==null||l==null)throw new qU;const c=s<<2|i>>4;if(r.push(c),a!==64){const u=i<<4&240|a>>2;if(r.push(u),l!==64){const d=a<<6&192|l;r.push(d)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class qU extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Y3=function(t){const e=J3(t);return lx.encodeByteArray(e,!0)},eg=function(t){return Y3(t).replace(/\./g,"")},tg=function(t){try{return lx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WU(t){return X3(void 0,t)}function X3(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!KU(n)||(t[n]=X3(t[n],e[n]));return t}function KU(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JU=()=>GU().__FIREBASE_DEFAULTS__,YU=()=>{if(typeof process>"u"||typeof Qm>"u")return;const t=Qm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},XU=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&tg(t[1]);return e&&JSON.parse(e)},cx=()=>{try{return JU()||YU()||XU()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Q3=t=>{var e,n;return(n=(e=cx())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},QU=t=>{const e=Q3(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Z3=()=>{var t;return(t=cx())===null||t===void 0?void 0:t.config},eA=t=>{var e;return(e=cx())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eh=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZU(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[eg(JSON.stringify(n)),eg(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ux(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jn())}function eq(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function tA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tq(){const t=jn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function nA(){return G3.NODE_ADMIN===!0}function nq(){try{return typeof indexedDB=="object"}catch{return!1}}function rq(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var s;e(((s=o.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oq="FirebaseError";class Ca extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=oq,Object.setPrototypeOf(this,Ca.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oh.prototype.create)}}let Oh=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,s=this.errors[e],i=s?sq(s,r):"Error",a=`${this.serviceName}: ${i} (${o}).`;return new Ca(o,a,r)}};function sq(t,e){return t.replace(iq,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const iq=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(t){return JSON.parse(t)}function un(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=function(t){let e={},n={},r={},o="";try{const s=t.split(".");e=Bf(tg(s[0])||""),n=Bf(tg(s[1])||""),o=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:o}},aq=function(t){const e=rA(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},lq=function(t){const e=rA(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ou(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function u1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ng(t,e,n){const r={};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=e.call(n,t[o],o,t));return r}function rg(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const s=t[o],i=e[o];if($S(s)&&$S(i)){if(!rg(s,i))return!1}else if(s!==i)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function $S(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cq{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let o=this.chain_[0],s=this.chain_[1],i=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(i^a),u=1518500249):(c=s^i^a,u=1859775393):d<60?(c=s&i|a&(s|i),u=2400959708):(c=s^i^a,u=3395469782);const f=(o<<5|o>>>27)+c+l+u+r[d]&4294967295;l=a,a=i,i=(s<<30|s>>>2)&4294967295,s=o,o=f}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+i&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let o=0;const s=this.buf_;let i=this.inbuf_;for(;o<n;){if(i===0)for(;o<=r;)this.compress_(e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<n;)if(s[i]=e.charCodeAt(o),++i,++o,i===this.blockSize){this.compress_(s),i=0;break}}else for(;o<n;)if(s[i]=e[o],++i,++o,i===this.blockSize){this.compress_(s),i=0;break}}this.inbuf_=i,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let o=0;o<5;o++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[o]>>s&255,++r;return e}}function uq(t,e){const n=new dq(t,e);return n.subscribe.bind(n)}class dq{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");fq(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=z0),o.error===void 0&&(o.error=z0),o.complete===void 0&&(o.complete=z0);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fq(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function z0(){}function Sy(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hq=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let o=t.charCodeAt(r);if(o>=55296&&o<=56319){const s=o-55296;r++,pe(r<t.length,"Surrogate pair missing trail surrogate.");const i=t.charCodeAt(r)-56320;o=65536+(s<<10)+i}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Ty=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function So(t){return t&&t._delegate?t._delegate:t}let Nl=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pq{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Eh;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(o)return null;throw s}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gq(e))try{this.getOrInitializeService({instanceIdentifier:za})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:o});r.resolve(s)}catch{}}}}clearInstance(e=za){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=za){return this.instances.has(e)}getOptions(e=za){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&i.resolve(o)}return o}onInit(e,n){var r;const o=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(o,s);const i=this.instances.get(o);return i&&e(i,o),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mq(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=za){return this.component?this.component.multipleInstances?e:za:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mq(t){return t===za?void 0:t}function gq(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yq{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new pq(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(St||(St={}));const vq={debug:St.DEBUG,verbose:St.VERBOSE,info:St.INFO,warn:St.WARN,error:St.ERROR,silent:St.SILENT},bq=St.INFO,wq={[St.DEBUG]:"log",[St.VERBOSE]:"log",[St.INFO]:"info",[St.WARN]:"warn",[St.ERROR]:"error"},kq=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),o=wq[e];if(o)console[o](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let dx=class{constructor(e){this.name=e,this._logLevel=bq,this._logHandler=kq,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in St))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vq[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,St.DEBUG,...e),this._logHandler(this,St.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,St.VERBOSE,...e),this._logHandler(this,St.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,St.INFO,...e),this._logHandler(this,St.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,St.WARN,...e),this._logHandler(this,St.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,St.ERROR,...e),this._logHandler(this,St.ERROR,...e)}};const xq=(t,e)=>e.some(n=>t instanceof n);let HS,FS;function Cq(){return HS||(HS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _q(){return FS||(FS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const oA=new WeakMap,d1=new WeakMap,sA=new WeakMap,V0=new WeakMap,fx=new WeakMap;function Sq(t){const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{n(Qi(t.result)),o()},i=()=>{r(t.error),o()};t.addEventListener("success",s),t.addEventListener("error",i)});return e.then(n=>{n instanceof IDBCursor&&oA.set(n,t)}).catch(()=>{}),fx.set(e,t),e}function Tq(t){if(d1.has(t))return;const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{n(),o()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});d1.set(t,e)}let f1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return d1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||sA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Mq(t){f1=t(f1)}function Eq(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(U0(this),e,...n);return sA.set(r,e.sort?e.sort():[e]),Qi(r)}:_q().includes(t)?function(...e){return t.apply(U0(this),e),Qi(oA.get(this))}:function(...e){return Qi(t.apply(U0(this),e))}}function Oq(t){return typeof t=="function"?Eq(t):(t instanceof IDBTransaction&&Tq(t),xq(t,Cq())?new Proxy(t,f1):t)}function Qi(t){if(t instanceof IDBRequest)return Sq(t);if(V0.has(t))return V0.get(t);const e=Oq(t);return e!==t&&(V0.set(t,e),fx.set(e,t)),e}const U0=t=>fx.get(t);function Iq(t,e,{blocked:n,upgrade:r,blocking:o,terminated:s}={}){const i=indexedDB.open(t,e),a=Qi(i);return r&&i.addEventListener("upgradeneeded",l=>{r(Qi(i.result),l.oldVersion,l.newVersion,Qi(i.transaction),l)}),n&&i.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),o&&l.addEventListener("versionchange",c=>o(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Aq=["get","getKey","getAll","getAllKeys","count"],Nq=["put","add","delete","clear"],q0=new Map;function BS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(q0.get(e))return q0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=Nq.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||Aq.includes(n)))return;const s=async function(i,...a){const l=this.transaction(i,o?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),o&&l.done]))[0]};return q0.set(e,s),s}Mq(t=>({...t,get:(e,n,r)=>BS(e,n)||t.get(e,n,r),has:(e,n)=>!!BS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lq{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(Rq(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function Rq(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const h1="@firebase/app",jS="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=new dx("@firebase/app"),Pq="@firebase/app-compat",Dq="@firebase/analytics-compat",$q="@firebase/analytics",Hq="@firebase/app-check-compat",Fq="@firebase/app-check",Bq="@firebase/auth",jq="@firebase/auth-compat",zq="@firebase/database",Vq="@firebase/database-compat",Uq="@firebase/functions",qq="@firebase/functions-compat",Wq="@firebase/installations",Kq="@firebase/installations-compat",Gq="@firebase/messaging",Jq="@firebase/messaging-compat",Yq="@firebase/performance",Xq="@firebase/performance-compat",Qq="@firebase/remote-config",Zq="@firebase/remote-config-compat",eW="@firebase/storage",tW="@firebase/storage-compat",nW="@firebase/firestore",rW="@firebase/firestore-compat",oW="firebase",sW="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1="[DEFAULT]",iW={[h1]:"fire-core",[Pq]:"fire-core-compat",[$q]:"fire-analytics",[Dq]:"fire-analytics-compat",[Fq]:"fire-app-check",[Hq]:"fire-app-check-compat",[Bq]:"fire-auth",[jq]:"fire-auth-compat",[zq]:"fire-rtdb",[Vq]:"fire-rtdb-compat",[Uq]:"fire-fn",[qq]:"fire-fn-compat",[Wq]:"fire-iid",[Kq]:"fire-iid-compat",[Gq]:"fire-fcm",[Jq]:"fire-fcm-compat",[Yq]:"fire-perf",[Xq]:"fire-perf-compat",[Qq]:"fire-rc",[Zq]:"fire-rc-compat",[eW]:"fire-gcs",[tW]:"fire-gcs-compat",[nW]:"fire-fst",[rW]:"fire-fst-compat","fire-js":"fire-js",[oW]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og=new Map,m1=new Map;function aW(t,e){try{t.container.addComponent(e)}catch(n){Ll.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function su(t){const e=t.name;if(m1.has(e))return Ll.debug(`There were multiple attempts to register component ${e}.`),!1;m1.set(e,t);for(const n of og.values())aW(n,t);return!0}function hx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lW={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Zi=new Oh("app","Firebase",lW);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cW{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Nl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu=sW;function iA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:p1,automaticDataCollectionEnabled:!1},e),o=r.name;if(typeof o!="string"||!o)throw Zi.create("bad-app-name",{appName:String(o)});if(n||(n=Z3()),!n)throw Zi.create("no-options");const s=og.get(o);if(s){if(rg(n,s.options)&&rg(r,s.config))return s;throw Zi.create("duplicate-app",{appName:o})}const i=new yq(o);for(const l of m1.values())i.addComponent(l);const a=new cW(n,r,i);return og.set(o,a),a}function aA(t=p1){const e=og.get(t);if(!e&&t===p1&&Z3())return iA();if(!e)throw Zi.create("no-app",{appName:t});return e}function ea(t,e,n){var r;let o=(r=iW[t])!==null&&r!==void 0?r:t;n&&(o+=`-${n}`);const s=o.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${o}" with version "${e}":`];s&&a.push(`library name "${o}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ll.warn(a.join(" "));return}su(new Nl(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uW="firebase-heartbeat-database",dW=1,jf="firebase-heartbeat-store";let W0=null;function lA(){return W0||(W0=Iq(uW,dW,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(jf)}}}).catch(t=>{throw Zi.create("idb-open",{originalErrorMessage:t.message})})),W0}async function fW(t){try{return await(await lA()).transaction(jf).objectStore(jf).get(cA(t))}catch(e){if(e instanceof Ca)Ll.warn(e.message);else{const n=Zi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ll.warn(n.message)}}}async function zS(t,e){try{const n=(await lA()).transaction(jf,"readwrite");await n.objectStore(jf).put(e,cA(t)),await n.done}catch(n){if(n instanceof Ca)Ll.warn(n.message);else{const r=Zi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ll.warn(r.message)}}}function cA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hW=1024,pW=30*24*60*60*1e3;class mW{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new yW(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=VS();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(r=>r.date===n)))return this._heartbeatsCache.heartbeats.push({date:n,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const o=new Date(r.date).valueOf();return Date.now()-o<=pW}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=VS(),{heartbeatsToSend:n,unsentEntries:r}=gW(this._heartbeatsCache.heartbeats),o=eg(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function VS(){return new Date().toISOString().substring(0,10)}function gW(t,e=hW){const n=[];let r=t.slice();for(const o of t){const s=n.find(i=>i.agent===o.agent);if(s){if(s.dates.push(o.date),US(n)>e){s.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),US(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class yW{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nq()?rq().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await fW(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return zS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return zS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function US(t){return eg(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vW(t){su(new Nl("platform-logger",e=>new Lq(e),"PRIVATE")),su(new Nl("heartbeat",e=>new mW(e),"PRIVATE")),ea(h1,jS,t),ea(h1,jS,"esm2017"),ea("fire-js","")}vW("");var bW="firebase",wW="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ea(bW,wW,"app");const qS="@firebase/database",WS="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uA="";function kW(t){uA=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xW{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),un(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Bf(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CW{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Ts(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new xW(e)}}catch{}return new CW},tl=dA("localStorage"),_W=dA("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=new dx("@firebase/database"),SW=function(){let t=1;return function(){return t++}}(),fA=function(t){const e=hq(t),n=new cq;n.update(e);const r=n.digest();return lx.encodeByteArray(r)},Ih=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Ih.apply(null,r):typeof r=="object"?e+=un(r):e+=r,e+=" "}return e};let Qd=null,KS=!0;const TW=function(t,e){pe(!e,"Can't turn on custom loggers persistently."),Lc.logLevel=St.VERBOSE,Qd=Lc.log.bind(Lc)},Mn=function(...t){if(KS===!0&&(KS=!1,Qd===null&&_W.get("logging_enabled")===!0&&TW()),Qd){const e=Ih.apply(null,t);Qd(e)}},Ah=function(t){return function(...e){Mn(t,...e)}},g1=function(...t){const e="FIREBASE INTERNAL ERROR: "+Ih(...t);Lc.error(e)},ei=function(...t){const e=`FIREBASE FATAL ERROR: ${Ih(...t)}`;throw Lc.error(e),new Error(e)},er=function(...t){const e="FIREBASE WARNING: "+Ih(...t);Lc.warn(e)},MW=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&er("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},px=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},EW=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},iu="[MIN_NAME]",Rl="[MAX_NAME]",Kl=function(t,e){if(t===e)return 0;if(t===iu||e===Rl)return-1;if(e===iu||t===Rl)return 1;{const n=GS(t),r=GS(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},OW=function(t,e){return t===e?0:t<e?-1:1},id=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+un(e))},mx=function(t){if(typeof t!="object"||t===null)return un(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=un(e[r]),n+=":",n+=mx(t[e[r]]);return n+="}",n},hA=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let o=0;o<n;o+=e)o+e>n?r.push(t.substring(o,n)):r.push(t.substring(o,o+e));return r};function Nn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const pA=function(t){pe(!px(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let o,s,i,a,l;t===0?(s=0,i=0,o=1/t===-1/0?1:0):(o=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,i=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,i=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(i%2?1:0),i=Math.floor(i/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(o?1:0),c.reverse();const u=c.join("");let d="";for(l=0;l<64;l+=8){let f=parseInt(u.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},IW=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},AW=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function NW(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const LW=new RegExp("^-?(0*)\\d{1,10}$"),RW=-2147483648,PW=2147483647,GS=function(t){if(LW.test(t)){const e=Number(t);if(e>=RW&&e<=PW)return e}return null},qu=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw er("Exception was thrown by user callback.",n),e},Math.floor(0))}},DW=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Zd=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $W{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){er(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HW{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Mn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',er(e)}}let Yp=class{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}};Yp.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx="5",mA="v",gA="s",yA="r",vA="f",bA=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,wA="ls",kA="p",y1="ac",xA="websocket",CA="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _A=class{constructor(e,n,r,o,s=!1,i="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=s,this.persistenceKey=i,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=tl.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&tl.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function FW(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function SA(t,e,n){pe(typeof e=="string","typeof type must == string"),pe(typeof n=="object","typeof params must == object");let r;if(e===xA)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===CA)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);FW(t)&&(n.ns=t.namespace);const o=[];return Nn(n,(s,i)=>{o.push(s+"="+i)}),r+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BW{constructor(){this.counters_={}}incrementCounter(e,n=1){Ts(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return WU(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0={},G0={};function yx(t){const e=t.toString();return K0[e]||(K0[e]=new BW),K0[e]}function jW(t,e){const n=t.toString();return G0[n]||(G0[n]=e()),G0[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zW{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&qu(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="start",VW="close",UW="pLPCommand",qW="pRTLPCB",TA="id",MA="pw",EA="ser",WW="cb",KW="seg",GW="ts",JW="d",YW="dframe",OA=1870,IA=30,XW=OA-IA,QW=25e3,ZW=3e4;let eK=class bd{constructor(e,n,r,o,s,i,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=o,this.authToken=s,this.transportSessionId=i,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ah(e),this.stats_=yx(n),this.urlFn=l=>(this.appCheckToken&&(l[y1]=this.appCheckToken),SA(n,CA,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new zW(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(ZW)),EW(()=>{if(this.isClosed_)return;this.scriptTagHolder=new tK((...s)=>{const[i,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,i===JS)this.id=a,this.password=l;else if(i===VW)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+i)},(...s)=>{const[i,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(i,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[JS]="t",r[EA]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[WW]=this.scriptTagHolder.uniqueCallbackIdentifier),r[mA]=gx,this.transportSessionId&&(r[gA]=this.transportSessionId),this.lastSessionId&&(r[wA]=this.lastSessionId),this.applicationId&&(r[kA]=this.applicationId),this.appCheckToken&&(r[y1]=this.appCheckToken),typeof location<"u"&&location.hostname&&bA.test(location.hostname)&&(r[yA]=vA);const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){bd.forceAllow_=!0}static forceDisallow(){bd.forceDisallow_=!0}static isAvailable(){return bd.forceAllow_?!0:!bd.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!IW()&&!AW()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=un(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Y3(n),o=hA(r,XW);for(let s=0;s<o.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[YW]="t",r[TA]=e,r[MA]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=un(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},tK=class AA{constructor(e,n,r,o){this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=SW(),window[UW+this.uniqueCallbackIdentifier]=e,window[qW+this.uniqueCallbackIdentifier]=n,this.myIFrame=AA.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const i="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(a){Mn("frame writing exception"),a.stack&&Mn(a.stack),Mn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Mn("No IE domain setting required")}catch{const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[TA]=this.myID,e[MA]=this.myPW,e[EA]=this.currentSerial;let n=this.urlFn(e),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+IA+r.length<=OA;){const s=this.pendingSegs.shift();r=r+"&"+KW+o+"="+s.seg+"&"+GW+o+"="+s.ts+"&"+JW+o+"="+s.d,o++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},o=setTimeout(r,Math.floor(QW)),s=()=>{clearTimeout(o),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||o==="loaded"||o==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Mn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nK=16384,rK=45e3;let sg=null;typeof MozWebSocket<"u"?sg=MozWebSocket:typeof WebSocket<"u"&&(sg=WebSocket);let Ya=class Xp{constructor(e,n,r,o,s,i,a){this.connId=e,this.applicationId=r,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ah(this.connId),this.stats_=yx(n),this.connURL=Xp.connectionURL_(n,i,a,o,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,o,s){const i={};return i[mA]=gx,typeof location<"u"&&location.hostname&&bA.test(location.hostname)&&(i[yA]=vA),n&&(i[gA]=n),r&&(i[wA]=r),o&&(i[y1]=o),s&&(i[kA]=s),SA(e,xA,i)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,tl.set("previous_websocket_failure",!0);try{let r;nA(),this.mySock=new sg(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){Xp.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&sg!==null&&!Xp.forceDisallow_}static previouslyFailed(){return tl.isInMemoryStorage||tl.get("previous_websocket_failure")===!0}markConnectionHealthy(){tl.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Bf(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(pe(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=un(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=hA(n,nK);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(rK))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}};Ya.responsesRequiredToBeHealthy=2;Ya.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NA=class v1{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[eK,Ya]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Ya&&Ya.isAvailable();let r=n&&!Ya.previouslyFailed();if(e.webSocketOnly&&(n||er("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ya];else{const o=this.transports_=[];for(const s of v1.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);v1.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}};NA.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oK=6e4,sK=5e3,iK=10*1024,aK=100*1024,J0="t",YS="d",lK="s",XS="r",cK="e",QS="o",ZS="a",eT="n",tT="p",uK="h";class dK{constructor(e,n,r,o,s,i,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=s,this.onMessage_=i,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ah("c:"+this.id+":"),this.transportManager_=new NA(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=Zd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>aK?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>iK?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(J0 in e){const n=e[J0];n===ZS?this.upgradeIfSecondaryHealthy_():n===XS?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===QS&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=id("t",e),r=id("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:tT,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:ZS,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:eT,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=id("t",e),r=id("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=id(J0,e);if(YS in e){const r=e[YS];if(n===uK){const o=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(n===eT){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===lK?this.onConnectionShutdown_(r):n===XS?this.onReset_(r):n===cK?g1("Server Error: "+r):n===QS?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):g1("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),gx!==r&&er("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Zd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(oK))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Zd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(sK))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:tT,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(tl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let LA=class{put(e,n,r,o){}merge(e,n,r,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RA=class{constructor(e){this.allowedEvents_=e,this.listeners_={},pe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const o=this.getInitialEvent(e);o&&n.apply(r,o)}off(e,n,r){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let s=0;s<o.length;s++)if(o[s].callback===n&&(!r||r===o[s].context)){o.splice(s,1);return}}validateEventType_(e){pe(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nT=class PA extends RA{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ux()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new PA}getInitialEvent(e){return pe(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=32,oT=768;class It{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function vt(){return new It("")}function it(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ha(t){return t.pieces_.length-t.pieceNum_}function Nt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new It(t.pieces_,e)}function vx(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function fK(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function zf(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function DA(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new It(e,0)}function Gt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof It)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&n.push(r[o])}return new It(n,0)}function at(t){return t.pieceNum_>=t.pieces_.length}function Zn(t,e){const n=it(t),r=it(e);if(n===null)return e;if(n===r)return Zn(Nt(t),Nt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function hK(t,e){const n=zf(t,0),r=zf(e,0);for(let o=0;o<n.length&&o<r.length;o++){const s=Kl(n[o],r[o]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function bx(t,e){if(ha(t)!==ha(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function io(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(ha(t)>ha(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class pK{constructor(e,n){this.errorPrefix_=n,this.parts_=zf(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Ty(this.parts_[r]);$A(this)}}function mK(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Ty(e),$A(t)}function gK(t){const e=t.parts_.pop();t.byteLength_-=Ty(e),t.parts_.length>0&&(t.byteLength_-=1)}function $A(t){if(t.byteLength_>oT)throw new Error(t.errorPrefix_+"has a key path longer than "+oT+" bytes ("+t.byteLength_+").");if(t.parts_.length>rT)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+rT+") or object contains a cycle "+Va(t))}function Va(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yK=class HA extends RA{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new HA}getInitialEvent(e){return pe(e==="visible","Unknown event type: "+e),[this.visible_]}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad=1e3,vK=60*5*1e3,sT=30*1e3,bK=1.3,wK=3e4,kK="server_kill",iT=3;let Nh=class Qp extends LA{constructor(e,n,r,o,s,i,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=i,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Qp.nextPersistentConnectionId_++,this.log_=Ah("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ad,this.maxReconnectDelay_=vK,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!nA())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");yK.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&nT.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const o=++this.requestNumber_,s={r:o,a:e,b:n};this.log_(un(s)),pe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[o]=r)}get(e){this.initConnection_();const n=new Eh,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:s=>{const i=s.d;s.s==="ok"?n.resolve(i):n.reject(i)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),n.promise}listen(e,n,r,o){this.initConnection_();const s=e._queryIdentifier,i=e._path.toString();this.log_("Listen called for "+i+" "+s),this.listens.has(i)||this.listens.set(i,new Map),pe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),pe(!this.listens.get(i).has(s),"listen() called twice for same path/queryId.");const a={onComplete:o,hashFn:n,query:e,tag:r};this.listens.get(i).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),o=n._queryIdentifier;this.log_("Listen on "+r+" for "+o);const s={p:r},i="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(i,s,a=>{const l=a.d,c=a.s;Qp.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(o))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,o),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Ts(e,"w")){const r=ou(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const o='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();er(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||lq(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=sT)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=aq(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,o=>{const s=o.s,i=o.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,i))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),pe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,e._queryObject,n)}sendUnlisten_(e,n,r,o){this.log_("Unlisten on "+e+" for "+n);const s={p:e},i="n";o&&(s.q=r,s.t=o),this.sendRequest(i,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,o){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,i=>{o&&setTimeout(()=>{o(i.s,i.d)},Math.floor(0))})}put(e,n,r,o){this.putInternal("p",e,n,r,o)}merge(e,n,r,o){this.putInternal("m",e,n,r,o)}putInternal(e,n,r,o,s){this.initConnection_();const i={p:n,d:r};s!==void 0&&(i.h=s),this.outstandingPuts_.push({action:e,request:i,onComplete:o}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+un(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):g1("Unrecognized action received from server: "+un(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){pe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ad,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ad,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>wK&&(this.reconnectDelay_=ad),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*bK)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+Qp.nextConnectionId_++,s=this.lastSessionId;let i=!1,a=null;const l=function(){a?a.close():(i=!0,r())},c=function(d){pe(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,f]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);i?Mn("getToken() completed but was canceled"):(Mn("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=f&&f.token,a=new dK(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,h=>{er(h+" ("+this.repoInfo_.toString()+")"),this.interrupt(kK)},s))}catch(d){this.log_("Failed to get token: "+d),i||(this.repoInfo_.nodeAdmin&&er(d),l())}}}interrupt(e){Mn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Mn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],u1(this.interruptReasons_)&&(this.reconnectDelay_=ad,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>mx(s)).join("$"):r="default";const o=this.removeListen_(e,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,n){const r=new It(e).toString();let o;if(this.listens.has(r)){const s=this.listens.get(r);o=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(e,n){Mn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=iT&&(this.reconnectDelay_=sT,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Mn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=iT&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+uA.replace(/\./g,"-")]=1,ux()?e["framework.cordova"]=1:tA()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=nT.getInstance().currentlyOnline();return u1(this.interruptReasons_)&&e}};Nh.nextPersistentConnectionId_=0;Nh.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lt=class FA{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new FA(e,n)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let My=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new lt(iu,e),o=new lt(iu,n);return this.compare(r,o)!==0}minPost(){return lt.MIN}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yp,BA=class extends My{static get __EMPTY_NODE(){return yp}static set __EMPTY_NODE(e){yp=e}compare(e,n){return Kl(e.name,n.name)}isDefinedOn(e){throw zu("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return lt.MIN}maxPost(){return new lt(Rl,yp)}makePost(e,n){return pe(typeof e=="string","KeyIndex indexValue must always be a string."),new lt(e,yp)}toString(){return".key"}};const Rc=new BA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vp=class{constructor(e,n,r,o,s=null){this.isReverse_=o,this.resultGenerator_=s,this.nodeStack_=[];let i=1;for(;!e.isEmpty();)if(e=e,i=n?r(e.key,n):1,o&&(i*=-1),i<0)this.isReverse_?e=e.left:e=e.right;else if(i===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Pr=class wd{constructor(e,n,r,o,s){this.key=e,this.value=n,this.color=r??wd.RED,this.left=o??is.EMPTY_NODE,this.right=s??is.EMPTY_NODE}copy(e,n,r,o,s){return new wd(e??this.key,n??this.value,r??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const s=r(e,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(e,n,r),null):s===0?o=o.copy(null,n,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return is.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,o;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return is.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,wd.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,wd.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};Pr.RED=!0;Pr.BLACK=!1;class xK{copy(e,n,r,o,s){return this}insert(e,n,r){return new Pr(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let is=class Zp{constructor(e,n=Zp.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Zp(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Pr.BLACK,null,null))}remove(e){return new Zp(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Pr.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,o=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(o=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new vp(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new vp(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new vp(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new vp(this.root_,null,this.comparator_,!0,e)}};is.EMPTY_NODE=new xK;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CK(t,e){return Kl(t.name,e.name)}function wx(t,e){return Kl(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b1;function _K(t){b1=t}const jA=function(t){return typeof t=="number"?"number:"+pA(t):"string:"+t},zA=function(t){if(t.isLeafNode()){const e=t.val();pe(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ts(e,".sv"),"Priority must be a string or number.")}else pe(t===b1||t.isEmpty(),"priority of unexpected type.");pe(t===b1||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aT,Pl=class Eo{constructor(e,n=Eo.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,pe(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),zA(this.priorityNode_)}static set __childrenNodeConstructor(e){aT=e}static get __childrenNodeConstructor(){return aT}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Eo(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Eo.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return at(e)?this:it(e)===".priority"?this.priorityNode_:Eo.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Eo.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=it(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(pe(r!==".priority"||ha(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Eo.__childrenNodeConstructor.EMPTY_NODE.updateChild(Nt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+jA(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=pA(this.value_):e+=this.value_,this.lazyHash_=fA(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Eo.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Eo.__childrenNodeConstructor?-1:(pe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,o=Eo.VALUE_TYPE_ORDER.indexOf(n),s=Eo.VALUE_TYPE_ORDER.indexOf(r);return pe(o>=0,"Unknown leaf type: "+n),pe(s>=0,"Unknown leaf type: "+r),o===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}};Pl.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VA,UA;function SK(t){VA=t}function TK(t){UA=t}class MK extends My{compare(e,n){const r=e.node.getPriority(),o=n.node.getPriority(),s=r.compareTo(o);return s===0?Kl(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return lt.MIN}maxPost(){return new lt(Rl,new Pl("[PRIORITY-POST]",UA))}makePost(e,n){const r=VA(e);return new lt(n,new Pl("[PRIORITY-POST]",r))}toString(){return".priority"}}const Jt=new MK;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EK=Math.log(2);class OK{constructor(e){const n=s=>parseInt(Math.log(s)/EK,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const o=r(this.count);this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ig=function(t,e,n,r){t.sort(e);const o=function(l,c){const u=c-l;let d,f;if(u===0)return null;if(u===1)return d=t[l],f=n?n(d):d,new Pr(f,d.node,Pr.BLACK,null,null);{const h=parseInt(u/2,10)+l,p=o(l,h),m=o(h+1,c);return d=t[h],f=n?n(d):d,new Pr(f,d.node,Pr.BLACK,p,m)}},s=function(l){let c=null,u=null,d=t.length;const f=function(p,m){const v=d-p,b=d;d-=p;const w=o(v+1,b),k=t[v],y=n?n(k):k;h(new Pr(y,k.node,m,null,w))},h=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const m=l.nextBitIsOne(),v=Math.pow(2,l.count-(p+1));m?f(v,Pr.BLACK):(f(v,Pr.BLACK),f(v,Pr.RED))}return u},i=new OK(t.length),a=s(i);return new is(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Y0;const Zl={};let ag=class kd{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return pe(Zl&&Jt,"ChildrenNode.ts has not been loaded"),Y0=Y0||new kd({".priority":Zl},{".priority":Jt}),Y0}get(e){const n=ou(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof is?n:null}hasIndex(e){return Ts(this.indexSet_,e.toString())}addIndex(e,n){pe(e!==Rc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const s=n.getIterator(lt.Wrap);let i=s.getNext();for(;i;)o=o||e.isDefinedOn(i.node),r.push(i),i=s.getNext();let a;o?a=ig(r,e.getCompare()):a=Zl;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new kd(u,c)}addToIndexes(e,n){const r=ng(this.indexes_,(o,s)=>{const i=ou(this.indexSet_,s);if(pe(i,"Missing index implementation for "+s),o===Zl)if(i.isDefinedOn(e.node)){const a=[],l=n.getIterator(lt.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),ig(a,i.getCompare())}else return Zl;else{const a=n.get(e.name);let l=o;return a&&(l=l.remove(new lt(e.name,a))),l.insert(e,e.node)}});return new kd(r,this.indexSet_)}removeFromIndexes(e,n){const r=ng(this.indexes_,o=>{if(o===Zl)return o;{const s=n.get(e.name);return s?o.remove(new lt(e.name,s)):o}});return new kd(r,this.indexSet_)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ld,Qe=class ac{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&zA(this.priorityNode_),this.children_.isEmpty()&&pe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ld||(ld=new ac(new is(wx),null,ag.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ld}updatePriority(e){return this.children_.isEmpty()?this:new ac(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ld:n}}getChild(e){const n=it(e);return n===null?this:this.getImmediateChild(n).getChild(Nt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(pe(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new lt(e,n);let o,s;n.isEmpty()?(o=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const i=o.isEmpty()?ld:this.priorityNode_;return new ac(o,i,s)}}updateChild(e,n){const r=it(e);if(r===null)return n;{pe(it(e)!==".priority"||ha(e)===1,".priority must be the last token in a path");const o=this.getImmediateChild(r).updateChild(Nt(e),n);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,o=0,s=!0;if(this.forEachChild(Jt,(i,a)=>{n[i]=a.val(e),r++,s&&ac.INTEGER_REGEXP_.test(i)?o=Math.max(o,Number(i)):s=!1}),!e&&s&&o<2*r){const i=[];for(const a in n)i[a]=n[a];return i}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+jA(this.getPriority().val())+":"),this.forEachChild(Jt,(n,r)=>{const o=r.hash();o!==""&&(e+=":"+n+":"+o)}),this.lazyHash_=e===""?"":fA(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const o=this.resolveIndex_(r);if(o){const s=o.getPredecessorKey(new lt(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new lt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new lt(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(o=>n(o.name,o.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,lt.Wrap);let s=o.peek();for(;s!=null&&n.compare(s,e)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,lt.Wrap);let s=o.peek();for(;s!=null&&n.compare(s,e)>0;)o.getNext(),s=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Lh?-1:0}withIndex(e){if(e===Rc||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ac(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Rc||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Jt),o=n.getIterator(Jt);let s=r.getNext(),i=o.getNext();for(;s&&i;){if(s.name!==i.name||!s.node.equals(i.node))return!1;s=r.getNext(),i=o.getNext()}return s===null&&i===null}else return!1;else return!1}}resolveIndex_(e){return e===Rc?null:this.indexMap_.get(e.toString())}};Qe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;let IK=class extends Qe{constructor(){super(new is(wx),Qe.EMPTY_NODE,ag.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Qe.EMPTY_NODE}isEmpty(){return!1}};const Lh=new IK;Object.defineProperties(lt,{MIN:{value:new lt(iu,Qe.EMPTY_NODE)},MAX:{value:new lt(Rl,Lh)}});BA.__EMPTY_NODE=Qe.EMPTY_NODE;Pl.__childrenNodeConstructor=Qe;_K(Lh);TK(Lh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AK=!0;function ln(t,e=null){if(t===null)return Qe.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),pe(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Pl(n,ln(e))}if(!(t instanceof Array)&&AK){const n=[];let r=!1;if(Nn(t,(s,i)=>{if(s.substring(0,1)!=="."){const a=ln(i);a.isEmpty()||(r=r||!a.getPriority().isEmpty(),n.push(new lt(s,a)))}}),n.length===0)return Qe.EMPTY_NODE;const o=ig(n,CK,s=>s.name,wx);if(r){const s=ig(n,Jt.getCompare());return new Qe(o,ln(e),new ag({".priority":s},{".priority":Jt}))}else return new Qe(o,ln(e),ag.Default)}else{let n=Qe.EMPTY_NODE;return Nn(t,(r,o)=>{if(Ts(t,r)&&r.substring(0,1)!=="."){const s=ln(o);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(ln(e))}}SK(ln);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NK=class extends My{constructor(e){super(),this.indexPath_=e,pe(!at(e)&&it(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),o=this.extractChild(n.node),s=r.compareTo(o);return s===0?Kl(e.name,n.name):s}makePost(e,n){const r=ln(e),o=Qe.EMPTY_NODE.updateChild(this.indexPath_,r);return new lt(n,o)}maxPost(){const e=Qe.EMPTY_NODE.updateChild(this.indexPath_,Lh);return new lt(Rl,e)}toString(){return zf(this.indexPath_,0).join("/")}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let LK=class extends My{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Kl(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return lt.MIN}maxPost(){return lt.MAX}makePost(e,n){const r=ln(e);return new lt(n,r)}toString(){return".value"}};const RK=new LK;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(t){return{type:"value",snapshotNode:t}}function au(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Vf(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Uf(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function PK(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kx=class{constructor(e){this.index_=e}updateChild(e,n,r,o,s,i){pe(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(o).equals(r.getChild(o))&&a.isEmpty()===r.isEmpty()||(i!=null&&(r.isEmpty()?e.hasChild(n)?i.trackChildChange(Vf(n,a)):pe(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?i.trackChildChange(au(n,r)):i.trackChildChange(Uf(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Jt,(o,s)=>{n.hasChild(o)||r.trackChildChange(Vf(o,s))}),n.isLeafNode()||n.forEachChild(Jt,(o,s)=>{if(e.hasChild(o)){const i=e.getImmediateChild(o);i.equals(s)||r.trackChildChange(Uf(o,s,i))}else r.trackChildChange(au(o,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Qe.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WA=class w1{constructor(e){this.indexedFilter_=new kx(e.getIndex()),this.index_=e.getIndex(),this.startPost_=w1.getStartPost_(e),this.endPost_=w1.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,o,s,i){return this.matches(new lt(n,r))||(r=Qe.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,o,s,i)}updateFullNode(e,n,r){n.isLeafNode()&&(n=Qe.EMPTY_NODE);let o=n.withIndex(this.index_);o=o.updatePriority(Qe.EMPTY_NODE);const s=this;return n.forEachChild(Jt,(i,a)=>{s.matches(new lt(i,a))||(o=o.updateImmediateChild(i,Qe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DK=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new WA(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,o,s,i){return this.rangedFilter_.matches(new lt(n,r))||(r=Qe.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,o,s,i):this.fullLimitUpdateChild_(e,n,r,s,i)}updateFullNode(e,n,r){let o;if(n.isLeafNode()||n.isEmpty())o=Qe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){o=Qe.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let i=0;for(;s.hasNext()&&i<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))o=o.updateImmediateChild(a.name,a.node),i++;else break;else continue}}else{o=n.withIndex(this.index_),o=o.updatePriority(Qe.EMPTY_NODE);let s;this.reverse_?s=o.getReverseIterator(this.index_):s=o.getIterator(this.index_);let i=0;for(;s.hasNext();){const a=s.getNext();i<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?i++:o=o.updateImmediateChild(a.name,Qe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,o,s){let i;if(this.reverse_){const d=this.index_.getCompare();i=(f,h)=>d(h,f)}else i=this.index_.getCompare();const a=e;pe(a.numChildren()===this.limit_,"");const l=new lt(n,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let f=o.getChildAfterChild(this.index_,c,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=o.getChildAfterChild(this.index_,f,this.reverse_);const h=f==null?1:i(f,l);if(u&&!r.isEmpty()&&h>=0)return s!=null&&s.trackChildChange(Uf(n,r,d)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Vf(n,d));const p=a.updateImmediateChild(n,Qe.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s!=null&&s.trackChildChange(au(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}}else return r.isEmpty()?e:u&&i(c,l)>=0?(s!=null&&(s.trackChildChange(Vf(c.name,c.node)),s.trackChildChange(au(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(c.name,Qe.EMPTY_NODE)):e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $K=class KA{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return pe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return pe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:iu}hasEnd(){return this.endSet_}getIndexEndValue(){return pe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return pe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Rl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return pe(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Jt}copy(){const e=new KA;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function HK(t){return t.loadsAllData()?new kx(t.getIndex()):t.hasLimit()?new DK(t):new WA(t)}function lT(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Jt?n="$priority":t.index_===RK?n="$value":t.index_===Rc?n="$key":(pe(t.index_ instanceof NK,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=un(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=un(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+un(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=un(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+un(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function cT(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Jt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FK=class k1 extends LA{constructor(e,n,r,o){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=Ah("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(pe(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,o){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const i=k1.getListenId_(e,r),a={};this.listens_[i]=a;const l=lT(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let d=u;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(s,d,!1,r),ou(this.listens_,i)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",o(f,null)}})}unlisten(e,n){const r=k1.getListenId_(e,n);delete this.listens_[r]}get(e){const n=lT(e._queryParams),r=e._path.toString(),o=new Eh;return this.restRequest_(r+".json",n,(s,i)=>{let a=i;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),o.resolve(a)):o.reject(new Error(a))}),o.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,s])=>{o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);const i=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Vu(n);this.log_("Sending REST request for "+i);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+i+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Bf(a.responseText)}catch{er("Failed to parse JSON response for "+i+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&er("Got unsuccessful REST response for "+i+" Status: "+a.status),r(a.status);r=null}},a.open("GET",i,!0),a.send()})}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BK=class{constructor(){this.rootNode_=Qe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(){return{value:null,children:new Map}}function GA(t,e,n){if(at(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=it(e);t.children.has(r)||t.children.set(r,lg());const o=t.children.get(r);e=Nt(e),GA(o,e,n)}}function x1(t,e,n){t.value!==null?n(e,t.value):jK(t,(r,o)=>{const s=new It(e.toString()+"/"+r);x1(o,s,n)})}function jK(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zK=class{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Nn(this.last_,(r,o)=>{n[r]=n[r]-o}),this.last_=e,n}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=10*1e3,VK=30*1e3,UK=5*60*1e3;let qK=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new zK(e);const r=uT+(VK-uT)*Math.random();Zd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Nn(e,(o,s)=>{s>0&&Ts(this.statsToReport_,o)&&(n[o]=s,r=!0)}),r&&this.server_.reportStats(n),Zd(this.reportStats_.bind(this),Math.floor(Math.random()*2*UK))}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Do;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Do||(Do={}));function xx(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Cx(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function _x(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WK=class C1{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Do.ACK_USER_WRITE,this.source=xx()}operationForChild(e){if(at(this.path)){if(this.affectedTree.value!=null)return pe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new It(e));return new C1(vt(),n,this.revert)}}else return pe(it(this.path)===e,"operationForChild called for unrelated child."),new C1(Nt(this.path),this.affectedTree,this.revert)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let JA=class _1{constructor(e,n){this.source=e,this.path=n,this.type=Do.LISTEN_COMPLETE}operationForChild(e){return at(this.path)?new _1(this.source,vt()):new _1(this.source,Nt(this.path))}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ey=class S1{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Do.OVERWRITE}operationForChild(e){return at(this.path)?new S1(this.source,vt(),this.snap.getImmediateChild(e)):new S1(this.source,Nt(this.path),this.snap)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sx=class T1{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Do.MERGE}operationForChild(e){if(at(this.path)){const n=this.children.subtree(new It(e));return n.isEmpty()?null:n.value?new Ey(this.source,vt(),n.value):new T1(this.source,vt(),n)}else return pe(it(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new T1(this.source,Nt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pa=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(at(e))return this.isFullyInitialized()&&!this.filtered_;const n=it(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KK=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function GK(t,e,n,r){const o=[],s=[];return e.forEach(i=>{i.type==="child_changed"&&t.index_.indexedValueChanged(i.oldSnap,i.snapshotNode)&&s.push(PK(i.childName,i.snapshotNode))}),cd(t,o,"child_removed",e,r,n),cd(t,o,"child_added",e,r,n),cd(t,o,"child_moved",s,r,n),cd(t,o,"child_changed",e,r,n),cd(t,o,"value",e,r,n),o}function cd(t,e,n,r,o,s){const i=r.filter(a=>a.type===n);i.sort((a,l)=>YK(t,a,l)),i.forEach(a=>{const l=JK(t,a,s);o.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function JK(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function YK(t,e,n){if(e.childName==null||n.childName==null)throw zu("Should only compare child_ events.");const r=new lt(e.childName,e.snapshotNode),o=new lt(n.childName,n.snapshotNode);return t.index_.compare(r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(t,e){return{eventCache:t,serverCache:e}}function ef(t,e,n,r){return Oy(new pa(e,n,r),t.serverCache)}function YA(t,e,n,r){return Oy(t.eventCache,new pa(e,n,r))}function cg(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Dl(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let X0;const XK=()=>(X0||(X0=new is(OW)),X0);let Br=class Ar{constructor(e,n=XK()){this.value=e,this.children=n}static fromObject(e){let n=new Ar(null);return Nn(e,(r,o)=>{n=n.set(new It(r),o)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:vt(),value:this.value};if(at(e))return null;{const r=it(e),o=this.children.get(r);if(o!==null){const s=o.findRootMostMatchingPathAndValue(Nt(e),n);return s!=null?{path:Gt(new It(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(at(e))return this;{const n=it(e),r=this.children.get(n);return r!==null?r.subtree(Nt(e)):new Ar(null)}}set(e,n){if(at(e))return new Ar(n,this.children);{const r=it(e),o=(this.children.get(r)||new Ar(null)).set(Nt(e),n),s=this.children.insert(r,o);return new Ar(this.value,s)}}remove(e){if(at(e))return this.children.isEmpty()?new Ar(null):new Ar(null,this.children);{const n=it(e),r=this.children.get(n);if(r){const o=r.remove(Nt(e));let s;return o.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,o),this.value===null&&s.isEmpty()?new Ar(null):new Ar(this.value,s)}else return this}}get(e){if(at(e))return this.value;{const n=it(e),r=this.children.get(n);return r?r.get(Nt(e)):null}}setTree(e,n){if(at(e))return n;{const r=it(e),o=(this.children.get(r)||new Ar(null)).setTree(Nt(e),n);let s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new Ar(this.value,s)}}fold(e){return this.fold_(vt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((o,s)=>{r[o]=s.fold_(Gt(e,o),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,vt(),n)}findOnPath_(e,n,r){const o=this.value?r(n,this.value):!1;if(o)return o;if(at(e))return null;{const s=it(e),i=this.children.get(s);return i?i.findOnPath_(Nt(e),Gt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,vt(),n)}foreachOnPath_(e,n,r){if(at(e))return this;{this.value&&r(n,this.value);const o=it(e),s=this.children.get(o);return s?s.foreachOnPath_(Nt(e),Gt(n,o),r):new Ar(null)}}foreach(e){this.foreach_(vt(),e)}foreach_(e,n){this.children.inorderTraversal((r,o)=>{o.foreach_(Gt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Js=class XA{constructor(e){this.writeTree_=e}static empty(){return new XA(new Br(null))}};function tf(t,e,n){if(at(e))return new Js(new Br(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const o=r.path;let s=r.value;const i=Zn(o,e);return s=s.updateChild(i,n),new Js(t.writeTree_.set(o,s))}else{const o=new Br(n),s=t.writeTree_.setTree(e,o);return new Js(s)}}}function M1(t,e,n){let r=t;return Nn(n,(o,s)=>{r=tf(r,Gt(e,o),s)}),r}function dT(t,e){if(at(e))return Js.empty();{const n=t.writeTree_.setTree(e,new Br(null));return new Js(n)}}function E1(t,e){return Gl(t,e)!=null}function Gl(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Zn(n.path,e)):null}function fT(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Jt,(r,o)=>{e.push(new lt(r,o))}):t.writeTree_.children.inorderTraversal((r,o)=>{o.value!=null&&e.push(new lt(r,o.value))}),e}function ta(t,e){if(at(e))return t;{const n=Gl(t,e);return n!=null?new Js(new Br(n)):new Js(t.writeTree_.subtree(e))}}function O1(t){return t.writeTree_.isEmpty()}function lu(t,e){return QA(vt(),t.writeTree_,e)}function QA(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((o,s)=>{o===".priority"?(pe(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=QA(Gt(t,o),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Gt(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(t,e){return nN(e,t)}function QK(t,e,n,r,o){pe(r>t.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:o}),o&&(t.visibleWrites=tf(t.visibleWrites,e,n)),t.lastWriteId=r}function ZK(t,e,n,r){pe(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=M1(t.visibleWrites,e,n),t.lastWriteId=r}function eG(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function tG(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);pe(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let o=r.visible,s=!1,i=t.allWrites.length-1;for(;o&&i>=0;){const a=t.allWrites[i];a.visible&&(i>=n&&nG(a,r.path)?o=!1:io(r.path,a.path)&&(s=!0)),i--}if(o){if(s)return rG(t),!0;if(r.snap)t.visibleWrites=dT(t.visibleWrites,r.path);else{const a=r.children;Nn(a,l=>{t.visibleWrites=dT(t.visibleWrites,Gt(r.path,l))})}return!0}else return!1}function nG(t,e){if(t.snap)return io(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&io(Gt(t.path,n),e))return!0;return!1}function rG(t){t.visibleWrites=ZA(t.allWrites,oG,vt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function oG(t){return t.visible}function ZA(t,e,n){let r=Js.empty();for(let o=0;o<t.length;++o){const s=t[o];if(e(s)){const i=s.path;let a;if(s.snap)io(n,i)?(a=Zn(n,i),r=tf(r,a,s.snap)):io(i,n)&&(a=Zn(i,n),r=tf(r,vt(),s.snap.getChild(a)));else if(s.children){if(io(n,i))a=Zn(n,i),r=M1(r,a,s.children);else if(io(i,n))if(a=Zn(i,n),at(a))r=M1(r,vt(),s.children);else{const l=ou(s.children,it(a));if(l){const c=l.getChild(Nt(a));r=tf(r,vt(),c)}}}else throw zu("WriteRecord should have .snap or .children")}}return r}function eN(t,e,n,r,o){if(!r&&!o){const s=Gl(t.visibleWrites,e);if(s!=null)return s;{const i=ta(t.visibleWrites,e);if(O1(i))return n;if(n==null&&!E1(i,vt()))return null;{const a=n||Qe.EMPTY_NODE;return lu(i,a)}}}else{const s=ta(t.visibleWrites,e);if(!o&&O1(s))return n;if(!o&&n==null&&!E1(s,vt()))return null;{const i=function(c){return(c.visible||o)&&(!r||!~r.indexOf(c.writeId))&&(io(c.path,e)||io(e,c.path))},a=ZA(t.allWrites,i,e),l=n||Qe.EMPTY_NODE;return lu(a,l)}}}function sG(t,e,n){let r=Qe.EMPTY_NODE;const o=Gl(t.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(Jt,(s,i)=>{r=r.updateImmediateChild(s,i)}),r;if(n){const s=ta(t.visibleWrites,e);return n.forEachChild(Jt,(i,a)=>{const l=lu(ta(s,new It(i)),a);r=r.updateImmediateChild(i,l)}),fT(s).forEach(i=>{r=r.updateImmediateChild(i.name,i.node)}),r}else{const s=ta(t.visibleWrites,e);return fT(s).forEach(i=>{r=r.updateImmediateChild(i.name,i.node)}),r}}function iG(t,e,n,r,o){pe(r||o,"Either existingEventSnap or existingServerSnap must exist");const s=Gt(e,n);if(E1(t.visibleWrites,s))return null;{const i=ta(t.visibleWrites,s);return O1(i)?o.getChild(n):lu(i,o.getChild(n))}}function aG(t,e,n,r){const o=Gt(e,n),s=Gl(t.visibleWrites,o);if(s!=null)return s;if(r.isCompleteForChild(n)){const i=ta(t.visibleWrites,o);return lu(i,r.getNode().getImmediateChild(n))}else return null}function lG(t,e){return Gl(t.visibleWrites,e)}function cG(t,e,n,r,o,s,i){let a;const l=ta(t.visibleWrites,e),c=Gl(l,vt());if(c!=null)a=c;else if(n!=null)a=lu(l,n);else return[];if(a=a.withIndex(i),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=i.getCompare(),f=s?a.getReverseIteratorFrom(r,i):a.getIteratorFrom(r,i);let h=f.getNext();for(;h&&u.length<o;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function uG(){return{visibleWrites:Js.empty(),allWrites:[],lastWriteId:-1}}function ug(t,e,n,r){return eN(t.writeTree,t.treePath,e,n,r)}function Tx(t,e){return sG(t.writeTree,t.treePath,e)}function hT(t,e,n,r){return iG(t.writeTree,t.treePath,e,n,r)}function dg(t,e){return lG(t.writeTree,Gt(t.treePath,e))}function dG(t,e,n,r,o,s){return cG(t.writeTree,t.treePath,e,n,r,o,s)}function Mx(t,e,n){return aG(t.writeTree,t.treePath,e,n)}function tN(t,e){return nN(Gt(t.treePath,e),t.writeTree)}function nN(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fG=class{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;pe(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),pe(r!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const s=o.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Uf(r,e.snapshotNode,o.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Vf(r,o.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,au(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Uf(r,e.snapshotNode,o.oldSnap));else throw zu("Illegal combination of changes: "+e+" occurred after "+o)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hG=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}};const rN=new hG;let Ex=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new pa(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Mx(this.writes_,e,r)}}getChildAfterChild(e,n,r){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Dl(this.viewCache_),s=dG(this.writes_,o,n,1,r,e);return s.length===0?null:s[0]}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pG(t){return{filter:t}}function mG(t,e){pe(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),pe(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function gG(t,e,n,r,o){const s=new fG;let i,a;if(n.type===Do.OVERWRITE){const c=n;c.source.fromUser?i=I1(t,e,c.path,c.snap,r,o,s):(pe(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!at(c.path),i=fg(t,e,c.path,c.snap,r,o,a,s))}else if(n.type===Do.MERGE){const c=n;c.source.fromUser?i=vG(t,e,c.path,c.children,r,o,s):(pe(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),i=A1(t,e,c.path,c.children,r,o,a,s))}else if(n.type===Do.ACK_USER_WRITE){const c=n;c.revert?i=kG(t,e,c.path,r,o,s):i=bG(t,e,c.path,c.affectedTree,r,o,s)}else if(n.type===Do.LISTEN_COMPLETE)i=wG(t,e,n.path,r,s);else throw zu("Unknown operation type: "+n.type);const l=s.getChanges();return yG(e,i,l),{viewCache:i,changes:l}}function yG(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=cg(t);(n.length>0||!t.eventCache.isFullyInitialized()||o&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(qA(cg(e)))}}function oN(t,e,n,r,o,s){const i=e.eventCache;if(dg(r,n)!=null)return e;{let a,l;if(at(n))if(pe(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Dl(e),u=c instanceof Qe?c:Qe.EMPTY_NODE,d=Tx(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=ug(r,Dl(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=it(n);if(c===".priority"){pe(ha(n)===1,"Can't have a priority with additional path components");const u=i.getNode();l=e.serverCache.getNode();const d=hT(r,n,u,l);d!=null?a=t.filter.updatePriority(u,d):a=i.getNode()}else{const u=Nt(n);let d;if(i.isCompleteForChild(c)){l=e.serverCache.getNode();const f=hT(r,n,i.getNode(),l);f!=null?d=i.getNode().getImmediateChild(c).updateChild(u,f):d=i.getNode().getImmediateChild(c)}else d=Mx(r,c,e.serverCache);d!=null?a=t.filter.updateChild(i.getNode(),c,d,u,o,s):a=i.getNode()}}return ef(e,a,i.isFullyInitialized()||at(n),t.filter.filtersNodes())}}function fg(t,e,n,r,o,s,i,a){const l=e.serverCache;let c;const u=i?t.filter:t.filter.getIndexedFilter();if(at(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const h=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),h,null)}else{const h=it(n);if(!l.isCompleteForPath(n)&&ha(n)>1)return e;const p=Nt(n),m=l.getNode().getImmediateChild(h).updateChild(p,r);h===".priority"?c=u.updatePriority(l.getNode(),m):c=u.updateChild(l.getNode(),h,m,p,rN,null)}const d=YA(e,c,l.isFullyInitialized()||at(n),u.filtersNodes()),f=new Ex(o,d,s);return oN(t,d,n,o,f,a)}function I1(t,e,n,r,o,s,i){const a=e.eventCache;let l,c;const u=new Ex(o,e,s);if(at(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,i),l=ef(e,c,!0,t.filter.filtersNodes());else{const d=it(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=ef(e,c,a.isFullyInitialized(),a.isFiltered());else{const f=Nt(n),h=a.getNode().getImmediateChild(d);let p;if(at(f))p=r;else{const m=u.getCompleteChild(d);m!=null?vx(f)===".priority"&&m.getChild(DA(f)).isEmpty()?p=m:p=m.updateChild(f,r):p=Qe.EMPTY_NODE}if(h.equals(p))l=e;else{const m=t.filter.updateChild(a.getNode(),d,p,f,u,i);l=ef(e,m,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function pT(t,e){return t.eventCache.isCompleteForChild(e)}function vG(t,e,n,r,o,s,i){let a=e;return r.foreach((l,c)=>{const u=Gt(n,l);pT(e,it(u))&&(a=I1(t,a,u,c,o,s,i))}),r.foreach((l,c)=>{const u=Gt(n,l);pT(e,it(u))||(a=I1(t,a,u,c,o,s,i))}),a}function mT(t,e,n){return n.foreach((r,o)=>{e=e.updateChild(r,o)}),e}function A1(t,e,n,r,o,s,i,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;at(n)?c=r:c=new Br(null).setTree(n,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){const h=e.serverCache.getNode().getImmediateChild(d),p=mT(t,h,f);l=fg(t,l,new It(d),p,o,s,i,a)}}),c.children.inorderTraversal((d,f)=>{const h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){const p=e.serverCache.getNode().getImmediateChild(d),m=mT(t,p,f);l=fg(t,l,new It(d),m,o,s,i,a)}}),l}function bG(t,e,n,r,o,s,i){if(dg(o,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(at(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return fg(t,e,n,l.getNode().getChild(n),o,s,a,i);if(at(n)){let c=new Br(null);return l.getNode().forEachChild(Rc,(u,d)=>{c=c.set(new It(u),d)}),A1(t,e,n,c,o,s,a,i)}else return e}else{let c=new Br(null);return r.foreach((u,d)=>{const f=Gt(n,u);l.isCompleteForPath(f)&&(c=c.set(u,l.getNode().getChild(f)))}),A1(t,e,n,c,o,s,a,i)}}function wG(t,e,n,r,o){const s=e.serverCache,i=YA(e,s.getNode(),s.isFullyInitialized()||at(n),s.isFiltered());return oN(t,i,n,r,rN,o)}function kG(t,e,n,r,o,s){let i;if(dg(r,n)!=null)return e;{const a=new Ex(r,e,o),l=e.eventCache.getNode();let c;if(at(n)||it(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=ug(r,Dl(e));else{const d=e.serverCache.getNode();pe(d instanceof Qe,"serverChildren would be complete if leaf node"),u=Tx(r,d)}u=u,c=t.filter.updateFullNode(l,u,s)}else{const u=it(n);let d=Mx(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),d!=null?c=t.filter.updateChild(l,u,d,Nt(n),a,s):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,Qe.EMPTY_NODE,Nt(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(i=ug(r,Dl(e)),i.isLeafNode()&&(c=t.filter.updateFullNode(c,i,s)))}return i=e.serverCache.isFullyInitialized()||dg(r,vt())!=null,ef(e,c,i,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xG=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new kx(r.getIndex()),s=HK(r);this.processor_=pG(s);const i=n.serverCache,a=n.eventCache,l=o.updateFullNode(Qe.EMPTY_NODE,i.getNode(),null),c=s.updateFullNode(Qe.EMPTY_NODE,a.getNode(),null),u=new pa(l,i.isFullyInitialized(),o.filtersNodes()),d=new pa(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Oy(d,u),this.eventGenerator_=new KK(this.query_)}get query(){return this.query_}};function CG(t){return t.viewCache_.serverCache.getNode()}function _G(t){return cg(t.viewCache_)}function SG(t,e){const n=Dl(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!at(e)&&!n.getImmediateChild(it(e)).isEmpty())?n.getChild(e):null}function gT(t){return t.eventRegistrations_.length===0}function TG(t,e){t.eventRegistrations_.push(e)}function yT(t,e,n){const r=[];if(n){pe(e==null,"A cancel should cancel all event registrations.");const o=t.query._path;t.eventRegistrations_.forEach(s=>{const i=s.createCancelEvent(n,o);i&&r.push(i)})}if(e){let o=[];for(let s=0;s<t.eventRegistrations_.length;++s){const i=t.eventRegistrations_[s];if(!i.matches(e))o.push(i);else if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=o}else t.eventRegistrations_=[];return r}function vT(t,e,n,r){e.type===Do.MERGE&&e.source.queryId!==null&&(pe(Dl(t.viewCache_),"We should always have a full cache before handling merges"),pe(cg(t.viewCache_),"Missing event cache, even though we have a server cache"));const o=t.viewCache_,s=gG(t.processor_,o,e,n,r);return mG(t.processor_,s.viewCache),pe(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,sN(t,s.changes,s.viewCache.eventCache.getNode(),null)}function MG(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Jt,(o,s)=>{r.push(au(o,s))}),n.isFullyInitialized()&&r.push(qA(n.getNode())),sN(t,r,n.getNode(),e)}function sN(t,e,n,r){const o=r?[r]:t.eventRegistrations_;return GK(t.eventGenerator_,e,n,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hg,iN=class{constructor(){this.views=new Map}};function EG(t){pe(!hg,"__referenceConstructor has already been defined"),hg=t}function OG(){return pe(hg,"Reference.ts has not been loaded"),hg}function IG(t){return t.views.size===0}function Ox(t,e,n,r){const o=e.source.queryId;if(o!==null){const s=t.views.get(o);return pe(s!=null,"SyncTree gave us an op for an invalid query."),vT(s,e,n,r)}else{let s=[];for(const i of t.views.values())s=s.concat(vT(i,e,n,r));return s}}function aN(t,e,n,r,o){const s=e._queryIdentifier,i=t.views.get(s);if(!i){let a=ug(n,o?r:null),l=!1;a?l=!0:r instanceof Qe?(a=Tx(n,r),l=!1):(a=Qe.EMPTY_NODE,l=!1);const c=Oy(new pa(a,l,!1),new pa(r,o,!1));return new xG(e,c)}return i}function AG(t,e,n,r,o,s){const i=aN(t,e,r,o,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,i),TG(i,n),MG(i,n)}function NG(t,e,n,r){const o=e._queryIdentifier,s=[];let i=[];const a=ma(t);if(o==="default")for(const[l,c]of t.views.entries())i=i.concat(yT(c,n,r)),gT(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=t.views.get(o);l&&(i=i.concat(yT(l,n,r)),gT(l)&&(t.views.delete(o),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!ma(t)&&s.push(new(OG())(e._repo,e._path)),{removed:s,events:i}}function lN(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function na(t,e){let n=null;for(const r of t.views.values())n=n||SG(r,e);return n}function cN(t,e){if(e._queryParams.loadsAllData())return Ay(t);{const n=e._queryIdentifier;return t.views.get(n)}}function uN(t,e){return cN(t,e)!=null}function ma(t){return Ay(t)!=null}function Ay(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pg;function LG(t){pe(!pg,"__referenceConstructor has already been defined"),pg=t}function RG(){return pe(pg,"Reference.ts has not been loaded"),pg}let PG=1,bT=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Br(null),this.pendingWriteTree_=uG(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function dN(t,e,n,r,o){return QK(t.pendingWriteTree_,e,n,r,o),o?Wu(t,new Ey(xx(),e,n)):[]}function DG(t,e,n,r){ZK(t.pendingWriteTree_,e,n,r);const o=Br.fromObject(n);return Wu(t,new Sx(xx(),e,o))}function ji(t,e,n=!1){const r=eG(t.pendingWriteTree_,e);if(tG(t.pendingWriteTree_,e)){let o=new Br(null);return r.snap!=null?o=o.set(vt(),!0):Nn(r.children,s=>{o=o.set(new It(s),!0)}),Wu(t,new WK(r.path,o,n))}else return[]}function Rh(t,e,n){return Wu(t,new Ey(Cx(),e,n))}function $G(t,e,n){const r=Br.fromObject(n);return Wu(t,new Sx(Cx(),e,r))}function HG(t,e){return Wu(t,new JA(Cx(),e))}function FG(t,e,n){const r=Ax(t,n);if(r){const o=Nx(r),s=o.path,i=o.queryId,a=Zn(s,e),l=new JA(_x(i),a);return Lx(t,s,l)}else return[]}function mg(t,e,n,r,o=!1){const s=e._path,i=t.syncPointTree_.get(s);let a=[];if(i&&(e._queryIdentifier==="default"||uN(i,e))){const l=NG(i,e,n,r);IG(i)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!o){const u=c.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(f,h)=>ma(h));if(u&&!d){const f=t.syncPointTree_.subtree(s);if(!f.isEmpty()){const h=zG(f);for(let p=0;p<h.length;++p){const m=h[p],v=m.query,b=mN(t,m);t.listenProvider_.startListening(nf(v),qf(t,v),b.hashFn,b.onComplete)}}}!d&&c.length>0&&!r&&(u?t.listenProvider_.stopListening(nf(e),null):c.forEach(f=>{const h=t.queryToTagMap.get(Ny(f));t.listenProvider_.stopListening(nf(f),h)}))}VG(t,c)}return a}function fN(t,e,n,r){const o=Ax(t,r);if(o!=null){const s=Nx(o),i=s.path,a=s.queryId,l=Zn(i,e),c=new Ey(_x(a),l,n);return Lx(t,i,c)}else return[]}function BG(t,e,n,r){const o=Ax(t,r);if(o){const s=Nx(o),i=s.path,a=s.queryId,l=Zn(i,e),c=Br.fromObject(n),u=new Sx(_x(a),l,c);return Lx(t,i,u)}else return[]}function N1(t,e,n,r=!1){const o=e._path;let s=null,i=!1;t.syncPointTree_.foreachOnPath(o,(f,h)=>{const p=Zn(f,o);s=s||na(h,p),i=i||ma(h)});let a=t.syncPointTree_.get(o);a?(i=i||ma(a),s=s||na(a,vt())):(a=new iN,t.syncPointTree_=t.syncPointTree_.set(o,a));let l;s!=null?l=!0:(l=!1,s=Qe.EMPTY_NODE,t.syncPointTree_.subtree(o).foreachChild((f,h)=>{const p=na(h,vt());p&&(s=s.updateImmediateChild(f,p))}));const c=uN(a,e);if(!c&&!e._queryParams.loadsAllData()){const f=Ny(e);pe(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const h=UG();t.queryToTagMap.set(f,h),t.tagToQueryMap.set(h,f)}const u=Iy(t.pendingWriteTree_,o);let d=AG(a,e,n,u,s,l);if(!c&&!i&&!r){const f=cN(a,e);d=d.concat(qG(t,e,f))}return d}function Ix(t,e,n){const r=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,i)=>{const a=Zn(s,e),l=na(i,a);if(l)return l});return eN(r,e,o,n,!0)}function jG(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(c,u)=>{const d=Zn(c,n);r=r||na(u,d)});let o=t.syncPointTree_.get(n);o?r=r||na(o,vt()):(o=new iN,t.syncPointTree_=t.syncPointTree_.set(n,o));const s=r!=null,i=s?new pa(r,!0,!1):null,a=Iy(t.pendingWriteTree_,e._path),l=aN(o,e,a,s?i.getNode():Qe.EMPTY_NODE,s);return _G(l)}function Wu(t,e){return hN(e,t.syncPointTree_,null,Iy(t.pendingWriteTree_,vt()))}function hN(t,e,n,r){if(at(t.path))return pN(t,e,n,r);{const o=e.get(vt());n==null&&o!=null&&(n=na(o,vt()));let s=[];const i=it(t.path),a=t.operationForChild(i),l=e.children.get(i);if(l&&a){const c=n?n.getImmediateChild(i):null,u=tN(r,i);s=s.concat(hN(a,l,c,u))}return o&&(s=s.concat(Ox(o,t,r,n))),s}}function pN(t,e,n,r){const o=e.get(vt());n==null&&o!=null&&(n=na(o,vt()));let s=[];return e.children.inorderTraversal((i,a)=>{const l=n?n.getImmediateChild(i):null,c=tN(r,i),u=t.operationForChild(i);u&&(s=s.concat(pN(u,a,l,c)))}),o&&(s=s.concat(Ox(o,t,r,n))),s}function mN(t,e){const n=e.query,r=qf(t,n);return{hashFn:()=>(CG(e)||Qe.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return r?FG(t,n._path,r):HG(t,n._path);{const s=NW(o,n);return mg(t,n,null,s)}}}}function qf(t,e){const n=Ny(e);return t.queryToTagMap.get(n)}function Ny(t){return t._path.toString()+"$"+t._queryIdentifier}function Ax(t,e){return t.tagToQueryMap.get(e)}function Nx(t){const e=t.indexOf("$");return pe(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new It(t.substr(0,e))}}function Lx(t,e,n){const r=t.syncPointTree_.get(e);pe(r,"Missing sync point for query tag that we're tracking");const o=Iy(t.pendingWriteTree_,e);return Ox(r,n,o,null)}function zG(t){return t.fold((e,n,r)=>{if(n&&ma(n))return[Ay(n)];{let o=[];return n&&(o=lN(n)),Nn(r,(s,i)=>{o=o.concat(i)}),o}})}function nf(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(RG())(t._repo,t._path):t}function VG(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const o=Ny(r),s=t.queryToTagMap.get(o);t.queryToTagMap.delete(o),t.tagToQueryMap.delete(s)}}}function UG(){return PG++}function qG(t,e,n){const r=e._path,o=qf(t,e),s=mN(t,n),i=t.listenProvider_.startListening(nf(e),o,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(o)pe(!ma(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,d)=>{if(!at(c)&&u&&ma(u))return[Ay(u).query];{let f=[];return u&&(f=f.concat(lN(u).map(h=>h.query))),Nn(d,(h,p)=>{f=f.concat(p)}),f}});for(let c=0;c<l.length;++c){const u=l[c];t.listenProvider_.stopListening(nf(u),qf(t,u))}}return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WG=class gN{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new gN(n)}node(){return this.node_}},KG=class yN{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Gt(this.path_,e);return new yN(this.syncTree_,n)}node(){return Ix(this.syncTree_,this.path_)}};const GG=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},wT=function(t,e,n){if(!t||typeof t!="object")return t;if(pe(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return JG(t[".sv"],e,n);if(typeof t[".sv"]=="object")return YG(t[".sv"],e);pe(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},JG=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:pe(!1,"Unexpected server value: "+t)}},YG=function(t,e,n){t.hasOwnProperty("increment")||pe(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&pe(!1,"Unexpected increment value: "+r);const o=e.node();if(pe(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const s=o.getValue();return typeof s!="number"?r:s+r},vN=function(t,e,n,r){return Rx(e,new KG(n,t),r)},bN=function(t,e,n){return Rx(t,new WG(e),n)};function Rx(t,e,n){const r=t.getPriority().val(),o=wT(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const i=t,a=wT(i.getValue(),e,n);return a!==i.getValue()||o!==i.getPriority().val()?new Pl(a,ln(o)):t}else{const i=t;return s=i,o!==i.getPriority().val()&&(s=s.updatePriority(new Pl(o))),i.forEachChild(Jt,(a,l)=>{const c=Rx(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Px=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function Dx(t,e){let n=e instanceof It?e:new It(e),r=t,o=it(n);for(;o!==null;){const s=ou(r.node.children,o)||{children:{},childCount:0};r=new Px(o,r,s),n=Nt(n),o=it(n)}return r}function Ku(t){return t.node.value}function wN(t,e){t.node.value=e,L1(t)}function kN(t){return t.node.childCount>0}function XG(t){return Ku(t)===void 0&&!kN(t)}function Ly(t,e){Nn(t.node.children,(n,r)=>{e(new Px(n,t,r))})}function xN(t,e,n,r){n&&!r&&e(t),Ly(t,o=>{xN(o,e,!0,r)}),n&&r&&e(t)}function QG(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Ph(t){return new It(t.parent===null?t.name:Ph(t.parent)+"/"+t.name)}function L1(t){t.parent!==null&&ZG(t.parent,t.name,t)}function ZG(t,e,n){const r=XG(n),o=Ts(t.node.children,e);r&&o?(delete t.node.children[e],t.node.childCount--,L1(t)):!r&&!o&&(t.node.children[e]=n.node,t.node.childCount++,L1(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eJ=/[\[\].#$\/\u0000-\u001F\u007F]/,tJ=/[\[\].#$\u0000-\u001F\u007F]/,Q0=10*1024*1024,$x=function(t){return typeof t=="string"&&t.length!==0&&!eJ.test(t)},CN=function(t){return typeof t=="string"&&t.length!==0&&!tJ.test(t)},nJ=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),CN(t)},rJ=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!px(t)||t&&typeof t=="object"&&Ts(t,".sv")},oJ=function(t,e,n,r){Ry(Sy(t,"value"),e,n)},Ry=function(t,e,n){const r=n instanceof It?new pK(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Va(r));if(typeof e=="function")throw new Error(t+"contains a function "+Va(r)+" with contents = "+e.toString());if(px(e))throw new Error(t+"contains "+e.toString()+" "+Va(r));if(typeof e=="string"&&e.length>Q0/3&&Ty(e)>Q0)throw new Error(t+"contains a string greater than "+Q0+" utf8 bytes "+Va(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let o=!1,s=!1;if(Nn(e,(i,a)=>{if(i===".value")o=!0;else if(i!==".priority"&&i!==".sv"&&(s=!0,!$x(i)))throw new Error(t+" contains an invalid key ("+i+") "+Va(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);mK(r,i),Ry(t,a,r),gK(r)}),o&&s)throw new Error(t+' contains ".value" child '+Va(r)+" in addition to actual children.")}},sJ=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=zf(r);for(let i=0;i<s.length;i++)if(!(s[i]===".priority"&&i===s.length-1)&&!$x(s[i]))throw new Error(t+"contains an invalid key ("+s[i]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}e.sort(hK);let o=null;for(n=0;n<e.length;n++){if(r=e[n],o!==null&&io(o,r))throw new Error(t+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}},iJ=function(t,e,n,r){const o=Sy(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const s=[];Nn(e,(i,a)=>{const l=new It(i);if(Ry(o,a,Gt(n,l)),vx(l)===".priority"&&!rJ(a))throw new Error(o+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),sJ(o,s)},_N=function(t,e,n,r){if(!CN(n))throw new Error(Sy(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},aJ=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),_N(t,e,n)},SN=function(t,e){if(it(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},lJ=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!$x(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!nJ(n))throw new Error(Sy(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cJ{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Py(t,e){let n=null;for(let r=0;r<e.length;r++){const o=e[r],s=o.getPath();n!==null&&!bx(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(o)}n&&t.eventLists_.push(n)}function TN(t,e,n){Py(t,n),MN(t,r=>bx(r,e))}function yo(t,e,n){Py(t,n),MN(t,r=>io(r,e)||io(e,r))}function MN(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const o=t.eventLists_[r];if(o){const s=o.path;e(s)?(uJ(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function uJ(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Qd&&Mn("event: "+n.toString()),qu(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dJ="repo_interrupt",fJ=25;class hJ{constructor(e,n,r,o){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new cJ,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=lg(),this.transactionQueueTree_=new Px,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function pJ(t,e,n){if(t.stats_=yx(t.repoInfo_),t.forceRestClient_||DW())t.server_=new FK(t.repoInfo_,(r,o,s,i)=>{kT(t,r,o,s,i)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>xT(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{un(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Nh(t.repoInfo_,e,(r,o,s,i)=>{kT(t,r,o,s,i)},r=>{xT(t,r)},r=>{gJ(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=jW(t.repoInfo_,()=>new qK(t.stats_,t.server_)),t.infoData_=new BK,t.infoSyncTree_=new bT({startListening:(r,o,s,i)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=Rh(t.infoSyncTree_,r._path,l),setTimeout(()=>{i("ok")},0)),a},stopListening:()=>{}}),Hx(t,"connected",!1),t.serverSyncTree_=new bT({startListening:(r,o,s,i)=>(t.server_.listen(r,s,o,(a,l)=>{const c=i(a,l);yo(t.eventQueue_,r._path,c)}),[]),stopListening:(r,o)=>{t.server_.unlisten(r,o)}})}function mJ(t){const e=t.infoData_.getNode(new It(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function Dy(t){return GG({timestamp:mJ(t)})}function kT(t,e,n,r,o){t.dataUpdateCount++;const s=new It(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let i=[];if(o)if(r){const l=ng(n,c=>ln(c));i=BG(t.serverSyncTree_,s,l,o)}else{const l=ln(n);i=fN(t.serverSyncTree_,s,l,o)}else if(r){const l=ng(n,c=>ln(c));i=$G(t.serverSyncTree_,s,l)}else{const l=ln(n);i=Rh(t.serverSyncTree_,s,l)}let a=s;i.length>0&&(a=cu(t,s)),yo(t.eventQueue_,a,i)}function xT(t,e){Hx(t,"connected",e),e===!1&&wJ(t)}function gJ(t,e){Nn(e,(n,r)=>{Hx(t,n,r)})}function Hx(t,e,n){const r=new It("/.info/"+e),o=ln(n);t.infoData_.updateSnapshot(r,o);const s=Rh(t.infoSyncTree_,r,o);yo(t.eventQueue_,r,s)}function Fx(t){return t.nextWriteId_++}function yJ(t,e,n){const r=jG(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(o=>{const s=ln(o).withIndex(e._queryParams.getIndex());N1(t.serverSyncTree_,e,n,!0);let i;if(e._queryParams.loadsAllData())i=Rh(t.serverSyncTree_,e._path,s);else{const a=qf(t.serverSyncTree_,e);i=fN(t.serverSyncTree_,e._path,s,a)}return yo(t.eventQueue_,e._path,i),mg(t.serverSyncTree_,e,n,null,!0),s},o=>(Dh(t,"get for query "+un(e)+" failed: "+o),Promise.reject(new Error(o))))}function vJ(t,e,n,r,o){Dh(t,"set",{path:e.toString(),value:n,priority:r});const s=Dy(t),i=ln(n,r),a=Ix(t.serverSyncTree_,e),l=bN(i,a,s),c=Fx(t),u=dN(t.serverSyncTree_,e,l,c,!0);Py(t.eventQueue_,u),t.server_.put(e.toString(),i.val(!0),(f,h)=>{const p=f==="ok";p||er("set at "+e+" failed: "+f);const m=ji(t.serverSyncTree_,c,!p);yo(t.eventQueue_,e,m),R1(t,o,f,h)});const d=jx(t,e);cu(t,d),yo(t.eventQueue_,d,[])}function bJ(t,e,n,r){Dh(t,"update",{path:e.toString(),value:n});let o=!0;const s=Dy(t),i={};if(Nn(n,(a,l)=>{o=!1,i[a]=vN(Gt(e,a),ln(l),t.serverSyncTree_,s)}),o)Mn("update() called with empty data.  Don't do anything."),R1(t,r,"ok",void 0);else{const a=Fx(t),l=DG(t.serverSyncTree_,e,i,a);Py(t.eventQueue_,l),t.server_.merge(e.toString(),n,(c,u)=>{const d=c==="ok";d||er("update at "+e+" failed: "+c);const f=ji(t.serverSyncTree_,a,!d),h=f.length>0?cu(t,e):e;yo(t.eventQueue_,h,f),R1(t,r,c,u)}),Nn(n,c=>{const u=jx(t,Gt(e,c));cu(t,u)}),yo(t.eventQueue_,e,[])}}function wJ(t){Dh(t,"onDisconnectEvents");const e=Dy(t),n=lg();x1(t.onDisconnect_,vt(),(o,s)=>{const i=vN(o,s,t.serverSyncTree_,e);GA(n,o,i)});let r=[];x1(n,vt(),(o,s)=>{r=r.concat(Rh(t.serverSyncTree_,o,s));const i=jx(t,o);cu(t,i)}),t.onDisconnect_=lg(),yo(t.eventQueue_,vt(),r)}function kJ(t,e,n){let r;it(e._path)===".info"?r=N1(t.infoSyncTree_,e,n):r=N1(t.serverSyncTree_,e,n),TN(t.eventQueue_,e._path,r)}function xJ(t,e,n){let r;it(e._path)===".info"?r=mg(t.infoSyncTree_,e,n):r=mg(t.serverSyncTree_,e,n),TN(t.eventQueue_,e._path,r)}function CJ(t){t.persistentConnection_&&t.persistentConnection_.interrupt(dJ)}function Dh(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Mn(n,...e)}function R1(t,e,n,r){e&&qu(()=>{if(n==="ok")e(null);else{const o=(n||"error").toUpperCase();let s=o;r&&(s+=": "+r);const i=new Error(s);i.code=o,e(i)}})}function EN(t,e,n){return Ix(t.serverSyncTree_,e,n)||Qe.EMPTY_NODE}function Bx(t,e=t.transactionQueueTree_){if(e||$y(t,e),Ku(e)){const n=IN(t,e);pe(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&_J(t,Ph(e),n)}else kN(e)&&Ly(e,n=>{Bx(t,n)})}function _J(t,e,n){const r=n.map(c=>c.currentWriteId),o=EN(t,e,r);let s=o;const i=o.hash();for(let c=0;c<n.length;c++){const u=n[c];pe(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=Zn(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{Dh(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(ji(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();$y(t,Dx(t.transactionQueueTree_,e)),Bx(t,t.transactionQueueTree_),yo(t.eventQueue_,e,u);for(let f=0;f<d.length;f++)qu(d[f])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{er("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}cu(t,e)}},i)}function cu(t,e){const n=ON(t,e),r=Ph(n),o=IN(t,n);return SJ(t,o,r),r}function SJ(t,e,n){if(e.length===0)return;const r=[];let o=[];const s=e.filter(i=>i.status===0).map(i=>i.currentWriteId);for(let i=0;i<e.length;i++){const a=e[i],l=Zn(n,a.path);let c=!1,u;if(pe(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)c=!0,u=a.abortReason,o=o.concat(ji(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=fJ)c=!0,u="maxretry",o=o.concat(ji(t.serverSyncTree_,a.currentWriteId,!0));else{const d=EN(t,a.path,s);a.currentInputSnapshot=d;const f=e[i].update(d.val());if(f!==void 0){Ry("transaction failed: Data returned ",f,a.path);let h=ln(f);typeof f=="object"&&f!=null&&Ts(f,".priority")||(h=h.updatePriority(d.getPriority()));const p=a.currentWriteId,m=Dy(t),v=bN(h,d,m);a.currentOutputSnapshotRaw=h,a.currentOutputSnapshotResolved=v,a.currentWriteId=Fx(t),s.splice(s.indexOf(p),1),o=o.concat(dN(t.serverSyncTree_,a.path,v,a.currentWriteId,a.applyLocally)),o=o.concat(ji(t.serverSyncTree_,p,!0))}else c=!0,u="nodata",o=o.concat(ji(t.serverSyncTree_,a.currentWriteId,!0))}yo(t.eventQueue_,n,o),o=[],c&&(e[i].status=2,function(d){setTimeout(d,Math.floor(0))}(e[i].unwatcher),e[i].onComplete&&(u==="nodata"?r.push(()=>e[i].onComplete(null,!1,e[i].currentInputSnapshot)):r.push(()=>e[i].onComplete(new Error(u),!1,null))))}$y(t,t.transactionQueueTree_);for(let i=0;i<r.length;i++)qu(r[i]);Bx(t,t.transactionQueueTree_)}function ON(t,e){let n,r=t.transactionQueueTree_;for(n=it(e);n!==null&&Ku(r)===void 0;)r=Dx(r,n),e=Nt(e),n=it(e);return r}function IN(t,e){const n=[];return AN(t,e,n),n.sort((r,o)=>r.order-o.order),n}function AN(t,e,n){const r=Ku(e);if(r)for(let o=0;o<r.length;o++)n.push(r[o]);Ly(e,o=>{AN(t,o,n)})}function $y(t,e){const n=Ku(e);if(n){let r=0;for(let o=0;o<n.length;o++)n[o].status!==2&&(n[r]=n[o],r++);n.length=r,wN(e,n.length>0?n:void 0)}Ly(e,r=>{$y(t,r)})}function jx(t,e){const n=Ph(ON(t,e)),r=Dx(t.transactionQueueTree_,e);return QG(r,o=>{Z0(t,o)}),Z0(t,r),xN(r,o=>{Z0(t,o)}),n}function Z0(t,e){const n=Ku(e);if(n){const r=[];let o=[],s=-1;for(let i=0;i<n.length;i++)n[i].status===3||(n[i].status===1?(pe(s===i-1,"All SENT items should be at beginning of queue."),s=i,n[i].status=3,n[i].abortReason="set"):(pe(n[i].status===0,"Unexpected transaction status in abort"),n[i].unwatcher(),o=o.concat(ji(t.serverSyncTree_,n[i].currentWriteId,!0)),n[i].onComplete&&r.push(n[i].onComplete.bind(null,new Error("set"),!1,null))));s===-1?wN(e,void 0):n.length=s+1,yo(t.eventQueue_,Ph(e),o);for(let i=0;i<r.length;i++)qu(r[i])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TJ(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let o=n[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}function MJ(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):er(`Invalid query segment '${n}' in query '${t}'`)}return e}const CT=function(t,e){const n=EJ(t),r=n.namespace;n.domain==="firebase.com"&&ei(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&ei("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||MW();const o=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new _A(n.host,n.secure,r,o,e,"",r!==n.subdomain),path:new It(n.pathString)}},EJ=function(t){let e="",n="",r="",o="",s="",i=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(o=TJ(t.substring(u,d)));const f=MJ(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(i=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const h=e.slice(0,c);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:i,scheme:a,pathString:o,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OJ=class{constructor(e,n,r,o){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=o}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+un(this.snapshot.exportVal())}},IJ=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NN=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return pe(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AJ=class LN{constructor(e,n,r,o){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=o}get key(){return at(this._path)?null:vx(this._path)}get ref(){return new li(this._repo,this._path)}get _queryIdentifier(){const e=cT(this._queryParams),n=mx(e);return n==="{}"?"default":n}get _queryObject(){return cT(this._queryParams)}isEqual(e){if(e=So(e),!(e instanceof LN))return!1;const n=this._repo===e._repo,r=bx(this._path,e._path),o=this._queryIdentifier===e._queryIdentifier;return n&&r&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+fK(this._path)}};class li extends AJ{constructor(e,n){super(e,n,new $K,!1)}get parent(){const e=DA(this._path);return e===null?null:new li(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}let RN=class P1{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new It(e),r=Fs(this.ref,e);return new P1(this._node.getChild(n),r,Jt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,r)=>e(new P1(r,Fs(this.ref,n),Jt)))}hasChild(e){const n=new It(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function xn(t,e){return t=So(t),t._checkNotDeleted("ref"),e!==void 0?Fs(t._root,e):t._root}function Fs(t,e){return t=So(t),it(t._path)===null?aJ("child","path",e):_N("child","path",e),new li(t._repo,Gt(t._path,e))}function _T(t){return SN("remove",t._path),PN(t,null)}function PN(t,e){t=So(t),SN("set",t._path),oJ("set",e,t._path);const n=new Eh;return vJ(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function ud(t,e){iJ("update",e,t._path);const n=new Eh;return bJ(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function ec(t){t=So(t);const e=new NN(()=>{}),n=new DN(e);return yJ(t._repo,t,n).then(r=>new RN(r,new li(t._repo,t._path),t._queryParams.getIndex()))}let DN=class $N{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new OJ("value",this,new RN(e.snapshotNode,new li(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new IJ(this,e,n):null}matches(e){return e instanceof $N?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}};function NJ(t,e,n,r,o){const s=new NN(n,void 0),i=new DN(s);return kJ(t._repo,t,i),()=>xJ(t._repo,t,i)}function ev(t,e,n,r){return NJ(t,"value",e)}EG(li);LG(li);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LJ="FIREBASE_DATABASE_EMULATOR_HOST",D1={};let RJ=!1;function PJ(t,e,n,r){t.repoInfo_=new _A(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function DJ(t,e,n,r,o){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||ei("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Mn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let i=CT(s,o),a=i.repoInfo,l;typeof process<"u"&&Qm&&(l=Qm[LJ]),l?(s=`http://${l}?ns=${a.namespace}`,i=CT(s,o),a=i.repoInfo):i.repoInfo.secure;const c=new HW(t.name,t.options,e);lJ("Invalid Firebase Database URL",i),at(i.path)||ei("Database URL must point to the root of a Firebase Database (not including a child path).");const u=HJ(a,t,c,new $W(t.name,n));return new FJ(u,t)}function $J(t,e){const n=D1[e];(!n||n[t.key]!==t)&&ei(`Database ${e}(${t.repoInfo_}) has already been deleted.`),CJ(t),delete n[t.key]}function HJ(t,e,n,r){let o=D1[e.name];o||(o={},D1[e.name]=o);let s=o[t.toURLString()];return s&&ei("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new hJ(t,RJ,n,r),o[t.toURLString()]=s,s}class FJ{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(pJ(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new li(this._repo,vt())),this._rootInternal}_delete(){return this._rootInternal!==null&&($J(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ei("Cannot call "+e+" on a deleted database.")}}function BJ(t=aA(),e){const n=hx(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=QU("database");r&&jJ(n,...r)}return n}function jJ(t,e,n,r={}){t=So(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&ei("Cannot call useEmulator() after instance has already been initialized.");const o=t._repoInternal;let s;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&ei('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Yp(Yp.OWNER);else if(r.mockUserToken){const i=typeof r.mockUserToken=="string"?r.mockUserToken:ZU(r.mockUserToken,t.app.options.projectId);s=new Yp(i)}PJ(o,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zJ(t){kW(Uu),su(new Nl("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return DJ(r,o,s,n)},"PUBLIC").setMultipleInstances(!0)),ea(qS,WS,t),ea(qS,WS,"esm2017")}Nh.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Nh.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};zJ();function zx(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function HN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VJ=HN,FN=new Oh("auth","Firebase",HN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg=new dx("@firebase/auth");function UJ(t,...e){gg.logLevel<=St.WARN&&gg.warn(`Auth (${Uu}): ${t}`,...e)}function em(t,...e){gg.logLevel<=St.ERROR&&gg.error(`Auth (${Uu}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(t,...e){throw Vx(t,...e)}function us(t,...e){return Vx(t,...e)}function qJ(t,e,n){const r=Object.assign(Object.assign({},VJ()),{[e]:n});return new Oh("auth","Firebase",r).create(e,{appName:t.name})}function Vx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return FN.create(t,...e)}function Xe(t,e,...n){if(!t)throw Vx(e,...n)}function Us(t){const e="INTERNAL ASSERTION FAILED: "+t;throw em(e),new Error(e)}function ni(t,e){t||Us(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function WJ(){return ST()==="http:"||ST()==="https:"}function ST(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KJ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WJ()||eq()||"connection"in navigator)?navigator.onLine:!0}function GJ(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $h=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,ni(n>e,"Short delay should be less than long delay!"),this.isMobile=ux()||tA()}get(){return KJ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(t,e){ni(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BN=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Us("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Us("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Us("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JJ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YJ=new $h(3e4,6e4);function qx(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Hh(t,e,n,r,o={}){return jN(t,o,async()=>{let s={},i={};r&&(e==="GET"?i=r:s={body:JSON.stringify(r)});const a=Vu(Object.assign({key:t.config.apiKey},i)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),BN.fetch()(VN(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function jN(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},JJ),e);try{const o=new XJ(t),s=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw bp(t,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const a=s.ok?i.errorMessage:i.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw bp(t,"credential-already-in-use",i);if(l==="EMAIL_EXISTS")throw bp(t,"email-already-in-use",i);if(l==="USER_DISABLED")throw bp(t,"user-disabled",i);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw qJ(t,u,c);ti(t,u)}}catch(o){if(o instanceof Ca)throw o;ti(t,"network-request-failed",{message:String(o)})}}async function zN(t,e,n,r,o={}){const s=await Hh(t,e,n,r,o);return"mfaPendingCredential"in s&&ti(t,"multi-factor-auth-required",{_serverResponse:s}),s}function VN(t,e,n,r){const o=`${e}${n}?${r}`;return t.config.emulator?Ux(t.config,o):`${t.config.apiScheme}://${o}`}class XJ{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(us(this.auth,"network-request-failed")),YJ.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function bp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=us(t,e,r);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QJ(t,e){return Hh(t,"POST","/v1/accounts:delete",e)}async function ZJ(t,e){return Hh(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eY(t,e=!1){const n=So(t),r=await n.getIdToken(e),o=Wx(r);Xe(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const s=typeof o.firebase=="object"?o.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:o,token:r,authTime:rf(tv(o.auth_time)),issuedAtTime:rf(tv(o.iat)),expirationTime:rf(tv(o.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function tv(t){return Number(t)*1e3}function Wx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return em("JWT malformed, contained fewer than 3 sections"),null;try{const o=tg(n);return o?JSON.parse(o):(em("Failed to decode base64 JWT payload"),null)}catch(o){return em("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function tY(t){const e=Wx(t);return Xe(e,"internal-error"),Xe(typeof e.exp<"u","internal-error"),Xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wf(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ca&&nY(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function nY({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rY{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let UN=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=rf(this.lastLoginAt),this.creationTime=rf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yg(t){var e;const n=t.auth,r=await t.getIdToken(),o=await Wf(t,ZJ(n,{idToken:r}));Xe(o==null?void 0:o.users.length,n,"internal-error");const s=o.users[0];t._notifyReloadListener(s);const i=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?iY(s.providerUserInfo):[],a=sY(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new UN(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function oY(t){const e=So(t);await yg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sY(t,e){return[...t.filter(n=>!e.some(r=>r.providerId===n.providerId)),...e]}function iY(t){return t.map(e=>{var{providerId:n}=e,r=zx(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aY(t,e){const n=await jN(t,{},async()=>{const r=Vu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:s}=t.config,i=VN(t,o,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",BN.fetch()(i,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TT=class H1{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Xe(e.idToken,"internal-error"),Xe(typeof e.idToken<"u","internal-error"),Xe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tY(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return Xe(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:s}=await aY(e,n);this.updateTokensAndExpiration(r,o,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:s}=n,i=new H1;return r&&(Xe(typeof r=="string","internal-error",{appName:e}),i.refreshToken=r),o&&(Xe(typeof o=="string","internal-error",{appName:e}),i.accessToken=o),s&&(Xe(typeof s=="number","internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new H1,this.toJSON())}_performRefresh(){return Us("not implemented")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(t,e){Xe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}let F1=class tm{constructor(e){var{uid:n,auth:r,stsTokenManager:o}=e,s=zx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rY(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new UN(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Wf(this,this.stsTokenManager.getToken(this.auth,e));return Xe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return eY(this,e)}reload(){return oY(this)}_assign(e){this!==e&&(Xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new tm(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await yg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Wf(this,QJ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,o,s,i,a,l,c,u;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(o=n.email)!==null&&o!==void 0?o:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(i=n.photoURL)!==null&&i!==void 0?i:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,v=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,b=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:k,emailVerified:y,isAnonymous:C,providerData:_,stsTokenManager:M}=n;Xe(k&&M,e,"internal-error");const E=TT.fromJSON(this.name,M);Xe(typeof k=="string",e,"internal-error"),yi(d,e.name),yi(f,e.name),Xe(typeof y=="boolean",e,"internal-error"),Xe(typeof C=="boolean",e,"internal-error"),yi(h,e.name),yi(p,e.name),yi(m,e.name),yi(v,e.name),yi(b,e.name),yi(w,e.name);const O=new tm({uid:k,auth:e,email:f,emailVerified:y,displayName:d,isAnonymous:C,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:E,createdAt:b,lastLoginAt:w});return _&&Array.isArray(_)&&(O.providerData=_.map(N=>Object.assign({},N))),v&&(O._redirectEventId=v),O}static async _fromIdTokenResponse(e,n,r=!1){const o=new TT;o.updateFromServerResponse(n);const s=new tm({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await yg(s),s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=new Map;function qs(t){ni(t instanceof Function,"Expected a class definition");let e=MT.get(t);return e?(ni(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,MT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qN=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}};qN.type="NONE";const ET=qN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(t,e,n){return`firebase:${t}:${e}:${n}`}let OT=class rm{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:s}=this.auth;this.fullUserKey=nm(this.userKey,o.apiKey,s),this.fullPersistenceKey=nm("persistence",o.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?F1._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new rm(qs(ET),e,r);const o=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=o[0]||qs(ET);const i=nm(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(i);if(u){const d=F1._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch{}const l=o.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new rm(s,e,r):(s=l[0],a&&await s._set(i,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(i)}catch{}})),new rm(s,e,r))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(WN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YN(e))return"Blackberry";if(XN(e))return"Webos";if(Kx(e))return"Safari";if((e.includes("chrome/")||KN(e))&&!e.includes("edge/"))return"Chrome";if(JN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function WN(t=jn()){return/firefox\//i.test(t)}function Kx(t=jn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function KN(t=jn()){return/crios\//i.test(t)}function GN(t=jn()){return/iemobile/i.test(t)}function JN(t=jn()){return/android/i.test(t)}function YN(t=jn()){return/blackberry/i.test(t)}function XN(t=jn()){return/webos/i.test(t)}function Hy(t=jn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function lY(t=jn()){var e;return Hy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function cY(){return tq()&&document.documentMode===10}function QN(t=jn()){return Hy(t)||JN(t)||XN(t)||YN(t)||/windows phone/i.test(t)||GN(t)}function uY(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(t,e=[]){let n;switch(t){case"Browser":n=IT(jn());break;case"Worker":n=`${IT(jn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Uu}/${r}`}async function e6(t,e){return Hh(t,"GET","/v2/recaptchaConfig",qx(t,e))}function AT(t){return t!==void 0&&t.enterprise!==void 0}let t6=class{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dY(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function n6(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=o=>{const s=us("internal-error");s.customData=o,n(s)},r.type="text/javascript",r.charset="UTF-8",dY().appendChild(r)})}function fY(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const hY="https://www.google.com/recaptcha/enterprise.js?render=",pY="recaptcha-enterprise",mY="NO_RECAPTCHA";class gY{constructor(e){this.type=pY,this.auth=Fh(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,a)=>{e6(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new t6(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,i(c.siteKey)}}).catch(l=>{a(l)})})}function o(s,i,a){const l=window.grecaptcha;AT(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{i(c)}).catch(()=>{i(mY)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,i)=>{r(this.auth).then(a=>{if(!n&&AT(window.grecaptcha))o(a,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}n6(hY+a).then(()=>{o(a,s,i)}).catch(l=>{i(l)})}}).catch(a=>{i(a)})})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yY{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((i,a)=>{try{const l=e(s);i(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vY{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new NT(this),this.idTokenSubscription=new NT(this),this.beforeStateQueue=new yY(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qs(n)),this._initializationPromise=this.queue(async()=>{var r,o;if(!this._deleted&&(this.persistenceManager=await OT.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let o=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=o==null?void 0:o._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===a)&&l!=null&&l.user&&(o=l.user,s=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(o)}catch(i){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await yg(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=GJ()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?So(e):null;return n&&Xe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(qs(e))})}async initializeRecaptchaConfig(){const e=await e6(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new t6(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new gY(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Oh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&qs(e)||this._popupRedirectResolver;Xe(n,this,"argument-error"),this.redirectPersistenceManager=await OT.create(this,[qs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),i=this._isInitialized?Promise.resolve():this._initializationPromise;return Xe(i,this,"internal-error"),i.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,o):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ZN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&UJ(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Fh(t){return So(t)}let NT=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=uq(n=>this.observer=n)}get next(){return Xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bY(t,e){const n=hx(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(rg(o,e??{}))return r;ti(r,"already-initialized")}return n.initialize({options:e})}function wY(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(qs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function kY(t,e,n){const r=Fh(t);Xe(r._canInitEmulator,r,"emulator-config-failed"),Xe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=n!=null,s=r6(e),{host:i,port:a}=xY(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${i}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:i,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:o})}),CY()}function r6(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function xY(t){const e=r6(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const s=o[1];return{host:s,port:LT(r.substr(s.length+1))}}else{const[s,i]=r.split(":");return{host:s,port:LT(i)}}}function LT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function CY(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o6=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Us("not implemented")}_getIdTokenResponse(e){return Us("not implemented")}_linkToIdToken(e,n){return Us("not implemented")}_getReauthenticationResolver(e){return Us("not implemented")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pc(t,e){return zN(t,"POST","/v1/accounts:signInWithIdp",qx(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Y="http://localhost";let Fy=class B1 extends o6{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new B1(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ti("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=n,s=zx(n,["providerId","signInMethod"]);if(!r||!o)return null;const i=new B1(r,o);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){const n=this.buildRequest();return Pc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Pc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Pc(e,n)}buildRequest(){const e={requestUri:_Y,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Vu(n)}return e}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s6=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bh=class extends s6{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let i6=class lc extends Bh{constructor(){super("facebook.com")}static credential(e){return Fy._fromParams({providerId:lc.PROVIDER_ID,signInMethod:lc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lc.credentialFromTaggedObject(e)}static credentialFromError(e){return lc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lc.credential(e.oauthAccessToken)}catch{return null}}};i6.FACEBOOK_SIGN_IN_METHOD="facebook.com";i6.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let a6=class cc extends Bh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Fy._fromParams({providerId:cc.PROVIDER_ID,signInMethod:cc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return cc.credentialFromTaggedObject(e)}static credentialFromError(e){return cc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return cc.credential(n,r)}catch{return null}}};a6.GOOGLE_SIGN_IN_METHOD="google.com";a6.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends Bh{constructor(){super("github.com")}static credential(e){return Fy._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ri.credential(e.oauthAccessToken)}catch{return null}}}Ri.GITHUB_SIGN_IN_METHOD="github.com";Ri.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let l6=class uc extends Bh{constructor(){super("twitter.com")}static credential(e,n){return Fy._fromParams({providerId:uc.PROVIDER_ID,signInMethod:uc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return uc.credentialFromTaggedObject(e)}static credentialFromError(e){return uc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return uc.credential(n,r)}catch{return null}}};l6.TWITTER_SIGN_IN_METHOD="twitter.com";l6.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SY(t,e){return zN(t,"POST","/v1/accounts:signUp",qx(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kf=class j1{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const s=await F1._fromIdTokenResponse(e,r,o),i=RT(r);return new j1({user:s,providerId:i,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=RT(r);return new j1({user:e,providerId:o,_tokenResponse:r,operationType:n})}};function RT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TY(t){var e;const n=Fh(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Kf({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await SY(n,{returnSecureToken:!0}),o=await Kf._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MY=class z1 extends Ca{constructor(e,n,r,o){var s;super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,z1.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new z1(e,n,r,o)}};function c6(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?MY._fromErrorAndOperation(t,o,e,r):o})}async function EY(t,e,n=!1){const r=await Wf(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Kf._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OY(t,e,n=!1){const{auth:r}=t,o="reauthenticate";try{const s=await Wf(t,c6(r,o,e,t),n);Xe(s.idToken,r,"internal-error");const i=Wx(s.idToken);Xe(i,r,"internal-error");const{sub:a}=i;return Xe(t.uid===a,r,"user-mismatch"),Kf._forOperation(t,o,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ti(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IY(t,e,n=!1){const r="signIn",o=await c6(t,r,e),s=await Kf._fromIdTokenResponse(t,r,o);return n||await t._updateCurrentUser(s.user),s}function AY(t,e,n,r){return So(t).onIdTokenChanged(e,n,r)}function NY(t,e,n){return So(t).beforeAuthStateChanged(e,n)}const vg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let u6=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(vg,"1"),this.storage.removeItem(vg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LY(){const t=jn();return Kx(t)||Hy(t)}const RY=1e3,PY=10;let d6=class extends u6{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=LY()&&uY(),this.fallbackToPolling=QN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((i,a,l)=>{this.notifyListeners(i,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(r);if(e.newValue!==i)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const o=()=>{const i=this.storage.getItem(r);!n&&this.localCache[r]===i||this.notifyListeners(r,i)},s=this.storage.getItem(r);cY()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,PY):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},RY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}};d6.type="LOCAL";const DY=d6;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let f6=class extends u6{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}};f6.type="SESSION";const h6=f6;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Y(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let p6=class m6{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new m6(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:s}=n.data,i=this.handlersMap[o];if(!(i!=null&&i.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const a=Array.from(i).map(async c=>c(n.origin,s)),l=await $Y(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}};p6.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HY{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let s,i;return new Promise((a,l)=>{const c=Gx("",20);o.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);i={messageChannel:o,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(i),o.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[o.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(){return window}function FY(t){ds().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g6(){return typeof ds().WorkerGlobalScope<"u"&&typeof ds().importScripts=="function"}async function BY(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jY(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function zY(){return g6()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6="firebaseLocalStorageDb",VY=1,bg="firebaseLocalStorage",v6="fbase_key";let jh=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function By(t,e){return t.transaction([bg],e?"readwrite":"readonly").objectStore(bg)}function UY(){const t=indexedDB.deleteDatabase(y6);return new jh(t).toPromise()}function V1(){const t=indexedDB.open(y6,VY);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(bg,{keyPath:v6})}catch(o){n(o)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(bg)?e(r):(r.close(),await UY(),e(await V1()))})})}async function PT(t,e,n){const r=By(t,!0).put({[v6]:e,value:n});return new jh(r).toPromise()}async function qY(t,e){const n=By(t,!1).get(e),r=await new jh(n).toPromise();return r===void 0?null:r.value}function DT(t,e){const n=By(t,!0).delete(e);return new jh(n).toPromise()}const WY=800,KY=3;let b6=class{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await V1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>KY)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return g6()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=p6._getInstance(zY()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await BY(),!this.activeServiceWorker)return;this.sender=new HY(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||jY()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await V1();return await PT(e,vg,"1"),await DT(e,vg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>PT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>qY(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>DT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const s=By(o,!1).getAll();return new jh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:o,value:s}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),WY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};b6.type="LOCAL";const GY=b6;new $h(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JY(t,e){return e?qs(e):(Xe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jx=class extends o6{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Pc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Pc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Pc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function YY(t){return IY(t.auth,new Jx(t),t.bypassAuthState)}function XY(t){const{auth:e,user:n}=t;return Xe(n,e,"internal-error"),OY(n,new Jx(t),t.bypassAuthState)}async function QY(t){const{auth:e,user:n}=t;return Xe(n,e,"internal-error"),EY(n,new Jx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let w6=class{constructor(e,n,r,o,s=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:s,error:i,type:a}=e;if(i){this.reject(i);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return YY;case"linkViaPopup":case"linkViaRedirect":return QY;case"reauthViaPopup":case"reauthViaRedirect":return XY;default:ti(this.auth,"internal-error")}}resolve(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZY=new $h(2e3,1e4);let eX=class xd extends w6{constructor(e,n,r,o,s){super(e,n,o,s),this.provider=r,this.authWindow=null,this.pollId=null,xd.currentPopupAction&&xd.currentPopupAction.cancel(),xd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Xe(e,this.auth,"internal-error"),e}async onExecution(){ni(this.filter.length===1,"Popup operations only handle one event");const e=Gx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(us(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(us(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(us(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ZY.get())};e()}};eX.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tX="pendingRedirect",om=new Map;class nX extends w6{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=om.get(this.auth._key());if(!e){try{const n=await rX(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(n){e=()=>Promise.reject(n)}om.set(this.auth._key(),e)}return this.bypassAuthState||om.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rX(t,e){const n=iX(e),r=sX(t);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function oX(t,e){om.set(t._key(),e)}function sX(t){return qs(t._redirectPersistence)}function iX(t){return nm(tX,t.config.apiKey,t.name)}async function aX(t,e,n=!1){const r=Fh(t),o=JY(r,e),s=await new nX(r,o,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lX=10*60*1e3;class cX{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uX(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!k6(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(us(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lX&&this.cachedEventUids.clear(),this.cachedEventUids.has($T(e))}saveEventToCache(e){this.cachedEventUids.add($T(e)),this.lastProcessedEventTime=Date.now()}}function $T(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function k6({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function uX(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return k6(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dX(t,e={}){return Hh(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hX=/^https?/;async function pX(t){if(t.config.emulator)return;const{authorizedDomains:e}=await dX(t);for(const n of e)try{if(mX(n))return}catch{}ti(t,"unauthorized-domain")}function mX(t){const e=$1(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!hX.test(n))return!1;if(fX.test(t))return r===t;const o=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gX=new $h(3e4,6e4);function HT(){const t=ds().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function yX(t){return new Promise((e,n)=>{var r,o,s;function i(){HT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{HT(),n(us(t,"network-request-failed"))},timeout:gX.get()})}if(!((o=(r=ds().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((s=ds().gapi)===null||s===void 0)&&s.load)i();else{const a=fY("iframefcb");return ds()[a]=()=>{gapi.load?i():n(us(t,"network-request-failed"))},n6(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw sm=null,e})}let sm=null;function vX(t){return sm=sm||yX(t),sm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bX=new $h(5e3,15e3),wX="__/auth/iframe",kX="emulator/auth/iframe",xX={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},CX=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _X(t){const e=t.config;Xe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ux(e,kX):`https://${t.config.authDomain}/${wX}`,r={apiKey:e.apiKey,appName:t.name,v:Uu},o=CX.get(t.config.apiHost);o&&(r.eid=o);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Vu(r).slice(1)}`}async function SX(t){const e=await vX(t),n=ds().gapi;return Xe(n,t,"internal-error"),e.open({where:document.body,url:_X(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xX,dontclear:!0},r=>new Promise(async(o,s)=>{await r.restyle({setHideOnLeave:!1});const i=us(t,"network-request-failed"),a=ds().setTimeout(()=>{s(i)},bX.get());function l(){ds().clearTimeout(a),o(r)}r.ping(l).then(l,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TX={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MX=500,EX=600,OX="_blank",IX="http://localhost";let FT=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function AX(t,e,n,r=MX,o=EX){const s=Math.max((window.screen.availHeight-o)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},TX),{width:r.toString(),height:o.toString(),top:s,left:i}),c=jn().toLowerCase();n&&(a=KN(c)?OX:n),WN(c)&&(e=e||IX,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[h,p])=>`${f}${h}=${p},`,"");if(lY(c)&&a!=="_self")return NX(e||"",a),new FT(null);const d=window.open(e||"",a,u);Xe(d,t,"popup-blocked");try{d.focus()}catch{}return new FT(d)}function NX(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LX="__/auth/handler",RX="emulator/auth/handler",PX=encodeURIComponent("fac");async function BT(t,e,n,r,o,s){Xe(t.config.authDomain,t,"auth-domain-config-required"),Xe(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Uu,eventId:o};if(e instanceof s6){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",u1(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))i[u]=d}if(e instanceof Bh){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(i.scopes=u.join(","))}t.tenantId&&(i.tid=t.tenantId);const a=i;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${PX}=${encodeURIComponent(l)}`:"";return`${DX(t)}?${Vu(a).slice(1)}${c}`}function DX({config:t}){return t.emulator?Ux(t,RX):`https://${t.authDomain}/${LX}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="webStorageSupport";class $X{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=h6,this._completeRedirectFn=aX,this._overrideRedirectResult=oX}async _openPopup(e,n,r,o){var s;ni((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const i=await BT(e,n,r,$1(),o);return AX(e,i,Gx())}async _openRedirect(e,n,r,o){await this._originValidation(e);const s=await BT(e,n,r,$1(),o);return FY(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:s}=this.eventManagers[n];return o?Promise.resolve(o):(ni(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await SX(e),r=new cX(e);return n.register("authEvent",o=>(Xe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(nv,{type:nv},r=>{var o;const s=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[nv];s!==void 0&&n(!!s),ti(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=pX(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return QN()||Kx()||Hy()}}const HX=$X;var jT="@firebase/auth",zT="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FX{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BX(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function jX(t){su(new Nl("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:a}=r.options;Xe(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:i,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ZN(t)},c=new vY(r,o,s,l);return wY(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),su(new Nl("auth-internal",e=>{const n=Fh(e.getProvider("auth").getImmediate());return(r=>new FX(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ea(jT,zT,BX(t)),ea(jT,zT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zX=5*60,VX=eA("authIdTokenMaxAge")||zX;let VT=null;const UX=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>VX)return;const o=n==null?void 0:n.token;VT!==o&&(VT=o,await fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function UT(t=aA()){const e=hx(t,"auth");if(e.isInitialized())return e.getImmediate();const n=bY(t,{popupRedirectResolver:HX,persistence:[GY,DY,h6]}),r=eA("authTokenSyncURL");if(r){const s=UX(r);NY(n,s,()=>s(n.currentUser)),AY(n,i=>s(i))}const o=Q3("auth");return o&&kY(n,`http://${o}`),n}jX("Browser");class qX{constructor(e){Rn(this,"name"),Rn(this,"email"),Rn(this,"avatar"),Rn(this,"id"),Rn(this,"uid"),Rn(this,"roles"),Rn(this,"x",0),Rn(this,"y",0),Rn(this,"idle",!0),Rn(this,"screen"),this.name=e.name,this.id=e.hasOwnProperty("id")?e.id:0,this.uid=e.uid,e.hasOwnProperty("email")&&(this.email=e.email),e.hasOwnProperty("avatar")&&(this.avatar=e.avatar),e.hasOwnProperty("roles")&&(this.roles=e.roles),e.screen&&(this.screen={height:e.screen.height,width:e.screen.width})}getRoles(){return this.roles}asAuthor(){return{name:this.name,email:this.email,avatar:this.avatar,id:this.id,uid:this.uid}}asCollaborator(){return{name:this.name,email:this.email?this.email:"",avatar:this.avatar?this.avatar:"",id:this.id,uid:this.uid,x:this.x,y:this.y,screen:this.screen,idle:this.idle}}}const Jl=()=>{const{context:t}=Fr(),e=q3(),n=Bu(),r=dt(),o=()=>{const z=e.getPluginConfig("firebase");return iA(z)},s=async()=>{const z=o(),ge=UT(z);if(!n.getFirebaseUser){const ve=UT(z),be=await TY(ve);n.setFirebaseUser(be.user)}return ge.currentUser},i=()=>{const z=o();return BJ(z)},a=z=>{const{generateHash:ge}=ru(),ve=z.context.link.split("/")[2];return ge(ve+"/"+z.post_id+"/"+z.id)},l=async()=>{const z=cs(),ge=await s(),ve=new qX({...z.getUser,uid:ge==null?void 0:ge.uid,screen:{width:window.innerWidth,height:window.innerHeight}});return console.log("currentCollaborator",ve),ve},c=async z=>{const{redirect:ge}=_r(),{updateStatus:ve}=Hr(),be=cs(),Se=await s(),Ee=await l();if(console.log("START COLLABORATION",z,Se,be.getUser),z.status!=="collaborate"){let Ke=await ve(z.id,"collaborate");z.status=Ke.status}if(!await k(z)){const Ke=a(z);await PN(xn(i(),"collaboration/"+Ke),{author:Ee.asAuthor(),context:z.context,id:z.post_id,revisionId:z.id,guests:{},chat:!1})}const Re=C(z);ge(Re)},u=async z=>{const{createRevision:ge}=Hr();z.revision_status="collaborate";const ve=await ge(z);await c(ve)},d=async z=>{const{writeMessage:ge}=co(),{updateRevision:ve}=Hr(),{redirect:be}=_r(),{context:Se}=Fr();await s();const Ee=z.id,Re=z.post_id,Ke=a(z);await ve(Ee,Se.value),n.resetCollaboration(),await _T(xn(i(),"collaboration/"+Ke)),be("#/design/"+Re+"/revisions/"+Ee),ge("Collaboration has stopped",null,"success")},f=async z=>{const ge=i(),ve=xn(ge);await s();const be=await l();return new Promise(Se=>{ec(Fs(ve,"collaboration/"+n.getCollaborationID+"/guests")).then(Ee=>{Ee.exists()&&JSON.parse(JSON.stringify(Ee.val())).hasOwnProperty(be.uid)&&ud(xn(ge,"collaboration/"+n.getCollaborationID+"/guests/"+be.uid),{idle:z?new Date().getTime():!1}).then(()=>{Se(!0)})}).catch(Ee=>{console.error(Ee)})})},h=async()=>{await s();const z=await l();await v(n.getCollaborationID,z),n.resetCollaboration()},p=async z=>{const{writeMessage:ge}=co(),{setRevision:ve}=Hr(),{getUsername:be}=rn(),Se=i();await s();const Ee=await l(),Re=await y(z);if(console.log("INIT COLLABORATION MODE",Ee,z,Re),!Re){r.setCollaborationStopped(!0);return}if(!Re.revisionId){ge("No revision ID found",null,"error",!0);return}ve(Re.revisionId,!1),n.setCollaborationID(z),n.setCollaborateMode(!0);const Ke=be();console.log("COLLABORATION",Ke),(Ke||Ee)&&await b(z,Ee),ge("Collaboration started",null,"success");const je=xn(Se,"collaboration/"+z+"/context");ev(je,G=>{if(E()){const Z=G.val();Z===null?(n.resetCollaboration(),r.setCollaborationStopped(!0)):Fr().setContext(Z)}});const K=xn(Se,"collaboration/"+z+"/guests");ev(K,G=>{const Z=G.val();n.setCollaborationGuests(Z)});const le=xn(Se,"collaboration/"+z+"/chat");ev(le,G=>{const Z=G.val();Z?n.setMessages(Z):n.setMessages([])}),_()},m=(z,ge)=>{const ve=i();ud(xn(ve,"collaboration/"+n.getCollaborationID),{context:ge})},v=async(z,ge)=>{const ve=i(),be=xn(ve);return await s(),console.log("REMOVING GUEST",z,ge),new Promise(Se=>{ec(Fs(be,"collaboration/"+z+"/guests")).then(Ee=>{Ee.exists()&&JSON.parse(JSON.stringify(Ee.val())).hasOwnProperty(ge.uid)&&_T(xn(ve,"collaboration/"+z+"/guests/"+ge.uid)).then(()=>{Se(!0)})}).catch(Ee=>{console.error(Ee)})})},b=async(z,ge)=>{const ve=i(),be=xn(ve);return new Promise(Se=>{""+z+ge.uid,ec(Fs(be,"collaboration/"+z+"/guests")).then(Ee=>{const Re={...ge.asCollaborator(),x:0,y:0,activeContextID:null,activeBlockIndex:null,idle:!1};ud(xn(ve,"collaboration/"+z+"/guests/"+ge.uid),{...Re}).then(()=>{Se(!0)})}).catch(Ee=>{console.error(Ee)})})},w=async(z,ge,ve,be)=>{const Se=i(),Ee=xn(Se);await s();const Re=await l();return new Promise(Ke=>{ec(Fs(Ee,"collaboration/"+z+"/guests")).then(je=>{je.exists()&&je.val().hasOwnProperty(Re.uid)&&ud(xn(Se,"collaboration/"+z+"/guests/"+Re.uid),{activeContextID:ve,activeBlockIndex:be}).then(()=>{Ke(!0)})}).catch(je=>{console.error(je)})})},k=async z=>{const ge=xn(i()),ve=a(z);return await s(),console.log("hasCollaboration",ve),await ec(Fs(ge,"collaboration/"+ve)).then(be=>!!be.exists())},y=async z=>{const ge=xn(i());return await ec(Fs(ge,"collaboration/"+z)).then(ve=>ve.exists()?ve.val():null)},C=z=>(ru(),"#/collaborate/"+a(z)),_=()=>{const{writeMessage:z}=co();if(De("collaborate").isEnabled()){VU(t,(be,Se)=>{console.log("UPDATING CTX",t),E()?m(be.id,be):console.log("SHOULD NOT WRITE DATA")},{debounce:250,maxWait:5e3,deep:!0});const ge=Y(()=>n.getMessages);ot(ge,(be,Se)=>{if(be.length>0){if(!(Se.length===0&&be.length>1||Se.length===0&&be.length===0)&&!n.getChatOpen){let Ee=n.getUnreadMessageCount;if(n.setUnreadMessageCount(Ee+1),n.notificationsOn){let Re;be[be.length-1].message.length>65?Re=be[be.length-1].message.substring(0,65)+"...":Re=be[be.length-1].message,z(Re,be[be.length-1].from.name,"message")}}setTimeout(()=>{var Ee=document.getElementById("chat-container");Ee&&(Ee.scrollTop=Ee.scrollHeight)},10)}});const ve=Y(()=>n.getChatOpen);ot(ve,(be,Se)=>{ve&&(n.setUnreadMessageCount(0),setTimeout(()=>{var Ee=document.getElementById("chat-container");Ee&&(Ee.scrollTop=Ee.scrollHeight)},1))})}},M=async()=>{const z=cs(),ge=i();if(await s(),n.currentMessage){const ve={from:z.getUser?z.getUser:null,message:n.currentMessage,timestamp:Date.now()};let be=n.getMessages?[...n.getMessages,ve]:[ve];console.log("CHAT",be),ud(xn(ge,"collaboration/"+n.getCollaborationID+"/chat"),{...be}),n.clearCurrentMessage()}},E=()=>n.getCollaborateMode??!1,O=Y(()=>E()),N=()=>n.getCollaborationID??!1,R=Y(()=>N()),I=()=>(rn().getUserId(),n.getCollaborationID??!1);Y(()=>I());const j=()=>n.getCollaborationGuests??!1,de=Y(()=>j()),te=Y(()=>n.getChatOpen),Q=()=>{n.toggleChat()},ie=Y(()=>n.getNotificationsOn);return{initCollaborationMode:p,exitCollaborationMode:h,hasCollaboration:k,stopCollaboration:d,startCollaboration:c,startCollaborationFromContext:u,getCollaborationUrl:C,setUserIdleStatus:f,isCollaborateMode:O,collaborationID:R,collaborationGuests:de,initWatcher:_,sendMessage:M,toggleChat:Q,chatIsOpen:te,notificationsOn:ie,updateGuestActiveBlock:w}},WX=()=>{const t=dt(),e=qo(),n="#/design/:post_id/revisions/:id",r=rn(),{getCollaborationUrl:o,hasCollaboration:s}=Jl(),{setRevision:i,getCurrentRevision:a}=Hr();return{path:n,callback:async l=>{l.uriSegments[2];const c=l.uriSegments[4];await i(c);const u=a();if(u&&u.share_id&&t.setShareId(u.share_id),De("collaborate").isEnabled()){if(!u)return;if(u.status==="collaborate")if(!await s(u))await e.revisions().updateStatus(u.id,"draft",{requestToken:r.getAuthToken()});else{const d=o(u);if(d!==!1)return{redirectUrl:d}}}t.setPreloading(!1)}}},KX=()=>{const t="#/collaborate/:id",e=dt(),n=cs(),r=Ss();qo();const o=rn(),{initCollaborationMode:s,exitCollaborationMode:i,setUserIdleStatus:a,isCollaborateMode:l,collaborationID:c}=Jl();return Hr(),{path:t,callback:async u=>{const d=u.uriSegments[2];if(n.enableGuestLogin(),r.setGuestRole("collaborator"),!o.isUserLoggedIn.value||!De("collaborate").isEnabled())return{redirectUrl:"#/login?redirect="+u.path};await s(d),e.setPreloading(!1)},exitCallback:async u=>{l.value&&c.value&&await i()}}},GX=()=>{const t="#/login",e=dt();return{path:t,callback:async n=>{let r=n.path;return n.params.forEach((o,s)=>{r.indexOf("?")===-1?r+="?":r+="&",r+=s+"="+o}),e.setPreloading(!1),{redirectUrl:r}}}},x6=()=>{const t=dt(),e=qo(),n=c=>{const{generateHash:u}=ru(),d=c.context.link.split("/")[2];return u(d+"/"+c.post_id+"/"+c.id+"/share")},r=async(c="")=>{console.log("START SHARE",c);const{goTo:u}=_r(),{generateHash:d}=ru(),{context:f}=Fr(),{getCurrentRevision:h,createRevision:p,updateRevision:m}=Hr();let v=h();v||(v=await p(f.value),v.hasOwnProperty("id")&&u(`#/design/${v.post_id}/revisions/${v.id}`));const b=n(v);return console.log("SHARE ID",b),b&&(f.value.share_id=b,c.length>0?f.value.share_token=d(c):f.value.share_token=0,await m(v.id,f.value),t.setShareId(b)),t.setShareActive(!0),!0},o=async()=>{const{context:c}=Fr(),{getCurrentRevision:u,updateRevision:d}=Hr();let f=u();return c.value.share_id=0,c.value.share_token=0,await d(f.id,c.value),t.setShareActive(!1),t.setShareId(0),!0},s=async c=>{console.log("INIT SHARE MODE",c);let u=await i(c);return u&&u.length>0&&(u=u[0],t.setRevision(u),u.context&&t.setContext(u.context)),u},i=async c=>await e.revisions().getByShareId(c),a=()=>t.getShareActive??!1,l=Y(()=>a());return{generateShareId:n,isShareActive:l,startShare:r,stopShare:o,shareId:Y(()=>t.getShareId),initShareMode:s}},JX=()=>{const t="#/share/:id",e=dt(),n=Ur(),{initShareMode:r}=x6(),o=Ss(),s=rn();return{path:t,callback:async i=>{const a=i.uriSegments[2],l=await r(a);l.id&&(l.context.share_token||(s.setUser({name:"visitor"}),s.setRole("visitor")),n.setEditMode(!1),o.setCurrentRole("visitor"),e.setShareActive(!0)),e.setPreloading(!1)}}},YX=Vr("contentStore",{state:()=>({content:[],totalPages:0,totalContent:0,currentPage:0}),getters:{getContent(t){return t.content},getTotalPages(t){return t.totalPages},getTotalContent(t){return t.totalContent},getCurrentPage(t){return t.currentPage}},actions:{setContent(t){this.content=t},setTotalPages(t){this.totalPages=t},setTotalContent(t){this.totalContent=t},setCurrentPage(t){this.currentPage=t}}}),Yx=(t=1,e=20)=>{const n=YX(),r=ae(!0);ae(0),ae(0);const o=qo(),s=rn();t&&n.setCurrentPage(t);const i=()=>n.getContent,a=async(f=1,h=20)=>{r.value=!0;const p=o.content();console.log("LOAD CONTENT",f,h);const m=await p.getAll(f,h,{requestToken:s.getAuthToken()});r.value=!1,n.setContent(m.data),n.setTotalPages((m==null?void 0:m.pages)||1),n.setTotalContent((m==null?void 0:m.total)||0),n.setCurrentPage(f)},l=Y(()=>i()),c=Y(()=>n.getTotalPages),u=Y(()=>n.getTotalContent),d=Y(()=>n.getCurrentPage);return{loadContent:a,getContent:i,loading:r,content:l,totalPages:c,totalContent:u,currentPage:d}},XX=()=>{const t="#/content",e=dt();Ss();const n=Yx();qo();const r=rn();return{path:t,callback:async o=>{console.log("contentIndex",o),console.log("contentIndex",o==null?void 0:o.params.get("page"));const s=(o==null?void 0:o.params.get("page"))||1,i=(o==null?void 0:o.params.get("per_page"))||20;if(e.unsetContext(),!r.isUserLoggedIn.value||!De("design.publish").isEnabled())return{redirectUrl:"#/login?redirect="+o.path};["collaborate","design.publish","ui.editor","design.share","ui.navigationRight","ui.navbar.editToggle","ui.navbar.collaborateToggle"].forEach(a=>{De(a).asDisabled()}),await n.loadContent(s,i),e.setPreloading(!1)}}},QX=()=>{const t="#/content/:id/view",e=dt(),n=Ur(),r=qo(),o=rn();return{path:t,callback:async s=>{const i=s.uriSegments[2];if(!o.isUserLoggedIn.value||!De("content.read").isEnabled())return{redirectUrl:"#/login?redirect="+s.path};{const a=await r.content().getItem(i,{requestToken:o.getAuthToken()});["collaborate","design.publish","design.share","ui.navigationRight","ui.navbar.editToggle","ui.navbar.collaborateToggle"].forEach(l=>{De(l).asDisabled()}),n.setEditMode(!1),Fr().setContext(a[0])}e.setPreloading(!1)}}},ZX=()=>{const t="#/",e=rn();return{path:t,callback:async n=>!e.isUserLoggedIn.value||!De("content.read").isEnabled()?{redirectUrl:"#/login?redirect=#/"}:De("dashboard").isEnabled()?{redirectUrl:"#/dashboard"}:De("content.read").isEnabled()?{redirectUrl:"#/content"}:{redirectUrl:"#/404"}}},eQ=()=>{const t="#/dashboard",e=dt();Ss(),Yx(),qo();const n=rn();return{path:t,callback:async r=>{if(e.unsetContext(),!n.isUserLoggedIn.value||!De("dashboard").isEnabled())return{redirectUrl:"#/login?redirect="+r.path};["design.publish","ui.editor","design.share","ui.navigationRight","ui.navbar.editToggle","ui.navbar.collaborateToggle"].forEach(o=>{De(o).asDisabled()}),e.setPreloading(!1)}}},tQ=()=>({routes:[KX(),GX(),JX(),MU(),EU(),QX(),XX(),WX(),ZX(),eQ()]}),_r=()=>{const t=dt(),e=Ss(),{routes:n}=tQ(),r=h=>{t.setCurrentPath(h)},o=()=>t.currentPath,s=(h,p=!1)=>{p?window.history.replaceState({},"",h):window.history.pushState({},"",h),window.dispatchEvent(new HashChangeEvent("hashchange"))},i=h=>{s(h,!0)},a=h=>{const p=h.split("?")[1],m=new URLSearchParams(p),v=h.split("?")[0],b=v.split("/").filter(w=>w);return{path:v,params:m,uriSegments:b}},l=Y(()=>a(o())),c=Y(()=>o()),u=h=>{(h=="/"||h==""||h=="#/"||h=="#")&&(h="#/");let p=!1;return n.forEach(m=>{if(m.path==h)p=m;else if(m.path.includes(":")){const v=m.path.split(":")[0],b=h.split("/"),w=m.path.split("/");h.includes(v)&&b.length==w.length&&(p=m)}}),p},d=async h=>{const p=u(h.path);if(console.log("route object",p),e.resetContextualFilters(),p){const m=await p.callback(h);m!==void 0&&m.hasOwnProperty("redirectUrl")&&i(m.redirectUrl)}else i("#/404")},f=async h=>{const p=u(h.path);p&&p.hasOwnProperty("exitCallback")&&await p.exitCallback(h)};return{setCurrentPath:r,getCurrentPath:o,initRouter:async h=>{r(h),ot(c,async(p,m)=>{const v=a(m),b=a(p);console.log("PATH CHANGED",v,b),await f(v),await d(b)}),window.addEventListener("hashchange",()=>{r(window.location.hash?window.location.hash:"/")}),await d(a(h))},goTo:s,redirect:i,currentRoute:l,currentPath:c}},Gu=()=>{const t=ai();return{toggleNavigation:(e,n)=>{t.toggleNavigation(e,n)}}},nQ={class:"fm-relative fm-inline-flex fm-items-center fm-justify-center fm-w-8 fm-h-8 fm-overflow-hidden fm-bg-gray-100 fm-rounded-full dark:fm-bg-gray-600"},rQ={key:0,class:"fm-absolute fm-w-full fm-h-full fm-text-gray-400 fm--left-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},oQ=g("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"},null,-1),sQ=[oQ],iQ=["src"],aQ={key:2,class:"fm-font-medium fm-text-gray-600 dark:fm-text-gray-300 fm-uppercase"},lQ=Ie({__name:"FlowmateAvatar",props:{name:{type:String,default:""},avatar:{type:String,default:""}},setup(t){const e=t,n=Y(()=>e.avatar),r=Y(()=>e.name&&!e.avatar),o=Y(()=>!(e.avatar||e.name)),s=Y(()=>{var i,a;if(e.name){let l=new RegExp(/(\p{L}{1})\p{L}+/,"gu"),c=[...e.name.matchAll(l)];return((((i=c.shift())==null?void 0:i[1])||"")+(((a=c.pop())==null?void 0:a[1])||"")).toUpperCase()}return""});return(i,a)=>(S(),T("div",nQ,[o.value?(S(),T("svg",rQ,sQ)):n.value?(S(),T("img",{key:1,class:"fm-w-full fm-h-full fm-rounded-full",src:t.avatar,alt:"Rounded avatar"},null,8,iQ)):r.value?(S(),T("span",aQ,Le(s.value),1)):H("",!0)]))}}),cQ={class:"fm-fixed fm-z-50 fm-top-10 fm-right-2 fm-w-48 fm-my-4 fm-text-base fm-list-none fm-bg-white fm-divide-y fm-divide-gray-100 fm-rounded fm-shadow dark:fm-bg-gray-700 dark:fm-divide-gray-600",id:"dropdown-user"},uQ={class:"fm-px-4 fm-py-3",role:"none"},dQ={class:"fm-text-sm fm-text-gray-900 dark:fm-text-white fm-font-bold",role:"none"},fQ={class:"fm-py-1",role:"none"},hQ=Ie({__name:"FlowmateUserMenu",props:{name:{type:String,default:""}},setup(t){const e=t,{signOut:n}=rn(),r=()=>{n()};return(o,s)=>(S(),T("div",cQ,[g("div",uQ,[g("p",dQ,Le(e.name),1)]),g("ul",fQ,[g("li",null,[g("a",{onClick:s[0]||(s[0]=rt(i=>r(),["stop","prevent"])),href:"#",class:"fm-block fm-px-4 fm-py-2 fm-text-sm fm-text-gray-700 hover:fm-bg-gray-100 dark:fm-text-gray-300 dark:hover:fm-bg-gray-600 dark:hover:fm-text-white",role:"menuitem"},"Sign out")])])]))}}),pQ={key:0,id:"defaultModal",tabindex:"-1","aria-hidden":"true",class:"fm-fixed fm-flex fm-items-center fm-justify-center fm-top-0 fm-left-0 fm-right-0 fm-z-50 fm-w-full fm-p-4 fm-overflow-x-hidden fm-overflow-y-auto md:fm-inset-0 fm-h-[calc(100%-1rem)] md:fm-h-full"},mQ={class:"fm-relative fm-w-full fm-h-full fm-max-w-[80%] fm-max-h-[90%] md:fm-h-auto"},gQ={class:"fm-relative fm-bg-white fm-rounded-lg fm-shadow dark:fm-bg-gray-700"},yQ={key:0,class:"fm-flex fm-items-start fm-justify-between fm-p-4 fm-border-b fm-rounded-t dark:fm-border-gray-600"},vQ=["innerHTML"],bQ=g("svg",{"aria-hidden":"true",class:"fm-w-5 fm-h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[g("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),wQ=g("span",{class:"fm-sr-only"},"Close modal",-1),kQ=[bQ,wQ],xQ={class:"fm-p-6 fm-space-y-4"},Gf={__name:"FlowmateModal",props:["title","open","removeCloseButton"],setup(t){const e=t,n=ae(e.open),r=()=>{n.value=!n.value};return ot(n,()=>{n.value?document.querySelector("body").style.overflow="hidden":document.querySelector("body").style.overflow="auto"}),(o,s)=>(S(),$e(Rk,{to:"body"},[he(wh,{name:"modal"},{default:At(()=>[n.value?(S(),T("div",pQ,[g("div",{class:"fm-bg-gray-900 fm-bg-opacity-50 dark:fm-bg-opacity-80 fm-fixed fm-inset-0",onClick:s[0]||(s[0]=i=>r())}),g("div",mQ,[g("div",gQ,[e.title&&!e.removeCloseButton?(S(),T("div",yQ,[e.title?(S(),T("h3",{key:0,class:"fm-text-xl fm-font-semibold fm-text-gray-900 dark:fm-text-white",innerHTML:e.title},null,8,vQ)):H("",!0),e.removeCloseButton?H("",!0):(S(),T("button",{key:1,type:"button",onClick:s[1]||(s[1]=i=>r()),class:"fm-text-gray-400 fm-bg-transparent hover:fm-bg-gray-200 hover:fm-text-gray-900 fm-rounded-lg fm-text-sm fm-p-1.5 fm-ml-auto fm-inline-flex fm-items-center dark:hover:fm-bg-gray-600 dark:hover:fm-text-white","data-modal-hide":"defaultModal"},kQ))])):H("",!0),g("div",xQ,[Xt(o.$slots,"default")])])])])):H("",!0)]),_:3})]))}},Xx=(t,e)=>{const n=t.__vccOpts||t;for(const[r,o]of e)n[r]=o;return n},CQ={},_Q={"aria-hidden":"true",role:"status",class:"fm-w-5 fm-h-5 fm-animate-spin",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},SQ=g("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"#E5E7EB"},null,-1),TQ=g("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentColor"},null,-1),MQ=[SQ,TQ];function EQ(t,e){return S(),T("svg",_Q,MQ)}const Dc=Xx(CQ,[["render",EQ]]),OQ={key:0,class:"fm-flex","aria-label":"Breadcrumb"},IQ={class:"fm-inline-flex fm-items-center fm-space-x-1 md:fm-space-x-3"},AQ={key:0,"aria-current":"page"},NQ={class:"fm-flex fm-items-center"},LQ={key:0,"aria-hidden":"true",class:"fm-w-6 fm-h-6 fm-text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},RQ=g("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"},null,-1),PQ=[RQ],DQ={class:"fm-capitalize fm-ml-1 fm-text-sm fm-font-medium fm-text-gray-500 md:fm-ml-2 dark:fm-text-gray-400"},$Q=Ie({__name:"FlowmateBreadcrumb",setup(t){const e=dt();return _r(),(n,r)=>x(e).pageContext&&x(e).pageContext.id?(S(),T("nav",OQ,[g("ol",IQ,[(S(!0),T(ye,null,Pe(x(e).getBreadcrumbs,(o,s)=>(S(),T(ye,null,[o.position!==1?(S(),T("li",AQ,[g("div",NQ,[s!==1?(S(),T("svg",LQ,PQ)):H("",!0),g("span",DQ,Le(o.name),1)])])):H("",!0)],64))),256))])])):H("",!0)}}),HQ={},FQ={width:"392",height:"42",viewBox:"0 0 392 72",xmlns:"http://www.w3.org/2000/svg",class:"fm-self-center fm-text-xl fm-font-semibold sm:fm-text-2xl fm-whitespace-nowrap dark:fm-text-white fm-fill-black dark:fm-fill-white"},BQ=Fu('<path d="M10.3047 71V31.498H0.0996094V21H10.3047V14.0176C10.3047 5.47266 14.8457 0.980469 23.293 0.980469H56.7891V71H43.8008V11.8203H28.8105C24.2207 11.8203 23.293 12.748 23.293 17.2891V21H35.1094V31.498H23.293V71H10.3047Z"></path><path d="M60.3359 46C60.1406 31.1562 70.6387 19.8281 85.3359 20.0234C100.033 19.8281 110.531 31.1562 110.336 46C110.531 60.8438 100.033 72.1719 85.3359 71.9766C70.6387 72.1719 60.1406 60.8438 60.3359 46ZM84.9453 61.4785H85.7266C92.709 61.4785 97.25 55.7168 97.25 46C97.25 36.2832 92.709 30.5215 85.7266 30.5215H84.9453C77.9141 30.5215 73.4219 36.2832 73.4219 46C73.4219 55.7168 77.9141 61.4785 84.9453 61.4785Z"></path><path d="M170.67 21H183.268L168.961 71H154.361L145.523 36.0391L137.271 71H122.672L107.389 21H120.475L130.436 58.1094L138.59 21H152.457L161.197 57.8164L170.67 21Z"></path><path d="M184.764 71V21H197.752V28.0801C201.121 22.6602 206.688 20.0234 212.693 20.0234C219.773 20.0234 225.242 22.9531 227.977 28.6172C231.639 22.8066 237.791 20.0234 244.48 20.0234C250.633 20.0234 255.125 21.7812 257.957 25.3457C260.838 28.8613 262.254 33.5977 262.254 39.5059V71H249.266V41.0195C249.266 34.3789 246.873 31.0098 241.551 31.0098H240.77C234.764 31.0098 230.076 36.2344 230.076 43.2168V71H217.088V41.0195C217.088 34.3789 214.598 31.0098 209.275 31.0098H208.494C202.488 31.0098 197.752 36.2344 197.752 43.2168V71H184.764Z"></path><path d="M309.307 71H297.1C296.807 69.584 296.611 67.5332 296.514 64.8965C293.389 69.2422 288.115 71.9766 281.719 71.9766C272.734 72.0742 265.166 66.0684 265.312 57.2793C265.312 52.2012 267.021 48.2949 270.439 45.5605C273.857 42.8262 278.252 41.2637 283.623 40.8242L296.221 39.7012V38.4805C296.221 33.9883 292.998 30.5215 288.213 30.5215H287.383C282.695 30.5215 279.619 33.4512 279.326 36.4785H266.289C267.217 27.0547 275.615 19.9258 287.822 20.0234C300.42 20.0234 308.818 26.4688 308.818 37.9922V60.0137C308.818 64.9941 308.965 68.6562 309.307 71ZM296.221 50.5898V49.1738L285.381 50.2969C283.477 50.4434 281.768 51.0293 280.303 52.0547C278.838 53.0801 278.105 54.4961 278.105 56.4004C278.105 59.4766 280.742 61.4785 284.307 61.4785H285.088C290.996 61.4785 296.221 56.8887 296.221 50.5898Z"></path><path d="M319.738 58.0117V31.498H309.436V21H319.738V4.78906H332.727V21H343.908V31.498H332.727V54.4961C332.727 59.0859 333.654 60.0137 338.244 60.0137H345.422V71H332.727C324.279 71 319.738 66.459 319.738 58.0117Z"></path><path d="M344.867 46C344.721 31.0586 353.998 19.8281 368.646 20.0234C383.246 19.877 391.596 30.8145 391.449 45.4141C391.449 46.3906 391.4 47.9531 391.254 50.1016H357.465C357.953 56.791 363.324 61.4785 368.744 61.4785H369.574C374.262 61.4785 377.436 58.8418 378.363 55.1797H391.254C388.812 65.1406 380.902 71.9766 368.646 71.9766C356.098 72.1719 344.623 61.9668 344.867 46ZM357.465 40.0918H378.852C378.559 34.1836 374.018 30.5215 368.549 30.5215H367.768C362.299 30.5215 357.758 34.1836 357.465 40.0918Z"></path>',7),jQ=[BQ];function zQ(t,e){return S(),T("svg",FQ,jQ)}const Qx=Xx(HQ,[["render",zQ]]),VQ=g("div",{class:"fm-tooltip-arrow","data-popper-arrow":""},null,-1),Io={__name:"FlowmateTooltip",props:{text:{type:String,required:!0},show:{type:Boolean,required:!0}},setup(t){const e=Ur();return(n,r)=>(S(),T("div",{role:"tooltip",class:V(["-fm-bottom-10 fm-left-1/2 fm-transform fm--translate-x-1/2 fm-absolute fm-z-10 fm-px-3 fm-py-2 fm-text-sm fm-font-medium fm-border fm-border-gray-200 fm-rounded-lg fm-shadow-sm fm-w-max",t.show?"fm-visible":"fm-invisible",x(e).getDarkMode?"fm-bg-white fm-text-gray-900":"fm-bg-gray-900 fm-text-white"])},[Ge(Le(t.text)+" ",1),VQ],2))}};function Ao(){const t=ae(!1);return{show:t,showTooltip:()=>{t.value=!0},hideTooltip:()=>{t.value=!1}}}const UQ={class:"fm-fixed fm-top-0 f-h-[60px] fm-z-50 fm-w-full fm-bg-white fm-border-b fm-border-gray-200 dark:fm-bg-gray-800 dark:fm-border-gray-700"},qQ={class:"fm-px-3 fm-py-3 lg:fm-px-5 lg:fm-pl-3"},WQ={class:"fm-flex fm-items-center fm-justify-between"},KQ={class:"fm-flex fm-items-center fm-justify-start"},GQ=g("button",{"data-drawer-target":"logo-sidebar","data-drawer-toggle":"logo-sidebar","aria-controls":"logo-sidebar",type:"button",class:"fm-inline-flex fm-items-center fm-p-2 fm-text-sm fm-text-gray-500 fm-rounded-lg md:fm-hidden hover:fm-bg-gray-100 focus:fm-outline-none focus:fm-ring-2 focus:fm-ring-gray-200 dark:fm-text-gray-400 dark:hover:fm-bg-gray-700 dark:focus:fm-ring-gray-600"},[g("span",{class:"fm-sr-only"},"Open sidebar"),g("svg",{class:"fm-w-6 fm-h-6","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[g("path",{"clip-rule":"evenodd","fill-rule":"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z"})])],-1),JQ={class:"fm-flex fm-pl-2 fm-pr-32 fm-w-64"},YQ={class:"fm-flex fm-items-center"},XQ={key:0,class:"fm-flex fm-items-center fm-gap-2 fm-mr-4"},QQ={key:0,class:"fm-inline-flex fm-items-center fm-bg-green-100 fm-text-green-800 fm-text-xs fm-font-medium fm-px-2.5 fm-py-0.5 fm-rounded-full dark:fm-bg-green-900 dark:fm-text-green-300"},ZQ=g("span",{class:"fm-w-2 fm-h-2 fm-mr-1 fm-bg-green-500 fm-rounded-full"},null,-1),eZ={key:1,class:"fm-inline-flex fm-items-center fm-bg-blue-100 fm-text-blue-800 fm-text-xs fm-font-medium fm-px-2.5 fm-py-0.5 fm-rounded-full dark:fm-bg-blue-900 dark:fm-text-blue-300"},tZ=g("span",{class:"fm-w-2 fm-h-2 fm-mr-1 fm-bg-blue-500 fm-rounded-full"},null,-1),nZ=g("p",{class:"fm-text-base dark:fm-text-white"},"Collaboration allows you to work together with your team or clients to create your new page or post quickly and efficiently, and then make any last-minute adjustments before publishing your work.",-1),rZ=g("p",{class:"fm-text-base dark:fm-text-white"},"A collaboration is a temporary real-time work space, between you and one or more collaborators. Once you choose to end the session, chat history and other data is cleared from the system.",-1),oZ={key:0},sZ=g("p",{class:"fm-mb-2 dark:fm-text-white"},[g("strong",null,"Share the link, to collaborate in real time")],-1),iZ={class:"fm-relative"},aZ=g("div",{class:"fm-absolute fm-inset-y-0 fm-left-0 fm-flex fm-items-center fm-pl-3 fm-pointer-events-none"},[g("svg",{fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5 fm-text-gray-500 dark:fm-text-gray-400"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})])],-1),lZ=["value"],cZ={key:1,fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5"},uZ=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),dZ=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z"},null,-1),fZ=[uZ,dZ],hZ={key:2,fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5"},pZ=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),mZ=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 9.563C9 9.252 9.252 9 9.563 9h4.874c.311 0 .563.252.563.563v4.874c0 .311-.252.563-.563.563H9.564A.562.562 0 019 14.437V9.564z"},null,-1),gZ=[pZ,mZ],yZ={key:1,class:"fm-flex fm-gap-2"},vZ=["title"],bZ=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"},null,-1),wZ=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),kZ=[bZ,wZ],xZ=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"},null,-1),CZ=[xZ],_Z=g("span",{class:"fm-sr-only"},"Toggle edit mode",-1),SZ=g("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"},null,-1),TZ=[SZ],MZ=g("path",{d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z","fill-rule":"evenodd","clip-rule":"evenodd"},null,-1),EZ=[MZ],OZ=g("span",{class:"fm-sr-only"},"Toggle dark/light mode",-1),IZ=g("svg",{fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-4 fm-h-4"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.217 10.907a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186l9.566-5.314m-9.566 7.5l9.566 5.314m0 0a2.25 2.25 0 103.935 2.186 2.25 2.25 0 00-3.935-2.186zm0-12.814a2.25 2.25 0 103.933-2.185 2.25 2.25 0 00-3.933 2.185z"})],-1),AZ=g("span",{class:"fm-sr-only"},"Share page",-1),NZ=g("p",{class:"dark:fm-text-white"},`First, you'll need to choose if the link needs to be password protected or not. If yes, create a password for the link. Once you've done that, simply click on the "Generate link" button below. This will create a special link that you can share with others who you want to give access to the page. If you created a password, the password you picked won't be visible anymore, once the link has been generated.`,-1),LZ={key:0},RZ={class:"fm-relative"},PZ=g("div",{class:"fm-absolute fm-inset-y-0 fm-left-0 fm-flex fm-items-center fm-pl-3 fm-pointer-events-none"},[g("svg",{fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5 fm-text-gray-500 dark:fm-text-gray-400"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})])],-1),DZ=["value"],$Z={key:0},HZ={class:"fm-w-full fm-flex fm-gap-2 fm-mb-4"},FZ=g("label",{for:"add-password-protection"},"Add password protection",-1),BZ={key:0},jZ=g("label",{for:"password",class:"fm-block fm-mb-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-white"},"Password",-1),zZ={class:"fm-relative"},VZ=g("div",{class:"fm-absolute fm-inset-y-0 fm-left-0 fm-flex fm-items-center fm-pl-3 fm-pointer-events-none"},[g("svg",{fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5 fm-text-gray-500 dark:fm-text-gray-400"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"})])],-1),UZ={key:1,fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5"},qZ=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),WZ=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z"},null,-1),KZ=[qZ,WZ],GZ=g("span",null,"Generate link",-1),JZ={key:1,fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5"},YZ=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),XZ=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 9.563C9 9.252 9.252 9 9.563 9h4.874c.311 0 .563.252.563.563v4.874c0 .311-.252.563-.563.563H9.564A.562.562 0 019 14.437V9.564z"},null,-1),QZ=[YZ,XZ],ZZ=g("span",null,"Terminate link",-1),eee={key:2,class:"fm-text-xs"},tee={class:"fm-flex fm-items-center fm-ml-3 fm-relative"},nee=["onClick"],ree=g("span",{class:"fm-sr-only"},"Open user menu",-1),oee=Ie({__name:"FlowmateNavBar",setup(t){const e=Bu(),{getCurrentRevision:n}=Hr();rn();const{isCollaborateMode:r,collaborationID:o,stopCollaboration:s,startCollaboration:i,sendMessage:a,startCollaborationFromContext:l,collaborationGuests:c}=Jl(),{startShare:u,stopShare:d,shareId:f}=x6(),h=dt();ai(),Gu();const p=Ur(),{getUsername:m,getUser:v,getAvatar:b,isUserLoggedIn:w}=rn(),{writeMessage:k}=co();_r();const y=ae(!1),C=ae(!1),_=ae(""),M=ae(!1),E=Y(()=>M),O=ae(!1),N=Y(()=>O),R=()=>{y.value=!y.value},I=le=>{z3(le).then(()=>{k("Link was copied to your clipboard.",null,"success")})},j=ae(!1),de=async()=>{if(C.value=!0,parseInt(f.value)!==0)await d();else{if(j.value&&!_.value){k("Please enter a password.",null,"error"),C.value=!1;return}await u(_.value)}C.value=!1},te=async()=>{C.value=!0;const{context:le}=Fr();let G=n();r.value?await s(G):G?await i(G):await l(le.value),C.value=!1},{show:Q,showTooltip:ie,hideTooltip:z}=Ao(),{show:ge,showTooltip:ve,hideTooltip:be}=Ao(),{show:Se,showTooltip:Ee,hideTooltip:Re}=Ao(),{show:Ke,showTooltip:je,hideTooltip:K}=Ao();return(le,G)=>(S(),T("nav",UQ,[g("div",qQ,[g("div",WQ,[g("div",KQ,[GQ,g("button",JQ,[he(Qx)]),he($Q)]),g("div",YQ,[x(De)("collaborate").isEnabled()?(S(),T("div",XQ,[x(De)("ui.navbar.collaborateToggle").isEnabled()?(S(),T("div",{key:0,onClick:G[0]||(G[0]=Z=>M.value=!M.value),class:"fm-cursor-pointer fm-relative",onMouseenter:G[1]||(G[1]=(...Z)=>x(ie)&&x(ie)(...Z)),onMouseleave:G[2]||(G[2]=(...Z)=>x(z)&&x(z)(...Z))},[he(Io,{text:"Collaboration",show:x(Q)},null,8,["show"]),x(r)?(S(),T("span",QQ,[ZQ,Ge(" Collaboration #"+Le(x(o)),1)])):(S(),T("span",eZ,[tZ,Ge(" Collaboration ")]))],32)):H("",!0),he(Gf,{title:"Collaboration",open:E.value},{default:At(()=>[nZ,rZ,x(r)&&x(o)?(S(),T("div",oZ,[sZ,g("div",iZ,[aZ,g("input",{type:"text",disabled:"",value:x(h).getOptions.frontend+"/#/collaborate/"+x(o),class:"fm-block fm-cursor-text fm-w-full fm-p-4 fm-pl-10 fm-text-sm fm-text-gray-500 fm-border fm-border-gray-300 fm-rounded-lg fm-bg-gray-50 focus:fm-ring-blue-500 focus:fm-border-blue-500 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-ring-blue-500 dark:focus:fm-border-blue-500"},null,8,lZ),g("button",{onClick:G[3]||(G[3]=Z=>I(x(h).getOptions.frontend+"/#/collaborate/"+x(o))),class:"fm-text-white fm-absolute fm-right-2.5 fm-bottom-2.5 fm-bg-blue-700 hover:fm-bg-blue-800 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-blue-300 fm-font-medium fm-rounded-lg fm-text-sm fm-px-4 fm-py-2 dark:fm-bg-blue-600 dark:hover:fm-bg-blue-700 dark:focus:fm-ring-blue-800"},"Copy link")])])):H("",!0),x(De)("collaborate.create").isEnabled()?(S(),T("button",{key:1,type:"button",onClick:G[4]||(G[4]=Z=>te()),class:V([[x(r)?"!fm-bg-red-700 hover:!fm-bg-red-800":"!fm-bg-blue-700 hover:!fm-bg-blue-800",C.value?x(h).getLoadingClass:""],"fm-text-white focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-blue-300 fm-font-medium fm-rounded-lg fm-text-sm fm-p-3 fm-text-center fm-inline-flex fm-items-center dark:!fm-bg-blue-600 dark:hover:!fm-bg-blue-700 dark:focus:fm-ring-blue-800 fm-justify-center fm-gap-2"])},[C.value?(S(),$e(Dc,{key:0})):H("",!0),!x(r)&&!C.value?(S(),T("svg",cZ,fZ)):H("",!0),x(r)&&!C.value?(S(),T("svg",hZ,gZ)):H("",!0),g("span",null,Le(x(r)?"Stop":"Start")+" Collaboration",1)],2)):H("",!0)]),_:1},8,["open"]),x(c)?(S(),T("div",yZ,[(S(!0),T(ye,null,Pe(x(c),Z=>(S(),T("div",{class:V(["fm-relative fm-inline-flex fm-items-center fm-justify-center fm-w-8 fm-h-8 fm-overflow-hidden fm-bg-gray-100 fm-rounded-full dark:fm-bg-gray-600 fm-border-4 fm-duration-500",[x(e).getGuestColor(Z).border,Z.idle?"fm-opacity-30":""]])},[g("span",{class:"fm-cursor-default fm-font-medium fm-text-gray-600 dark:fm-text-gray-300 fm-uppercase fm-text-sm",title:Z.idle?Z.name+" (idle)":Z.name},Le(x(e).getGuestInitials(Z)),9,vZ)],2))),256))])):H("",!0)])):H("",!0),x(De)("ui.navbar.editToggle").isEnabled()&&x(De)("design").isEnabled()?(S(),T("button",{key:1,onClick:G[5]||(G[5]=Z=>x(p).setEditMode(!x(p).getEditMode)),"data-tooltip-target":"default-mega-menu-example-toggle-dark-mode-tooltip",type:"button",class:"fm-flex fm-items-center fm-p-2 fm-mr-2 fm-text-xs fm-font-medium fm-text-gray-700 fm-bg-white fm-border fm-border-gray-200 fm-rounded-lg toggle-dark-state-example hover:fm-bg-gray-100 hover:fm-text-blue-700 focus:fm-z-10 focus:fm-ring-2 focus:fm-ring-gray-300 dark:focus:fm-ring-gray-500 dark:fm-bg-gray-800 focus:fm-outline-none dark:fm-text-gray-400 dark:fm-border-gray-600 dark:hover:fm-text-white dark:hover:fm-bg-gray-700 fm-relative",onMouseenter:G[6]||(G[6]=(...Z)=>x(Ee)&&x(Ee)(...Z)),onMouseleave:G[7]||(G[7]=(...Z)=>x(Re)&&x(Re)(...Z))},[he(Io,{text:x(p).getEditMode?"Preview":"Edit",show:x(Se)},null,8,["text","show"]),(S(),T("svg",{"aria-hidden":"true",class:V([{"fm-hidden":!x(p).getEditMode},"fm-w-4 fm-h-4"]),fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},kZ,2)),(S(),T("svg",{"aria-hidden":"true",class:V([{"fm-hidden":x(p).getEditMode},"fm-w-4 fm-h-4"]),fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},CZ,2)),_Z],32)):H("",!0),g("button",{onClick:G[8]||(G[8]=Z=>x(p).setDarkMode(!x(p).getDarkMode)),"data-tooltip-target":"default-mega-menu-example-toggle-dark-mode-tooltip",type:"button",class:"fm-flex fm-items-center fm-p-2 fm-mr-2 fm-text-xs fm-font-medium fm-text-gray-700 fm-bg-white fm-border fm-border-gray-200 fm-rounded-lg toggle-dark-state-example hover:fm-bg-gray-100 hover:fm-text-blue-700 focus:fm-z-10 focus:fm-ring-2 focus:fm-ring-gray-300 dark:focus:fm-ring-gray-500 dark:fm-bg-gray-800 focus:fm-outline-none dark:fm-text-gray-400 dark:fm-border-gray-600 dark:hover:fm-text-white dark:hover:fm-bg-gray-700 fm-relative",onMouseenter:G[9]||(G[9]=(...Z)=>x(ve)&&x(ve)(...Z)),onMouseleave:G[10]||(G[10]=(...Z)=>x(be)&&x(be)(...Z))},[he(Io,{text:x(p).getDarkMode?"Light Mode":"Dark Mode",show:x(ge)},null,8,["text","show"]),(S(),T("svg",{"aria-hidden":"true","data-toggle-icon":"moon",class:V([{"fm-hidden":x(p).getDarkMode},"fm-w-4 fm-h-4"]),fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},TZ,2)),(S(),T("svg",{"aria-hidden":"true","data-toggle-icon":"sun",class:V([{"fm-hidden":!x(p).getDarkMode},"fm-w-4 fm-h-4"]),fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},EZ,2)),OZ],32),x(De)("design.share").isEnabled()?(S(),T("button",{key:2,onClick:G[11]||(G[11]=Z=>O.value=!O.value),"data-tooltip-target":"default-mega-menu-example-toggle-dark-mode-tooltip",type:"button",class:"fm-flex fm-items-center fm-p-2 fm-mr-2 fm-text-xs fm-font-medium fm-text-gray-700 fm-bg-white fm-border fm-border-gray-200 fm-rounded-lg toggle-dark-state-example hover:fm-bg-gray-100 hover:fm-text-blue-700 focus:fm-z-10 focus:fm-ring-2 focus:fm-ring-gray-300 dark:focus:fm-ring-gray-500 dark:fm-bg-gray-800 focus:fm-outline-none dark:fm-text-gray-400 dark:fm-border-gray-600 dark:hover:fm-text-white dark:hover:fm-bg-gray-700 fm-relative",onMouseenter:G[12]||(G[12]=(...Z)=>x(je)&&x(je)(...Z)),onMouseleave:G[13]||(G[13]=(...Z)=>x(K)&&x(K)(...Z))},[he(Io,{text:"Share",show:x(Ke)},null,8,["show"]),IZ,AZ],32)):H("",!0),x(De)("design.share").isEnabled()?(S(),$e(Gf,{key:3,title:"Share page",open:N.value},{default:At(()=>[NZ,parseInt(x(f))!==0?(S(),T("div",LZ,[g("div",RZ,[PZ,g("input",{type:"text",disabled:"",value:x(h).getOptions.frontend+"/#/share/"+x(f),class:"fm-block fm-cursor-text fm-w-full fm-p-4 fm-pl-10 fm-text-sm fm-text-gray-500 fm-border fm-border-gray-300 fm-rounded-lg fm-bg-gray-50 focus:fm-ring-blue-500 focus:fm-border-blue-500 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-ring-blue-500 dark:focus:fm-border-blue-500"},null,8,DZ),g("button",{onClick:G[14]||(G[14]=rt(Z=>I(x(h).getOptions.frontend+"/#/share/"+x(f)),["prevent"])),class:"fm-text-white fm-absolute fm-right-2.5 fm-bottom-2.5 fm-bg-blue-700 hover:fm-bg-blue-800 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-blue-300 fm-font-medium fm-rounded-lg fm-text-sm fm-px-4 fm-py-2 dark:fm-bg-blue-600 dark:hover:fm-bg-blue-700 dark:focus:fm-ring-blue-800"},"Copy link")])])):H("",!0),g("form",null,[parseInt(x(f))===0?(S(),T("div",$Z,[g("div",HZ,[qe(g("input",{type:"checkbox",id:"add-password-protection",name:"add-password-protection","onUpdate:modelValue":G[15]||(G[15]=Z=>j.value=Z)},null,512),[[Il,j.value]]),FZ]),j.value?(S(),T("div",BZ,[jZ,g("div",zZ,[VZ,qe(g("input",{type:"text",id:"password",maxlength:"30",placeholder:"Password","onUpdate:modelValue":G[16]||(G[16]=Z=>_.value=Z),class:"fm-block fm-cursor-text fm-w-full fm-p-4 fm-pl-10 fm-text-sm fm-text-gray-500 fm-border fm-border-gray-300 fm-rounded-lg fm-bg-gray-50 focus:fm-ring-blue-500 focus:fm-border-blue-500 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-ring-blue-500 dark:focus:fm-border-blue-500"},null,512),[[mn,_.value]])])])):H("",!0),g("button",{type:"submit",onClick:G[17]||(G[17]=rt(Z=>de(),["prevent"])),class:V([[C.value?x(h).getLoadingClass:""],"!fm-bg-blue-700 hover:!fm-bg-blue-800 fm-text-white fm-mt-4 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-blue-300 fm-font-medium fm-rounded-lg fm-text-sm fm-p-3 fm-text-center fm-inline-flex fm-items-center dark:!fm-bg-blue-600 dark:hover:!fm-bg-blue-700 dark:focus:fm-ring-blue-800 fm-justify-center fm-gap-2"])},[C.value?(S(),$e(Dc,{key:0})):H("",!0),C.value?H("",!0):(S(),T("svg",UZ,KZ)),GZ],2)])):H("",!0)]),parseInt(x(f))!==0?(S(),T("button",{key:1,type:"submit",onClick:G[18]||(G[18]=rt(Z=>de(),["prevent"])),class:V([[C.value?x(h).getLoadingClass:""],"!fm-bg-red-700 hover:!fm-bg-red-800 fm-text-white fm-mt-4 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-blue-300 fm-font-medium fm-rounded-lg fm-text-sm fm-p-3 fm-text-center fm-inline-flex fm-items-center dark:!fm-bg-blue-600 dark:hover:!fm-bg-blue-700 dark:focus:fm-ring-blue-800 fm-justify-center fm-gap-2"])},[C.value?(S(),$e(Dc,{key:0})):H("",!0),C.value?H("",!0):(S(),T("svg",JZ,QZ)),ZZ],2)):H("",!0),parseInt(x(f))!==0?(S(),T("p",eee,"To change the password, please regenerate the link, by terminating it, and generating it, with a different password.")):H("",!0)]),_:1},8,["open"])):H("",!0),g("div",tee,[g("button",{onClick:rt(R,["stop"]),type:"button",class:"fm-flex fm-text-sm fm-rounded-full focus:fm-ring-4 focus:fm-ring-gray-300 dark:focus:fm-ring-gray-600","aria-expanded":"false","data-dropdown-toggle":"dropdown-user"},[ree,he(lQ,{name:x(m)(),avatar:x(b)()},null,8,["name","avatar"])],8,nee),y.value&&x(w)?(S(),$e(hQ,{key:0,name:x(m)()},null,8,["name"])):H("",!0)])])])])]))}}),Zx=Vr("mediastore",{state:()=>({mediaPopupOpen:!1,activeBlockIndex:null,activeBlockContext:{},activeMediaType:null,activeFieldName:null,activeFieldType:null,selectedImageID:null,selectedImage:null,selectedImages:[],selectedImageIDs:[]}),getters:{getActiveBlockContext(t){return t.activeBlockContext},getActiveBlockIndex(t){return t.activeBlockIndex},getActiveFieldName(t){return t.activeFieldName},getActiveFieldType(t){return t.activeFieldType},getAcceptedMediaTypes(t){return t.activeMediaType},getMediaPopupOpen(t){return t.mediaPopupOpen},getSelectedImage(t){return t.selectedImage},getSelectedImageID(t){return t.selectedImageID},getSelectedImages(t){return t.selectedImages},getSelectedImageIDs(t){return t.selectedImageIDs}},actions:{toggleMediaPopup(){this.mediaPopupOpen=!this.mediaPopupOpen},setContext(t,e,n,r,o){this.activeBlockContext=t,this.activeBlockIndex=e,this.activeFieldName=n,this.activeMediaType=r,this.activeFieldType=o},clearContext(){this.activeBlockIndex=null,this.activeFieldName=null,this.activeMediaType=null,this.activeFieldType=null},setSelectedImage(t){this.selectedImage=t},setSelectedImageID(t){this.selectedImageID=t},setSelectedImages(t){this.selectedImages=t},setSelectedImageIDs(t){this.selectedImageIDs=t},moveImage(t,e){let n=this.selectedImages,r=1;const o=n.splice(t,r)[0];r=0,n.splice(e,r,o),this.setSelectedImages(n),this.setSelectedImageIDs(n.map(s=>s.id))}}}),zh=()=>{const t=dt(),e=Zx(),n=(l,c,u,d=null,f=null)=>{if(e.setContext(l,c,u,d,f),f=="gallery"){let h=t.pageContext.acf.content[c][u];h&&h.length>0&&(e.setSelectedImages(h),e.setSelectedImageIDs(h.map(p=>p.id)))}e.toggleMediaPopup()},r=async l=>{const{writeMessage:c}=co(),u=dt(),d=l.target.files[0];if(d){console.log("FILE",d);const f=u.options.backend+"/wp-json/flowmate/v1/upload-files";let h=new FormData;h.append("file",d);let p=await fetch(f,{method:"POST",body:h}).then(m=>m.json());return console.log("RESPONSE",p),p&&p.length>0?(p.forEach(m=>{c(m.file.name+" uploaded successfully",null,"success")}),p):(p.data&&p.data.status&&p.data.status>299&&c(p.message,p.data.status,"error",!0),p)}else return"No file"},o=(l,c)=>c.findIndex(u=>u.id===l.id),s=()=>{e.setSelectedImages([]),e.setSelectedImageIDs([]),a(!1)},i=l=>{if(l==null)e.getActiveFieldType==="gallery"||(e.setSelectedImage(null),e.setSelectedImageID(null));else if(e.getActiveFieldType==="gallery"){let c=e.getSelectedImages,u=o(l,c);u>-1?c.splice(u,1):c.push(l),e.setSelectedImageIDs(c.map(d=>d.id))}else{let c=e.getSelectedImage;c&&c.id==l.id?(e.setSelectedImage(null),e.setSelectedImageID(null)):(e.setSelectedImage(l),e.setSelectedImageID(l.id))}},a=(l=!0)=>{let c=e.getActiveBlockIndex,u=e.getActiveFieldName,d=e.getActiveBlockContext;if(e.getActiveFieldType==="gallery"){let f=e.getSelectedImages,h=e.getSelectedImageIDs;if(console.log("SAVE IMAGE",h),f&&h){if(c!=null&&u!=null){console.log("FOR FIELD",c);let p=[];f.forEach(m=>{let v=h.findIndex(b=>b===m.id);m.ID=v,p.push(m)}),console.log("GALLERY CONTEXT UPDATE",d),d[u]=p,l&&e.toggleMediaPopup(),console.log("New val",t.pageContext.acf.content[c])}else if(u!==null){t.pageContext[u]=h;let p=[];f.forEach(m=>{let v=m.media_details&&m.media_details.sizes.full?m.media_details.sizes.full.source_url:m.source_url;p.push(v)}),t.pageContext["preview_images_"+u]=p,l&&e.toggleMediaPopup()}}}else{let f=e.getSelectedImage,h=e.getSelectedImageID;console.log("SAVE IMAGE",h),f&&h&&(c!=null&&u!=null?(console.log("FOR FIELD",c),console.log(e.getActiveFieldType),console.log("NOT GALLERY CONTEXT",d),f.ID=h,d[u]=f,l&&e.toggleMediaPopup(),console.log("New val",t.pageContext.acf.content[c])):(console.log("Not gallery and no block index"),u!==null&&(t.pageContext[u]=h,t.pageContext["preview_image_"+u]=f.media_details&&f.media_details.sizes.full?f.media_details.sizes.full.source_url:f.source_url,l&&e.toggleMediaPopup())))}};return{uploadImage:r,initMediaLibrary:n,selectImage:i,saveSelectedImage:a,clearSelectedImages:s}};async function see(t,e,n){const r=dt(),o=ae(null),s=ae(null);let i=0,a=r.options.backend+"/wp-json/wp/v2/media?page="+t+"&per_page="+e;return n&&(a+="&search="+n),await fetch(a).then(l=>(i=l.headers.get("x-wp-totalpages")?l.headers.get("x-wp-totalpages"):1,l.json())).then(l=>o.value=l).catch(l=>s.value=l),{media:o,total:i,error:s}}const iee={},aee={"aria-hidden":"true",class:"fm-w-14 fm-h-14 fm-text-gray-200 fm-animate-spin dark:fm-text-gray-600 fm-fill-blue-600",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},lee=g("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"},null,-1),cee=g("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"},null,-1),uee=[lee,cee];function dee(t,e){return S(),T("svg",aee,uee)}const jy=Xx(iee,[["render",dee]]),fee={class:"fm-relative fm-left-1/2 fm-top-1/2 -fm-translate-x-1/2 -fm-translate-y-1/2 fm-w-full fm-h-full fm-max-w-[90%] fm-max-h-[90%] md:fm-h-auto fm-z-10"},hee={class:"fm-relative fm-bg-white fm-rounded-lg fm-shadow dark:fm-bg-gray-700 fm-w-full fm-h-full"},pee={class:"fm-flex fm-items-start fm-justify-between fm-p-4 fm-border-b fm-rounded-t dark:fm-border-gray-600"},mee=g("h3",{class:"fm-text-xl fm-font-semibold fm-text-gray-900 dark:fm-text-white"}," Media library ",-1),gee=g("svg",{"aria-hidden":"true",class:"fm-w-5 fm-h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[g("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),yee=g("span",{class:"fm-sr-only"},"Close modal",-1),vee=[gee,yee],bee={class:"fm-flex fm-justify-between fm-border-b fm-border-gray-200 dark:fm-border-gray-700 dark:fm-text-gray-400 fm-px-4"},wee={class:"fm-py-2 fm-self-center"},kee={for:"dropzone-file",class:"fm-text-white fm-cursor-pointer !fm-bg-blue-700 hover:!fm-bg-blue-800 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-blue-300 fm-font-medium fm-rounded-lg fm-text-sm fm-p-3 fm-text-center fm-inline-flex fm-items-center dark:!fm-bg-blue-600 dark:hover:!fm-bg-blue-700 dark:focus:fm-ring-blue-800 fm-justify-center fm-gap-2"},xee=g("svg",{"aria-hidden":"true",class:"fm-w-5 fm-h-5 fm-text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1),Cee=g("span",null,"Upload file",-1),_ee={class:"fm-py-2"},See=g("label",{for:"default-search",class:"fm-mb-2 fm-text-sm fm-font-medium fm-text-gray-900 fm-sr-only dark:fm-text-white"},"Search",-1),Tee={class:"fm-relative"},Mee=g("div",{class:"fm-absolute fm-inset-y-0 fm-left-0 fm-flex fm-items-center fm-pl-3 fm-pointer-events-none"},[g("svg",{"aria-hidden":"true",class:"fm-w-5 fm-h-5 fm-text-gray-500 dark:fm-text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1),Eee=g("button",{type:"submit",class:"fm-text-white fm-absolute fm-right-[8px] fm-bottom-[8px] fm-bg-blue-700 hover:fm-bg-blue-800 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-blue-300 fm-font-medium fm-rounded-lg fm-text-sm fm-px-4 fm-py-2 dark:fm-bg-blue-600 dark:hover:fm-bg-blue-700 dark:focus:fm-ring-blue-800"}," Search ",-1),Oee=g("svg",{"aria-hidden":"true",class:"fm-w-3 fm-h-3",fill:"white",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[g("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),Iee=g("span",{class:"fm-sr-only"},"Close modal",-1),Aee=[Oee,Iee],Nee={class:"fm-p-6 fm-space-y-6 fm-max-h-[65vh] fm-overflow-auto"},Lee={class:"relative"},Ree={key:0,class:"fm-absolute fm-top-1/2 fm-left-1/2 -fm-translate-x-1/2 -fm-translate-y-1/2"},Pee={class:"fm-flex fm-gap-4"},Dee={key:0,class:"fm-grid fm-grid-cols-12 fm-gap-4 fm-duration-200"},$ee={key:0,class:"fm-col-span-12"},Hee={key:0},Fee={class:"fm-font-bold"},Bee=["onClick"],jee={key:0,class:"fm-absolute fm-group fm-duration-100 fm-rounded-full fm-bg-blue-700 fm-text-white fm-z-50 fm-top-0 fm-right-0 fm-translate-y-1/2 -fm-translate-x-1/2 fm-w-8 fm-h-8 fm-p-1 fm-text-center fm-pointer-events-none"},zee={key:0,class:"fm-absolute fm-top-0 fm-left-0 fm-h-full fm-w-full fm-object-contain fm-duration-100 fm-rounded-lg"},Vee=["src"],Uee={key:1,class:"fm-absolute fm-w-full fm-h-full fm-top-0 fm-left-0 fm-flex fm-items-center fm-justify-center"},qee=g("svg",{fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-z-10 fm-stroke-white fm-w-10 fm-h-10"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 01-1.125-1.125M3.375 19.5h1.5C5.496 19.5 6 18.996 6 18.375m-3.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-1.5A1.125 1.125 0 0118 18.375M20.625 4.5H3.375m17.25 0c.621 0 1.125.504 1.125 1.125M20.625 4.5h-1.5C18.504 4.5 18 5.004 18 5.625m3.75 0v1.5c0 .621-.504 1.125-1.125 1.125M3.375 4.5c-.621 0-1.125.504-1.125 1.125M3.375 4.5h1.5C5.496 4.5 6 5.004 6 5.625m-3.75 0v1.5c0 .621.504 1.125 1.125 1.125m0 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m1.5-3.75C5.496 8.25 6 7.746 6 7.125v-1.5M4.875 8.25C5.496 8.25 6 8.754 6 9.375v1.5m0-5.25v5.25m0-5.25C6 5.004 6.504 4.5 7.125 4.5h9.75c.621 0 1.125.504 1.125 1.125m1.125 2.625h1.5m-1.5 0A1.125 1.125 0 0118 7.125v-1.5m1.125 2.625c-.621 0-1.125.504-1.125 1.125v1.5m2.625-2.625c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125M18 5.625v5.25M7.125 12h9.75m-9.75 0A1.125 1.125 0 016 10.875M7.125 12C6.504 12 6 12.504 6 13.125m0-2.25C6 11.496 5.496 12 4.875 12M18 10.875c0 .621-.504 1.125-1.125 1.125M18 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m-12 5.25v-5.25m0 5.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125m-12 0v-1.5c0-.621-.504-1.125-1.125-1.125M18 18.375v-5.25m0 5.25v-1.5c0-.621.504-1.125 1.125-1.125M18 13.125v1.5c0 .621.504 1.125 1.125 1.125M18 13.125c0-.621.504-1.125 1.125-1.125M6 13.125v1.5c0 .621-.504 1.125-1.125 1.125M6 13.125C6 12.504 5.496 12 4.875 12m-1.5 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M19.125 12h1.5m0 0c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h1.5m14.25 0h1.5"})],-1),Wee=["src"],Kee={key:2},Gee=g("svg",{fill:"none",stroke:"black","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-stroke-black dark:fm-stroke-white fm-absolute fm-top-[45%] fm-left-1/2 -fm-translate-y-1/2 -fm-translate-x-1/2 fm-w-12 fm-h-auto"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})],-1),Jee=["innerHTML"],Yee={key:0,class:"fm-grid fm-grid-cols-12 fm-gap-x-4 fm-gap-y-12"},Xee=["onClick"],Qee={key:0,class:"fm-absolute fm-group fm-duration-100 fm-rounded-full fm-bg-blue-700 fm-text-white fm-z-50 fm-top-full fm-left-1/2 -fm-translate-y-1/2 -fm-translate-x-1/2 fm-w-8 fm-h-8 fm-p-1 fm-text-center hover:fm-w-10 hover:fm-h-10 hover:fm-p-2"},Zee=["onClick"],ete=["onClick"],tte={key:0,class:"fm-absolute fm-top-0 fm-left-0 fm-h-full fm-w-full fm-object-contain fm-duration-100 fm-rounded-lg"},nte=["src"],rte={key:1,class:"fm-absolute fm-w-full fm-h-full fm-top-0 fm-left-0 fm-flex fm-items-center fm-justify-center"},ote=g("svg",{fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-z-10 fm-stroke-white fm-w-10 fm-h-10"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 01-1.125-1.125M3.375 19.5h1.5C5.496 19.5 6 18.996 6 18.375m-3.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-1.5A1.125 1.125 0 0118 18.375M20.625 4.5H3.375m17.25 0c.621 0 1.125.504 1.125 1.125M20.625 4.5h-1.5C18.504 4.5 18 5.004 18 5.625m3.75 0v1.5c0 .621-.504 1.125-1.125 1.125M3.375 4.5c-.621 0-1.125.504-1.125 1.125M3.375 4.5h1.5C5.496 4.5 6 5.004 6 5.625m-3.75 0v1.5c0 .621.504 1.125 1.125 1.125m0 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m1.5-3.75C5.496 8.25 6 7.746 6 7.125v-1.5M4.875 8.25C5.496 8.25 6 8.754 6 9.375v1.5m0-5.25v5.25m0-5.25C6 5.004 6.504 4.5 7.125 4.5h9.75c.621 0 1.125.504 1.125 1.125m1.125 2.625h1.5m-1.5 0A1.125 1.125 0 0118 7.125v-1.5m1.125 2.625c-.621 0-1.125.504-1.125 1.125v1.5m2.625-2.625c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125M18 5.625v5.25M7.125 12h9.75m-9.75 0A1.125 1.125 0 016 10.875M7.125 12C6.504 12 6 12.504 6 13.125m0-2.25C6 11.496 5.496 12 4.875 12M18 10.875c0 .621-.504 1.125-1.125 1.125M18 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m-12 5.25v-5.25m0 5.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125m-12 0v-1.5c0-.621-.504-1.125-1.125-1.125M18 18.375v-5.25m0 5.25v-1.5c0-.621.504-1.125 1.125-1.125M18 13.125v1.5c0 .621.504 1.125 1.125 1.125M18 13.125c0-.621.504-1.125 1.125-1.125M6 13.125v1.5c0 .621-.504 1.125-1.125 1.125M6 13.125C6 12.504 5.496 12 4.875 12m-1.5 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M19.125 12h1.5m0 0c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h1.5m14.25 0h1.5"})],-1),ste=["src"],ite={key:2},ate=g("svg",{fill:"none",stroke:"black","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-stroke-black dark:fm-stroke-white fm-absolute fm-top-[45%] fm-left-1/2 -fm-translate-y-1/2 -fm-translate-x-1/2 fm-w-12 fm-h-auto"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})],-1),lte=["innerHTML"],cte={key:1},ute={key:0,class:"fm-pt-[80%] fm-relative fm-bg-gray-100 dark:fm-bg-gray-800 fm-border-2 fm-border-gray-100 dark:fm-border-gray-700 fm-rounded-lg fm-overflow-hidden"},dte={key:0},fte={key:0,class:"fm-absolute fm-top-0 fm-left-0 fm-h-full fm-w-full fm-object-contain fm-duration-100 fm-rounded-lg"},hte=["src"],pte={key:1,class:"fm-absolute fm-top-0 fm-left-0 fm-h-full fm-w-full fm-object-contain fm-duration-100"},mte=["src"],gte={key:2,class:"fm-absolute fm-top-0 fm-left-0 fm-h-full fm-w-full fm-object-contain fm-duration-100"},yte=g("svg",{fill:"none",stroke:"black","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-absolute fm-top-1/2 fm-left-1/2 -fm-translate-y-1/2 -fm-translate-x-1/2 fm-w-16 fm-h-auto fm-stroke-black dark:fm-stroke-white"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})],-1),vte=[yte],bte={key:1,class:"fm-flex fm-flex-col fm-gap-2 fm-p-2 fm-w-full fm-overflow-auto"},wte={class:"fm-text-xs fm-text-gray-800 dark:fm-text-white"},kte=g("strong",null,"File name ",-1),xte=g("br",null,null,-1),Cte=["innerHTML"],_te={class:"fm-text-xs fm-text-gray-800 dark:fm-text-white"},Ste=g("strong",null,"File type ",-1),Tte=g("br",null,null,-1),Mte=["innerHTML"],Ete={class:"fm-text-xs fm-text-gray-800 dark:fm-text-white"},Ote=g("strong",null,"File size ",-1),Ite=g("br",null,null,-1),Ate=["innerHTML"],Nte={key:0,class:"fm-text-xs fm-text-gray-800 dark:fm-text-white"},Lte=g("strong",null,"Dimensions ",-1),Rte=g("br",null,null,-1),Pte=["innerHTML"],Dte=["innerHTML"],$te={class:"fm-text-xs fm-text-gray-800 dark:fm-text-white"},Hte=g("strong",null,"Uploaded by ",-1),Fte=g("br",null,null,-1),Bte=["innerHTML"],jte={class:"fm-text-xs fm-text-gray-800 dark:fm-text-white"},zte=g("strong",null,"Upload date ",-1),Vte=g("br",null,null,-1),Ute=["innerHTML"],qte={class:"fm-text-xs fm-text-gray-800 dark:fm-text-white"},Wte=g("strong",null,"File link ",-1),Kte=g("br",null,null,-1),Gte=["innerHTML"],Jte={class:"fm-flex fm-gap-4 fm-px-4 fm-py-2 fm-border-t dark:fm-border-gray-600"},Yte={"aria-label":"Page navigation example ",class:"fm-flex-auto"},Xte={key:0,class:"fm-inline-flex fm-items-center fm--space-x-px"},Qte=g("button",{class:"fm-block fm-rounded-l-md fm-px-3 fm-py-2 fm-ml-0 fm-leading-tight fm-text-gray-500 fm-bg-white fm-border fm-border-gray-200 hover:fm-bg-gray-100 hover:fm-text-gray-700 dark:fm-bg-gray-800 dark:fm-border-gray-700 dark:fm-text-gray-400 dark:hover:fm-bg-gray-700 dark:hover:fm-text-white"},[g("span",{class:"fm-sr-only"},"Previous"),g("svg",{"aria-hidden":"true",class:"fm-w-5 fm-h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[g("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})])],-1),Zte=[Qte],ene={key:0,class:"fm-disabled fm-pointer-events-none"},tne=g("button",{class:"fm-w-[45px] fm-relative fm-px-3 fm-py-2 fm-leading-tight fm-border fm-duration-200 fm-text-gray-500 fm-bg-white hover:fm-bg-gray-100 hover:fm-text-gray-700 dark:fm-bg-gray-800 dark:fm-border-gray-700 dark:fm-text-gray-400 dark:hover:fm-bg-gray-700 dark:hover:fm-text-white"},"...",-1),nne=[tne],rne=["onClick"],one={key:1,class:"fm-disabled fm-pointer-events-none"},sne=g("button",{class:"fm-w-[45px] fm-relative fm-px-3 fm-py-2 fm-leading-tight fm-border fm-duration-200 fm-text-gray-500 fm-bg-white hover:fm-bg-gray-100 hover:fm-text-gray-700 dark:fm-bg-gray-800 dark:fm-border-gray-700 dark:fm-text-gray-400 dark:hover:fm-bg-gray-700 dark:hover:fm-text-white"},"...",-1),ine=[sne],ane=["onClick"],lne=g("button",{class:"fm-block fm-rounded-r-md fm-px-3 fm-py-2 fm-leading-tight fm-text-gray-500 fm-bg-white fm-border fm-border-gray-200 hover:fm-bg-gray-100 hover:fm-text-gray-700 dark:fm-bg-gray-800 dark:fm-border-gray-700 dark:fm-text-gray-400 dark:hover:fm-bg-gray-700 dark:hover:fm-text-white"},[g("span",{class:"fm-sr-only"},"Next"),g("svg",{"aria-hidden":"true",class:"fm-w-5 fm-h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[g("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})])],-1),cne=[lne],une={key:0},dne=Ie({__name:"FlowmateMediaPopup",setup(t){const e=Zx();ae(null);let n=ae([1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]),r=ae(1),o=ae(1),s=ae(!1),i=ae(""),a=ae(""),l=ae(!1);const{uploadImage:c,selectImage:u,saveSelectedImage:d,clearSelectedImages:f}=zh(),h=Y(()=>{let C=[];return o.value>4&&o.value<r.value-2?(C.push(o.value-1),C.push(o.value),C.push(o.value+1),(o.value<4||o.value>=r.value-3)&&C.push(o.value+2)):o.value>4&&o.value>=r.value-2?(C.push(r.value-4),C.push(r.value-3),C.push(r.value-2),C.push(r.value-1),C.push(r.value)):(C.push(2),C.push(3),C.push(4),C.push(5)),C}),p=C=>{o.value=C,y(o.value)};function m(C){return e.getSelectedImageIDs.findIndex(_=>_==C)+1}async function v(C){s.value=!0,u(null),l.value=!0,await c(C),await y(1)}const b=C=>C.split("/").pop(),w=C=>e.getAcceptedMediaTypes==="any"?!0:e.getAcceptedMediaTypes&&e.getAcceptedMediaTypes.length>0?e.getAcceptedMediaTypes.some(_=>C.includes(_)):!1,k=C=>C.every(_=>w(_.mime_type)),y=async C=>{u(null),a=i.value,s.value=!0;const{media:_,total:M,error:E}=await see(C,24,i.value);_&&(n.value=_.value,l.value&&(u(n.value[0]),l.value=!1)),M&&(r.value=parseInt(M),console.log(r.value)),o.value=C,s.value=!1};return ot(()=>e.mediaPopupOpen,C=>{C&&(y(1),u(null))}),(C,_)=>(S(),T("div",{class:V(["fm-fixed fm-w-screen fm-h-screen fm-z-[999] fm-top-0 fm-left-0 fm-duration-300",x(e).getMediaPopupOpen?"fm-opacity-100 fm-pointer-events-all":"fm-opacity-0 fm-pointer-events-none"])},[g("div",fee,[g("div",hee,[g("div",pee,[mee,g("button",{type:"button",class:"fm-text-gray-400 fm-bg-transparent hover:fm-bg-gray-200 hover:fm-text-gray-900 fm-rounded-lg fm-text-sm fm-p-1.5 fm-ml-auto fm-inline-flex fm-items-center dark:hover:fm-bg-gray-600 dark:hover:fm-text-white",onClick:_[0]||(_[0]=M=>x(e).toggleMediaPopup())},vee)]),g("div",bee,[g("div",wee,[g("label",kee,[xee,Cee,g("input",{id:"dropzone-file",type:"file",onChange:_[1]||(_[1]=M=>v(M)),class:"fm-hidden"},null,32)])]),g("div",_ee,[g("form",{onSubmit:_[4]||(_[4]=rt(M=>y(1),["prevent"])),class:"fm-w-[400px]"},[See,g("div",Tee,[Mee,qe(g("input",{type:"search","onUpdate:modelValue":_[2]||(_[2]=M=>Ot(i)?i.value=M:i=M),id:"default-search",class:"fm-block fm-w-full fm-p-4 fm-pl-10 fm-text-sm fm-text-gray-900 focus-visible:fm-outline-blue-700 fm-outline-gray-300 fm-outline-1 fm-outline fm-rounded-lg fm-bg-gray-50 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white",placeholder:"Search media library"},null,512),[[mn,x(i)]]),Eee,x(a)?(S(),T("button",{key:0,type:"button",onClick:_[3]||(_[3]=M=>(Ot(i)?i.value="":i="",y(1))),class:"fm-absolute fm-right-[5.8rem] fm-top-1/2 -fm-translate-y-1/2 fm-right-24 fm-text-gray-400 fm-bg-red-600 hover:fm-bg-red-500 hover:fm-text-white fm-rounded-lg fm-text-sm fm-p-1 fm-ml-auto fm-inline-flex fm-items-center dark:hover:fm-bg-gray-600 dark:hover:fm-text-white"},Aee)):H("",!0)])],32)])]),g("div",Nee,[g("div",Lee,[x(s)?(S(),T("div",Ree,[he(jy)])):H("",!0),g("div",Pee,[g("div",{class:V([x(e).getSelectedImageID?"fm-w-[80%]":"fm-w-full","fm-duration-300"])},[x(n)?(S(),T("div",Dee,[!x(s)&&(!x(n)||x(n).length===0)?(S(),T("div",$ee,[g("p",null,[Ge("Ingen resultater "),x(a)?(S(),T("span",Hee,[Ge("for sgeordet "),g("span",Fee,'"'+Le(x(a))+'"',1)])):H("",!0)])])):H("",!0),(S(!0),T(ye,null,Pe(x(n),(M,E)=>(S(),T("div",{class:V(["fm-col-span-6 md:fm-col-span-3 lg:fm-col-span-2 fm-pt-[80%] fm-relative active fm-border-2 fm-rounded-lg fm-overflow-hidden fm-cursor-pointer",[x(s)?"fm-border-transparent":"fm-bg-gray-100 dark:fm-bg-gray-800",x(e).getSelectedImageID&&x(e).getSelectedImageID===M.id||x(e).selectedImageIDs.includes(M.id)?"fm-border-blue-600 dark:fm-border-blue-500":"fm-border-transparent"]]),onClick:O=>x(u)(M),key:"image-"+E},[x(e).getSelectedImageIDs.length>0&&x(e).selectedImageIDs.includes(M.id)?(S(),T("div",jee,Le(m(M.id))+" ",1)):H("",!0),M&&M.mime_type?(S(),T("div",{key:1,class:V(w(M.mime_type)?"":"fm-opacity-30")},[M.mime_type.includes("image")&&!x(s)?(S(),T("div",zee,[g("img",{src:M.media_details.sizes&&M.media_details.sizes.medium?M.media_details.sizes.medium.source_url:M.source_url,class:"fm-absolute fm-top-0 fm-left-0 fm-h-full fm-w-full fm-object-contain fm-duration-100 fm-rounded-lg"},null,8,Vee)])):M.mime_type.includes("video")&&!x(s)?(S(),T("div",Uee,[qee,g("video",{src:M.source_url,class:"fm-absolute fm-top-1/2 -fm-translate-y-1/2"},null,8,Wee)])):M.mime_type.includes("application")&&!x(s)?(S(),T("div",Kee,[Gee,g("span",{innerHTML:b(M.source_url),class:"fm-text-xs fm-absolute fm-bottom-0 fm-left-0 fm-bg-white dark:fm-bg-gray-700 dark:fm-text-white fm-w-full fm-text-center fm-p-1"},null,8,Jee)])):H("",!0)],2)):H("",!0)],10,Bee))),128))])):H("",!0)],2),g("div",{class:V([x(e).getSelectedImageID||x(e).getSelectedImageIDs.length>0?"fm-w-[20%]":"fm-w-0","fm-duration-300"])},[x(e).getActiveFieldType=="gallery"?(S(),T("div",Yee,[(S(!0),T(ye,null,Pe(x(e).getSelectedImages,(M,E)=>(S(),T("div",{class:V(["fm-col-span-6 fm-pt-[80%] fm-relative active fm-border-2 fm-rounded-lg fm-cursor-pointer",[x(e).getSelectedImageID&&x(e).getSelectedImageID===M.id||x(e).selectedImageIDs.includes(M.id)?"fm-border-blue-600 dark:fm-border-blue-500":"fm-border-transparent"]]),key:"image-"+E},[g("button",{onClick:O=>x(u)(M),class:"fm-absolute fm-group fm-duration-100 fm-rounded-full fm-bg-red-500 fm-text-white fm-z-50 -fm-top-2 -fm-right-2 hover:-fm-top-3 hover:-fm-right-3 fm-w-6 fm-h-6 fm-pt-0 fm-text-center hover:fm-w-8 hover:fm-h-8 hover:fm-pt-0 fm-text-xs"},"  ",8,Xee),x(e).getSelectedImageIDs.length>0&&x(e).selectedImageIDs.includes(M.id)?(S(),T("div",Qee,[m(M.id)>1?(S(),T("button",{key:0,onClick:rt(O=>x(e).moveImage(m(M.id)-1,m(M.id)-2),["stop"]),class:"fm-absolute fm-group fm-duration-100 fm-rounded-full fm-bg-blue-700 fm-text-white fm-z-50 fm-top-1/2 fm-left-0 -fm-translate-y-1/2 -fm-translate-x-full fm-w-6 fm-h-6 fm-p-0 fm-text-center hover:fm-w-8 hover:fm-h-8 hover:fm-p-1"}," - ",8,Zee)):H("",!0),Ge(" "+Le(m(M.id))+" ",1),m(M.id)<x(e).getSelectedImageIDs.length?(S(),T("button",{key:1,onClick:rt(O=>x(e).moveImage(m(M.id)-1,m(M.id)),["stop"]),class:"fm-absolute fm-group fm-duration-100 fm-rounded-full fm-bg-blue-700 fm-text-white fm-z-50 fm-top-1/2 fm-right-0 -fm-translate-y-1/2 fm-translate-x-full fm-w-6 fm-h-6 fm-p-0 fm-text-center hover:fm-w-8 hover:fm-h-8 hover:fm-p-1"}," + ",8,ete)):H("",!0)])):H("",!0),M&&M.mime_type?(S(),T("div",{key:1,class:V(w(M.mime_type)?"":"fm-opacity-30")},[M.mime_type.includes("image")?(S(),T("div",tte,[g("img",{src:M.media_details.sizes&&M.media_details.sizes.medium?M.media_details.sizes.medium.source_url:M.source_url,class:"fm-absolute fm-top-0 fm-left-0 fm-h-full fm-w-full fm-object-contain fm-duration-100 fm-rounded-lg"},null,8,nte)])):M.mime_type.includes("video")&&!x(s)?(S(),T("div",rte,[ote,g("video",{src:M.source_url,class:"fm-absolute fm-top-1/2 -fm-translate-y-1/2"},null,8,ste)])):M.mime_type.includes("application")&&!x(s)?(S(),T("div",ite,[ate,g("span",{innerHTML:b(M.source_url),class:"fm-text-xs fm-absolute fm-bottom-0 fm-left-0 fm-bg-white dark:fm-bg-gray-700 dark:fm-text-white fm-w-full fm-text-center fm-p-1"},null,8,lte)])):H("",!0)],2)):H("",!0)],2))),128))])):(S(),T("div",cte,[x(e).getSelectedImageID?(S(),T("div",ute,[x(e).getSelectedImage?(S(),T("div",dte,[x(e).getSelectedImage.mime_type.includes("image")&&!x(s)?(S(),T("div",fte,[g("img",{src:x(e).getSelectedImage.media_details.sizes&&x(e).getSelectedImage.media_details.sizes.medium?x(e).getSelectedImage.media_details.sizes.medium.source_url:x(e).getSelectedImage.source_url,class:"fm-absolute fm-top-0 fm-left-0 fm-h-full fm-w-full fm-object-contain fm-duration-100 fm-rounded-lg"},null,8,hte)])):x(e).getSelectedImage.mime_type.includes("video")?(S(),T("div",pte,[g("video",{controls:"",src:x(e).getSelectedImage.source_url,class:"fm-absolute fm-top-1/2 -fm-translate-y-1/2"},null,8,mte)])):x(e).getSelectedImage.mime_type.includes("application")?(S(),T("div",gte,vte)):H("",!0)])):H("",!0)])):H("",!0),x(e).getSelectedImageID&&x(e).getSelectedImage!==null&&x(e).getSelectedImage.media_details?(S(),T("div",bte,[g("p",wte,[kte,xte,g("span",{innerHTML:b(x(e).getSelectedImage.source_url)},null,8,Cte)]),g("p",_te,[Ste,Tte,g("span",{innerHTML:x(e).getSelectedImage.mime_type},null,8,Mte)]),g("p",Ete,[Ote,Ite,g("span",{innerHTML:x(e).getSelectedImage.media_details.filesize/1e6<1?Math.floor(x(e).getSelectedImage.media_details.filesize/1e3)+" KB":(x(e).getSelectedImage.media_details.filesize/1e6).toFixed(2)+" MB"},null,8,Ate)]),x(e).getSelectedImage.media_details.width&&x(e).getSelectedImage.media_details.height?(S(),T("p",Nte,[Lte,Rte,g("span",{innerHTML:x(e).getSelectedImage.media_details.width},null,8,Pte),Ge(" x "),g("span",{innerHTML:x(e).getSelectedImage.media_details.height},null,8,Dte),Ge(" pixels")])):H("",!0),g("p",$te,[Hte,Fte,g("span",{innerHTML:x(e).getSelectedImage.author},null,8,Bte)]),g("p",jte,[zte,Vte,g("span",{innerHTML:x(e).getSelectedImage.date},null,8,Ute)]),g("p",qte,[Wte,Kte,g("span",{innerHTML:x(e).getSelectedImage.source_url},null,8,Gte)])])):H("",!0)]))],2)])])]),g("div",Jte,[g("nav",Yte,[x(r)>0?(S(),T("ul",Xte,[g("li",{class:V(["fm-duration-200",x(o)>1?"":"fm-disabled fm-opacity-30 fm-pointer-events-none"]),onClick:_[5]||(_[5]=rt(M=>p(x(o)-1),["stop"]))},Zte,2),x(r)>6?(S(),T(ye,{key:0},[(S(),T("li",{key:"page-1",onClick:_[6]||(_[6]=rt(M=>p(1),["stop"])),class:V(x(o)===1?"fm-pointer-events-none":"")},[g("button",{class:V(["fm-w-[45px] fm-relative fm-px-3 fm-py-2 fm-leading-tight fm-border fm-duration-200",x(o)===1?"fm-z-10 fm-text-blue-600 fm-border-blue-300 fm-bg-blue-50 hover:fm-bg-blue-100 hover:fm-text-blue-700 dark:fm-border-gray-700 dark:fm-bg-gray-700 dark:fm-text-white":"fm-text-gray-500 fm-bg-white hover:fm-bg-gray-100 hover:fm-text-gray-700 dark:fm-bg-gray-800 dark:fm-border-gray-700 dark:fm-text-gray-400 dark:hover:fm-bg-gray-700 dark:hover:fm-text-white"])},"1",2)],2)),x(o)>4?(S(),T("li",ene,nne)):H("",!0),(S(!0),T(ye,null,Pe(h.value,M=>(S(),T("li",{key:"page-"+M,onClick:rt(E=>p(M),["stop"]),class:V(M===x(o)?"fm-pointer-events-none":"")},[g("button",{class:V(["fm-w-[45px] fm-relative fm-px-3 fm-py-2 fm-leading-tight fm-border fm-duration-200",M===x(o)?"fm-z-10 fm-text-blue-600 fm-border-blue-300 fm-bg-blue-50 hover:fm-bg-blue-100 hover:fm-text-blue-700 dark:fm-border-gray-700 dark:fm-bg-gray-700 dark:fm-text-white":"fm-text-gray-500 fm-bg-white hover:fm-bg-gray-100 hover:fm-text-gray-700 dark:fm-bg-gray-800 dark:fm-border-gray-700 dark:fm-text-gray-400 dark:hover:fm-bg-gray-700 dark:hover:fm-text-white"])},Le(M),3)],10,rne))),128)),x(r)-x(o)>3?(S(),T("li",one,ine)):H("",!0),h.value.includes(x(r))?H("",!0):(S(),T("li",{key:"page-"+x(r),onClick:_[7]||(_[7]=rt(M=>p(x(r)),["stop"])),class:V(x(r)===x(o)?"fm-pointer-events-none":"")},[g("button",{class:V(["fm-w-[45px] fm-relative fm-px-3 fm-py-2 fm-leading-tight fm-border fm-duration-200",x(r)===x(o)?"fm-z-10 fm-text-blue-600 fm-border-blue-300 fm-bg-blue-50 hover:fm-bg-blue-100 hover:fm-text-blue-700 dark:fm-border-gray-700 dark:fm-bg-gray-700 dark:fm-text-white":"fm-text-gray-500 fm-bg-white hover:fm-bg-gray-100 hover:fm-text-gray-700 dark:fm-bg-gray-800 dark:fm-border-gray-700 dark:fm-text-gray-400 dark:hover:fm-bg-gray-700 dark:hover:fm-text-white"])},Le(x(r)),3)],2))],64)):(S(!0),T(ye,{key:1},Pe(x(r),M=>(S(),T("li",{key:"page-"+M,onClick:rt(E=>p(M),["stop"]),class:V(M===x(o)?"fm-pointer-events-none":"")},[g("button",{class:V(["fm-relative fm-px-3 fm-py-2 fm-leading-tight fm-border fm-duration-200",M===x(o)?"fm-z-10 fm-text-blue-600 fm-border-blue-300 fm-bg-blue-50 hover:fm-bg-blue-100 hover:fm-text-blue-700 dark:fm-border-gray-700 dark:fm-bg-gray-700 dark:fm-text-white":"fm-text-gray-500 fm-bg-white hover:fm-bg-gray-100 hover:fm-text-gray-700 dark:fm-bg-gray-800 dark:fm-border-gray-700 dark:fm-text-gray-400 dark:hover:fm-bg-gray-700 dark:hover:fm-text-white"])},Le(M),3)],10,ane))),128)),g("li",{class:V(["fm-duration-200",x(o)<x(r)?"":"fm-disabled fm-opacity-30 fm-pointer-events-none"]),onClick:_[8]||(_[8]=rt(M=>p(x(o)+1),["stop"]))},cne,2)])):H("",!0)]),x(e).getActiveBlockIndex||x(e).getActiveFieldName?(S(),T("div",une,[x(e).getSelectedImage&&w(x(e).getSelectedImage.mime_type)||x(e).getSelectedImages&&k(x(e).getSelectedImages)?(S(),T(ye,{key:0},[x(e).getActiveFieldType=="gallery"?(S(),T("button",{key:0,type:"button",class:V(["fm-text-white fm-mr-2 !fm-bg-blue-700 hover:!fm-bg-blue-800 focus:fm-ring-4 focus:fm-ring-blue-300 fm-font-medium fm-rounded-lg fm-text-sm fm-px-5 fm-py-2.5 dark:!fm-bg-blue-600 dark:hover:!fm-bg-blue-700 focus:fm-outline-none dark:focus:fm-ring-blue-800",x(e).getSelectedImage||x(e).getSelectedImages.length>0?"":"fm-disabled fm-opacity-30 fm-pointer-events-none"]),onClick:_[9]||(_[9]=rt(M=>x(f)(),["stop"]))},"Clear selection ",2)):H("",!0),g("button",{type:"button",class:V(["fm-text-white !fm-bg-blue-700 hover:!fm-bg-blue-800 focus:fm-ring-4 focus:fm-ring-blue-300 fm-font-medium fm-rounded-lg fm-text-sm fm-px-5 fm-py-2.5 dark:!fm-bg-blue-600 dark:hover:!fm-bg-blue-700 focus:fm-outline-none dark:focus:fm-ring-blue-800",x(e).getSelectedImage||x(e).getSelectedImages.length>0?"":"fm-disabled fm-opacity-30 fm-pointer-events-none"]),onClick:_[10]||(_[10]=rt(M=>x(d)(),["stop"]))},"Select file ",2)],64)):H("",!0)])):H("",!0)])])]),g("div",{class:"fm-bg-black fm-opacity-30 fm-absolute fm-top-0 fm-left-0 fm-w-full fm-h-full",onClick:_[11]||(_[11]=M=>x(e).toggleMediaPopup())})],2))}});/*!
  * vue-draggable-next v2.2.0
  * (c) 2023 Anish George
  * @license MIT
  *//**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function qT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function ys(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qT(Object(n),!0).forEach(function(r){fne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function im(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?im=function(e){return typeof e}:im=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},im(t)}function fne(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ri(){return ri=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ri.apply(this,arguments)}function hne(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,s;for(s=0;s<r.length;s++)o=r[s],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function pne(t,e){if(t==null)return{};var n=hne(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var mne="1.14.0";function Ys(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var ci=Ys(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Vh=Ys(/Edge/i),WT=Ys(/firefox/i),of=Ys(/safari/i)&&!Ys(/chrome/i)&&!Ys(/android/i),C6=Ys(/iP(ad|od|hone)/i),gne=Ys(/chrome/i)&&Ys(/android/i),_6={capture:!1,passive:!1};function kt(t,e,n){t.addEventListener(e,n,!ci&&_6)}function gt(t,e,n){t.removeEventListener(e,n,!ci&&_6)}function wg(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function yne(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Xo(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&wg(t,e):wg(t,e))||r&&t===n)return t;if(t===n)break}while(t=yne(t))}return null}var KT=/\s+/g;function Nr(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(KT," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(KT," ")}}function Ve(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function $c(t,e){var n="";if(typeof t=="string")n=t;else do{var r=Ve(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function S6(t,e,n){if(t){var r=t.getElementsByTagName(e),o=0,s=r.length;if(n)for(;o<s;o++)n(r[o],o);return r}return[]}function fs(){var t=document.scrollingElement;return t||document.documentElement}function an(t,e,n,r,o){if(!(!t.getBoundingClientRect&&t!==window)){var s,i,a,l,c,u,d;if(t!==window&&t.parentNode&&t!==fs()?(s=t.getBoundingClientRect(),i=s.top,a=s.left,l=s.bottom,c=s.right,u=s.height,d=s.width):(i=0,a=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(e||n)&&t!==window&&(o=o||t.parentNode,!ci))do if(o&&o.getBoundingClientRect&&(Ve(o,"transform")!=="none"||n&&Ve(o,"position")!=="static")){var f=o.getBoundingClientRect();i-=f.top+parseInt(Ve(o,"border-top-width")),a-=f.left+parseInt(Ve(o,"border-left-width")),l=i+s.height,c=a+s.width;break}while(o=o.parentNode);if(r&&t!==window){var h=$c(o||t),p=h&&h.a,m=h&&h.d;h&&(i/=m,a/=p,d/=p,u/=m,l=i+u,c=a+d)}return{top:i,left:a,bottom:l,right:c,width:d,height:u}}}function GT(t,e,n){for(var r=zi(t,!0),o=an(t)[e];r;){var s=an(r)[n],i=void 0;if(i=o>=s,!i)return r;if(r===fs())break;r=zi(r,!1)}return!1}function uu(t,e,n,r){for(var o=0,s=0,i=t.children;s<i.length;){if(i[s].style.display!=="none"&&i[s]!==Ue.ghost&&(r||i[s]!==Ue.dragged)&&Xo(i[s],n.draggable,t,!1)){if(o===e)return i[s];o++}s++}return null}function eC(t,e){for(var n=t.lastElementChild;n&&(n===Ue.ghost||Ve(n,"display")==="none"||e&&!wg(n,e));)n=n.previousElementSibling;return n||null}function Gr(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Ue.clone&&(!e||wg(t,e))&&n++;return n}function JT(t){var e=0,n=0,r=fs();if(t)do{var o=$c(t),s=o.a,i=o.d;e+=t.scrollLeft*s,n+=t.scrollTop*i}while(t!==r&&(t=t.parentNode));return[e,n]}function vne(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function zi(t,e){if(!t||!t.getBoundingClientRect)return fs();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=Ve(n);if(n.clientWidth<n.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return fs();if(r||e)return n;r=!0}}while(n=n.parentNode);return fs()}function bne(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function rv(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var sf;function T6(t,e){return function(){if(!sf){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),sf=setTimeout(function(){sf=void 0},e)}}}function wne(){clearTimeout(sf),sf=void 0}function M6(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function E6(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}var $r="Sortable"+new Date().getTime();function kne(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(r){if(!(Ve(r,"display")==="none"||r===Ue.ghost)){t.push({target:r,rect:an(r)});var o=ys({},t[t.length-1].rect);if(r.thisAnimationDuration){var s=$c(r,!0);s&&(o.top-=s.f,o.left-=s.e)}r.fromRect=o}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(vne(t,{target:n}),1)},animateAll:function(n){var r=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var o=!1,s=0;t.forEach(function(i){var a=0,l=i.target,c=l.fromRect,u=an(l),d=l.prevFromRect,f=l.prevToRect,h=i.rect,p=$c(l,!0);p&&(u.top-=p.f,u.left-=p.e),l.toRect=u,l.thisAnimationDuration&&rv(d,u)&&!rv(c,u)&&(h.top-u.top)/(h.left-u.left)===(c.top-u.top)/(c.left-u.left)&&(a=Cne(h,d,f,r.options)),rv(u,c)||(l.prevFromRect=c,l.prevToRect=u,a||(a=r.options.animation),r.animate(l,h,u,a)),a&&(o=!0,s=Math.max(s,a),clearTimeout(l.animationResetTimer),l.animationResetTimer=setTimeout(function(){l.animationTime=0,l.prevFromRect=null,l.fromRect=null,l.prevToRect=null,l.thisAnimationDuration=null},a),l.thisAnimationDuration=a)}),clearTimeout(e),o?e=setTimeout(function(){typeof n=="function"&&n()},s):typeof n=="function"&&n(),t=[]},animate:function(n,r,o,s){if(s){Ve(n,"transition",""),Ve(n,"transform","");var i=$c(this.el),a=i&&i.a,l=i&&i.d,c=(r.left-o.left)/(a||1),u=(r.top-o.top)/(l||1);n.animatingX=!!c,n.animatingY=!!u,Ve(n,"transform","translate3d("+c+"px,"+u+"px,0)"),this.forRepaintDummy=xne(n),Ve(n,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),Ve(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){Ve(n,"transition",""),Ve(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},s)}}}}function xne(t){return t.offsetWidth}function Cne(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var tc=[],ov={initializeByDefault:!0},Uh={mount:function(t){for(var e in ov)ov.hasOwnProperty(e)&&!(e in t)&&(t[e]=ov[e]);tc.forEach(function(n){if(n.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),tc.push(t)},pluginEvent:function(t,e,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var o=t+"Global";tc.forEach(function(s){e[s.pluginName]&&(e[s.pluginName][o]&&e[s.pluginName][o](ys({sortable:e},n)),e.options[s.pluginName]&&e[s.pluginName][t]&&e[s.pluginName][t](ys({sortable:e},n)))})},initializePlugins:function(t,e,n,r){tc.forEach(function(i){var a=i.pluginName;if(!(!t.options[a]&&!i.initializeByDefault)){var l=new i(t,e,t.options);l.sortable=t,l.options=t.options,t[a]=l,ri(n,l.defaults)}});for(var o in t.options)if(t.options.hasOwnProperty(o)){var s=this.modifyOption(t,o,t.options[o]);typeof s<"u"&&(t.options[o]=s)}},getEventProperties:function(t,e){var n={};return tc.forEach(function(r){typeof r.eventProperties=="function"&&ri(n,r.eventProperties.call(e[r.pluginName],t))}),n},modifyOption:function(t,e,n){var r;return tc.forEach(function(o){t[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[e]=="function"&&(r=o.optionListeners[e].call(t[o.pluginName],n))}),r}};function _ne(t){var e=t.sortable,n=t.rootEl,r=t.name,o=t.targetEl,s=t.cloneEl,i=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,d=t.newDraggableIndex,f=t.originalEvent,h=t.putSortable,p=t.extraEventProperties;if(e=e||n&&n[$r],!!e){var m,v=e.options,b="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!ci&&!Vh?m=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(r,!0,!0)),m.to=i||n,m.from=a||n,m.item=o||n,m.clone=s,m.oldIndex=l,m.newIndex=c,m.oldDraggableIndex=u,m.newDraggableIndex=d,m.originalEvent=f,m.pullMode=h?h.lastPutMode:void 0;var w=ys(ys({},p),Uh.getEventProperties(r,e));for(var k in w)m[k]=w[k];n&&n.dispatchEvent(m),v[b]&&v[b].call(e,m)}}var Sne=["evt"],fr=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.evt,o=pne(n,Sne);Uh.pluginEvent.bind(Ue)(t,e,ys({dragEl:me,parentEl:jt,ghostEl:Ze,rootEl:Dt,nextEl:Ua,lastDownEl:am,cloneEl:zt,cloneHidden:Pi,dragStarted:Cd,putSortable:Cn,activeSortable:Ue.active,originalEvent:r,oldIndex:Cc,oldDraggableIndex:af,newIndex:Lr,newDraggableIndex:Ii,hideGhostForTarget:N6,unhideGhostForTarget:L6,cloneNowHidden:function(){Pi=!0},cloneNowShown:function(){Pi=!1},dispatchSortableEvent:function(s){Yn({sortable:e,name:s,originalEvent:r})}},o))};function Yn(t){_ne(ys({putSortable:Cn,cloneEl:zt,targetEl:me,rootEl:Dt,oldIndex:Cc,oldDraggableIndex:af,newIndex:Lr,newDraggableIndex:Ii},t))}var me,jt,Ze,Dt,Ua,am,zt,Pi,Cc,Lr,af,Ii,wp,Cn,dc=!1,kg=!1,xg=[],Fa,Mo,sv,iv,YT,XT,Cd,nc,lf,cf=!1,kp=!1,lm,Ln,av=[],U1=!1,Cg=[],zy=typeof document<"u",xp=C6,QT=Vh||ci?"cssFloat":"float",Tne=zy&&!gne&&!C6&&"draggable"in document.createElement("div"),O6=function(){if(zy){if(ci)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),I6=function(t,e){var n=Ve(t),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=uu(t,0,e),s=uu(t,1,e),i=o&&Ve(o),a=s&&Ve(s),l=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+an(o).width,c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+an(s).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&i.float&&i.float!=="none"){var u=i.float==="left"?"left":"right";return s&&(a.clear==="both"||a.clear===u)?"vertical":"horizontal"}return o&&(i.display==="block"||i.display==="flex"||i.display==="table"||i.display==="grid"||l>=r&&n[QT]==="none"||s&&n[QT]==="none"&&l+c>r)?"vertical":"horizontal"},Mne=function(t,e,n){var r=n?t.left:t.top,o=n?t.right:t.bottom,s=n?t.width:t.height,i=n?e.left:e.top,a=n?e.right:e.bottom,l=n?e.width:e.height;return r===i||o===a||r+s/2===i+l/2},Ene=function(t,e){var n;return xg.some(function(r){var o=r[$r].options.emptyInsertThreshold;if(!(!o||eC(r))){var s=an(r),i=t>=s.left-o&&t<=s.right+o,a=e>=s.top-o&&e<=s.bottom+o;if(i&&a)return n=r}}),n},A6=function(t){function e(o,s){return function(i,a,l,c){var u=i.options.group.name&&a.options.group.name&&i.options.group.name===a.options.group.name;if(o==null&&(s||u))return!0;if(o==null||o===!1)return!1;if(s&&o==="clone")return o;if(typeof o=="function")return e(o(i,a,l,c),s)(i,a,l,c);var d=(s?i:a).options.group.name;return o===!0||typeof o=="string"&&o===d||o.join&&o.indexOf(d)>-1}}var n={},r=t.group;(!r||im(r)!="object")&&(r={name:r}),n.name=r.name,n.checkPull=e(r.pull,!0),n.checkPut=e(r.put),n.revertClone=r.revertClone,t.group=n},N6=function(){!O6&&Ze&&Ve(Ze,"display","none")},L6=function(){!O6&&Ze&&Ve(Ze,"display","")};zy&&document.addEventListener("click",function(t){if(kg)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),kg=!1,!1},!0);var Ba=function(t){if(me){t=t.touches?t.touches[0]:t;var e=Ene(t.clientX,t.clientY);if(e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[$r]._onDragOver(n)}}},One=function(t){me&&me.parentNode[$r]._isOutsideThisEl(t.target)};function Ue(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=ri({},e),t[$r]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return I6(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,i){s.setData("Text",i.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Ue.supportPointer!==!1&&"PointerEvent"in window&&!of,emptyInsertThreshold:5};Uh.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);A6(e);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=e.forceFallback?!1:Tne,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?kt(t,"pointerdown",this._onTapStart):(kt(t,"mousedown",this._onTapStart),kt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(kt(t,"dragover",this),kt(t,"dragenter",this)),xg.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),ri(this,kne())}Ue.prototype={constructor:Ue,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(nc=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,me):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,r=this.options,o=r.preventOnFilter,s=t.type,i=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,a=(i||t).target,l=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||a,c=r.filter;if($ne(n),!me&&!(/mousedown|pointerdown/.test(s)&&t.button!==0||r.disabled)&&!l.isContentEditable&&!(!this.nativeDraggable&&of&&a&&a.tagName.toUpperCase()==="SELECT")&&(a=Xo(a,r.draggable,n,!1),!(a&&a.animated)&&am!==a)){if(Cc=Gr(a),af=Gr(a,r.draggable),typeof c=="function"){if(c.call(this,t,a,this)){Yn({sortable:e,rootEl:l,name:"filter",targetEl:a,toEl:n,fromEl:n}),fr("filter",e,{evt:t}),o&&t.cancelable&&t.preventDefault();return}}else if(c&&(c=c.split(",").some(function(u){if(u=Xo(l,u.trim(),n,!1),u)return Yn({sortable:e,rootEl:u,name:"filter",targetEl:a,fromEl:n,toEl:n}),fr("filter",e,{evt:t}),!0}),c)){o&&t.cancelable&&t.preventDefault();return}r.handle&&!Xo(l,r.handle,n,!1)||this._prepareDragStart(t,i,a)}}},_prepareDragStart:function(t,e,n){var r=this,o=r.el,s=r.options,i=o.ownerDocument,a;if(n&&!me&&n.parentNode===o){var l=an(n);if(Dt=o,me=n,jt=me.parentNode,Ua=me.nextSibling,am=n,wp=s.group,Ue.dragged=me,Fa={target:me,clientX:(e||t).clientX,clientY:(e||t).clientY},YT=Fa.clientX-l.left,XT=Fa.clientY-l.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,me.style["will-change"]="all",a=function(){if(fr("delayEnded",r,{evt:t}),Ue.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!WT&&r.nativeDraggable&&(me.draggable=!0),r._triggerDragStart(t,e),Yn({sortable:r,name:"choose",originalEvent:t}),Nr(me,s.chosenClass,!0)},s.ignore.split(",").forEach(function(c){S6(me,c.trim(),lv)}),kt(i,"dragover",Ba),kt(i,"mousemove",Ba),kt(i,"touchmove",Ba),kt(i,"mouseup",r._onDrop),kt(i,"touchend",r._onDrop),kt(i,"touchcancel",r._onDrop),WT&&this.nativeDraggable&&(this.options.touchStartThreshold=4,me.draggable=!0),fr("delayStart",this,{evt:t}),s.delay&&(!s.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(Vh||ci))){if(Ue.eventCanceled){this._onDrop();return}kt(i,"mouseup",r._disableDelayedDrag),kt(i,"touchend",r._disableDelayedDrag),kt(i,"touchcancel",r._disableDelayedDrag),kt(i,"mousemove",r._delayedDragTouchMoveHandler),kt(i,"touchmove",r._delayedDragTouchMoveHandler),s.supportPointer&&kt(i,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(a,s.delay)}else a()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){me&&lv(me),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;gt(t,"mouseup",this._disableDelayedDrag),gt(t,"touchend",this._disableDelayedDrag),gt(t,"touchcancel",this._disableDelayedDrag),gt(t,"mousemove",this._delayedDragTouchMoveHandler),gt(t,"touchmove",this._delayedDragTouchMoveHandler),gt(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?kt(document,"pointermove",this._onTouchMove):e?kt(document,"touchmove",this._onTouchMove):kt(document,"mousemove",this._onTouchMove):(kt(me,"dragend",this),kt(Dt,"dragstart",this._onDragStart));try{document.selection?cm(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,e){if(dc=!1,Dt&&me){fr("dragStarted",this,{evt:e}),this.nativeDraggable&&kt(document,"dragover",One);var n=this.options;!t&&Nr(me,n.dragClass,!1),Nr(me,n.ghostClass,!0),Ue.active=this,t&&this._appendGhost(),Yn({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(Mo){this._lastX=Mo.clientX,this._lastY=Mo.clientY,N6();for(var t=document.elementFromPoint(Mo.clientX,Mo.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Mo.clientX,Mo.clientY),t!==e);)e=t;if(me.parentNode[$r]._isOutsideThisEl(t),e)do{if(e[$r]){var n=void 0;if(n=e[$r]._onDragOver({clientX:Mo.clientX,clientY:Mo.clientY,target:t,rootEl:e}),n&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);L6()}},_onTouchMove:function(t){if(Fa){var e=this.options,n=e.fallbackTolerance,r=e.fallbackOffset,o=t.touches?t.touches[0]:t,s=Ze&&$c(Ze,!0),i=Ze&&s&&s.a,a=Ze&&s&&s.d,l=xp&&Ln&&JT(Ln),c=(o.clientX-Fa.clientX+r.x)/(i||1)+(l?l[0]-av[0]:0)/(i||1),u=(o.clientY-Fa.clientY+r.y)/(a||1)+(l?l[1]-av[1]:0)/(a||1);if(!Ue.active&&!dc){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(Ze){s?(s.e+=c-(sv||0),s.f+=u-(iv||0)):s={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");Ve(Ze,"webkitTransform",d),Ve(Ze,"mozTransform",d),Ve(Ze,"msTransform",d),Ve(Ze,"transform",d),sv=c,iv=u,Mo=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Ze){var t=this.options.fallbackOnBody?document.body:Dt,e=an(me,!0,xp,!0,t),n=this.options;if(xp){for(Ln=t;Ve(Ln,"position")==="static"&&Ve(Ln,"transform")==="none"&&Ln!==document;)Ln=Ln.parentNode;Ln!==document.body&&Ln!==document.documentElement?(Ln===document&&(Ln=fs()),e.top+=Ln.scrollTop,e.left+=Ln.scrollLeft):Ln=fs(),av=JT(Ln)}Ze=me.cloneNode(!0),Nr(Ze,n.ghostClass,!1),Nr(Ze,n.fallbackClass,!0),Nr(Ze,n.dragClass,!0),Ve(Ze,"transition",""),Ve(Ze,"transform",""),Ve(Ze,"box-sizing","border-box"),Ve(Ze,"margin",0),Ve(Ze,"top",e.top),Ve(Ze,"left",e.left),Ve(Ze,"width",e.width),Ve(Ze,"height",e.height),Ve(Ze,"opacity","0.8"),Ve(Ze,"position",xp?"absolute":"fixed"),Ve(Ze,"zIndex","100000"),Ve(Ze,"pointerEvents","none"),Ue.ghost=Ze,t.appendChild(Ze),Ve(Ze,"transform-origin",YT/parseInt(Ze.style.width)*100+"% "+XT/parseInt(Ze.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,r=t.dataTransfer,o=n.options;if(fr("dragStart",this,{evt:t}),Ue.eventCanceled){this._onDrop();return}fr("setupClone",this),Ue.eventCanceled||(zt=E6(me),zt.draggable=!1,zt.style["will-change"]="",this._hideClone(),Nr(zt,this.options.chosenClass,!1),Ue.clone=zt),n.cloneId=cm(function(){fr("clone",n),!Ue.eventCanceled&&(n.options.removeCloneOnHide||Dt.insertBefore(zt,me),n._hideClone(),Yn({sortable:n,name:"clone"}))}),!e&&Nr(me,o.dragClass,!0),e?(kg=!0,n._loopId=setInterval(n._emulateDragOver,50)):(gt(document,"mouseup",n._onDrop),gt(document,"touchend",n._onDrop),gt(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",o.setData&&o.setData.call(n,r,me)),kt(document,"drop",n),Ve(me,"transform","translateZ(0)")),dc=!0,n._dragStartId=cm(n._dragStarted.bind(n,e,t)),kt(document,"selectstart",n),Cd=!0,of&&Ve(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,n=t.target,r,o,s,i=this.options,a=i.group,l=Ue.active,c=wp===a,u=i.sort,d=Cn||l,f,h=this,p=!1;if(U1)return;function m(ie,z){fr(ie,h,ys({evt:t,isOwner:c,axis:f?"vertical":"horizontal",revert:s,dragRect:r,targetRect:o,canSort:u,fromSortable:d,target:n,completed:b,onMove:function(ge,ve){return Cp(Dt,e,me,r,ge,an(ge),t,ve)},changed:w},z))}function v(){m("dragOverAnimationCapture"),h.captureAnimationState(),h!==d&&d.captureAnimationState()}function b(ie){return m("dragOverCompleted",{insertion:ie}),ie&&(c?l._hideClone():l._showClone(h),h!==d&&(Nr(me,Cn?Cn.options.ghostClass:l.options.ghostClass,!1),Nr(me,i.ghostClass,!0)),Cn!==h&&h!==Ue.active?Cn=h:h===Ue.active&&Cn&&(Cn=null),d===h&&(h._ignoreWhileAnimating=n),h.animateAll(function(){m("dragOverAnimationComplete"),h._ignoreWhileAnimating=null}),h!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(n===me&&!me.animated||n===e&&!n.animated)&&(nc=null),!i.dragoverBubble&&!t.rootEl&&n!==document&&(me.parentNode[$r]._isOutsideThisEl(t.target),!ie&&Ba(t)),!i.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),p=!0}function w(){Lr=Gr(me),Ii=Gr(me,i.draggable),Yn({sortable:h,name:"change",toEl:e,newIndex:Lr,newDraggableIndex:Ii,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),n=Xo(n,i.draggable,e,!0),m("dragOver"),Ue.eventCanceled)return p;if(me.contains(t.target)||n.animated&&n.animatingX&&n.animatingY||h._ignoreWhileAnimating===n)return b(!1);if(kg=!1,l&&!i.disabled&&(c?u||(s=jt!==Dt):Cn===this||(this.lastPutMode=wp.checkPull(this,l,me,t))&&a.checkPut(this,l,me,t))){if(f=this._getDirection(t,n)==="vertical",r=an(me),m("dragOverValid"),Ue.eventCanceled)return p;if(s)return jt=Dt,v(),this._hideClone(),m("revert"),Ue.eventCanceled||(Ua?Dt.insertBefore(me,Ua):Dt.appendChild(me)),b(!0);var k=eC(e,i.draggable);if(!k||Lne(t,f,this)&&!k.animated){if(k===me)return b(!1);if(k&&e===t.target&&(n=k),n&&(o=an(n)),Cp(Dt,e,me,r,n,o,t,!!n)!==!1)return v(),e.appendChild(me),jt=e,w(),b(!0)}else if(k&&Nne(t,f,this)){var y=uu(e,0,i,!0);if(y===me)return b(!1);if(n=y,o=an(n),Cp(Dt,e,me,r,n,o,t,!1)!==!1)return v(),e.insertBefore(me,y),jt=e,w(),b(!0)}else if(n.parentNode===e){o=an(n);var C=0,_,M=me.parentNode!==e,E=!Mne(me.animated&&me.toRect||r,n.animated&&n.toRect||o,f),O=f?"top":"left",N=GT(n,"top","top")||GT(me,"top","top"),R=N?N.scrollTop:void 0;nc!==n&&(_=o[O],cf=!1,kp=!E&&i.invertSwap||M),C=Rne(t,n,o,f,E?1:i.swapThreshold,i.invertedSwapThreshold==null?i.swapThreshold:i.invertedSwapThreshold,kp,nc===n);var I;if(C!==0){var j=Gr(me);do j-=C,I=jt.children[j];while(I&&(Ve(I,"display")==="none"||I===Ze))}if(C===0||I===n)return b(!1);nc=n,lf=C;var de=n.nextElementSibling,te=!1;te=C===1;var Q=Cp(Dt,e,me,r,n,o,t,te);if(Q!==!1)return(Q===1||Q===-1)&&(te=Q===1),U1=!0,setTimeout(Ane,30),v(),te&&!de?e.appendChild(me):n.parentNode.insertBefore(me,te?de:n),N&&M6(N,0,R-N.scrollTop),jt=me.parentNode,_!==void 0&&!kp&&(lm=Math.abs(_-an(n)[O])),w(),b(!0)}if(e.contains(me))return b(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){gt(document,"mousemove",this._onTouchMove),gt(document,"touchmove",this._onTouchMove),gt(document,"pointermove",this._onTouchMove),gt(document,"dragover",Ba),gt(document,"mousemove",Ba),gt(document,"touchmove",Ba)},_offUpEvents:function(){var t=this.el.ownerDocument;gt(t,"mouseup",this._onDrop),gt(t,"touchend",this._onDrop),gt(t,"pointerup",this._onDrop),gt(t,"touchcancel",this._onDrop),gt(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;if(Lr=Gr(me),Ii=Gr(me,n.draggable),fr("drop",this,{evt:t}),jt=me&&me.parentNode,Lr=Gr(me),Ii=Gr(me,n.draggable),Ue.eventCanceled){this._nulling();return}dc=!1,kp=!1,cf=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),q1(this.cloneId),q1(this._dragStartId),this.nativeDraggable&&(gt(document,"drop",this),gt(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),of&&Ve(document.body,"user-select",""),Ve(me,"transform",""),t&&(Cd&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),Ze&&Ze.parentNode&&Ze.parentNode.removeChild(Ze),(Dt===jt||Cn&&Cn.lastPutMode!=="clone")&&zt&&zt.parentNode&&zt.parentNode.removeChild(zt),me&&(this.nativeDraggable&&gt(me,"dragend",this),lv(me),me.style["will-change"]="",Cd&&!dc&&Nr(me,Cn?Cn.options.ghostClass:this.options.ghostClass,!1),Nr(me,this.options.chosenClass,!1),Yn({sortable:this,name:"unchoose",toEl:jt,newIndex:null,newDraggableIndex:null,originalEvent:t}),Dt!==jt?(Lr>=0&&(Yn({rootEl:jt,name:"add",toEl:jt,fromEl:Dt,originalEvent:t}),Yn({sortable:this,name:"remove",toEl:jt,originalEvent:t}),Yn({rootEl:jt,name:"sort",toEl:jt,fromEl:Dt,originalEvent:t}),Yn({sortable:this,name:"sort",toEl:jt,originalEvent:t})),Cn&&Cn.save()):Lr!==Cc&&Lr>=0&&(Yn({sortable:this,name:"update",toEl:jt,originalEvent:t}),Yn({sortable:this,name:"sort",toEl:jt,originalEvent:t})),Ue.active&&((Lr==null||Lr===-1)&&(Lr=Cc,Ii=af),Yn({sortable:this,name:"end",toEl:jt,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){fr("nulling",this),Dt=me=jt=Ze=Ua=zt=am=Pi=Fa=Mo=Cd=Lr=Ii=Cc=af=nc=lf=Cn=wp=Ue.dragged=Ue.ghost=Ue.clone=Ue.active=null,Cg.forEach(function(t){t.checked=!0}),Cg.length=sv=iv=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":me&&(this._onDragOver(t),Ine(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,n=this.el.children,r=0,o=n.length,s=this.options;r<o;r++)e=n[r],Xo(e,s.draggable,this.el,!1)&&t.push(e.getAttribute(s.dataIdAttr)||Dne(e));return t},sort:function(t,e){var n={},r=this.el;this.toArray().forEach(function(o,s){var i=r.children[s];Xo(i,this.options.draggable,r,!1)&&(n[o]=i)},this),e&&this.captureAnimationState(),t.forEach(function(o){n[o]&&(r.removeChild(n[o]),r.appendChild(n[o]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return Xo(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(e===void 0)return n[t];var r=Uh.modifyOption(this,t,e);typeof r<"u"?n[t]=r:n[t]=e,t==="group"&&A6(n)},destroy:function(){fr("destroy",this);var t=this.el;t[$r]=null,gt(t,"mousedown",this._onTapStart),gt(t,"touchstart",this._onTapStart),gt(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(gt(t,"dragover",this),gt(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),xg.splice(xg.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Pi){if(fr("hideClone",this),Ue.eventCanceled)return;Ve(zt,"display","none"),this.options.removeCloneOnHide&&zt.parentNode&&zt.parentNode.removeChild(zt),Pi=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Pi){if(fr("showClone",this),Ue.eventCanceled)return;me.parentNode==Dt&&!this.options.group.revertClone?Dt.insertBefore(zt,me):Ua?Dt.insertBefore(zt,Ua):Dt.appendChild(zt),this.options.group.revertClone&&this.animate(me,zt),Ve(zt,"display",""),Pi=!1}}};function Ine(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Cp(t,e,n,r,o,s,i,a){var l,c=t[$r],u=c.options.onMove,d;return window.CustomEvent&&!ci&&!Vh?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=r,l.related=o||e,l.relatedRect=s||an(e),l.willInsertAfter=a,l.originalEvent=i,t.dispatchEvent(l),u&&(d=u.call(c,l,i)),d}function lv(t){t.draggable=!1}function Ane(){U1=!1}function Nne(t,e,n){var r=an(uu(n.el,0,n.options,!0)),o=10;return e?t.clientX<r.left-o||t.clientY<r.top&&t.clientX<r.right:t.clientY<r.top-o||t.clientY<r.bottom&&t.clientX<r.left}function Lne(t,e,n){var r=an(eC(n.el,n.options.draggable)),o=10;return e?t.clientX>r.right+o||t.clientX<=r.right&&t.clientY>r.bottom&&t.clientX>=r.left:t.clientX>r.right&&t.clientY>r.top||t.clientX<=r.right&&t.clientY>r.bottom+o}function Rne(t,e,n,r,o,s,i,a){var l=r?t.clientY:t.clientX,c=r?n.height:n.width,u=r?n.top:n.left,d=r?n.bottom:n.right,f=!1;if(!i){if(a&&lm<c*o){if(!cf&&(lf===1?l>u+c*s/2:l<d-c*s/2)&&(cf=!0),cf)f=!0;else if(lf===1?l<u+lm:l>d-lm)return-lf}else if(l>u+c*(1-o)/2&&l<d-c*(1-o)/2)return Pne(e)}return f=f||i,f&&(l<u+c*s/2||l>d-c*s/2)?l>u+c/2?1:-1:0}function Pne(t){return Gr(me)<Gr(t)?1:-1}function Dne(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function $ne(t){Cg.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&Cg.push(r)}}function cm(t){return setTimeout(t,0)}function q1(t){return clearTimeout(t)}zy&&kt(document,"touchmove",function(t){(Ue.active||dc)&&t.cancelable&&t.preventDefault()});Ue.utils={on:kt,off:gt,css:Ve,find:S6,is:function(t,e){return!!Xo(t,e,t,!1)},extend:bne,throttle:T6,closest:Xo,toggleClass:Nr,clone:E6,index:Gr,nextTick:cm,cancelNextTick:q1,detectDirection:I6,getChild:uu};Ue.get=function(t){return t[$r]};Ue.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Ue.utils=ys(ys({},Ue.utils),r.utils)),Uh.mount(r)})};Ue.create=function(t,e){return new Ue(t,e)};Ue.version=mne;var nn=[],_d,W1,K1=!1,cv,uv,_g,Sd;function Hne(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(e){var n=e.originalEvent;this.sortable.nativeDraggable?kt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?kt(document,"pointermove",this._handleFallbackAutoScroll):n.touches?kt(document,"touchmove",this._handleFallbackAutoScroll):kt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var n=e.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?gt(document,"dragover",this._handleAutoScroll):(gt(document,"pointermove",this._handleFallbackAutoScroll),gt(document,"touchmove",this._handleFallbackAutoScroll),gt(document,"mousemove",this._handleFallbackAutoScroll)),ZT(),um(),wne()},nulling:function(){_g=W1=_d=K1=Sd=cv=uv=null,nn.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,n){var r=this,o=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,i=document.elementFromPoint(o,s);if(_g=e,n||this.options.forceAutoScrollFallback||Vh||ci||of){dv(e,this.options,i,n);var a=zi(i,!0);K1&&(!Sd||o!==cv||s!==uv)&&(Sd&&ZT(),Sd=setInterval(function(){var l=zi(document.elementFromPoint(o,s),!0);l!==a&&(a=l,um()),dv(e,r.options,l,n)},10),cv=o,uv=s)}else{if(!this.options.bubbleScroll||zi(i,!0)===fs()){um();return}dv(e,this.options,zi(i,!1),!1)}}},ri(t,{pluginName:"scroll",initializeByDefault:!0})}function um(){nn.forEach(function(t){clearInterval(t.pid)}),nn=[]}function ZT(){clearInterval(Sd)}var dv=T6(function(t,e,n,r){if(e.scroll){var o=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,i=e.scrollSensitivity,a=e.scrollSpeed,l=fs(),c=!1,u;W1!==n&&(W1=n,um(),_d=e.scroll,u=e.scrollFn,_d===!0&&(_d=zi(n,!0)));var d=0,f=_d;do{var h=f,p=an(h),m=p.top,v=p.bottom,b=p.left,w=p.right,k=p.width,y=p.height,C=void 0,_=void 0,M=h.scrollWidth,E=h.scrollHeight,O=Ve(h),N=h.scrollLeft,R=h.scrollTop;h===l?(C=k<M&&(O.overflowX==="auto"||O.overflowX==="scroll"||O.overflowX==="visible"),_=y<E&&(O.overflowY==="auto"||O.overflowY==="scroll"||O.overflowY==="visible")):(C=k<M&&(O.overflowX==="auto"||O.overflowX==="scroll"),_=y<E&&(O.overflowY==="auto"||O.overflowY==="scroll"));var I=C&&(Math.abs(w-o)<=i&&N+k<M)-(Math.abs(b-o)<=i&&!!N),j=_&&(Math.abs(v-s)<=i&&R+y<E)-(Math.abs(m-s)<=i&&!!R);if(!nn[d])for(var de=0;de<=d;de++)nn[de]||(nn[de]={});(nn[d].vx!=I||nn[d].vy!=j||nn[d].el!==h)&&(nn[d].el=h,nn[d].vx=I,nn[d].vy=j,clearInterval(nn[d].pid),(I!=0||j!=0)&&(c=!0,nn[d].pid=setInterval((function(){r&&this.layer===0&&Ue.active._onTouchMove(_g);var te=nn[this.layer].vy?nn[this.layer].vy*a:0,Q=nn[this.layer].vx?nn[this.layer].vx*a:0;typeof u=="function"&&u.call(Ue.dragged.parentNode[$r],Q,te,t,_g,nn[this.layer].el)!=="continue"||M6(nn[this.layer].el,Q,te)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&f!==l&&(f=zi(f,!1)));K1=c}},30),R6=function(t){var e=t.originalEvent,n=t.putSortable,r=t.dragEl,o=t.activeSortable,s=t.dispatchSortableEvent,i=t.hideGhostForTarget,a=t.unhideGhostForTarget;if(e){var l=n||o;i();var c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,u=document.elementFromPoint(c.clientX,c.clientY);a(),l&&!l.el.contains(u)&&(s("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function tC(){}tC.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=uu(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(e,r):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:R6};ri(tC,{pluginName:"revertOnSpill"});function nC(){}nC.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable,r=n||this.sortable;r.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),r.animateAll()},drop:R6};ri(nC,{pluginName:"removeOnSpill"});Ue.mount(new Hne);Ue.mount(nC,tC);function Fne(){return typeof window<"u"?window.console:global.console}const Bne=Fne();function jne(t){const e=Object.create(null);return function(n){return e[n]||(e[n]=t(n))}}const zne=/-(\w)/g,eM=jne(t=>t.replace(zne,(e,n)=>n?n.toUpperCase():""));function fv(t){t.parentElement!==null&&t.parentElement.removeChild(t)}function tM(t,e,n){const r=n===0?t.children[0]:t.children[n-1].nextSibling;t.insertBefore(e,r)}function Vne(t,e){return Object.values(t).indexOf(e)}function Une(t,e,n,r){if(!t)return[];const o=Object.values(t),s=e.length-r;return[...e].map((i,a)=>a>=s?o.length:o.indexOf(i))}function P6(t,e){this.$nextTick(()=>this.$emit(t.toLowerCase(),e))}function qne(t){return e=>{this.realList!==null&&this["onDrag"+t](e),P6.call(this,t,e)}}function Wne(t){return["transition-group","TransitionGroup"].includes(t)}function Kne(t){if(!t||t.length!==1)return!1;const[{type:e}]=t;return e?Wne(e.name):!1}function Gne(t,e){return e?{...e.props,...e.attrs}:t}const G1=["Start","Add","Remove","Update","End"],J1=["Choose","Unchoose","Sort","Filter","Clone"],Jne=["Move",...G1,...J1].map(t=>"on"+t);let hv=null;const Yne={options:Object,list:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:t=>t},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null},component:{type:String,default:null},modelValue:{type:Array,required:!1,default:null}},Y1=Ie({name:"VueDraggableNext",inheritAttrs:!1,emits:["update:modelValue","move","change",...G1.map(t=>t.toLowerCase()),...J1.map(t=>t.toLowerCase())],props:Yne,data(){return{transitionMode:!1,noneFunctionalComponentMode:!1,headerOffset:0,footerOffset:0,_sortable:{},visibleIndexes:[],context:{}}},render(){const t=this.$slots.default?this.$slots.default():null,e=Gne(this.$attrs,this.componentData);return t?(this.transitionMode=Kne(t),Lt(this.getTag(),e,t)):Lt(this.getTag(),e,[])},created(){this.list!==null&&this.modelValue!==null&&Bne.error("list props are mutually exclusive! Please set one.")},mounted(){const t={};G1.forEach(o=>{t["on"+o]=qne.call(this,o)}),J1.forEach(o=>{t["on"+o]=P6.bind(this,o)});const e=Object.keys(this.$attrs).reduce((o,s)=>(o[eM(s)]=this.$attrs[s],o),{}),n=Object.assign({},e,t,{onMove:(o,s)=>this.onDragMove(o,s)});!("draggable"in n)&&(n.draggable=">*");const r=this.$el.nodeType===1?this.$el:this.$el.parentElement;this._sortable=new Ue(r,n),r.__draggable_component__=this,this.computeIndexes()},beforeUnmount(){try{this._sortable!==void 0&&this._sortable.destroy()}catch{}},computed:{realList(){return this.list?this.list:this.modelValue}},watch:{$attrs:{handler(t){this.updateOptions(t)},deep:!0},realList(){this.computeIndexes()}},methods:{getTag(){return this.component?If(this.component):this.tag},updateOptions(t){for(var e in t){const n=eM(e);Jne.indexOf(n)===-1&&this._sortable.option(n,t[e])}},getChildrenNodes(){return this.$el.children},computeIndexes(){this.$nextTick(()=>{this.visibleIndexes=Une(this.getChildrenNodes(),this.$el.children,this.transitionMode,this.footerOffset)})},getUnderlyingVm(t){const e=Vne(this.getChildrenNodes()||[],t);if(e===-1)return null;const n=this.realList[e];return{index:e,element:n}},emitChanges(t){this.$nextTick(()=>{this.$emit("change",t)})},alterList(t){if(this.list){t(this.list);return}const e=[...this.modelValue];t(e),this.$emit("update:modelValue",e)},spliceList(){const t=e=>e.splice(...arguments);this.alterList(t)},updatePosition(t,e){const n=r=>r.splice(e,0,r.splice(t,1)[0]);this.alterList(n)},getVmIndex(t){const e=this.visibleIndexes,n=e.length;return t>n-1?n:e[t]},getComponent(){return this.$slots.default?this.$slots.default()[0].componentInstance:null},resetTransitionData(t){if(!this.noTransitionOnDrag||!this.transitionMode)return;var e=this.getChildrenNodes();e[t].data=null;const n=this.getComponent();n.children=[],n.kept=void 0},onDragStart(t){this.computeIndexes(),this.context=this.getUnderlyingVm(t.item),this.context&&(t.item._underlying_vm_=this.clone(this.context.element),hv=t.item)},onDragAdd(t){const e=t.item._underlying_vm_;if(e===void 0)return;fv(t.item);const n=this.getVmIndex(t.newIndex);this.spliceList(n,0,e),this.computeIndexes();const r={element:e,newIndex:n};this.emitChanges({added:r})},onDragRemove(t){if(tM(this.$el,t.item,t.oldIndex),t.pullMode==="clone"){fv(t.clone);return}if(!this.context)return;const e=this.context.index;this.spliceList(e,1);const n={element:this.context.element,oldIndex:e};this.resetTransitionData(e),this.emitChanges({removed:n})},onDragUpdate(t){fv(t.item),tM(t.from,t.item,t.oldIndex);const e=this.context.index,n=this.getVmIndex(t.newIndex);this.updatePosition(e,n);const r={element:this.context.element,oldIndex:e,newIndex:n};this.emitChanges({moved:r})},updateProperty(t,e){t.hasOwnProperty(e)&&(t[e]+=this.headerOffset)},onDragMove(t,e){const n=this.move;if(!n||!this.realList)return!0;const r=this.getRelatedContextFromMoveEvent(t),o=this.context,s=this.computeFutureIndex(r,t);Object.assign(o,{futureIndex:s});const i=Object.assign({},t,{relatedContext:r,draggedContext:o});return n(i,e)},onDragEnd(){this.computeIndexes(),hv=null},getTrargetedComponent(t){return t.__draggable_component__},getRelatedContextFromMoveEvent({to:t,related:e}){const n=this.getTrargetedComponent(t);if(!n)return{component:n};const r=n.realList,o={list:r,component:n};if(t!==e&&r&&n.getUnderlyingVm){const s=n.getUnderlyingVm(e);if(s)return Object.assign(s,o)}return o},computeFutureIndex(t,e){const n=[...e.to.children].filter(s=>s.style.display!=="none");if(n.length===0)return 0;const r=n.indexOf(e.related),o=t.component.getVmIndex(r);return n.indexOf(hv)!==-1||!e.willInsertAfter?o:o+1}}}),D6=Vr("poststore",{state:()=>({postsPopupOpen:!1,postLibrary:[],activeBlockIndex:null,activeFieldName:null,activeLayout:null,activeParent:null,activeIsSetting:!1,activeRepeaterIndex:!1,selectedPosts:[],postLibraryLoading:!1}),getters:{getActiveBlockIndex(t){return t.activeBlockIndex},getActiveFieldName(t){return t.activeFieldName},getActiveLayout(t){return t.activeLayout},getActiveParent(t){return t.activeParent},getActiveIsSetting(t){return t.activeIsSetting},getSelectedPosts(t){return t.selectedPosts},getPostLibrary(t){return t.postLibrary},getActiveRepeaterIndex(t){return t.activeRepeaterIndex},getPostsPopupOpen(t){return t.postsPopupOpen},getPostLibraryLoading(t){return t.postLibraryLoading}},actions:{setPostLibraryLoading(t){this.postLibraryLoading=t},togglePostsPopup(){this.postsPopupOpen=!this.postsPopupOpen,this.postsPopupOpen||this.clearContext()},setContext(t,e,n,r,o,s){this.activeBlockIndex=t,this.activeFieldName=e,this.activeLayout=n,this.activeParent=o,this.activeRepeaterIndex=s,this.activeIsSetting=r},clearContext(){this.postLibrary=[],this.activeBlockIndex=null,this.activeFieldName=null,this.activeLayout=null,this.activeIsSetting=!1},setSelectedPosts(t){this.selectedPosts=t},clearSelectedPosts(){this.selectedPosts=[]},setPostLibrary(t){this.postLibrary=t}}}),Xne={class:"fm-relative fm-left-1/2 fm-top-1/2 -fm-translate-x-1/2 -fm-translate-y-1/2 fm-w-full fm-h-full fm-max-w-[50%] fm-max-h-[90%] md:fm-h-auto fm-z-10"},Qne={class:"fm-relative fm-bg-white fm-rounded-lg fm-shadow dark:fm-bg-gray-700 fm-w-full fm-h-full"},Zne={class:"fm-flex fm-items-start fm-justify-between fm-p-4 fm-border-b fm-rounded-t dark:fm-border-gray-600"},ere={class:"fm-relative fm-w-full fm-max-w-[350px]"},tre=g("div",{class:"fm-absolute fm-inset-y-0 fm-left-0 fm-flex fm-items-center fm-pl-3 fm-pointer-events-none"},[g("svg",{"aria-hidden":"true",class:"fm-w-5 fm-h-5 fm-text-gray-500 dark:fm-text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1),nre=g("svg",{"aria-hidden":"true",class:"fm-w-5 fm-h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[g("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),rre=g("span",{class:"fm-sr-only"},"Close modal",-1),ore=[nre,rre],sre={class:"fm-space-y-6"},ire={class:"relative"},are={class:"fm-flex fm-flex-col fm-gap-4 fm-text-gray-700 dark:fm-text-gray-200 fm-text-sm"},lre={key:0},cre={key:0,class:"fm-p-6 fm-pb-2"},ure=g("div",{class:"fm-w-full fm-mb-2 fm-font-bold"},"Selected",-1),dre={class:"fm-bg-blue-100 fm-text-blue-800 fm-text-xs fm-font-medium fm-pr-5 fm-pl-1 fm-py-0.5 fm-rounded dark:fm-bg-blue-900 dark:fm-text-blue-300 fm-relative"},fre=["innerHTML"],hre=["onClick"],pre=g("svg",{"aria-hidden":"true",class:"fm-absolute fm-w-3 fm-h-3 fm-top-1/2 fm-right-1 -fm-translate-y-1/2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[g("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),mre=[pre],gre={class:"fm-bg-blue-100 fm-text-blue-800 fm-text-xs fm-font-medium fm-pr-5 fm-pl-1 fm-py-0.5 fm-rounded dark:fm-bg-blue-900 dark:fm-text-blue-300 fm-relative"},yre=["innerHTML"],vre=["onClick"],bre=g("svg",{"aria-hidden":"true",class:"fm-absolute fm-w-3 fm-h-3 fm-top-1/2 fm-right-1 -fm-translate-y-1/2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[g("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),wre=[bre],kre={key:2,class:"fm-flex fm-gap-2 fm-flex-wrap"},xre={class:"fm-cursor-grab"},Cre={class:"fm-bg-blue-100 fm-text-blue-800 fm-text-xs fm-font-medium fm-pr-5 fm-pl-1 fm-py-0.5 fm-rounded dark:fm-bg-blue-900 dark:fm-text-blue-300 fm-relative"},_re=["innerHTML"],Sre=g("svg",{"aria-hidden":"true",class:"fm-absolute fm-w-3 fm-h-3 fm-top-1/2 fm-right-1 -fm-translate-y-1/2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[g("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),Tre=[Sre],Mre={key:3,class:"fm-flex fm-gap-2 fm-flex-wrap"},Ere={class:"fm-cursor-grab"},Ore={class:"fm-bg-blue-100 fm-text-blue-800 fm-text-xs fm-font-medium fm-pr-5 fm-pl-1 fm-py-0.5 fm-rounded dark:fm-bg-blue-900 dark:fm-text-blue-300 fm-relative"},Ire=["innerHTML"],Are=g("svg",{"aria-hidden":"true",class:"fm-absolute fm-w-3 fm-h-3 fm-top-1/2 fm-right-1 -fm-translate-y-1/2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[g("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),Nre=[Are],Lre={class:"fm-w-full fm-min-h-[100px] fm-max-h-[50vh] fm-overflow-auto fm-p-6 fm-pt-2 fm-relative"},Rre={key:0,class:"fm-absolute fm-top-1/2 fm-left-1/2 -fm-translate-x-1/2 -fm-translate-y-1/2"},Pre={class:"fm-text-sm fm-text-gray-700 dark:fm-text-gray-200 fm-flex fm-flex-col fm-gap-4"},Dre={class:"fm-w-full fm-mb-2 fm-font-bold"},$re={key:0,class:"fm-flex fm-items-center fm-pl-3"},Hre=["id","onChange","value","checked"],Fre=["for"],Bre={key:1,class:"fm-flex fm-items-center fm-pl-3"},jre=["id","onChange","value","checked"],zre=["for"],Vre=Ie({__name:"FlowmatePostsPopup",setup(t){const e=D6(),n=dt(),r=Ur();ae(!1);const o=ae([]),s=ae(""),i=Y(()=>e.getPostsPopupOpen);ot(i,O=>{O&&(s.value="",o.value=[])});const a=Y(()=>e.getActiveLayout),l=Y(()=>e.getActiveFieldName),c=Y(()=>e.getActiveBlockIndex),u=Y(()=>e.getActiveIsSetting),d=Y(()=>e.getActiveParent),f=Y(()=>e.getActiveRepeaterIndex),h=Y(()=>{let O=r.getConfig.config[a.value][l.value];return l.value==="url"&&d.value==="internal_link"&&(O=r.getConfig.config[a.value].buttons.sub_fields[d.value].sub_fields[l.value]),u.value&&(O=r.getConfig.config[a.value].settings[l.value]),O});Y(()=>h.value.type==="page_link");const p=Y(()=>h.value.type==="taxonomy"||h.value.type==="page_link"?!0:h.value.return_format==="id"),m=Y(()=>h.value.type==="relationship"?!0:h.value.multiple===1),v=Y(()=>h.value.type==="taxonomy"),b=Y(()=>{if(h.value.type==="relationship"){const O=parseInt(h.value.max);return O>0&&O<=n.pageContext.acf.content[c.value][l.value].length}return!1}),w=Y(()=>u.value?n.pageContext.acf.content[c.value].settings[l.value]:l.value==="url"&&d.value==="internal_link"?n.pageContext.acf.content[c.value].buttons[f.value].internal_link[l.value]:n.pageContext.acf.content[c.value][l.value]),k=Y(()=>{const O=e.getPostLibrary;let N=[];for(const R of O){let I,j;R.is_tax?(j=N.findIndex(de=>de.name===R.taxonomy_plural),j==-1&&N.push({name:R.taxonomy_plural,items:[]}),I=N.findIndex(de=>de.name===R.taxonomy_plural)):(j=N.findIndex(de=>de.name===R.post_type_plural),j==-1&&N.push({name:R.post_type_plural,items:[]}),I=N.findIndex(de=>de.name===R.post_type_plural)),N[I].items.push(R)}return N.filter(R=>o.value.length>0?o.value.includes(R.name):!0)}),y=Y(()=>{if(k.value&&k.value.length>0){let O=JSON.parse(JSON.stringify(k.value));return O=O.filter(N=>{let R=N.items.filter(I=>I.is_tax?I.name.toLowerCase().includes(s.value.toLowerCase()):I.post_title.toLowerCase().includes(s.value.toLowerCase()));return N.items=R,R.length>0}),O}return[]}),C=O=>{let N,R=!1;O.is_tax?N="term_id":N="ID";let I=n.pageContext.acf.content[c.value][l.value];return u.value&&(I=n.pageContext.acf.content[c.value].settings[l.value]),l.value==="url"&&d.value==="internal_link"&&(I=n.pageContext.acf.content[c.value].buttons[f.value].internal_link[l.value],N="post_url",R=!0),I?m.value?p.value?I.some(j=>j===O[N]):I.some(j=>j[N]===O[N]):p.value||R?I===O[N]:I[N]===O[N]:!1},_=O=>{let N;O.is_tax?N="term_id":N="ID";let R=n.pageContext.acf.content[c.value][l.value];if(u.value&&(R=n.pageContext.acf.content[c.value].settings[l.value]),l.value==="url"&&d.value==="internal_link"&&(R=n.pageContext.acf.content[c.value].buttons[f.value].internal_link[l.value],N="post_url"),m.value){R||(R=[]);let I;p.value?I=R.findIndex(j=>j===O[N]):I=R.findIndex(j=>j[N]===O[N]),I>-1?R.splice(I,1):p.value?R.push(O[N]):R.push(O)}else p.value?R===O[N]?R=!1:R=O[N]:R&&R[N]===O[N]?R=!1:R=O;R.length===0&&(R=!1),u.value?n.pageContext.acf.content[c.value].settings[l.value]=R:l.value==="url"&&d.value==="internal_link"?(n.pageContext.acf.content[c.value].buttons[f.value].internal_link[l.value]=R,R?n.pageContext.acf.content[c.value].buttons[f.value].internal_link[l.value+"_id"]=O.ID:n.pageContext.acf.content[c.value].buttons[f.value].internal_link[l.value+"_id"]=!1):n.pageContext.acf.content[c.value][l.value]=R},M=O=>{let N;O.is_tax?N="term_id":N="ID";let R=n.pageContext.acf.content[c.value][l.value];if(u.value&&(R=n.pageContext.acf.content[c.value].settings[l.value]),m.value){R||(R=[]);let I;p.value?I=R.findIndex(j=>j===O):I=R.findIndex(j=>j[N]===O[N]),I>-1&&R.splice(I,1)}else R=[];R.length===0&&(R=!1),u.value?n.pageContext.acf.content[c.value].settings[l.value]=R:l.value==="url"&&d.value==="internal_link"?(n.pageContext.acf.content[c.value].buttons[f.value].internal_link[l.value]="",n.pageContext.acf.content[c.value].buttons[f.value].internal_link[l.value+"_id"]=!1):n.pageContext.acf.content[c.value][l.value]=R},E=(O,N=!1)=>N?e.getPostLibrary.find(R=>R.post_url===O).post_title:v.value?e.getPostLibrary.find(R=>R.term_id===O).name:e.getPostLibrary.find(R=>R.ID===O).post_title;return(O,N)=>(S(),T("div",{class:V(["fm-fixed fm-w-screen fm-h-screen fm-z-[999] fm-top-0 fm-left-0 fm-duration-300",x(e).getPostsPopupOpen?"fm-opacity-100 fm-pointer-events-all":"fm-opacity-0 fm-pointer-events-none"])},[g("div",Xne,[g("div",Qne,[g("div",Zne,[g("div",ere,[tre,qe(g("input",{type:"search",id:"search-dropdown","onUpdate:modelValue":N[0]||(N[0]=R=>s.value=R),class:"fm-block fm-p-2.5 !fm-pl-[40px] fm-w-full fm-z-20 fm-text-sm fm-text-gray-900 fm-bg-gray-50 fm-rounded-lg border-l-gray-100 fm-border fm-border-gray-300 focus:fm-ring-blue-500 focus:fm-border-blue-500 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-border-blue-500",placeholder:"Search",required:""},null,512),[[mn,s.value]])]),g("button",{type:"button",class:"fm-text-gray-400 fm-bg-transparent hover:fm-bg-gray-200 hover:fm-text-gray-900 fm-rounded-lg fm-text-sm fm-p-1.5 fm-ml-auto fm-inline-flex fm-items-center dark:hover:fm-bg-gray-600 dark:hover:fm-text-white",onClick:N[1]||(N[1]=R=>x(e).togglePostsPopup())},ore)]),g("div",sre,[g("div",ire,[g("div",are,[y.value&&y.value.length>0?(S(),T("div",lre,[w.value?(S(),T("div",cre,[ure,w.value.length>0&&u.value?(S(),$e(x(Y1),{key:0,modelValue:x(n).pageContext.acf.content[c.value].settings[l.value],"onUpdate:modelValue":N[2]||(N[2]=R=>x(n).pageContext.acf.content[c.value].settings[l.value]=R),class:"fm-flex fm-gap-2 fm-flex-wrap"},{default:At(()=>[(S(!0),T(ye,null,Pe(w.value,R=>(S(),T("div",{key:"selected-post-"+R.ID,class:"fm-cursor-grab"},[g("div",dre,[g("span",{innerHTML:p.value?E(R):R.post_title},null,8,fre),g("button",{onClick:I=>M(R)},mre,8,hre)])]))),128))]),_:1},8,["modelValue"])):w.value.length>0&&!u.value&&d.value!=="internal_link"?(S(),$e(x(Y1),{key:1,modelValue:x(n).pageContext.acf.content[c.value][l.value],"onUpdate:modelValue":N[3]||(N[3]=R=>x(n).pageContext.acf.content[c.value][l.value]=R),class:"fm-flex fm-gap-2 fm-flex-wrap"},{default:At(()=>[(S(!0),T(ye,null,Pe(w.value,R=>(S(),T("div",{key:"selected-post-"+R.ID,class:"fm-cursor-grab"},[g("div",gre,[g("span",{innerHTML:p.value?E(R):R.post_title},null,8,yre),g("button",{onClick:I=>M(R)},wre,8,vre)])]))),128))]),_:1},8,["modelValue"])):d.value==="internal_link"?(S(),T("div",kre,[g("div",xre,[g("div",Cre,[g("span",{innerHTML:p.value?E(w.value,!0):w.value.post_title},null,8,_re),g("button",{onClick:N[4]||(N[4]=R=>M(w.value))},Tre)])])])):(S(),T("div",Mre,[g("div",Ere,[g("div",Ore,[g("span",{innerHTML:p.value?E(w.value):w.value.post_title},null,8,Ire),g("button",{onClick:N[5]||(N[5]=R=>M(w.value))},Nre)])])]))])):H("",!0)])):H("",!0),g("div",Lre,[x(e).getPostLibraryLoading?(S(),T("div",Rre,[he(jy)])):H("",!0),g("ul",Pre,[(S(!0),T(ye,null,Pe(y.value,R=>(S(),T("li",{key:"post-type-"+R.name,class:"fm-w-full"},[g("div",Dre,Le(R.name),1),g("ul",null,[(S(!0),T(ye,null,Pe(R.items,I=>(S(),T("li",{key:"post-"+I.ID,class:V(["fm-w-full fm-border-b fm-border-gray-200 dark:fm-border-gray-600 fm-cursor-pointer hover:fm-bg-blue-100/50",[C(I)?"fm-bg-blue-100/30":"",b.value&&!C(I)?"fm-opacity-50 fm-pointer-events-none":""]])},[I.is_tax?(S(),T("div",$re,[g("input",{type:"checkbox",id:I.name+"-"+I.taxonomy,onChange:j=>_(I),value:I.term_id,checked:C(I),class:"fm-w-4 fm-h-4 fm-cursor-pointer fm-text-blue-600 fm-bg-gray-100 fm-border-gray-300 fm-rounded focus:fm-ring-blue-500 dark:fm-focus:ring-blue-600 dark:fm-ring-offset-gray-700 dark:focus:fm-ring-offset-gray-700 focus:fm-ring-2 dark:fm-bg-gray-600 dark:fm-border-gray-500"},null,40,Hre),g("label",{for:I.name+"-"+I.taxonomy,class:"fm-w-full fm-cursor-pointer fm-py-3 fm-ml-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-gray-300"},Le(I.name),9,Fre)])):(S(),T("div",Bre,[g("input",{type:"checkbox",id:I.post_name+"-"+I.post_type,onChange:j=>_(I),value:I.ID,checked:C(I),class:"fm-w-4 fm-h-4 fm-cursor-pointer fm-text-blue-600 fm-bg-gray-100 fm-border-gray-300 fm-rounded focus:fm-ring-blue-500 dark:fm-focus:ring-blue-600 dark:fm-ring-offset-gray-700 dark:focus:fm-ring-offset-gray-700 focus:fm-ring-2 dark:fm-bg-gray-600 dark:fm-border-gray-500"},null,40,jre),g("label",{for:I.post_name+"-"+I.post_type,class:"fm-w-full fm-cursor-pointer fm-py-3 fm-ml-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-gray-300"},Le(I.post_title),9,zre)]))],2))),128))])]))),128))])])])])])])]),g("div",{class:"fm-bg-black fm-opacity-30 fm-absolute fm-top-0 fm-left-0 fm-w-full fm-h-full",onClick:N[6]||(N[6]=R=>x(e).togglePostsPopup())})],2))}}),Ure="0.5.3",qre={__name:"FlowmateEditablesVersion",setup(t){return(e,n)=>(S(),T("span",null,Le(x(Ure)),1))}},Wre="0.5.95",Kre={__name:"FlowmateVersion",setup(t){return(e,n)=>(S(),T("span",null,Le(x(Wre)),1))}},Gre=Ie({__name:"FlowmateDebugger",setup(t){return Ur(),Jl(),Bu(),ai(),Gu(),dt(),(e,n)=>H("",!0)}}),Jre={class:"fm-top-0 fm-p-4 fm-left-64 fm-bg-gray-100 fm-h-full fm-min-w-[250px] fm-z-10 dark:fm-bg-gray-900 dark:fm-border-gray-700 fm-overflow-scroll"},Yre={key:0},Xre=["onClick"],Qre=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"},null,-1),Zre=[Qre],eoe={class:"fm-p-3 fm-py-4 fm-w-fill fm-w-fill-moz"},toe=["src"],noe=["innerHTML"],roe={class:"fm-p-6 fm-text-center"},ooe=g("svg",{"aria-hidden":"true",class:"fm-mx-auto fm-mb-4 fm-text-gray-400 fm-w-14 fm-h-14 dark:fm-text-gray-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),soe=g("h3",{class:"fm-mb-5 fm-text-lg fm-font-normal fm-text-gray-500 dark:fm-text-gray-400"},"Are you sure you want to remove this block?",-1),ioe={class:"fm-flex fm-flex-col fm-gap-2"},aoe=g("svg",{fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),loe=g("span",null,"Add block",-1),coe=[aoe,loe],uoe={class:"fm-flex fm-gap-4 fm-flex-wrap"},doe=["onClick"],foe=["src"],hoe=["innerHTML"],poe=Ie({__name:"FlowmateFlexOrganizer",setup(t){zh();const e=Ur(),n=dt();Zx();const r=ae(null),o=ae(!1),s=Y(()=>o),i=ae(!1),a=Y(()=>i),l=u=>{r.value=u,u!==null&&(o.value=!0)},c=(u,d,f)=>{const h=e.getConfig;return h&&h[d]&&h[d][u.acf_fc_layout]?h[d][u.acf_fc_layout][f]:u.acf_fc_layout};return(u,d)=>(S(),T("div",null,[g("div",Jre,[x(n).pageContext&&x(n).pageContext.id?(S(),T("div",Yre,[he(x(Y1),{modelValue:x(n).pageContext.acf.content,"onUpdate:modelValue":d[0]||(d[0]=f=>x(n).pageContext.acf.content=f),"ghost-class":"fm-bg-gray-300"},{default:At(()=>[(S(!0),T(ye,null,Pe(x(n).pageContext.acf.content,(f,h)=>(S(),T("div",{class:"fm-mb-2 fm-text-center fm-gap-2 fm-flex fm-relative fm-justify-between fm-cursor-grab fm-rounded-lg fm-bg-white dark:fm-bg-gray-800 dark:fm-text-white",key:"flex-"+h},[(S(),T("svg",{onClick:p=>l(h),"aria-label":"Delete block",title:"Delete block",fill:"none",class:"fm-absolute fm-top-2 fm-right-2 fm-w-4 fm-h-4 fm-cursor-pointer",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},Zre,8,Xre)),g("div",eoe,[g("img",{class:"fm-max-w-[250px]",src:c(f,"config","preview"),alt:""},null,8,toe),g("p",{class:"fm-text-base fm-font-bold",innerHTML:c(f,"data_models","acf_fc_label")},null,8,noe)])]))),128))]),_:1},8,["modelValue"]),he(Gf,{removeCloseButton:!0,open:s.value},{default:At(()=>[g("div",roe,[ooe,soe,g("button",{onClick:d[1]||(d[1]=f=>(x(n).removeBlock(r.value),o.value=!1)),type:"button",class:"fm-text-base fm-text-white fm-bg-red-600 hover:fm-bg-red-800 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-red-300 dark:focus:fm-ring-red-800 fm-font-medium fm-rounded-lg fm-text-sm fm-inline-flex fm-items-center fm-px-5 fm-py-2.5 fm-text-center fm-mr-2"}," Yes, I'm sure "),g("button",{onClick:d[2]||(d[2]=f=>o.value=!1),type:"button",class:"fm-text-base fm-text-gray-500 fm-bg-white hover:fm-bg-gray-100 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-gray-200 fm-rounded-lg fm-border fm-border-gray-200 fm-text-sm fm-font-medium fm-px-5 fm-py-2.5 hover:fm-text-gray-900 focus:fm-z-10 dark:fm-bg-gray-700 dark:fm-text-gray-300 dark:fm-border-gray-500 dark:hover:fm-text-white dark:hover:fm-bg-gray-600 dark:focus:fm-ring-gray-600"},"No, cancel")])]),_:1},8,["open"])])):H("",!0),g("div",ioe,[x(e).getConfig.data_models?(S(),T("button",{key:0,onClick:d[3]||(d[3]=f=>i.value=!i.value),type:"button",class:"fm-mt-4 fm-text-white !fm-bg-blue-700 hover:!fm-bg-blue-800 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-blue-300 fm-font-medium fm-rounded-lg fm-text-sm fm-p-3 fm-text-center fm-inline-flex fm-items-center dark:!fm-bg-blue-600 dark:hover:!fm-bg-blue-700 dark:focus:fm-ring-blue-800 fm-justify-center fm-gap-2"},coe)):H("",!0)])]),he(Gf,{title:"Available blocks",open:a.value},{default:At(()=>[g("div",uoe,[(S(!0),T(ye,null,Pe(x(e).getConfig.config,f=>(S(),T("div",{onClick:h=>(x(n).addFlexBlock(f.acf_fc_layout,x(e).getConfig),i.value=!1),class:V([[f.preview?"":"fm-py-8 !fm-pb-8",x(n).isBlockAvailable(f.acf_fc_layout)?"":"fm-opacity-30 fm-pointer-events-none"],"fm-w-[calc(25%-0.75rem)] fm-gap-2 fm-p-2 fm-bg-white fm-rounded-xl fm-flex fm-flex-col fm-justify-center fm-items-center fm-pb-4 fm-cursor-pointer fm-duration-200 fm-border-2 hover:fm-border-gray-400"])},[f.preview?(S(),T("img",{key:0,src:f.preview},null,8,foe)):H("",!0),g("span",{innerHTML:f.acf_fc_label},null,8,hoe)],10,doe))),256))])]),_:1},8,["open"])]))}}),moe=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"},null,-1),goe=[moe],yoe=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"},null,-1),voe=[yoe],boe=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"},null,-1),woe=[boe],koe=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"},null,-1),xoe=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),Coe=[koe,xoe],_oe=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m.94 3.198l.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0112 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 016 18.719m12 0a5.971 5.971 0 00-.941-3.197m0 0A5.995 5.995 0 0012 12.75a5.995 5.995 0 00-5.058 2.772m0 0a3 3 0 00-4.681 2.72 8.986 8.986 0 003.74.477m.94-3.197a5.971 5.971 0 00-.94 3.197M15 6.75a3 3 0 11-6 0 3 3 0 016 0zm6 3a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-13.5 0a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"},null,-1),Soe=[_oe],Toe=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 16.5V9.75m0 0l3 3m-3-3l-3 3M6.75 19.5a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.233-2.33 3 3 0 013.758 3.848A3.752 3.752 0 0118 19.5H6.75z"},null,-1),Moe=[Toe],Eoe=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"},null,-1),Ooe=[Eoe],Ioe=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.217 10.907a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186l9.566-5.314m-9.566 7.5l9.566 5.314m0 0a2.25 2.25 0 103.935 2.186 2.25 2.25 0 00-3.935-2.186zm0-12.814a2.25 2.25 0 103.933-2.185 2.25 2.25 0 00-3.933 2.185z"},null,-1),Aoe=[Ioe],Noe={key:8,class:"-fm-top-1 fm-left-8 fm-absolute fm-w-3.5 fm-h-3.5 fm-bg-green-400 fm-border-2 fm-border-white dark:fm-border-gray-800 fm-rounded-full"},Loe={class:"fm-sr-only"},uf=Ie({__name:"FlowmateIconButton",props:{size:{type:String,default:"md",validator:t=>["sm","md","lg"].includes(t)},type:{type:String,default:"primary",validator:t=>["primary","secondary","alert","warning","active"].includes(t)},icon:{type:String,required:!0,validator:t=>["trash","paint-brush","pencil-square","eye","collaborate","search","upload","share"].includes(t)},active:{type:Boolean,default:!1},description:{type:String,default:""}},setup(t){const e=t,n=Y(()=>({"fm-w-4 fm-h-4":e.size==="sm","fm-w-5 fm-h-5":e.size==="md","fm-w-6 fm-h-6":e.size==="lg"})),r=Y(()=>({"fm-p-2":e.size==="sm","fm-p-2.5":e.size==="md","fm-p-3":e.size==="lg","fm-bg-blue-700 hover:fm-bg-blue-800 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-blue-300 dark:fm-bg-blue-600 dark:hover:fm-bg-blue-700 dark:focus:fm-ring-blue-800":e.type==="primary","fm-text-gray-900 focus:fm-outline-none fm-bg-white fm-rounded-lg fm-border fm-border-gray-200 hover:fm-bg-gray-100 hover:fm-text-blue-700 focus:fm-z-10 focus:fm-ring-4 focus:fm-ring-gray-200 dark:focus:fm-ring-gray-700 dark:fm-bg-gray-800 dark:fm-text-gray-400 dark:fm-border-gray-600 dark:hover:fm-text-white dark:hover:fm-bg-gray-700":e.type==="secondary","fm-bg-red-600 hover:fm-bg-red-800 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-red-300 dark:fm-bg-red-600 dark:hover:fm-bg-red-700 dark:focus:fm-ring-red-800":e.type==="alert","fm-bg-yellow-400 hover:fm-bg-yellow-500 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-yellow-300 dark:fm-bg-yellow-500 dark:hover:fm-bg-yellow-600 dark:focus:fm-ring-yellow-800":e.type==="warning"})),o=Y(()=>e.description),{show:s,showTooltip:i,hideTooltip:a}=Ao();return(l,c)=>(S(),T("button",{type:"button",class:V(["fm-text-white fm-font-medium fm-rounded-lg fm-text-sm fm-text-center fm-inline-flex fm-items-center fm-relative",r.value]),onMouseenter:c[0]||(c[0]=(...u)=>x(i)&&x(i)(...u)),onMouseleave:c[1]||(c[1]=(...u)=>x(a)&&x(a)(...u))},[t.icon==="paint-brush"?(S(),T("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:V(n.value)},goe,2)):H("",!0),t.icon==="trash"?(S(),T("svg",{key:1,"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:V(n.value)},voe,2)):H("",!0),t.icon==="pencil-square"?(S(),T("svg",{key:2,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:V(n.value)},woe,2)):H("",!0),t.icon==="eye"?(S(),T("svg",{key:3,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:V(n.value)},Coe,2)):H("",!0),t.icon==="collaborate"?(S(),T("svg",{key:4,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:V(n.value)},Soe,2)):H("",!0),t.icon==="upload"?(S(),T("svg",{key:5,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:V(n.value)},Moe,2)):H("",!0),t.icon==="search"?(S(),T("svg",{key:6,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:V(n.value)},Ooe,2)):H("",!0),t.icon==="share"?(S(),T("svg",{key:7,fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:V(n.value)},Aoe,2)):H("",!0),t.active?(S(),T("span",Noe)):H("",!0),g("span",Loe,Le(t.description),1),he(Io,{text:o.value,show:x(s)},null,8,["text","show"])],34))}}),Roe={class:"fm-top-0 fm-px-4 fm-pt-4 fm-left-64 fm-bg-gray-100 fm-h-full fm-w-[750px] fm-overflow-y-scroll fm-z-10 dark:fm-bg-gray-900 dark:fm-border-gray-700"},Poe={class:"fm-relative"},Doe={key:0,class:"fm-absolute fm-w-full fm-h-full fm-min-h-[80vh] fm-flex fm-items-center fm-justify-center"},$oe={key:1,class:"fm-w-full fm-text-sm fm-text-left fm-text-gray-500 dark:fm-text-gray-400"},Hoe=g("thead",{class:"fm-text-xs fm-text-gray-700 fm-uppercase fm-bg-gray-50 dark:fm-bg-gray-700 dark:fm-text-gray-400"},[g("tr",null,[g("th",{scope:"col",class:"fm-px-6 fm-py-3"}," ID "),g("th",{scope:"col",class:"fm-px-6 fm-py-3"}," Updated "),g("th",{scope:"col",class:"fm-px-6 fm-py-3"}," Author "),g("th",{scope:"col",class:"fm-px-6 fm-py-3"}," Collaboration "),g("th",{scope:"col",class:"fm-px-6 fm-py-3 fm-text-right"}," Actions ")])],-1),Foe={scope:"row",class:"fm-px-6 fm-py-4 fm-font-medium fm-text-gray-900 fm-whitespace-nowrap dark:fm-text-white"},Boe={class:"fm-px-6 fm-py-4"},joe={class:"fm-px-6 fm-py-4"},zoe={class:"fm-px-6 fm-py-4"},Voe={key:0,class:"fm-inline-flex fm-items-center fm-bg-green-100 fm-text-green-800 fm-text-xs fm-font-medium fm-px-2.5 fm-py-0.5 fm-rounded-full dark:fm-bg-green-900 dark:fm-text-green-300"},Uoe=g("span",{class:"fm-w-2 fm-h-2 fm-mr-1 fm-bg-green-500 fm-rounded-full"},null,-1),qoe={key:1,class:"fm-inline-flex fm-items-center fm-bg-red-100 fm-text-red-800 fm-text-xs fm-font-medium fm-px-2.5 fm-py-0.5 fm-rounded-full dark:fm-bg-red-900 dark:fm-text-red-300"},Woe=g("span",{class:"fm-w-2 fm-h-2 fm-mr-1 fm-bg-red-500 fm-rounded-full"},null,-1),Koe={class:"fm-px-6 fm-py-4 fm-flex fm-justify-end fm-gap-2"},Goe={class:"fm-p-6 fm-text-center"},Joe=g("svg",{"aria-hidden":"true",class:"fm-mx-auto fm-mb-4 fm-text-gray-400 fm-w-14 fm-h-14 dark:fm-text-gray-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),Yoe=g("h3",{class:"fm-mb-5 fm-text-lg fm-font-normal fm-text-gray-500 dark:fm-text-gray-400"},"Are you sure you want to delete this revision?",-1),Xoe=Ie({__name:"FlowmateRevisionManager",props:["contextId"],setup(t){const e=t,n=ae(null),r=ae(!1),o=Y(()=>r),{writeMessage:s}=co(),i=y=>{n.value=y,y!==null&&(r.value=!0)},{revisions:a,loading:l,setRevision:c,deleteRevision:u,getCurrentRevisionId:d}=Hr(e.contextId),{toggleNavigation:f}=Gu(),h=_r(),p=dt(),m=De("revisions.delete").isEnabled(),v=De("revisions.read").isEnabled();Y(()=>p.getBackdrop);const b=y=>{z3(y).then(()=>{s("Link was copied to your clipboard.",null,"success")})},w=async y=>{await u(y),a.value.forEach((C,_)=>{C.id===y&&a.value.splice(_,1)})},k=async(y,C)=>{console.log("showing revision ... "+y," for post "+C);const _="#/design/"+C+"/revisions/"+y;h.goTo(_),f("left","revisions")};return(y,C)=>(S(),T("div",Roe,[g("div",Poe,[x(l)?(S(),T("div",Doe,[he(jy)])):H("",!0),x(l)?H("",!0):(S(),T("table",$oe,[Hoe,g("tbody",null,[(S(!0),T(ye,null,Pe(x(a),(_,M)=>(S(),T("tr",{key:"revision-"+M,class:"fm-bg-white fm-border-b dark:fm-bg-gray-800 dark:fm-border-gray-700"},[g("th",Foe,Le(_.id),1),g("td",Boe,Le(_.updated_at),1),g("td",joe,Le(_.user_id),1),g("td",zoe,[_.status==="collaborate"?(S(),T("span",Voe,[Uoe,Ge(" Active ")])):(S(),T("span",qoe,[Woe,Ge(" Inactive ")]))]),g("td",Koe,[parseInt(_.share_id)!==0?(S(),$e(uf,{key:0,onClick:rt(E=>b(x(p).getOptions.frontend+"/#/share/"+_.share_id),["stop","prevent"]),icon:"share",size:"md",type:"primary",description:"Share revision"},null,8,["onClick"])):H("",!0),x(m)?(S(),$e(uf,{key:1,onClick:rt(E=>i(_.id),["stop","prevent"]),icon:"trash",size:"md",type:"alert",description:"Delete revision #"+_.id},null,8,["onClick","description"])):H("",!0),x(v)?(S(),$e(uf,{key:2,onClick:rt(E=>k(_.id,_.post_id),["stop"]),icon:"eye",size:"md",active:_.id===x(d)(),type:"warning",description:"Show revision #"+_.id},null,8,["onClick","active","description"])):H("",!0)])]))),128))])])),he(Gf,{removeCloseButton:!0,open:o.value},{default:At(()=>[g("div",Goe,[Joe,Yoe,g("button",{onClick:C[0]||(C[0]=_=>(w(n.value),r.value=!1)),type:"button",class:"fm-text-white fm-bg-red-600 hover:fm-bg-red-800 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-red-300 dark:focus:fm-ring-red-800 fm-font-medium fm-rounded-lg fm-text-sm fm-inline-flex fm-items-center fm-px-5 fm-py-2.5 fm-text-center fm-mr-2"}," Yes, I'm sure "),g("button",{onClick:C[1]||(C[1]=_=>r.value=!1),type:"button",class:"fm-text-gray-500 fm-bg-white hover:fm-bg-gray-100 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-gray-200 fm-rounded-lg fm-border fm-border-gray-200 fm-text-sm fm-font-medium fm-px-5 fm-py-2.5 hover:fm-text-gray-900 focus:fm-z-10 dark:fm-bg-gray-700 dark:fm-text-gray-300 dark:fm-border-gray-500 dark:hover:fm-text-white dark:hover:fm-bg-gray-600 dark:focus:fm-ring-gray-600"},"No, cancel")])]),_:1},8,["open"])])]))}}),Qoe={key:0,id:"logo-sidebar",class:"fm-flex flex-row fm-fixed fm-top-0 fm-left-0 fm-z-40 fm-h-screen fm-pt-[59px] fm-transition-transform fm--translate-x-full fm-bg-white fm-border-r fm-border-gray-200 sm:fm-translate-x-0 dark:fm-bg-gray-800 dark:fm-border-gray-700","aria-label":"Sidebar"},Zoe=Fu('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="fm-w-4 fm-h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="fm-w-4 fm-h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"></path></svg><span class="fm-sr-only">Collapse / Expand sidebar</span>',3),ese={class:"fm-space-y-2"},tse={key:0},nse=g("svg",{"aria-hidden":"true",class:"fm-w-6 fm-h-6 fm-text-gray-500 fm-transition fm-duration-75 dark:fm-text-gray-400 group-hover:fm-text-gray-900 dark:group-hover:fm-text-white",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[g("path",{d:"M2 10a8 8 0 018-8v8h8a8 8 0 11-16 0z"}),g("path",{d:"M12 2.252A8.014 8.014 0 0117.748 8H12V2.252z"})],-1),rse={key:1},ose=g("svg",{"aria-hidden":"true",class:"fm-w-6 fm-h-6 fm-text-gray-500 fm-transition fm-duration-75 dark:fm-text-gray-400 group-hover:fm-text-gray-900 dark:group-hover:fm-text-white",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[g("path",{d:"M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z","stroke-linecap":"round","stroke-linejoin":"round"})],-1),sse={key:2},ise=g("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fm-w-6 fm-h-6 fm-text-gray-500 fm-transition fm-duration-75 dark:fm-text-gray-400 group-hover:fm-text-gray-900 dark:group-hover:fm-text-white",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})],-1),ase={key:3},lse=g("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fm-w-6 fm-h-6 fm-text-gray-500 fm-transition fm-duration-75 dark:fm-text-gray-400 group-hover:fm-text-gray-900 dark:group-hover:fm-text-white",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})],-1),cse=g("svg",{fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})],-1),use={class:"fm-text-xs"},dse=g("span",null,"Flowmate v. ",-1),fse={class:"fm-text-xs"},hse=g("span",null,"Flowmate Editables v. ",-1),pse=Ie({__name:"FlowmateNavigation",setup(t){const e=ai();Bu();const{toggleNavigation:n}=Gu(),r=dt(),{goTo:o,currentRoute:s}=_r(),{contextId:i}=Fr(),{initMediaLibrary:a}=zh();ot(()=>e.getOpenStatuses,N=>{(N.left.organizer||N.left.revisions)&&r.setBackdrop(!0),!N.left.organizer&&!N.left.revisions&&r.setBackdrop(!1)},{deep:!0}),ot(()=>r.getBackdrop,N=>{N||(e.getOpenStatuses.left.organizer&&n("left","organizer"),e.getOpenStatuses.left.revisions&&n("left","revisions"))});const{show:l,showTooltip:c,hideTooltip:u}=Ao(),{show:d,showTooltip:f,hideTooltip:h}=Ao(),{show:p,showTooltip:m,hideTooltip:v}=Ao(),{show:b,showTooltip:w,hideTooltip:k}=Ao(),{show:y,showTooltip:C,hideTooltip:_}=Ao(),{show:M,showTooltip:E,hideTooltip:O}=Ao();return(N,R)=>x(De)("revisions").isEnabled()||x(De)("design").isEnabled()||x(De)("collaborate").isEnabled()?(S(),T("aside",Qoe,[g("div",{class:V([{"fm-w-64":x(e).getOpenStatus("left","main")},"fm-h-full fm-relative fm-z-40 fm-pt-4 fm-px-3 fm-pb-4 fm-overflow-visible fm-bg-white dark:fm-bg-gray-800 fm-relative"])},[g("button",{onClick:R[0]||(R[0]=rt(I=>x(n)("left","main"),["stop"])),type:"button",class:"fm-absolute fm-right-[-13px] fm-w-[26px] fm-top-6 fm-flex fm-items-center fm-p-1 fm-text-xs fm-font-medium fm-text-gray-700 fm-bg-white fm-border fm-border-gray-200 fm-rounded-full hover:fm-bg-gray-100 hover:fm-text-blue-700 focus:fm-z-10 focus:fm-ring-2 focus:fm-ring-gray-300 dark:focus:fm-ring-gray-500 dark:fm-bg-gray-800 focus:fm-outline-none dark:fm-text-gray-400 dark:fm-border-gray-600 dark:hover:fm-text-white dark:hover:fm-bg-gray-700",onMouseenter:R[1]||(R[1]=(...I)=>x(E)&&x(E)(...I)),onMouseleave:R[2]||(R[2]=(...I)=>x(O)&&x(O)(...I))},[Zoe,he(Io,{text:x(e).getOpenStatus("left","main")?"Collapse sidebar":"Expand Sidebar",show:x(M)},null,8,["text","show"])],32),g("ul",ese,[x(De)("dashboard").isEnabled()?(S(),T("li",tse,[g("a",{onClick:R[3]||(R[3]=rt(I=>x(o)("#/dashboard"),["stop","prevent"])),href:"#/dashboard",class:"fm-flex fm-items-center fm-cursor-pointer fm-p-2 fm-text-base fm-font-normal fm-text-gray-900 fm-rounded-lg dark:fm-text-white hover:fm-bg-gray-100 dark:hover:fm-bg-gray-700 fm-relative",onMouseenter:R[4]||(R[4]=(...I)=>x(c)&&x(c)(...I)),onMouseleave:R[5]||(R[5]=(...I)=>x(u)&&x(u)(...I))},[nse,g("span",{class:V([{"fm-hidden":!x(e).getOpenStatus("left","main")},"fm-ml-3 fm"])},"Dashboard",2),he(Io,{text:"Dashboard",show:x(l)},null,8,["show"])],32)])):H("",!0),x(De)("content").isEnabled()?(S(),T("li",rse,[g("a",{onClick:R[6]||(R[6]=rt(I=>x(o)("#/content"),["stop","prevent"])),class:"fm-flex fm-items-center fm-cursor-pointer fm-p-2 fm-text-base fm-font-normal fm-text-gray-900 fm-rounded-lg dark:fm-text-white hover:fm-bg-gray-100 dark:hover:fm-bg-gray-700 fm-relative",onMouseenter:R[7]||(R[7]=(...I)=>x(f)&&x(f)(...I)),onMouseleave:R[8]||(R[8]=(...I)=>x(h)&&x(h)(...I))},[ose,g("span",{class:V([{"fm-hidden":!x(e).getOpenStatus("left","main")},"fm-ml-3 fm"])},"Content",2),he(Io,{text:"Content",show:x(d)},null,8,["show"])],32)])):H("",!0),x(De)("design").isEnabled()&&(x(s).path.includes("#/design")||x(s).path.includes("#/collaborate"))?(S(),T("li",sse,[g("a",{onClick:R[9]||(R[9]=rt(I=>x(n)("left","organizer"),["stop","prevent"])),href:"#",class:V([{"fm-bg-gray-100 dark:fm-bg-gray-700":x(e).getOpenStatus("left","organizer")},"fm-flex fm-items-center fm-p-2 fm-text-base fm-font-normal fm-text-gray-900 fm-rounded-lg dark:fm-text-white hover:fm-bg-gray-100 dark:hover:fm-bg-gray-700 fm-relative"]),onMouseenter:R[10]||(R[10]=(...I)=>x(m)&&x(m)(...I)),onMouseleave:R[11]||(R[11]=(...I)=>x(v)&&x(v)(...I))},[ise,g("span",{class:V([{"fm-hidden":!x(e).getOpenStatus("left","main")},"fm-ml-3"])},"Design",2),he(Io,{text:"Design",show:x(p)},null,8,["show"])],34)])):H("",!0),x(De)("revisions").isEnabled()&&x(s).path.includes("#/design")?(S(),T("li",ase,[g("a",{onClick:R[12]||(R[12]=rt(I=>x(n)("left","revisions"),["stop","prevent"])),href:"#",class:V([{"fm-bg-gray-100 dark:fm-bg-gray-700":x(e).getOpenStatus("left","revisions")},"fm-flex fm-items-center fm-p-2 fm-text-base fm-font-normal fm-text-gray-900 fm-rounded-lg dark:fm-text-white hover:fm-bg-gray-100 dark:hover:fm-bg-gray-700 fm-relative"]),onMouseenter:R[13]||(R[13]=(...I)=>x(w)&&x(w)(...I)),onMouseleave:R[14]||(R[14]=(...I)=>x(k)&&x(k)(...I))},[lse,g("span",{class:V([{"fm-hidden":!x(e).getOpenStatus("left","main")},"fm-ml-3"])},"Revisions",2),he(Io,{text:"Revision",show:x(b)},null,8,["show"])],34)])):H("",!0),g("li",null,[g("a",{onClick:R[15]||(R[15]=rt(I=>x(a)(null,null,null,"any"),["stop","prevent"])),href:"#",class:V([{"fm-bg-gray-100 dark:fm-bg-gray-700":x(e).getOpenStatus("left","revisions")},"fm-flex fm-items-center fm-p-2 fm-text-base fm-font-normal fm-text-gray-900 fm-rounded-lg dark:fm-text-white hover:fm-bg-gray-100 dark:hover:fm-bg-gray-700 fm-relative"]),onMouseenter:R[16]||(R[16]=(...I)=>x(C)&&x(C)(...I)),onMouseleave:R[17]||(R[17]=(...I)=>x(_)&&x(_)(...I))},[cse,g("span",{class:V(["fm-ml-3",{"fm-hidden":!x(e).getOpenStatus("left","main")}])},"Media library",2),he(Io,{text:"Media Library",show:x(y)},null,8,["show"])],34)])]),g("div",{class:V(["fm-absolute fm-bottom-3 fm-left-3",{"fm-hidden":!x(e).getOpenStatus("left","main")}])},[g("div",use,[dse,he(Kre)]),g("div",fse,[hse,he(qre)])],2)],2),qe(he(poe,null,null,512),[[Lf,x(e).getOpenStatus("left","organizer")]]),x(e).getOpenStatus("left","revisions")&&x(i)?(S(),$e(Xoe,{key:0,"context-id":x(i)},null,8,["context-id"])):H("",!0)])):H("",!0)}}),mse={class:"fm-fixed fm-flex fm-items-center fm-w-full fm-h-[100%] fm-z-50 fm-bg-white"},gse={key:0,class:"fm-w-1/4 fm-mx-auto fm-p-4"},yse=g("h3",{class:"fm-mb-4 fm-text-2xl fm-text-gray-900 dark:fm-text-white"},"Sign in",-1),vse={class:"fm-mb-6"},bse=g("label",{for:"email",class:"fm-block fm-mb-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-white"},"Your email or username.",-1),wse={class:"fm-mb-6"},kse=g("label",{for:"password",class:"fm-block fm-mb-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-white"},"Your password",-1),xse={key:0,class:"fm-mt-8"},Cse=g("div",{class:"fm-mb-6"},[g("hr",{class:"fm-mb-6 fm-mx-1"}),g("h3",null,"Or sign in as guest by providing your name")],-1),_se={class:"fm-mb-6"},Sse=g("label",{for:"guest",class:"fm-block fm-mb-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-white"},"Your name",-1),Tse=["onClick","disabled"],Mse={key:1,fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5"},Ese=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),Ose=[Ese],Ise=g("span",null,"Login",-1),Ase={key:1,class:"fm-w-1/4 fm-mx-auto fm-p-4"},Nse={class:"fm-mb-6"},Lse=g("label",{for:"password",class:"fm-block fm-mb-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-white"},"Password",-1),Rse=["onClick","disabled"],Pse={key:1,fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5"},Dse=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),$se=[Dse],Hse=g("span",null,"Login",-1),Fse=Ie({__name:"FlowmateLogin",setup(t){rn();const{getCurrentRevision:e}=Hr(),{currentRoute:n,redirect:r}=_r(),o=dt(),s=cs(),i=Ss(),{auth:a,authGuest:l,renew:c,validate:u,authVisitor:d}=ru(),f=ae({email:"",password:"",guest:""}),h=ae(!1),p=Y(()=>n.value.hasOwnProperty("params")&&n.value.params.get("redirect")?n.value.params.get("redirect"):null),m=async()=>{const w=e();await d(w.share_token,f.value.password)},v=async()=>{if(h.value=!0,console.log("redirectUri",p.value),f.value.guest&&!f.value.email&&!f.value.password){await l(f.value.guest,i.getGuestRole),p.value&&r(p.value),h.value=!1;return}else{await a(f.value.email,f.value.password),p.value&&r(p.value),h.value=!1;return}},b=Y(()=>s.isGuestLoginAllowed);return(w,k)=>(S(),T("div",mse,[x(o).getShareActive?x(e).share_token?(S(),T("div",Ase,[g("form",null,[g("div",Nse,[Lse,qe(g("input",{"onUpdate:modelValue":k[3]||(k[3]=y=>f.value.password=y),type:"password",id:"password",class:"fm-shadow-sm fm-bg-gray-50 fm-border fm-border-gray-300 fm-text-gray-900 fm-text-sm fm-rounded-lg focus:fm-ring-blue-500 focus:fm-border-blue-500 fm-block fm-w-full fm-p-2.5 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-ring-blue-500 dark:focus:fm-border-blue-500 dark:shadow-sm-light",required:""},null,512),[[mn,f.value.password]])]),g("button",{onClick:rt(m,["stop","prevent"]),disabled:h.value,class:V([h.value?x(o).getLoadingClass:"","fm-text-white !fm-bg-blue-700 hover:!fm-bg-blue-800 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-blue-300 fm-font-medium fm-rounded-lg fm-text-sm fm-p-3 fm-text-center fm-inline-flex fm-items-center dark:!fm-bg-blue-600 dark:hover:!fm-bg-blue-700 dark:focus:fm-ring-blue-800 fm-justify-center fm-gap-2"]),type:"submit"},[h.value?(S(),$e(Dc,{key:0})):(S(),T("svg",Pse,$se)),Hse],10,Rse)])])):H("",!0):(S(),T("div",gse,[yse,g("form",null,[g("div",vse,[bse,qe(g("input",{"onUpdate:modelValue":k[0]||(k[0]=y=>f.value.email=y),type:"text",id:"text",class:"fm-shadow-sm fm-bg-gray-50 fm-border fm-border-gray-300 fm-text-gray-900 fm-text-sm fm-rounded-lg focus:fm-ring-blue-500 focus:fm-border-blue-500 fm-block fm-w-full fm-p-2.5 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-ring-blue-500 dark:focus:fm-border-blue-500 dark:shadow-sm-light",placeholder:"name@checkmate.dk",required:""},null,512),[[mn,f.value.email]])]),g("div",wse,[kse,qe(g("input",{"onUpdate:modelValue":k[1]||(k[1]=y=>f.value.password=y),type:"password",id:"password",class:"fm-shadow-sm fm-bg-gray-50 fm-border fm-border-gray-300 fm-text-gray-900 fm-text-sm fm-rounded-lg focus:fm-ring-blue-500 focus:fm-border-blue-500 fm-block fm-w-full fm-p-2.5 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-ring-blue-500 dark:focus:fm-border-blue-500 dark:shadow-sm-light",required:""},null,512),[[mn,f.value.password]])]),b.value?(S(),T("div",xse,[Cse,g("div",_se,[Sse,qe(g("input",{"onUpdate:modelValue":k[2]||(k[2]=y=>f.value.guest=y),type:"text",id:"guest",class:"fm-shadow-sm fm-bg-gray-50 fm-border fm-border-gray-300 fm-text-gray-900 fm-text-sm fm-rounded-lg focus:fm-ring-blue-500 focus:fm-border-blue-500 fm-block fm-w-full fm-p-2.5 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-ring-blue-500 dark:focus:fm-border-blue-500 dark:shadow-sm-light",placeholder:"Your name"},null,512),[[mn,f.value.guest]])])])):H("",!0),g("button",{onClick:rt(v,["stop","prevent"]),disabled:h.value,class:V([h.value?x(o).getLoadingClass:"","fm-text-white !fm-bg-blue-700 hover:!fm-bg-blue-800 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-blue-300 fm-font-medium fm-rounded-lg fm-text-sm fm-p-3 fm-text-center fm-inline-flex fm-items-center dark:!fm-bg-blue-600 dark:hover:!fm-bg-blue-700 dark:focus:fm-ring-blue-800 fm-justify-center fm-gap-2"]),type:"submit"},[h.value?(S(),$e(Dc,{key:0})):(S(),T("svg",Mse,Ose)),Ise],10,Tse)])]))]))}}),Bse={class:"fm-flex fm-items-center fm-justify-center"},jse=g("div",{class:"fm-inline-block fm-h-52 fm-w-52 fm-bg-gray-50 fm-absolute fm-rounded-full fm-border-2 fm-border-solid fm-border-transparent fm-border-r-blue-800 fm-align-[-0.125em] fm-animate-[spin_1.1s_linear_infinite]",role:"status"},null,-1),zse={__name:"FlowmateLoader",setup(t){const e=dt();return xo(()=>{document.querySelector("html").classList.add("fm-overflow-hidden"),ot(()=>e.getPreloading,n=>{n?document.querySelector("html").classList.add("fm-overflow-hidden"):document.querySelector("html").classList.remove("fm-overflow-hidden")})}),(n,r)=>(S(),T("div",{class:V(["fm-bg-white fm-fixed fm-inset-0 fm-z-[10000] fm-flex fm-items-center fm-justify-center fm-duration-700",x(e).getPreloading?"":"fm-scale-150 fm-opacity-0 fm-pointer-events-none"])},[g("div",Bse,[he(Qx,{class:"fm-z-10 fm-relative fm-w-32"}),jse])],2))}},Vse={class:"fm-px-3 fm-py-3 lg:fm-px-5 lg:fm-pl-3 fm-h-[58px] fm-flex fm-items-center"},Use={class:"fm-flex fm-flex-col fm-gap-6 fm-items-center fm-justify-center fm-h-screen -fm-mt-14 fm-text-center"},qse=["textContent"],Wse={key:0},Kse=g("br",null,null,-1),Gse=["href"],Jse=g("svg",{fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"})],-1),Yse=g("span",null,"Go to control panel",-1),Xse=[Jse,Yse],Qse={__name:"Error",setup(t){const e=dt(),{goTo:n}=_r();return xo(()=>{e.setPreloading(!1)}),(r,o)=>(S(),T(ye,null,[g("div",Vse,[g("a",{href:"/#",onClick:o[0]||(o[0]=rt(s=>x(n)("#/dashboard"),["stop","prevent"])),class:"fm-flex fm-pl-2 fm-pr-32 fm-w-64"},[he(Qx)])]),g("div",Use,[g("h1",{class:"fm-text-4xl fm-font-bold",textContent:Le(x(e).getCollaborationStopped?"Collaboration has stopped":"An error occurred")},null,8,qse),x(e).getCollaborationStopped?(S(),T("p",Wse,[Ge("The collaboration has been stopped by the author."),Kse,Ge("Please ask the author, to re-initiate a collaboration session, if you wish to continue.")])):H("",!0),g("a",{href:x(e).getOptions.backend+"/wp-admin/",type:"button",class:"fm-text-white !fm-bg-blue-700 hover:!fm-bg-blue-800 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-blue-300 fm-font-medium fm-rounded-lg fm-text-sm fm-p-3 fm-text-center fm-inline-flex fm-items-center dark:!fm-bg-blue-600 dark:hover:!fm-bg-blue-700 dark:focus:fm-ring-blue-800 fm-justify-center fm-gap-2"},Xse,8,Gse)])],64))}},Zse=()=>{const t=ai(),e=Ur();return{setStatesFromLocalStorage:()=>{t.setStatesFromLocalStorage(),e.setStatesFromLocalStorage()}}},eie={class:"fm-flex fm-flex-col fm-gap-2 fm-mt-4"},tie=g("h3",{class:"fm-text-sm dark:fm-text-white fm-font-bold"},"Publish",-1),nie={class:"fm-flex fm-gap-2 fm-flex-col fm-mt-2"},rie={class:"fm-text-sm dark:fm-text-white"},oie=g("span",{class:"fm-font-bold"},"Live version updated: ",-1),sie=g("br",null,null,-1),iie={key:0},aie={class:"fm-text-sm dark:fm-text-white"},lie={class:"fm-font-bold"},cie={class:"fm-text-sm dark:fm-text-white"},uie=g("span",{class:"fm-font-bold"},"Updated:",-1),die={key:0,class:"fm-flex fm-gap-2 fm-flex-col fm-mt-2"},fie={class:"fm-flex fm-gap-2 fm-flex-col"},hie=g("label",{for:"status",class:"fm-text-sm dark:fm-text-white fm-font-bold"},"Publishing status: ",-1),pie=g("option",{value:"draft"},"Draft",-1),mie=g("option",{value:"publish"},"Publish",-1),gie=[pie,mie],yie={key:1,class:"fm-inline-flex fm-rounded-md fm-shadow-sm fm-relative fm-w-full fm-mt-2",role:"group"},vie={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"fm-w-5 fm-h-5"},bie=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 011.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 00-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 01-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5a3.375 3.375 0 00-3.375-3.375H9.75"},null,-1),wie=[bie],kie={key:2,fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5"},xie=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"},null,-1),Cie=[xie],_ie={key:3,fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5"},Sie=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"},null,-1),Tie=[Sie],Mie={key:4},Eie={key:0},Oie={key:1},Iie={key:2},Aie=["innerHTML"],Nie=["onClick"],Lie=g("svg",{class:"fm-w-4 fm-h-4 fm-l-2 fm-r-2","aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1),Rie=[Lie],Pie={class:"fm-py-2 fm-text-sm fm-text-gray-700 dark:fm-text-gray-200","aria-labelledby":"dropdownHoverButton"},Die={key:0},$ie=["onClick"],Hie=g("svg",{fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5 fm-mr-2"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})],-1),Fie={key:1},Bie=["onClick"],jie=g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"fm-w-5 fm-h-5 fm-mr-2"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 011.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 00-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 01-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5a3.375 3.375 0 00-3.375-3.375H9.75"})],-1),zie=g("span",null,"Save new revision",-1),Vie=[jie,zie],Uie={key:2},qie=["onClick"],Wie=g("svg",{fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5 fm-mr-2"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})],-1),Kie=g("span",null,"Publish",-1),Gie=[Wie,Kie],Jie=Ie({__name:"FlowmatePublisher",setup(t){ai();const e=dt(),{context:n,getContext:r}=Fr();Gu();const{createRevision:o,updateRevision:s,getCurrentRevision:i,getCurrentRevisionId:a}=Hr(),{redirect:l,goTo:c}=_r(),u=ae(!1);ae(!1);const d=ae(!1),f=ae(!1),h=ae(!1),p=Y(()=>De("revisions.create").isEnabled()),m=Y(()=>De("revisions.update").isEnabled()&&i().hasOwnProperty("id")),v=Y(()=>De("design.publish").isEnabled()),b=Y(()=>De("revisions.create").isEnabled()||De("revisions.update").isEnabled()||De("design.publish").isEnabled()),w=Y(()=>m.value?"update":p.value?"create":v.value?"publish":!1),k=Y(()=>m.value?"Update revision":p.value?"Save new revision":v.value?"Publish":!1),y=I=>new Date(I).toLocaleString(),C=async()=>{d.value=!0,e.setLoading(!0),await s(a(),n.value),d.value=!1,e.setLoading(!1),N()},_=async()=>{f.value=!0,e.setLoading(!0);const I=await o(n.value);f.value=!1,e.setLoading(!1),N(),I.hasOwnProperty("id")&&c(`#/design/${I.post_id}/revisions/${I.id}`)},M=async()=>{h.value=!0,e.setLoading(!0),await e.savePage(),h.value=!1,e.setLoading(!1),N()},E=async()=>{w.value==="update"?await C():w.value==="create"?await _():w.value==="publish"&&await M()},O=()=>{u.value=!u.value},N=()=>{u.value=!1};xo(()=>{typeof window<"u"&&window.addEventListener("keydown",R)}),ql(()=>{typeof window<"u"&&window.removeEventListener("keydown",R)});const R=I=>{I.metaKey&&I.key==="s"&&(I.preventDefault(),E())};return(I,j)=>(S(),T("div",eie,[tie,g("div",nie,[g("p",rie,[oie,sie,Ge(Le(x(e).pageContext.hasOwnProperty("modified")?y(x(e).pageContext.modified):""),1)]),x(e).revisionContext.hasOwnProperty("id")?(S(),T("div",iie,[g("p",aie,[g("span",lie,"Revision #"+Le(x(e).revisionContext.hasOwnProperty("id")?x(e).revisionContext.id:""),1)]),g("p",cie,[uie,Ge(" "+Le(x(e).revisionContext.updated_at),1)])])):H("",!0)]),x(De)("design.publish").isEnabled()?(S(),T("div",die,[g("div",fie,[hie,qe(g("select",{"onUpdate:modelValue":j[0]||(j[0]=de=>x(e).pageContext.status=de),class:"fm-text-sm fm-text-gray-900 fm-border fm-border-gray-200 fm-rounded-lg fm-p-2 fm-w-full dark:fm-border-gray-600 dark:fm-text-white dark:fm-bg-gray-800 dark:focus:fm-ring-gray-700 dark:focus:fm-ring-offset-gray-800 dark:focus:fm-outline-none dark:!bg-gray-800"},gie,512),[[mo,x(e).pageContext.status]])])])):H("",!0),b.value?(S(),T("div",yie,[g("button",{type:"button",onClick:E,class:V([x(e).getLoading?"fm-opacity-30 fm-pointer-events-none":"","fm-p-3 fm-w-full fm-text-sm fm-font-medium fm-text-gray-900 focus:fm-outline-none !bg-white fm-rounded-l-lg fm-border fm-border-gray-200 hover:!bg-gray-100 hover:fm-text-blue-700 focus:fm-z-10 focus:fm-ring-4 focus:fm-ring-gray-200 dark:focus:fm-ring-gray-700 dark:!bg-gray-800 dark:fm-text-gray-400 dark:fm-border-gray-600 dark:hover:fm-text-white dark:hover:!bg-gray-700 fm-flex fm-justify-center fm-gap-2"])},[x(e).getLoading?(S(),$e(Dc,{key:0})):H("",!0),w.value==="create"&&!x(e).getLoading?(S(),T("svg",vie,wie)):H("",!0),w.value==="update"&&!x(e).getLoading?(S(),T("svg",kie,Cie)):H("",!0),w.value==="publish"&&!x(e).getLoading?(S(),T("svg",_ie,Tie)):H("",!0),x(e).getLoading?(S(),T("span",Mie,[f.value?(S(),T("span",Eie,"Saving...")):H("",!0),h.value?(S(),T("span",Oie,"Publishing...")):H("",!0),d.value?(S(),T("span",Iie,"Updating...")):H("",!0)])):(S(),T("span",{key:5,innerHTML:k.value},null,8,Aie))],2),g("button",{onClick:rt(O,["stop","prevent"]),class:"fm-p-3 fm-w-[50px] fm-text-center fm-text-sm fm-font-medium fm-text-gray-900 focus:fm-outline-none !bg-white fm-rounded-r-md fm-border fm-border-gray-200 fm-rounded-r-md hover:!bg-gray-100 hover:fm-text-blue-700 focus:fm-z-10 focus:fm-ring-4 focus:fm-ring-gray-200 dark:focus:fm-ring-gray-700 dark:!bg-gray-800 dark:fm-text-gray-400 dark:fm-border-gray-600 dark:hover:fm-text-white dark:hover:!bg-gray-700 fm-flex fm-justify-center fm-gap-2",type:"button"},Rie,8,Nie),g("div",{class:V([{"fm-hidden":!u.value},"fm-z-10 fm-bg-white fm-divide-y fm-divide-gray-100 fm-rounded-lg fm-shadow dark:fm-bg-gray-700 fm-w-full fm-absolute fm-top-14"])},[g("ul",Pie,[m.value?(S(),T("li",Die,[g("a",{href:"#",onClick:rt(C,["stop","prevent"]),class:"fm-flex fm-px-4 fm-py-2 hover:fm-bg-gray-100 dark:hover:fm-bg-gray-600 dark:hover:fm-text-white"},[Hie,Ge(" Update revision ")],8,$ie)])):H("",!0),p.value?(S(),T("li",Fie,[g("a",{href:"#",onClick:rt(_,["stop","prevent"]),class:"fm-flex fm-px-4 fm-py-2 hover:fm-bg-gray-100 dark:hover:fm-bg-gray-600 dark:hover:fm-text-white"},Vie,8,Bie)])):H("",!0),v.value?(S(),T("li",Uie,[g("a",{href:"#",onClick:rt(M,["stop","prevent"]),class:"fm-flex fm-flex-row fm-px-4 fm-py-2 hover:fm-bg-gray-100 dark:hover:fm-bg-gray-600 dark:hover:fm-text-white"},Gie,8,qie)])):H("",!0)])],2)])):H("",!0)]))}}),Yie={key:0,class:"fm-mt-4 fm-flex fm-flex-col fm-gap-4"},Xie=g("label",{for:"page_title",class:"fm-block fm-mb-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-white"},"Title",-1),Qie=g("label",{for:"page_slug",class:"fm-block fm-mb-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-white"},"Slug",-1),Zie=g("label",{for:"page_excerpt",class:"fm-block fm-mb-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-white"},"Excerpt",-1),eae=g("label",{class:"fm-block fm-mb-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-white"},"Featured image",-1),tae={key:0,class:"fm-pt-[80%] fm-relative fm-bg-gray-100 dark:fm-bg-gray-800 fm-border-2 fm-border-gray-100 dark:fm-border-gray-700 fm-rounded-lg fm-overflow-hidden fm-mb-2"},nae=["src"],rae=g("svg",{"aria-hidden":"true",class:"fm-w-4 fm-h-4",fill:"white",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[g("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),oae=g("span",{class:"fm-sr-only"},"Close modal",-1),sae=[rae,oae],iae=g("svg",{fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})],-1),aae=["innerHTML"],lae=Ie({__name:"FlowmatePageOptions",setup(t){const e=dt(),{initMediaLibrary:n}=zh(),{context:r,contextId:o}=Fr(),s=()=>{e.pageContext.preview_image_featured_media=!1,e.pageContext.featured_image_object=!1,e.pageContext.featured_media=0,console.log("removeFeaturedImage")};return(i,a)=>(S(),T("div",null,[x(o)?(S(),T("div",Yie,[g("div",null,[Xie,qe(g("input",{type:"text",id:"page_title","onUpdate:modelValue":a[0]||(a[0]=l=>x(r).title.rendered=l),class:"fm-bg-gray-50 fm-border fm-border-gray-300 fm-text-gray-900 fm-text-sm fm-rounded-lg focus:fm-ring-blue-500 focus:fm-border-blue-500 fm-block fm-w-full fm-p-2.5 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-ring-blue-500 dark:focus:fm-border-blue-500",placeholder:"Title",required:""},null,512),[[mn,x(r).title.rendered]])]),g("div",null,[Qie,qe(g("input",{type:"text",id:"page_slug","onUpdate:modelValue":a[1]||(a[1]=l=>x(r).slug=l),class:"fm-bg-gray-50 fm-border fm-border-gray-300 fm-text-gray-900 fm-text-sm fm-rounded-lg focus:fm-ring-blue-500 focus:fm-border-blue-500 fm-block fm-w-full fm-p-2.5 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-ring-blue-500 dark:focus:fm-border-blue-500",placeholder:"Slug",required:""},null,512),[[mn,x(r).slug]])]),g("div",null,[Zie,qe(g("textarea",{id:"page_excerpt",rows:"6","onUpdate:modelValue":a[2]||(a[2]=l=>x(r).excerpt.rendered=l),class:"fm-block fm-p-2.5 fm-w-full fm-text-sm fm-text-gray-900 fm-bg-gray-50 fm-rounded-lg fm-border fm-border-gray-300 focus:fm-ring-blue-500 focus:fm-border-blue-500 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-ring-blue-500 dark:focus:fm-border-blue-500",placeholder:"Excerpt"},null,512),[[mn,x(r).excerpt.rendered]])]),g("div",null,[eae,x(r).preview_image_featured_media||x(r).featured_image_object?(S(),T("div",tae,[g("img",{src:x(r).preview_image_featured_media?x(r).preview_image_featured_media:x(r).featured_image_object?x(r).featured_image_object.url:"",class:"fm-absolute fm-top-0 fm-left-0 fm-h-full fm-w-full fm-object-contain fm-duration-100"},null,8,nae),g("button",{type:"button",onClick:a[3]||(a[3]=l=>s()),class:"fm-absolute fm-top-1 fm-right-1 fm-text-gray-400 fm-bg-red-600 hover:fm-bg-red-500 hover:fm-text-white fm-rounded-lg fm-text-sm fm-p-1.5 fm-ml-auto fm-inline-flex fm-items-center dark:hover:fm-bg-gray-600 dark:hover:fm-text-white"},sae)])):H("",!0),g("button",{onClick:a[4]||(a[4]=l=>x(n)(null,null,"featured_media",["jpg","jpeg","png","gif"])),type:"button",class:"fm-text-white !fm-bg-blue-700 hover:!fm-bg-blue-800 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-blue-300 fm-font-medium fm-rounded-lg fm-text-sm fm-p-3 fm-text-center fm-inline-flex fm-items-center dark:!fm-bg-blue-600 dark:hover:!fm-bg-blue-700 dark:focus:fm-ring-blue-800 fm-justify-center fm-gap-2"},[iae,g("span",null,[g("span",{innerHTML:x(r).preview_image_featured_media||x(r).featured_image_object?"Update":"Add"},null,8,aae),Ge(" featured image")])])])])):H("",!0)]))}}),cae={key:0,class:"fm-mt-4 fm-flex fm-flex-col fm-gap-4"},uae=g("label",{for:"page_title",class:"fm-block fm-mb-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-white"},"SEO Title",-1),dae=g("label",{for:"meta_description",class:"fm-block fm-mb-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-white"},"Meta description",-1),fae=g("label",{for:"indexable",class:"fm-block fm-mb-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-white"},"Allow search engines to show this page in search results?",-1),hae=g("option",{value:"index"},"Yes (index)",-1),pae=g("option",{value:"noindex"},"No (noindex)",-1),mae=[hae,pae],gae=g("label",{for:"follow_links",class:"fm-block fm-mb-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-white"},"Should search engines follow links on this page?",-1),yae=g("option",{value:"follow"},"Yes (follow)",-1),vae=g("option",{value:"nofollow"},"No (nofollow)",-1),bae=[yae,vae],wae=Ie({__name:"FlowmatePageSeo",setup(t){const{context:e,contextId:n}=Fr();return(r,o)=>(S(),T("div",null,[x(n)&&x(e).yoast_head_json?(S(),T("div",cae,[g("div",null,[uae,qe(g("input",{type:"text",id:"page_title","onUpdate:modelValue":o[0]||(o[0]=s=>x(e).yoast_head_json.title=s),class:"fm-bg-gray-50 fm-border fm-border-gray-300 fm-text-gray-900 fm-text-sm fm-rounded-lg focus:fm-ring-blue-500 focus:fm-border-blue-500 fm-block fm-w-full fm-p-2.5 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-ring-blue-500 dark:focus:fm-border-blue-500",placeholder:"SEO Title",required:""},null,512),[[mn,x(e).yoast_head_json.title]])]),g("div",null,[dae,qe(g("textarea",{id:"meta_description",rows:"6","onUpdate:modelValue":o[1]||(o[1]=s=>x(e).yoast_head_json.description=s),class:"fm-block fm-p-2.5 fm-w-full fm-text-sm fm-text-gray-900 fm-bg-gray-50 fm-rounded-lg fm-border fm-border-gray-300 focus:fm-ring-blue-500 focus:fm-border-blue-500 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-ring-blue-500 dark:focus:fm-border-blue-500",placeholder:"Meta description"},null,512),[[mn,x(e).yoast_head_json.description]])]),g("div",null,[fae,qe(g("select",{id:"indexable","onUpdate:modelValue":o[2]||(o[2]=s=>x(e).yoast_head_json.robots.index=s),class:"fm-bg-gray-50 fm-border fm-border-gray-300 fm-text-gray-900 fm-text-sm fm-rounded-lg focus:fm-ring-blue-500 focus:fm-border-blue-500 fm-block fm-w-full fm-p-2.5 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-ring-blue-500 dark:focus:fm-border-blue-500"},mae,512),[[mo,x(e).yoast_head_json.robots.index]])]),g("div",null,[gae,qe(g("select",{id:"follow_links","onUpdate:modelValue":o[3]||(o[3]=s=>x(e).yoast_head_json.robots.follow=s),class:"fm-bg-gray-50 fm-border fm-border-gray-300 fm-text-gray-900 fm-text-sm fm-rounded-lg focus:fm-ring-blue-500 focus:fm-border-blue-500 fm-block fm-w-full fm-p-2.5 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-ring-blue-500 dark:focus:fm-border-blue-500"},bae,512),[[mo,x(e).yoast_head_json.robots.follow]])])])):H("",!0)]))}}),kae={class:"fm-block fm-p-6 fm-bg-white fm-border fm-border-gray-200 fm-rounded-lg fm-shadow dark:fm-bg-gray-800 dark:fm-border-gray-700"},xae=["innerHTML"],pv={__name:"FlowmateCard",props:["title","parent","menu"],setup(t){const e=t,n=ai(),{toggleNavigation:r}=Gu();return(o,s)=>(S(),T("div",kae,[e.title?(S(),T("div",{key:0,onClick:s[0]||(s[0]=i=>x(r)(e.parent,e.menu)),class:"fm-cursor-pointer"},[g("h4",{class:V(["fm-font-bold fm-text-lg dark:fm-text-white",x(n).getOpenStatus(e.parent,e.menu)?"fm-mb-2":""]),innerHTML:e.title},null,10,xae),qe(g("hr",null,null,512),[[Lf,x(n).getOpenStatus(e.parent,e.menu)]])])):H("",!0),qe(g("div",null,[Xt(o.$slots,"default")],512),[[Lf,x(n).getOpenStatus(e.parent,e.menu)]])]))}},Cae={key:0},_ae={key:0,class:"fm-block fm-bg-white fm-border fm-border-gray-200 fm-rounded-lg fm-overflow-hidden fm-shadow dark:fm-bg-gray-800 dark:fm-border-gray-700"},Sae={class:"fm-h-[400px] fm-bg-white dark:fm-bg-gray-700 fm-relative"},Tae={class:"fm-absolute fm-bg-blue-600 fm-top-0 fm-w-full fm-h-10 fm-z-10 fm-text-white fm-flex fm-items-center fm-justify-between fm-px-3 fm-text-sm fm-font-bold fm-cursor-pointer"},Mae=g("span",null,"Chat",-1),Eae={class:"fm-relative fm-inline-flex fm-items-center fm-cursor-pointer fm-z-10",title:"Notifications on/off"},Oae=g("div",{class:"fm-w-9 fm-h-5 fm-bg-gray-200 peer-focus:fm-outline-none fm-rounded-full peer dark:fm-bg-gray-700 peer-checked:after:fm-translate-x-full peer-checked:after:fm-border-white after:content-[''] after:fm-absolute after:fm-top-[2px] after:fm-left-[2px] after:fm-bg-white after:fm-border-gray-300 after:fm-border after:fm-rounded-full after:fm-h-4 after:fm-w-4 after:fm-transition-all dark:fm-border-gray-600 peer-checked:fm-bg-green-600"},null,-1),Iae={class:"fm-overflow-scroll fm-h-[334px] fm-p-3 fm-pt-10",id:"chat-container"},Aae={key:0,class:"fm-text-xs fm-text-center fm-opacity-50 dark:fm-text-white fm-mt-4"},Nae={class:"fm-p-1"},Lae={key:0,class:"fm-mb-1 fm-pl-3 fm-text-[10px] fm-opacity-50 fm-text-gray-900 dark:fm-text-white"},Rae=["innerHTML"],Pae=["innerHTML"],Dae={class:"fm-text-sm fm-font-normal"},$ae=["innerHTML"],Hae=["innerHTML"],Fae=g("label",{for:"chat",class:"fm-sr-only"},"Your message",-1),Bae={class:"fm-flex fm-items-start fm-rounded-lg fm-p-3"},jae=g("button",{type:"submit",class:"fm-inline-flex fm-justify-center fm-p-2 fm-text-blue-600 fm-rounded-full fm-cursor-pointer hover:fm-bg-blue-100 dark:fm-text-blue-500 dark:hover:fm-bg-gray-600"},[g("svg",{"aria-hidden":"true",class:"fm-w-6 fm-h-6 fm-rotate-90",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[g("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})]),g("span",{class:"fm-sr-only"},"Send message")],-1),zae=g("svg",{fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 01-2.555-.337A5.972 5.972 0 015.41 20.97a5.969 5.969 0 01-.474-.065 4.48 4.48 0 00.978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25z"})],-1),Vae=g("span",null,"Chat",-1),Uae={key:0,class:"fm-absolute fm-inline-flex fm-items-center fm-justify-center fm-w-6 fm-h-6 fm-text-xs fm-font-bold fm-text-white fm-bg-red-500 fm-border-2 fm-border-white fm-rounded-full fm--top-2 fm--right-2 dark:fm-border-gray-900"},qae=Ie({__name:"FlowmateChat",setup(t){const e=Bu(),{getUserId:n,getUsername:r}=rn(),{setCollaborateMode:o,isCollaborateMode:s,collaborationID:i,sendMessage:a,toggleChat:l,chatIsOpen:c}=Jl(),u=ae(),d=h=>h.from.name===r(),f=h=>{const p=new Date(h);let m=p.getHours(),v=p.getMinutes(),b,w;return m<10?b="0"+m:b=m.toString(),v<10?w="0"+v:w=v.toString(),b+":"+w};return ot(c,()=>{c&&cr(()=>{u.value&&u.value.focus()})}),(h,p)=>x(s)&&x(i)?(S(),T("div",Cae,[x(c)?(S(),T("div",_ae,[g("div",Sae,[g("div",Tae,[g("div",{onClick:p[0]||(p[0]=m=>x(l)()),class:"fm-absolute fm-top-0 fm-w-full fm-h-10 fm-z-[5]"}),Mae,g("label",Eae,[qe(g("input",{type:"checkbox","onUpdate:modelValue":p[1]||(p[1]=m=>x(e).notificationsOn=m),class:"fm-sr-only fm-peer"},null,512),[[Il,x(e).notificationsOn]]),Oae])]),g("div",Iae,[x(e).messages.length===0?(S(),T("p",Aae,"Chat is empty")):H("",!0),(S(!0),T(ye,null,Pe(x(e).messages,m=>(S(),T("div",Nae,[d(m)?H("",!0):(S(),T("div",Lae,[g("span",{innerHTML:m.from.name},null,8,Rae),Ge(" - "),g("span",{innerHTML:f(m.timestamp)},null,8,Pae)])),g("div",{id:"toast-message-cta",class:V([d(m)?"fm-bg-blue-600 fm-text-white fm-ml-auto":"fm-bg-gray-50 fm-text-gray-800 dark:fm-bg-gray-800 dark:fm-text-gray-400","fm-p-2 fm-relative fm-px-3 fm-max-w-[75%] fm-w-fit fm-rounded-[1.1rem]"]),role:"alert"},[g("div",{class:V(["fm-flex",d(m)?"fm-justify-end":""])},[g("div",Dae,[g("div",{class:"fm-text-sm fm-font-normal",innerHTML:m.message},null,8,$ae)])],2),d(m)?(S(),T("div",{key:0,class:"fm-text-[10px] fm-absolute fm-top-1/2 fm-opacity-50 -fm-translate-y-1/2 fm-text-gray-900 dark:fm-text-white -fm-left-8",innerHTML:f(m.timestamp)},null,8,Hae)):H("",!0)],2)]))),256))]),g("form",{onSubmit:p[3]||(p[3]=rt(m=>x(a)(),["prevent"])),class:"fm-absolute fm-w-full fm-bottom-0 fm-left-0 fm-h-[66px]"},[Fae,g("div",Bae,[qe(g("input",{type:"text",id:"chat",ref_key:"input",ref:u,"onUpdate:modelValue":p[2]||(p[2]=m=>x(e).currentMessage=m),class:"fm-block fm-mr-2 fm-p-2.5 fm-w-full fm-text-sm fm-text-gray-900 fm-bg-white fm-rounded-lg fm-border fm-border-gray-300 focus:fm-ring-blue-500 focus:fm-border-blue-500 dark:fm-bg-gray-800 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-ring-blue-500 dark:focus:fm-border-blue-500",placeholder:"Aa"},null,512),[[mn,x(e).currentMessage]]),jae])],32)])])):H("",!0),g("button",{type:"button",onClick:p[4]||(p[4]=m=>x(l)()),class:"fm-text-white fm-mr-2 fm-float-right fm-mt-2 fm-relative !fm-bg-blue-700 hover:!fm-bg-blue-800 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-blue-300 fm-font-medium fm-rounded-lg fm-text-sm fm-p-3 fm-pr-5 fm-text-center fm-inline-flex fm-items-center dark:!fm-bg-blue-600 dark:hover:!fm-bg-blue-700 dark:focus:fm-ring-blue-800 fm-justify-center fm-gap-2"},[zae,Vae,x(e).getUnreadMessageCount!==0?(S(),T("div",Uae,Le(x(e).getUnreadMessageCount),1)):H("",!0)])])):H("",!0)}}),Wae={class:"fm-flex flex-row fm-fixed fm-top-0 fm-right-0 fm-z-10 fm-h-screen fm-pt-[59px] fm-transition-transform fm--translate-x-full sm:fm-translate-x-0","aria-label":"Sidebar"},Kae={key:0,class:"fm-flex fm-flex-col fm-gap-4"},Gae=Ie({__name:"FlowmateNavigationRight",setup(t){const e=Ur();return ai(),dt(),(n,r)=>(S(),T("aside",Wae,[g("div",{class:V(["fm-w-80 fm-h-full fm-relative fm-p-3 fm-overflow-visible fm-flex fm-flex-col fm-gap-4 fm-overflow-scroll",x(e).getEditMode?"fm-justify-between":"fm-justify-end"])},[x(e).getEditMode?(S(),T("div",Kae,[x(De)("design.publish").isEnabled()?(S(),$e(pv,{key:0,title:"Status",parent:"right",menu:"status"},{default:At(()=>[he(Jie)]),_:1})):H("",!0),x(De)("design").isEnabled()?(S(),$e(pv,{key:1,title:"Page options",parent:"right",menu:"options"},{default:At(()=>[he(lae)]),_:1})):H("",!0),x(De)("design").isEnabled()?(S(),$e(pv,{key:2,title:"SEO",parent:"right",menu:"seo"},{default:At(()=>[he(wae)]),_:1})):H("",!0)])):H("",!0),x(De)("collaborate.chat").isEnabled()?(S(),$e(qae,{key:1})):H("",!0)],2)]))}}),Jae={key:0,class:"fm-inline-flex fm-items-center fm-justify-center fm-flex-shrink-0 fm-w-8 fm-h-8 fm-text-orange-500 fm-bg-orange-100 fm-rounded-lg dark:fm-bg-orange-700 dark:fm-text-orange-200"},Yae=g("svg",{"aria-hidden":"true",class:"fm-w-5 fm-h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[g("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),Xae=g("span",{class:"fm-sr-only"},"Warning icon",-1),Qae=[Yae,Xae],Zae={key:1,class:"fm-inline-flex fm-items-center fm-justify-center fm-flex-shrink-0 fm-w-8 fm-h-8 text-blue-500 bg-blue-100 rounded-lg dark:bg-blue-800 dark:text-blue-200"},ele=g("svg",{"aria-hidden":"true",class:"fm-w-5 fm-h-5 fm-text-blue-600 dark:fm-text-blue-500",focusable:"false","data-prefix":"fas","data-icon":"paper-plane",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},[g("path",{fill:"currentColor",d:"M511.6 36.86l-64 415.1c-1.5 9.734-7.375 18.22-15.97 23.05c-4.844 2.719-10.27 4.097-15.68 4.097c-4.188 0-8.319-.8154-12.29-2.472l-122.6-51.1l-50.86 76.29C226.3 508.5 219.8 512 212.8 512C201.3 512 192 502.7 192 491.2v-96.18c0-7.115 2.372-14.03 6.742-19.64L416 96l-293.7 264.3L19.69 317.5C8.438 312.8 .8125 302.2 .0625 289.1s5.469-23.72 16.06-29.77l448-255.1c10.69-6.109 23.88-5.547 34 1.406S513.5 24.72 511.6 36.86z"})],-1),tle=g("span",{class:"fm-sr-only"},"Message icon",-1),nle=[ele,tle],rle={key:2,class:"fm-inline-flex fm-items-center fm-justify-center fm-flex-shrink-0 fm-w-8 fm-h-8 fm-text-red-500 fm-bg-red-100 fm-rounded-lg dark:fm-bg-red-800 dark:fm-text-red-200"},ole=g("svg",{"aria-hidden":"true",class:"fm-w-5 fm-h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[g("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),sle=g("span",{class:"fm-sr-only"},"Error icon",-1),ile=[ole,sle],ale={key:3,class:"fm-inline-flex fm-items-center fm-justify-center fm-flex-shrink-0 fm-w-8 fm-h-8 fm-text-green-500 fm-bg-green-100 fm-rounded-lg dark:fm-bg-green-800 dark:fm-text-green-200"},lle=g("svg",{"aria-hidden":"true",class:"fm-w-5 fm-h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[g("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),cle=g("span",{class:"fm-sr-only"},"Check icon",-1),ule=[lle,cle],dle={class:"fm-pl-4 fm-text-sm fm-font-normal"},fle=["innerHTML"],hle=["innerHTML"],ple=["onClick"],mle=g("span",{class:"fm-sr-only"},"Close",-1),gle=g("svg",{"aria-hidden":"true",class:"fm-w-5 fm-h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[g("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),yle=[mle,gle],nM=Ie({__name:"FlowmateMessages",setup(t){const{isCollaborateMode:e,collaborationID:n}=Jl(),r=U3(),{removeMessage:o}=co();return(s,i)=>(S(),$e(k$,{name:"list",tag:"div",class:V(["fm-fixed fm-z-[1000] fm-right-3 fm-flex fm-flex-col fm-gap-3 fm-items-end",x(e)&&x(n)?"fm-bottom-[4.5rem]":"fm-bottom-3"])},{default:At(()=>[(S(!0),T(ye,null,Pe(x(r).getMessages,a=>(S(),T("div",{key:a.timestamp,id:"toast-simple",class:"fm-flex fm-w-fit fm-items-center fm-w-auto fm-max-w-xs fm-p-4 fm-space-x-4 fm-text-gray-500 fm-bg-white fm-divide-x fm-divide-gray-200 fm-rounded-lg fm-shadow dark:fm-text-gray-400 dark:fm-divide-gray-700 space-x dark:fm-bg-gray-800",role:"alert"},[a.type==="warning"?(S(),T("div",Jae,Qae)):H("",!0),a.type==="message"?(S(),T("div",Zae,nle)):H("",!0),a.type==="error"?(S(),T("div",rle,ile)):H("",!0),a.type==="success"?(S(),T("div",ale,ule)):H("",!0),g("div",dle,[a.errorCode?(S(),T("h3",{key:0,class:"fm-font-bold",innerHTML:a.errorCode},null,8,fle)):H("",!0),g("div",{innerHTML:a.message},null,8,hle)]),g("button",{type:"button",onClick:l=>x(o)(a.timestamp),class:"fm-ml-auto fm-border-none fm--mx-1.5 fm--my-1.5 fm-bg-white fm-text-gray-400 hover:fm-text-gray-900 fm-rounded-lg focus:fm-ring-2 focus:fm-ring-gray-300 fm-p-1.5 hover:fm-bg-gray-100 fm-inline-flex fm-h-8 fm-w-8 dark:fm-text-gray-500 dark:hover:fm-text-white dark:fm-bg-gray-800 dark:hover:fm-bg-gray-700","data-dismiss-target":"#toast-warning","aria-label":"Close"},yle,8,ple)]))),128))]),_:1},8,["class"]))}}),vle=["onClick"],ble=Ie({__name:"FlowmateBackdrop",setup(t){const e=dt(),n=()=>{e.setBackdrop(!e.getBackdrop)};return(r,o)=>(S(),T("div",{onClick:rt(n,["stop"]),class:"fm-bg-gray-900 fm-bg-opacity-50 dark:fm-bg-opacity-80 fm-fixed fm-inset-0 fm-z-20"},null,8,vle))}}),wle=()=>{const t=dt(),e=D6(),n=Ur(),r=async(c,u,d,f,h,p)=>{console.log("INIT POST LIBRARY",c,u,d,f,h,p),e.setPostLibrary([]),e.setContext(c,u,d,f,h,p),e.togglePostsPopup(),await l()},o=(c,u)=>u.findIndex(d=>d.id===c.id),s=()=>{e.setSelectedPosts([])},i=c=>{let u=e.getSelectedPosts,d=o(c,u);d>-1?u.splice(d,1):u.push(c)},a=()=>{let c=e.getActiveBlockIndex,u=e.getActiveFieldName,d=e.getSelectedPosts;d&&c!=null&&u!=null&&(t.pageContext.acf.content[c][u]=d)};async function l(){e.setPostLibraryLoading(!0);const c=ae(null),u=ae(null),d=e.getActiveLayout,f=e.getActiveFieldName,h=e.getActiveIsSetting,p=e.getActiveParent;let m;h?m=n.getConfig.config[d].settings[f]:f==="url"&&p==="internal_link"?m=n.getConfig.config[d].buttons.sub_fields[p].sub_fields[f]:p?m=n.getConfig.config[d][p][f]:m=n.getConfig.config[d][f];let v;m&&m.type==="taxonomy"?v=t.options.backend+"/wp-json/flowmate/v1/taxonomy/"+m.taxonomy:(v=t.options.backend+"/wp-json/flowmate/v1/posts",m.post_types&&(v+="?types="+m.post_types.join(","))),await fetch(v).then(b=>(b.headers.get("x-wp-totalpages")&&b.headers.get("x-wp-totalpages"),b.json())).then(b=>c.value=b).catch(b=>u.value=b),console.log("POSTS",c.value),e.setPostLibrary(c.value),e.setPostLibraryLoading(!1)}return{initPostLibrary:r,clearSelectedPosts:s,selectPost:i,saveSelectedPosts:a}},kle=()=>{const t=Ur();dt();const e=qo(),n=()=>t;return{getEditableStore:n,getEditMode:()=>n().getEditMode,initFlowmate:async()=>{const r=await e.config().getItem();r&&n().setConfig(r)}}},xle={key:0},Cle={class:"fm-opacity-50"},_le={key:1},Sle=["placeholder"],Tle=Ie({__name:"FmText",props:{block:{type:Object,required:!0},field:{type:String,required:!1,default:"default"},fieldName:{type:String,required:!0},label:{type:String,required:!0},editMode:{type:Boolean,required:!0,default:!1},configStore:{type:Object,required:!1,default:!1}},setup(t){const e=t;let n=ae(!1);const r=ae(e.block[e.fieldName]),o=i=>{console.log("KEYUP"),(i.key==="Escape"||i.key==="Enter")&&r.value.blur()},s=()=>{console.log("TOGGLE EDIT"),n.value=!n.value,n.value?cr(()=>{r.value.focus()}):document.dispatchEvent(new CustomEvent("flowmate-input-updated",{}))};return(i,a)=>(S(),T("div",null,[e.editMode?(S(),T("div",xle,[x(n)?(S(),T("span",_le,[qe(g("input",{onKeyup:o,onFocusout:s,ref_key:"input",ref:r,"onUpdate:modelValue":a[0]||(a[0]=l=>e.block[e.fieldName]=l),type:"text",class:"fm-bg-gray-50 fm-border fm-border-gray-300 fm-text-gray-900 fm-rounded-lg focus:fm-ring-blue-500 focus:fm-border-blue-500 fm-block fm-w-full fm-p-2.5 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-ring-blue-500 dark:focus:fm-border-blue-500",placeholder:e.label},null,40,Sle),[[mn,e.block[e.fieldName]]])])):(S(),T("span",{key:0,onClick:s,class:"fm-cursor-pointer"},[Xt(i.$slots,"default",{},()=>[g("span",Cle,Le(e.label)+": Click to add ",1)])]))])):Xt(i.$slots,"default",{key:1})]))}});function _n(t){this.content=t}_n.prototype={constructor:_n,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),s=r.content.slice();return o==-1?s.push(n||t,e):(s[o+1]=e,n&&(s[o]=n)),new _n(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new _n(n)},addToStart:function(t,e){return new _n([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new _n(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),s=r.find(t);return o.splice(s==-1?o.length:s,0,e,n),new _n(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=_n.from(t),t.size?new _n(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=_n.from(t),t.size?new _n(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=_n.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};_n.from=function(t){if(t instanceof _n)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new _n(e)};function $6(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let o=t.child(r),s=e.child(r);if(o==s){n+=o.nodeSize;continue}if(!o.sameMarkup(s))return n;if(o.isText&&o.text!=s.text){for(let i=0;o.text[i]==s.text[i];i++)n++;return n}if(o.content.size||s.content.size){let i=$6(o.content,s.content,n+1);if(i!=null)return i}n+=o.nodeSize}}function H6(t,e,n,r){for(let o=t.childCount,s=e.childCount;;){if(o==0||s==0)return o==s?null:{a:n,b:r};let i=t.child(--o),a=e.child(--s),l=i.nodeSize;if(i==a){n-=l,r-=l;continue}if(!i.sameMarkup(a))return{a:n,b:r};if(i.isText&&i.text!=a.text){let c=0,u=Math.min(i.text.length,a.text.length);for(;c<u&&i.text[i.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(i.content.size||a.content.size){let c=H6(i.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}let ce=class Xn{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,o=0,s){for(let i=0,a=0;a<n;i++){let l=this.content[i],c=a+l.nodeSize;if(c>e&&r(l,o+a,s||null,i)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,o+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,o){let s="",i=!0;return this.nodesBetween(e,n,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,n-l),i=!r):a.isLeaf?(o?s+=typeof o=="function"?o(a):o:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),i=!r):!i&&a.isBlock&&(s+=r,i=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,o=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)o.push(e.content[s]);return new Xn(o,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],o=0;if(n>e)for(let s=0,i=0;i<n;s++){let a=this.content[s],l=i+a.nodeSize;l>e&&((i<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-i),Math.min(a.text.length,n-i)):a=a.cut(Math.max(0,e-i-1),Math.min(a.content.size,n-i-1))),r.push(a),o+=a.nodeSize),i=l}return new Xn(r,o)}cutByIndex(e,n){return e==n?Xn.empty:e==0&&n==this.content.length?this:new Xn(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let o=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new Xn(o,s)}addToStart(e){return new Xn([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Xn(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let o=this.content[n];e(o,r,n),r+=o.nodeSize}}findDiffStart(e,n=0){return $6(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return H6(this,e,n,r)}findIndex(e,n=-1){if(e==0)return _p(0,e);if(e==this.size)return _p(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,o=0;;r++){let s=this.child(r),i=o+s.nodeSize;if(i>=e)return i==e||n>0?_p(r+1,i):_p(r,o);o=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Xn.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Xn(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Xn.empty;let n,r=0;for(let o=0;o<e.length;o++){let s=e[o];r+=s.nodeSize,o&&s.isText&&e[o-1].sameMarkup(s)?(n||(n=e.slice(0,o)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new Xn(n||e,r)}static from(e){if(!e)return Xn.empty;if(e instanceof Xn)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Xn([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};ce.empty=new ce([],0);const mv={index:0,offset:0};function _p(t,e){return mv.index=t,mv.offset=e,mv}function Sg(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Sg(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Sg(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Tt=class X1{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let o=0;o<e.length;o++){let s=e[o];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,o));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,o)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Sg(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);return r.create(n.attrs)}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return X1.none;if(e instanceof X1)return[e];let n=e.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}};Tt.none=[];let Tg=class extends Error{},xe=class fc{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=B6(this.content,e+this.openStart,n);return r&&new fc(r,this.openStart,this.openEnd)}removeBetween(e,n){return new fc(F6(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return fc.empty;let r=n.openStart||0,o=n.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new fc(ce.fromJSON(e,n.content),r,o)}static maxOpen(e,n=!0){let r=0,o=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)o++;return new fc(e,r,o)}};xe.empty=new xe(ce.empty,0,0);function F6(t,e,n){let{index:r,offset:o}=t.findIndex(e),s=t.maybeChild(r),{index:i,offset:a}=t.findIndex(n);if(o==e||s.isText){if(a!=n&&!t.child(i).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=i)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(F6(s.content,e-o-1,n-o-1)))}function B6(t,e,n,r){let{index:o,offset:s}=t.findIndex(e),i=t.maybeChild(o);if(s==e||i.isText)return r&&!r.canReplace(o,o,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=B6(i.content,e-s-1,n);return a&&t.replaceChild(o,i.copy(a))}function Mle(t,e,n){if(n.openStart>t.depth)throw new Tg("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Tg("Inconsistent open depths");return j6(t,e,n,0)}function j6(t,e,n,r){let o=t.index(r),s=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){let i=j6(t,e,n,r+1);return s.copy(s.content.replaceChild(o,i))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let i=t.parent,a=i.content;return hl(i,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:i,end:a}=Ele(n,t);return hl(s,V6(t,i,a,e,r))}else return hl(s,Mg(t,e,r))}function z6(t,e){if(!e.type.compatibleContent(t.type))throw new Tg("Cannot join "+e.type.name+" onto "+t.type.name)}function Q1(t,e,n){let r=t.node(n);return z6(r,e.node(n)),r}function fl(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function df(t,e,n,r){let o=(e||t).node(n),s=0,i=e?e.index(n):o.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(fl(t.nodeAfter,r),s++));for(let a=s;a<i;a++)fl(o.child(a),r);e&&e.depth==n&&e.textOffset&&fl(e.nodeBefore,r)}function hl(t,e){return t.type.checkContent(e),t.copy(e)}function V6(t,e,n,r,o){let s=t.depth>o&&Q1(t,e,o+1),i=r.depth>o&&Q1(n,r,o+1),a=[];return df(null,t,o,a),s&&i&&e.index(o)==n.index(o)?(z6(s,i),fl(hl(s,V6(t,e,n,r,o+1)),a)):(s&&fl(hl(s,Mg(t,e,o+1)),a),df(e,n,o,a),i&&fl(hl(i,Mg(n,r,o+1)),a)),df(r,null,o,a),new ce(a)}function Mg(t,e,n){let r=[];if(df(null,t,n,r),t.depth>n){let o=Q1(t,e,n+1);fl(hl(o,Mg(t,e,n+1)),r)}return df(e,null,n,r),new ce(r)}function Ele(t,e){let n=e.depth-t.openStart,r=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)r=e.node(o).copy(ce.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}let rM=class Z1{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(n);return r?e.child(n).cut(r):o}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],o=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)o+=r.child(s).nodeSize;return o}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Tt.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),o=e.maybeChild(n);if(!r){let a=r;r=o,o=a}let s=r.marks;for(var i=0;i<s.length;i++)s[i].type.spec.inclusive===!1&&(!o||!s[i].isInSet(o.marks))&&(s=s[i--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,o=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!o||!r[s].isInSet(o.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Eg(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],o=0,s=n;for(let i=e;;){let{index:a,offset:l}=i.content.findIndex(s),c=s-l;if(r.push(i,a,o+l),!c||(i=i.child(a),i.isText))break;s=c-1,o+=l+1}return new Z1(n,r,s)}static resolveCached(e,n){for(let o=0;o<gv.length;o++){let s=gv[o];if(s.pos==n&&s.doc==e)return s}let r=gv[yv]=Z1.resolve(e,n);return yv=(yv+1)%Ole,r}},gv=[],yv=0,Ole=12;class Eg{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Ile=Object.create(null);let pl=class ew{constructor(e,n,r,o=Tt.none){this.type=e,this.attrs=n,this.marks=o,this.content=r||ce.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,o=0){this.content.nodesBetween(e,n,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,o){return this.content.textBetween(e,n,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Sg(this.attrs,n||e.defaultAttrs||Ile)&&Tt.sameSet(this.marks,r||Tt.none)}copy(e=null){return e==this.content?this:new ew(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new ew(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return xe.empty;let o=this.resolve(e),s=this.resolve(n),i=r?0:o.sharedDepth(n),a=o.start(i),l=o.node(i).content.cut(o.pos-a,s.pos-a);return new xe(l,o.depth-i,s.depth-i)}replace(e,n,r){return Mle(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:o}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(o==e||n.isText)return n;e-=o+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}resolve(e){return rM.resolveCached(this,e)}resolveNoCache(e){return rM.resolve(this,e)}rangeHasMark(e,n,r){let o=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),U6(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=ce.empty,o=0,s=r.childCount){let i=this.contentMatchAt(e).matchFragment(r,o,s),a=i&&i.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=o;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;let s=this.contentMatchAt(e).matchType(r),i=s&&s.matchFragment(this.content,n);return i?i.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=Tt.none;for(let n=0;n<this.marks.length;n++)e=this.marks[n].addToSet(e);if(!Tt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let o=ce.fromJSON(e,n.content);return e.nodeType(n.type).create(n.attrs,o,r)}};pl.prototype.text=void 0;let Ale=class tw extends pl{constructor(e,n,r,o){if(super(e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):U6(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new tw(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new tw(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}};function U6(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}let Jf=class q6{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new Nle(e,n);if(r.next==null)return q6.empty;let o=W6(r);r.next&&r.err("Unexpected trailing text");let s=Fle(Hle(o));return Ble(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let o=this;for(let s=n;o&&s<r;s++)o=o.matchType(e.child(s).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let o=[this];function s(i,a){let l=i.matchFragment(e,r);if(l&&(!n||l.validEnd))return ce.from(a.map(c=>c.createAndFill()));for(let c=0;c<i.next.length;c++){let{type:u,next:d}=i.next[c];if(!(u.isText||u.hasRequiredAttrs())&&o.indexOf(d)==-1){o.push(d);let f=s(d,a.concat(u));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),s=o.match;if(s.matchType(e)){let i=[];for(let a=o;a.type;a=a.via)i.push(a.type);return i.reverse()}for(let i=0;i<s.next.length;i++){let{type:a,next:l}=s.next[i];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!o.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:o}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&n(r.next[o].next)}return n(this),e.map((r,o)=>{let s=o+(r.validEnd?"*":" ")+" ";for(let i=0;i<r.next.length;i++)s+=(i?", ":"")+r.next[i].type.name+"->"+e.indexOf(r.next[i].next);return s}).join(`
`)}};Jf.empty=new Jf(!0);class Nle{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function W6(t){let e=[];do e.push(Lle(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Lle(t){let e=[];do e.push(Rle(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Rle(t){let e=$le(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Ple(t,e);else break;return e}function oM(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Ple(t,e){let n=oM(t),r=n;return t.eat(",")&&(t.next!="}"?r=oM(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Dle(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let o=[];for(let s in n){let i=n[s];i.groups.indexOf(e)>-1&&o.push(i)}return o.length==0&&t.err("No node type or group '"+e+"' found"),o}function $le(t){if(t.eat("(")){let e=W6(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Dle(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Hle(t){let e=[[]];return o(s(t,0),n()),e;function n(){return e.push([])-1}function r(i,a,l){let c={term:l,to:a};return e[i].push(c),c}function o(i,a){i.forEach(l=>l.to=a)}function s(i,a){if(i.type=="choice")return i.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(i.type=="seq")for(let l=0;;l++){let c=s(i.exprs[l],a);if(l==i.exprs.length-1)return c;o(c,a=n())}else if(i.type=="star"){let l=n();return r(a,l),o(s(i.expr,l),l),[r(l)]}else if(i.type=="plus"){let l=n();return o(s(i.expr,a),l),o(s(i.expr,l),l),[r(l)]}else{if(i.type=="opt")return[r(a)].concat(s(i.expr,a));if(i.type=="range"){let l=a;for(let c=0;c<i.min;c++){let u=n();o(s(i.expr,l),u),l=u}if(i.max==-1)o(s(i.expr,l),l);else for(let c=i.min;c<i.max;c++){let u=n();r(l,u),o(s(i.expr,l),u),l=u}return[r(l)]}else{if(i.type=="name")return[r(a,void 0,i.value)];throw new Error("Unknown expr type")}}}}function K6(t,e){return e-t}function sM(t,e){let n=[];return r(e),n.sort(K6);function r(o){let s=t[o];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(o);for(let i=0;i<s.length;i++){let{term:a,to:l}=s[i];!a&&n.indexOf(l)==-1&&r(l)}}}function Fle(t){let e=Object.create(null);return n(sM(t,0));function n(r){let o=[];r.forEach(i=>{t[i].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<o.length;u++)o[u][0]==a&&(c=o[u][1]);sM(t,l).forEach(u=>{c||o.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new Jf(r.indexOf(t.length-1)>-1);for(let i=0;i<o.length;i++){let a=o[i][1].sort(K6);s.next.push({type:o[i][0],next:e[a.join(",")]||n(a)})}return s}}function Ble(t,e){for(let n=0,r=[t];n<r.length;n++){let o=r[n],s=!o.validEnd,i=[];for(let a=0;a<o.next.length;a++){let{type:l,next:c}=o.next[a];i.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function G6(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function J6(t,e){let n=Object.create(null);for(let r in t){let o=e&&e[r];if(o===void 0){let s=t[r];if(s.hasDefault)o=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function Y6(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new jle(t[n]);return e}let iM=class X6{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Y6(r.attrs),this.defaultAttrs=G6(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Jf.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:J6(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new pl(this,this.computeAttrs(e),ce.from(n),Tt.setFrom(r))}createChecked(e=null,n,r){return n=ce.from(n),this.checkContent(n),new pl(this,this.computeAttrs(e),n,Tt.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=ce.from(n),n.size){let i=this.contentMatch.fillBefore(n);if(!i)return null;n=i.append(n)}let o=this.contentMatch.matchFragment(n),s=o&&o.fillBefore(ce.empty,!0);return s?new pl(this,e,n.append(s),Tt.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Tt.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,i)=>r[s]=new X6(s,n,i));let o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};class jle{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}let Q6=class Z6{constructor(e,n,r,o){this.name=e,this.rank=n,this.schema=r,this.spec=o,this.attrs=Y6(o.attrs),this.excluded=null;let s=G6(this.attrs);this.instance=s?new Tt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Tt(this,J6(this.attrs,e))}static compile(e,n){let r=Object.create(null),o=0;return e.forEach((s,i)=>r[s]=new Z6(s,o++,n,i)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}excludes(e){return this.excluded.indexOf(e)>-1}};class zle{constructor(e){this.cached=Object.create(null);let n=this.spec={};for(let o in e)n[o]=e[o];n.nodes=_n.from(e.nodes),n.marks=_n.from(e.marks||{}),this.nodes=iM.compile(this.spec.nodes,this),this.marks=Q6.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let s=this.nodes[o],i=s.spec.content||"",a=s.spec.marks;s.contentMatch=r[i]||(r[i]=Jf.parse(i,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet=a=="_"?null:a?aM(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let o in this.marks){let s=this.marks[o],i=s.spec.excludes;s.excluded=i==null?[s]:i==""?[]:aM(this,i.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof iM){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,o)}text(e,n){let r=this.nodes.text;return new Ale(r,r.defaultAttrs,e,Tt.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return pl.fromJSON(this,e)}markFromJSON(e){return Tt.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function aM(t,e){let n=[];for(let r=0;r<e.length;r++){let o=e[r],s=t.marks[o],i=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(o=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(i=l)}if(!i)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}let rC=class nw{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let o=e.nodes[r.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new cM(this,n,!1);return r.addAll(e,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new cM(this,n,!0);return r.addAll(e,n.from,n.to),xe.maxOpen(r.finish())}matchTag(e,n,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let s=this.tags[o];if(qle(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let i=s.getAttrs(e);if(i===!1)continue;s.attrs=i||void 0}return s}}}matchStyle(e,n,r,o){for(let s=o?this.styles.indexOf(o)+1:0;s<this.styles.length;s++){let i=this.styles[s],a=i.style;if(!(a.indexOf(e)!=0||i.context&&!r.matchesContext(i.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(i.getAttrs){let l=i.getAttrs(n);if(l===!1)continue;i.attrs=l||void 0}return i}}}static schemaRules(e){let n=[];function r(o){let s=o.priority==null?50:o.priority,i=0;for(;i<n.length;i++){let a=n[i];if((a.priority==null?50:a.priority)<s)break}n.splice(i,0,o)}for(let o in e.marks){let s=e.marks[o].spec.parseDOM;s&&s.forEach(i=>{r(i=uM(i)),i.mark||i.ignore||i.clearMark||(i.mark=o)})}for(let o in e.nodes){let s=e.nodes[o].spec.parseDOM;s&&s.forEach(i=>{r(i=uM(i)),i.node||i.ignore||i.mark||(i.node=o)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new nw(e,nw.schemaRules(e)))}};const e8={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Vle={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},t8={ol:!0,ul:!0},Og=1,Ig=2,ff=4;function lM(t,e,n){return e!=null?(e?Og:0)|(e==="full"?Ig:0):t&&t.whitespace=="pre"?Og|Ig:n&~ff}let Sp=class{constructor(e,n,r,o,s,i,a){this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=o,this.solid=s,this.options=a,this.content=[],this.activeMarks=Tt.none,this.stashMarks=[],this.match=i||(a&ff?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(ce.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Og)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-o[0].length))}}let n=ce.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(ce.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(e){for(let n=this.stashMarks.length-1;n>=0;n--)if(e.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(e){for(let n=0,r=this.pendingMarks;n<r.length;n++){let o=r[n];(this.type?this.type.allowsMarkType(o.type):Kle(o.type,e))&&!o.isInSet(this.activeMarks)&&(this.activeMarks=o.addToSet(this.activeMarks),this.pendingMarks=o.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!e8.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},cM=class{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let o=n.topNode,s,i=lM(null,n.preserveWhitespace,0)|(r?ff:0);o?s=new Sp(o.type,o.attrs,Tt.none,Tt.none,!0,n.topMatch||o.type.contentMatch,i):r?s=new Sp(null,null,Tt.none,Tt.none,!0,null,i):s=new Sp(e.schema.topNodeType,null,Tt.none,Tt.none,!0,null,i),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){if(e.nodeType==3)this.addTextNode(e);else if(e.nodeType==1){let n=e.getAttribute("style");if(!n)this.addElement(e);else{let r=this.readStyles(Wle(n));if(!r)return;let[o,s]=r,i=this.top;for(let a=0;a<s.length;a++)this.removePendingMark(s[a],i);for(let a=0;a<o.length;a++)this.addPendingMark(o[a]);this.addElement(e);for(let a=0;a<o.length;a++)this.removePendingMark(o[a],i);for(let a=0;a<s.length;a++)this.addPendingMark(s[a])}}}addTextNode(e){let n=e.nodeValue,r=this.top;if(r.options&Ig||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&Og)r.options&Ig?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let o=r.content[r.content.length-1],s=e.previousSibling;(!o||s&&s.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)}else this.findInside(e)}addElement(e,n){let r=e.nodeName.toLowerCase(),o;t8.hasOwnProperty(r)&&this.parser.normalizeLists&&Ule(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(o=this.parser.matchTag(e,this,n));if(s?s.ignore:Vle.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let i,a=this.top,l=this.needsBlock;if(e8.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),i=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}this.addAll(e),i&&this.sync(a),this.needsBlock=l}else this.addElementByRule(e,s,s.consuming===!1?o:void 0)}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let n=Tt.none,r=Tt.none;for(let o=0;o<e.length;o+=2)for(let s=void 0;;){let i=this.parser.matchStyle(e[o],e[o+1],this,s);if(!i)break;if(i.ignore)return null;if(i.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{i.clearMark(a)&&(r=a.addToSet(r))}):n=this.parser.schema.marks[i.mark].create(i.attrs).addToSet(n),i.consuming===!1)s=i;else break}return[n,r]}addElementByRule(e,n,r){let o,s,i;n.node?(s=this.parser.schema.nodes[n.node],s.isLeaf?this.insertNode(s.create(n.attrs))||this.leafFallback(e):o=this.enter(s,n.attrs||null,n.preserveWhitespace)):(i=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(i));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l)}o&&this.sync(a)&&this.open--,i&&this.removePendingMark(i,a)}addAll(e,n,r){let o=n||0;for(let s=n?e.childNodes[n]:e.firstChild,i=r==null?null:e.childNodes[r];s!=i;s=s.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(s);this.findAtPoint(e,o)}findPlace(e){let n,r;for(let o=this.open;o>=0;o--){let s=this.nodes[o],i=s.findWrapping(e);if(i&&(!n||n.length>i.length)&&(n=i,r=s,!i.length)||s.solid)break}if(!n)return!1;this.sync(r);for(let o=0;o<n.length;o++)this.enterInner(n[o],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(e)){this.closeExtra();let n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));let r=n.activeMarks;for(let o=0;o<e.marks.length;o++)(!n.type||n.type.allowsMarkType(e.marks[o].type))&&(r=e.marks[o].addToSet(r));return n.content.push(e.mark(r)),!0}return!1}enter(e,n,r){let o=this.findPlace(e.create(n));return o&&this.enterInner(e,n,!0,r),o}enterInner(e,n=null,r=!1,o){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let i=lM(e,o,s.options);s.options&ff&&s.content.length==0&&(i|=ff),this.nodes.push(new Sp(e,n,s.activeMarks,s.pendingMarks,r,null,i)),this.open++}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&n.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(o?0:1),i=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(i(a-1,l))return!0;return!1}else{let u=l>0||l==0&&o?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return i(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let n=Gle(e,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,n){for(let r=this.open;r>=0;r--){let o=this.nodes[r];if(o.pendingMarks.lastIndexOf(e)>-1)o.pendingMarks=e.removeFromSet(o.pendingMarks);else{o.activeMarks=e.removeFromSet(o.activeMarks);let s=o.popFromStashMark(e);s&&o.type&&o.type.allowsMarkType(s.type)&&(o.activeMarks=s.addToSet(o.activeMarks))}if(o==n)break}}};function Ule(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&t8.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function qle(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Wle(t){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,n,r=[];for(;n=e.exec(t);)r.push(n[1],n[2].trim());return r}function uM(t){let e={};for(let n in t)e[n]=t[n];return e}function Kle(t,e){let n=e.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(t))continue;let s=[],i=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&i(u))return!0}};if(i(o.contentMatch))return!0}}function Gle(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}let qh=class Td{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=vv(n).createDocumentFragment());let o=r,s=[];return e.forEach(i=>{if(s.length||i.marks.length){let a=0,l=0;for(;a<s.length&&l<i.marks.length;){let c=i.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)o=s.pop()[1];for(;l<i.marks.length;){let c=i.marks[l++],u=this.serializeMark(c,i.isInline,n);u&&(s.push([c,o]),o.appendChild(u.dom),o=u.contentDOM||u.dom)}}o.appendChild(this.serializeNodeInner(i,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:o}=Td.renderSpec(vv(n),this.nodes[e.type.name](e));if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,o)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let o=e.marks.length-1;o>=0;o--){let s=this.serializeMark(e.marks[o],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let o=this.marks[e.type.name];return o&&Td.renderSpec(vv(r),o(e,n))}static renderSpec(e,n,r=null){if(typeof n=="string")return{dom:e.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;let o=n[0],s=o.indexOf(" ");s>0&&(r=o.slice(0,s),o=o.slice(s+1));let i,a=r?e.createElementNS(r,o):e.createElement(o),l=n[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let u in l)if(l[u]!=null){let d=u.indexOf(" ");d>0?a.setAttributeNS(u.slice(0,d),u.slice(d+1),l[u]):a.setAttribute(u,l[u])}}for(let u=c;u<n.length;u++){let d=n[u];if(d===0){if(u<n.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:f,contentDOM:h}=Td.renderSpec(e,d,r);if(a.appendChild(f),h){if(i)throw new RangeError("Multiple content holes");i=h}}}return{dom:a,contentDOM:i}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Td(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=dM(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return dM(e.marks)}};function dM(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function vv(t){return t.document||window.document}const n8=65535,r8=Math.pow(2,16);function Jle(t,e){return t+e*r8}function fM(t){return t&n8}function Yle(t){return(t-(t&n8))/r8}const o8=1,s8=2,dm=4,i8=8;class rw{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&i8)>0}get deletedBefore(){return(this.delInfo&(o8|dm))>0}get deletedAfter(){return(this.delInfo&(s8|dm))>0}get deletedAcross(){return(this.delInfo&dm)>0}}let du=class hc{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&hc.empty)return hc.empty}recover(e){let n=0,r=fM(e);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+Yle(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let o=0,s=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?o:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+i],d=l+c;if(e<=d){let f=c?e==l?-1:e==d?1:n:n,h=l+o+(f<0?0:u);if(r)return h;let p=e==(n<0?l:d)?null:Jle(a/3,e-l),m=e==l?s8:e==d?o8:dm;return(n<0?e!=l:e!=d)&&(m|=i8),new rw(h,m,p)}o+=u-c}return r?e+o:new rw(e+o,0,null)}touches(e,n){let r=0,o=fM(n),s=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==o*3)return!0;r+=this.ranges[a+i]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,s=0;o<this.ranges.length;o+=3){let i=this.ranges[o],a=i-(this.inverted?s:0),l=i+(this.inverted?0:s),c=this.ranges[o+n],u=this.ranges[o+r];e(a,a+c,l,l+u),s+=u-c}}invert(){return new hc(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?hc.empty:new hc(e<0?[0,-e,0]:[0,0,e])}};du.empty=new du([]);let a8=class fm{constructor(e=[],n,r=0,o=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=o}slice(e=0,n=this.maps.length){return new fm(this.maps,this.mirror,e,n)}copy(){return new fm(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let o=e.getMirror(n);this.appendMap(e.maps[n],o!=null&&o<n?r+o:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let o=e.getMirror(n);this.appendMap(e.maps[n].invert(),o!=null&&o>n?r-o-1:void 0)}}invert(){let e=new fm;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let o=0;for(let s=this.from;s<this.to;s++){let i=this.maps[s],a=i.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this.maps[l].recover(a.recover);continue}}o|=a.delInfo,e=a.pos}return r?e:new rw(e,o,null)}};const bv=Object.create(null);let Tr=class{getMap(){return du.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=bv[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in bv)throw new RangeError("Duplicate use of step JSON ID "+e);return bv[e]=n,n.prototype.jsonID=e,n}},pr=class Md{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Md(e,null)}static fail(e){return new Md(null,e)}static fromReplace(e,n,r,o){try{return Md.ok(e.replace(n,r,o))}catch(s){if(s instanceof Tg)return Md.fail(s.message);throw s}}};function oC(t,e,n){let r=[];for(let o=0;o<t.childCount;o++){let s=t.child(o);s.content.size&&(s=s.copy(oC(s.content,e,s))),s.isInline&&(s=e(s,n,o)),r.push(s)}return ce.fromArray(r)}class Vi extends Tr{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),s=new xe(oC(n.content,(i,a)=>!i.isAtom||!a.type.allowsMarkType(this.mark.type)?i:i.mark(this.mark.addToSet(i.marks)),o),n.openStart,n.openEnd);return pr.fromReplace(e,this.from,this.to,s)}invert(){return new Wh(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Vi(n.pos,r.pos,this.mark)}merge(e){return e instanceof Vi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Vi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Vi(n.from,n.to,e.markFromJSON(n.mark))}}Tr.jsonID("addMark",Vi);let Wh=class Ed extends Tr{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new xe(oC(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),n.openStart,n.openEnd);return pr.fromReplace(e,this.from,this.to,r)}invert(){return new Vi(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ed(n.pos,r.pos,this.mark)}merge(e){return e instanceof Ed&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ed(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ed(n.from,n.to,e.markFromJSON(n.mark))}};Tr.jsonID("removeMark",Wh);class Ui extends Tr{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return pr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return pr.fromReplace(e,this.pos,this.pos+1,new xe(ce.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new Ui(this.pos,n.marks[o]);return new Ui(this.pos,this.mark)}}return new sC(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ui(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ui(n.pos,e.markFromJSON(n.mark))}}Tr.jsonID("addNodeMark",Ui);let sC=class ow extends Tr{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return pr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return pr.fromReplace(e,this.pos,this.pos+1,new xe(ce.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Ui(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ow(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ow(n.pos,e.markFromJSON(n.mark))}};Tr.jsonID("removeNodeMark",sC);let ui=class qa extends Tr{constructor(e,n,r,o=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=o}apply(e){return this.structure&&sw(e,this.from,this.to)?pr.fail("Structure replace would overwrite content"):pr.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new du([this.from,this.to-this.from,this.slice.size])}invert(e){return new qa(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new qa(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof qa)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?xe.empty:new xe(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new qa(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?xe.empty:new xe(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new qa(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new qa(n.from,n.to,xe.fromJSON(e,n.slice),!!n.structure)}};Tr.jsonID("replace",ui);let Sr=class hm extends Tr{constructor(e,n,r,o,s,i,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=s,this.insert=i,this.structure=a}apply(e){if(this.structure&&(sw(e,this.from,this.gapFrom)||sw(e,this.gapTo,this.to)))return pr.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return pr.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?pr.fromReplace(e,this.from,this.to,r):pr.fail("Content does not fit in gap")}getMap(){return new du([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new hm(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=e.map(this.gapFrom,-1),s=e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||s>r.pos?null:new hm(n.pos,r.pos,o,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new hm(n.from,n.to,n.gapFrom,n.gapTo,xe.fromJSON(e,n.slice),n.insert,!!n.structure)}};Tr.jsonID("replaceAround",Sr);function sw(t,e,n){let r=t.resolve(e),o=n-e,s=r.depth;for(;o>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,o--;if(o>0){let i=r.node(s).maybeChild(r.indexAfter(s));for(;o>0;){if(!i||i.isLeaf)return!0;i=i.firstChild,o--}}return!1}function Xle(t,e,n,r){let o=[],s=[],i,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let f=Math.max(c,e),h=Math.min(c+l.nodeSize,n),p=r.addToSet(d);for(let m=0;m<d.length;m++)d[m].isInSet(p)||(i&&i.to==f&&i.mark.eq(d[m])?i.to=h:o.push(i=new Wh(f,h,d[m])));a&&a.to==f?a.to=h:s.push(a=new Vi(f,h,r))}}),o.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function Qle(t,e,n,r){let o=[],s=0;t.doc.nodesBetween(e,n,(i,a)=>{if(!i.isInline)return;s++;let l=null;if(r instanceof Q6){let c=i.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(i.marks)&&(l=[r]):l=i.marks;if(l&&l.length){let c=Math.min(a+i.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],f;for(let h=0;h<o.length;h++){let p=o[h];p.step==s-1&&d.eq(o[h].style)&&(f=p)}f?(f.to=c,f.step=s):o.push({style:d,from:Math.max(a,e),to:c,step:s})}}}),o.forEach(i=>t.step(new Wh(i.from,i.to,i.style)))}function Zle(t,e,n,r=n.contentMatch){let o=t.doc.nodeAt(e),s=[],i=e+1;for(let a=0;a<o.childCount;a++){let l=o.child(a),c=i+l.nodeSize,u=r.matchType(l.type);if(!u)s.push(new ui(i,c,xe.empty));else{r=u;for(let d=0;d<l.marks.length;d++)n.allowsMarkType(l.marks[d].type)||t.step(new Wh(i,c,l.marks[d]))}i=c}if(!r.validEnd){let a=r.fillBefore(ce.empty,!0);t.replace(i,i,new xe(a,0,0))}for(let a=s.length-1;a>=0;a--)t.step(s[a])}function ece(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Ju(t){let e=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth;;--n){let r=t.$from.node(n),o=t.$from.index(n),s=t.$to.indexAfter(n);if(n<t.depth&&r.canReplace(o,s,e))return n;if(n==0||r.type.spec.isolating||!ece(r,o,s))break}return null}function tce(t,e,n){let{$from:r,$to:o,depth:s}=e,i=r.before(s+1),a=o.after(s+1),l=i,c=a,u=ce.empty,d=0;for(let p=s,m=!1;p>n;p--)m||r.index(p)>0?(m=!0,u=ce.from(r.node(p).copy(u)),d++):l--;let f=ce.empty,h=0;for(let p=s,m=!1;p>n;p--)m||o.after(p+1)<o.end(p)?(m=!0,f=ce.from(o.node(p).copy(f)),h++):c++;t.step(new Sr(l,c,i,a,new xe(u.append(f),d,h),u.size-d,!0))}function iC(t,e,n=null,r=t){let o=nce(t,e),s=o&&rce(r,e);return s?o.map(hM).concat({type:e,attrs:n}).concat(s.map(hM)):null}function hM(t){return{type:t,attrs:null}}function nce(t,e){let{parent:n,startIndex:r,endIndex:o}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let i=s.length?s[0]:e;return n.canReplaceWith(r,o,i)?s:null}function rce(t,e){let{parent:n,startIndex:r,endIndex:o}=t,s=n.child(r),i=e.contentMatch.findWrapping(s.type);if(!i)return null;let a=(i.length?i[i.length-1]:e).contentMatch;for(let l=r;a&&l<o;l++)a=a.matchType(n.child(l).type);return!a||!a.validEnd?null:i}function oce(t,e,n){let r=ce.empty;for(let i=n.length-1;i>=0;i--){if(r.size){let a=n[i].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=ce.from(n[i].type.create(n[i].attrs,r))}let o=e.start,s=e.end;t.step(new Sr(o,s,o,s,new xe(r,0,0),n.length,!0))}function sce(t,e,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(i,a)=>{if(i.isTextblock&&!i.hasMarkup(r,o)&&ice(t.doc,t.mapping.slice(s).map(a),r)){t.clearIncompatible(t.mapping.slice(s).map(a,1),r);let l=t.mapping.slice(s),c=l.map(a,1),u=l.map(a+i.nodeSize,1);return t.step(new Sr(c,u,c+1,u-1,new xe(ce.from(r.create(o,null,i.marks)),0,0),1,!0)),!1}})}function ice(t,e,n){let r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function ace(t,e,n,r,o){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let i=n.create(r,null,o||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,i);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Sr(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new xe(ce.from(i),0,0),1,!0))}function Hc(t,e,n=1,r){let o=t.resolve(e),s=o.depth-n,i=r&&r[r.length-1]||o.parent;if(s<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!i.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,u=n-2;c>s;c--,u--){let d=o.node(c),f=o.index(c);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(f,d.childCount),p=r&&r[u+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[u]||d;if(!d.canReplace(f+1,d.childCount)||!m.type.validContent(h))return!1}let a=o.indexAfter(s),l=r&&r[0];return o.node(s).canReplaceWith(a,a,l?l.type:o.node(s+1).type)}function lce(t,e,n=1,r){let o=t.doc.resolve(e),s=ce.empty,i=ce.empty;for(let a=o.depth,l=o.depth-n,c=n-1;a>l;a--,c--){s=ce.from(o.node(a).copy(s));let u=r&&r[c];i=ce.from(u?u.type.create(u.attrs,i):o.node(a).copy(i))}t.step(new ui(e,e,new xe(s.append(i),n,n),!0))}function _a(t,e){let n=t.resolve(e),r=n.index();return l8(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function l8(t,e){return!!(t&&e&&!t.isLeaf&&t.canAppend(e))}function c8(t,e,n=-1){let r=t.resolve(e);for(let o=r.depth;;o--){let s,i,a=r.index(o);if(o==r.depth?(s=r.nodeBefore,i=r.nodeAfter):n>0?(s=r.node(o+1),a++,i=r.node(o).maybeChild(a)):(s=r.node(o).maybeChild(a-1),i=r.node(o+1)),s&&!s.isTextblock&&l8(s,i)&&r.node(o).canReplace(a,a+1))return e;if(o==0)break;e=n<0?r.before(o):r.after(o)}}function cce(t,e,n){let r=new ui(e-n,e+n,xe.empty,!0);t.step(r)}function uce(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let s=r.index(o);if(r.node(o).canReplaceWith(s,s,n))return r.before(o+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let s=r.indexAfter(o);if(r.node(o).canReplaceWith(s,s,n))return r.after(o+1);if(s<r.node(o).childCount)return null}return null}function u8(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let o=n.content;for(let s=0;s<n.openStart;s++)o=o.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let i=r.depth;i>=0;i--){let a=i==r.depth?0:r.pos<=(r.start(i+1)+r.end(i+1))/2?-1:1,l=r.index(i)+(a>0?1:0),c=r.node(i),u=!1;if(s==1)u=c.canReplace(l,l,o);else{let d=c.contentMatchAt(l).findWrapping(o.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(i+1):r.after(i+1)}return null}function aC(t,e,n=e,r=xe.empty){if(e==n&&!r.size)return null;let o=t.resolve(e),s=t.resolve(n);return d8(o,s,r)?new ui(e,n,r):new dce(o,s,r).fit()}function d8(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class dce{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=ce.empty;for(let o=0;o<=e.depth;o++){let s=e.node(o);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=ce.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let s=this.placed,i=r.depth,a=o.depth;for(;i&&a&&s.childCount==1;)s=s.firstChild.content,i--,a--;let l=new xe(s,i,a);return e>-1?new Sr(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new ui(r.pos,o.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(o=0),s.type.spec.isolating&&o<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let o,s=null;r?(s=wv(this.unplaced.content,r-1).firstChild,o=s.content):o=this.unplaced.content;let i=o.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(i?c.matchType(i.type)||(d=c.fillBefore(ce.from(i),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:d};if(n==2&&i&&(u=c.findWrapping(i.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=wv(e,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new xe(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=wv(e,n);if(o.childCount<=1&&n>0){let s=e.size-n<=n+o.size;this.unplaced=new xe(Od(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new xe(Od(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:o,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let i=this.unplaced,a=r?r.content:i.content,l=i.openStart-e,c=0,u=[],{match:d,type:f}=this.frontier[n];if(o){for(let m=0;m<o.childCount;m++)u.push(o.child(m));d=d.matchFragment(o)}let h=a.size+e-(i.content.size-i.openEnd);for(;c<a.childCount;){let m=a.child(c),v=d.matchType(m.type);if(!v)break;c++,(c>1||l==0||m.content.size)&&(d=v,u.push(f8(m.mark(f.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?h:-1)))}let p=c==a.childCount;p||(h=-1),this.placed=Id(this.placed,n,ce.from(u)),this.frontier[n].match=d,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,v=a;m<h;m++){let b=v.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),v=b.content}this.unplaced=p?e==0?xe.empty:new xe(Od(i.content,e-1,1),e-1,h<0?i.openEnd:e-1):new xe(Od(i.content,e,c),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!kv(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:o}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),i=kv(e,n,o,r,s);if(i){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=kv(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:i,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Id(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let o=e.node(r),s=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,s)}return e}openFrontierNode(e,n=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=Id(this.placed,this.depth,ce.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(ce.empty,!0);e.childCount&&(this.placed=Id(this.placed,this.frontier.length,e))}}function Od(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Od(t.firstChild.content,e-1,n)))}function Id(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Id(t.lastChild.content,e-1,n)))}function wv(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function f8(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,f8(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(ce.empty,!0)))),t.copy(r)}function kv(t,e,n,r,o){let s=t.node(e),i=o?t.indexAfter(e):t.index(e);if(i==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,i);return a&&!fce(n,s.content,i)?a:null}function fce(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function hce(t){return t.spec.defining||t.spec.definingForContent}function pce(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),s=t.doc.resolve(n);if(d8(o,s,r))return t.step(new ui(e,n,r));let i=p8(o,t.doc.resolve(n));i[i.length-1]==0&&i.pop();let a=-(o.depth+1);i.unshift(a);for(let f=o.depth,h=o.pos-1;f>0;f--,h--){let p=o.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;i.indexOf(f)>-1?a=f:o.before(f)==h&&i.splice(1,0,-f)}let l=i.indexOf(a),c=[],u=r.openStart;for(let f=r.content,h=0;;h++){let p=f.firstChild;if(c.push(p),h==r.openStart)break;f=p.content}for(let f=u-1;f>=0;f--){let h=c[f].type,p=hce(h);if(p&&o.node(l).type!=h)u=f;else if(p||!h.isTextblock)break}for(let f=r.openStart;f>=0;f--){let h=(f+u+1)%(r.openStart+1),p=c[h];if(p)for(let m=0;m<i.length;m++){let v=i[(m+l)%i.length],b=!0;v<0&&(b=!1,v=-v);let w=o.node(v-1),k=o.index(v-1);if(w.canReplaceWith(k,k,p.type,p.marks))return t.replace(o.before(v),b?s.after(v):n,new xe(h8(r.content,0,r.openStart,h),h,r.openEnd))}}let d=t.steps.length;for(let f=i.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let h=i[f];h<0||(e=o.before(h),n=s.after(h))}}function h8(t,e,n,r,o){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(h8(s.content,e+1,n,r,s)))}if(e>r){let s=o.contentMatchAt(0),i=s.fillBefore(t).append(t);t=i.append(s.matchFragment(i).fillBefore(ce.empty,!0))}return t}function mce(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let o=uce(t.doc,e,r.type);o!=null&&(e=n=o)}t.replaceRange(e,n,new xe(ce.from(r),0,0))}function gce(t,e,n){let r=t.doc.resolve(e),o=t.doc.resolve(n),s=p8(r,o);for(let i=0;i<s.length;i++){let a=s[i],l=i==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),o.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),o.indexAfter(a-1))))return t.delete(r.before(a),o.after(a))}for(let i=1;i<=r.depth&&i<=o.depth;i++)if(e-r.start(i)==r.depth-i&&n>r.end(i)&&o.end(i)-n!=o.depth-i)return t.delete(r.before(i),n);t.delete(e,n)}function p8(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let o=r;o>=0;o--){let s=t.start(o);if(s<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(s==e.start(o)||o==t.depth&&o==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==s-1)&&n.push(o)}return n}let m8=class pm extends Tr{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return pr.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let o=n.type.create(r,null,n.marks);return pr.fromReplace(e,this.pos,this.pos+1,new xe(ce.from(o),0,n.isLeaf?0:1))}getMap(){return du.empty}invert(e){return new pm(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new pm(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new pm(n.pos,n.attr,n.value)}};Tr.jsonID("attr",m8);let fu=class extends Error{};fu=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};fu.prototype=Object.create(Error.prototype);fu.prototype.constructor=fu;fu.prototype.name="TransformError";class g8{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new a8}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new fu(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=xe.empty){let o=aC(this.doc,e,n,r);return o&&this.step(o),this}replaceWith(e,n,r){return this.replace(e,n,new xe(ce.from(r),0,0))}delete(e,n){return this.replace(e,n,xe.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return pce(this,e,n,r),this}replaceRangeWith(e,n,r){return mce(this,e,n,r),this}deleteRange(e,n){return gce(this,e,n),this}lift(e,n){return tce(this,e,n),this}join(e,n=1){return cce(this,e,n),this}wrap(e,n){return oce(this,e,n),this}setBlockType(e,n=e,r,o=null){return sce(this,e,n,r,o),this}setNodeMarkup(e,n,r=null,o){return ace(this,e,n,r,o),this}setNodeAttribute(e,n,r){return this.step(new m8(e,n,r)),this}addNodeMark(e,n){return this.step(new Ui(e,n)),this}removeNodeMark(e,n){if(!(n instanceof Tt)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new sC(e,n)),this}split(e,n=1,r){return lce(this,e,n,r),this}addMark(e,n,r){return Xle(this,e,n,r),this}removeMark(e,n,r){return Qle(this,e,n,r),this}clearIncompatible(e,n,r){return Zle(this,e,n,r),this}}const xv=Object.create(null);let Fe=class{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new y8(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=xe.empty){let r=n.content.lastChild,o=null;for(let a=0;a<n.openEnd;a++)o=r,r=r.lastChild;let s=e.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:l,$to:c}=i[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?xe.empty:n),a==0&&gM(e,s,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:i,$to:a}=o[s],l=e.mapping.slice(r),c=l.map(i.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),gM(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let o=e.parent.inlineContent?new et(e):pc(e.node(0),e.parent,e.pos,e.index(),n,r);if(o)return o;for(let s=e.depth-1;s>=0;s--){let i=n<0?pc(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):pc(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(i)return i}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new ml(e.node(0))}static atStart(e){return pc(e,e,0,0,1)||new ml(e)}static atEnd(e){return pc(e,e,e.content.size,e.childCount,-1)||new ml(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=xv[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in xv)throw new RangeError("Duplicate use of selection JSON ID "+e);return xv[e]=n,n.prototype.jsonID=e,n}getBookmark(){return et.between(this.$anchor,this.$head).getBookmark()}};Fe.prototype.visible=!0;class y8{constructor(e,n){this.$from=e,this.$to=n}}let pM=!1;function mM(t){!pM&&!t.parent.inlineContent&&(pM=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}let et=class Ad extends Fe{constructor(e,n=e){mM(e),mM(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Fe.near(r);let o=e.resolve(n.map(this.anchor));return new Ad(o.parent.inlineContent?o:r,r)}replace(e,n=xe.empty){if(super.replace(e,n),n==xe.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Ad&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new v8(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ad(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let o=e.resolve(n);return new this(o,r==n?o:e.resolve(r))}static between(e,n,r){let o=e.pos-n.pos;if((!r||o)&&(r=o>=0?1:-1),!n.parent.inlineContent){let s=Fe.findFrom(n,r,!0)||Fe.findFrom(n,-r,!0);if(s)n=s.$head;else return Fe.near(n,r)}return e.parent.inlineContent||(o==0?e=n:(e=(Fe.findFrom(e,-r,!0)||Fe.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=o<0&&(e=n))),new Ad(e,n)}};Fe.jsonID("text",et);let v8=class b8{constructor(e,n){this.anchor=e,this.head=n}map(e){return new b8(e.map(this.anchor),e.map(this.head))}resolve(e){return et.between(e.resolve(this.anchor),e.resolve(this.head))}},Ye=class Nd extends Fe{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:o}=n.mapResult(this.anchor),s=e.resolve(o);return r?Fe.near(s):new Nd(s)}content(){return new xe(ce.from(this.node),0,0)}eq(e){return e instanceof Nd&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new yce(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Nd(e.resolve(n.anchor))}static create(e,n){return new Nd(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}};Ye.prototype.visible=!1;Fe.jsonID("node",Ye);let yce=class w8{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new v8(r,r):new w8(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Ye.isSelectable(r)?new Ye(n):Fe.near(n)}},ml=class mm extends Fe{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=xe.empty){if(n==xe.empty){e.delete(0,e.doc.content.size);let r=Fe.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new mm(e)}map(e){return new mm(e)}eq(e){return e instanceof mm}getBookmark(){return vce}};Fe.jsonID("all",ml);const vce={map(){return this},resolve(t){return new ml(t)}};function pc(t,e,n,r,o,s=!1){if(e.inlineContent)return et.create(t,n);for(let i=r-(o>0?0:1);o>0?i<e.childCount:i>=0;i+=o){let a=e.child(i);if(a.isAtom){if(!s&&Ye.isSelectable(a))return Ye.create(t,n-(o<0?a.nodeSize:0))}else{let l=pc(t,a,n+o,o<0?a.childCount:0,o,s);if(l)return l}n+=a.nodeSize*o}return null}function gM(t,e,n){let r=t.steps.length-1;if(r<e)return;let o=t.steps[r];if(!(o instanceof ui||o instanceof Sr))return;let s=t.mapping.maps[r],i;s.forEach((a,l,c,u)=>{i==null&&(i=u)}),t.setSelection(Fe.near(t.doc.resolve(i),n))}const yM=1,Tp=2,vM=4;class bce extends g8{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|yM)&~Tp,this.storedMarks=null,this}get selectionSet(){return(this.updated&yM)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Tp,this}ensureMarks(e){return Tt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Tp)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Tp,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Tt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let o=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let i=this.doc.resolve(n);s=r==n?i.marks():i.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,o.text(e,s)),this.selection.empty||this.setSelection(Fe.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=vM,this}get scrolledIntoView(){return(this.updated&vM)>0}}function bM(t,e){return!e||!t?t:t.bind(e)}let Ld=class{constructor(e,n,r){this.name=e,this.init=bM(n.init,r),this.apply=bM(n.apply,r)}};const wce=[new Ld("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Ld("selection",{init(t,e){return t.selection||Fe.atStart(e.doc)},apply(t){return t.selection}}),new Ld("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Ld("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];let Cv=class{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=wce.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Ld(r.key,r.spec.state,r))})}},kce=class Rd{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),o=null;for(;;){let s=!1;for(let i=0;i<this.config.plugins.length;i++){let a=this.config.plugins[i];if(a.spec.appendTransaction){let l=o?o[i].n:0,c=o?o[i].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,i)){if(u.setMeta("appendedTransaction",e),!o){o=[];for(let d=0;d<this.config.plugins.length;d++)o.push(d<i?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}o&&(o[i]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Rd(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let s=r[o];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new bce(this)}static create(e){let n=new Cv(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Rd(n);for(let o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(e,r);return r}reconfigure(e){let n=new Cv(this.schema,e.plugins),r=n.fields,o=new Rd(n);for(let s=0;s<r.length;s++){let i=r[s].name;o[i]=this.hasOwnProperty(i)?this[i]:r[s].init(e,o)}return o}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],s=o.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(o,this[o.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new Cv(e.schema,e.plugins),s=new Rd(o);return o.fields.forEach(i=>{if(i.name=="doc")s.doc=pl.fromJSON(e.schema,n.doc);else if(i.name=="selection")s.selection=Fe.fromJSON(s.doc,n.selection);else if(i.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==i.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[i.name]=c.fromJSON.call(l,e,n[a],s);return}}s[i.name]=i.init(e,s)}}),s}};function k8(t,e,n){for(let r in t){let o=t[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=k8(o,e,{})),n[r]=o}return n}class Wn{constructor(e){this.spec=e,this.props={},e.props&&k8(e.props,this,this.props),this.key=e.key?e.key.key:x8("plugin")}getState(e){return e[this.key]}}const _v=Object.create(null);function x8(t){return t in _v?t+"$"+ ++_v[t]:(_v[t]=0,t+"$")}let qr=class{constructor(e="key"){this.key=x8(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}};const Zr=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Yf=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let wM=null;const $s=function(t,e,n){let r=wM||(wM=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},$l=function(t,e,n,r){return n&&(kM(t,e,n,r,-1)||kM(t,e,n,r,1))},xce=/^(img|br|input|textarea|hr)$/i;function kM(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:ns(t))){let s=t.parentNode;if(!s||s.nodeType!=1||_ce(t)||xce.test(t.nodeName)||t.contentEditable=="false")return!1;e=Zr(t)+(o<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(o<0?-1:0)],t.contentEditable=="false")return!1;e=o<0?ns(t):0}else return!1}}function ns(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Cce(t,e,n){for(let r=e==0,o=e==ns(t);r||o;){if(t==n)return!0;let s=Zr(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,o=o&&s==ns(t)}}function _ce(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Vy=function(t){return t.focusNode&&$l(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Xa(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function Sce(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Tce(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:r.startOffset}}}const vs=typeof navigator<"u"?navigator:null,xM=typeof document<"u"?document:null,Sa=vs&&vs.userAgent||"",iw=/Edge\/(\d+)/.exec(Sa),C8=/MSIE \d/.exec(Sa),aw=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Sa),gr=!!(C8||aw||iw),ra=C8?document.documentMode:aw?+aw[1]:iw?+iw[1]:0,zo=!gr&&/gecko\/(\d+)/i.test(Sa);zo&&+(/Firefox\/(\d+)/.exec(Sa)||[0,0])[1];const lw=!gr&&/Chrome\/(\d+)/.exec(Sa),Fn=!!lw,Mce=lw?+lw[1]:0,rr=!gr&&!!vs&&/Apple Computer/.test(vs.vendor),hu=rr&&(/Mobile\/\w+/.test(Sa)||!!vs&&vs.maxTouchPoints>2),Jr=hu||(vs?/Mac/.test(vs.platform):!1),Ece=vs?/Win/.test(vs.platform):!1,No=/Android \d/.test(Sa),Uy=!!xM&&"webkitFontSmoothing"in xM.documentElement.style,Oce=Uy?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Ice(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function vi(t,e){return typeof t=="number"?t:t[e]}function Ace(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function CM(t,e,n){let r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let i=n||t.dom;i;i=Yf(i)){if(i.nodeType!=1)continue;let a=i,l=a==s.body,c=l?Ice(s):Ace(a),u=0,d=0;if(e.top<c.top+vi(r,"top")?d=-(c.top-e.top+vi(o,"top")):e.bottom>c.bottom-vi(r,"bottom")&&(d=e.bottom-c.bottom+vi(o,"bottom")),e.left<c.left+vi(r,"left")?u=-(c.left-e.left+vi(o,"left")):e.right>c.right-vi(r,"right")&&(u=e.right-c.right+vi(o,"right")),u||d)if(l)s.defaultView.scrollBy(u,d);else{let f=a.scrollLeft,h=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let p=a.scrollLeft-f,m=a.scrollTop-h;e={left:e.left-p,top:e.top-m,right:e.right-p,bottom:e.bottom-m}}if(l)break}}function Nce(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,o;for(let s=(e.left+e.right)/2,i=n+1;i<Math.min(innerHeight,e.bottom);i+=5){let a=t.root.elementFromPoint(s,i);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,o=l.top;break}}return{refDOM:r,refTop:o,stack:_8(t.dom)}}function _8(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Yf(r));return e}function Lce({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;S8(n,r==0?0:r-e)}function S8(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:o,left:s}=t[n];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let rc=null;function Rce(t){if(t.setActive)return t.setActive();if(rc)return t.focus(rc);let e=_8(t);t.focus(rc==null?{get preventScroll(){return rc={preventScroll:!0},!0}}:void 0),rc||(rc=!1,S8(e,0))}function T8(t,e){let n,r=2e8,o,s=0,i=e.top,a=e.top,l,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=$s(u).getClientRects();else continue;for(let h=0;h<f.length;h++){let p=f[h];if(p.top<=i&&p.bottom>=a){i=Math.max(p.bottom,i),a=Math.min(p.top,a);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<r){n=u,r=m,o=m&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&m&&(s=d+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=d+1)}}return!n&&l&&(n=l,o=c,r=0),n&&n.nodeType==3?Pce(n,o):!n||r&&n.nodeType==1?{node:t,offset:s}:T8(n,o)}function Pce(t,e){let n=t.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let s=Ci(r,1);if(s.top!=s.bottom&&lC(e,s))return{node:t,offset:o+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function lC(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Dce(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function $ce(t,e,n){let{node:r,offset:o}=T8(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let i=r.getBoundingClientRect();s=i.left!=i.right&&n.left>(i.left+i.right)/2?1:-1}return t.docView.posFromDOM(r,o,s)}function Hce(t,e,n,r){let o=-1;for(let s=e,i=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent&&!i||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&!i&&(i=!0,l.left>r.left||l.top>r.top?o=a.posBefore:(l.right<r.left||l.bottom<r.top)&&(o=a.posAfter)),!a.contentDOM&&o<0)return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}s=a.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n,-1)}function M8(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=o;;){let i=t.childNodes[s];if(i.nodeType==1){let a=i.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(lC(e,c))return M8(i,e,c)}}if((s=(s+1)%r)==o)break}return t}function Fce(t,e){let n=t.dom.ownerDocument,r,o=0,s=Tce(n,e.left,e.top);s&&({node:r,offset:o}=s);let i=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!i||!t.dom.contains(i.nodeType!=1?i.parentNode:i)){let c=t.dom.getBoundingClientRect();if(!lC(e,c)||(i=M8(t.dom,e,c),!i))return null}if(rr)for(let c=i;r&&c;c=Yf(c))c.draggable&&(r=void 0);if(i=Dce(i,e),r){if(zo&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let c=r.childNodes[o],u;c.nodeName=="IMG"&&(u=c.getBoundingClientRect()).right<=e.left&&u.bottom>e.top&&o++}r==t.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(a=Hce(t,r,o,e))}a==null&&(a=$ce(t,i,e));let l=t.docView.nearestDesc(i,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function _M(t){return t.top<t.bottom||t.left<t.right}function Ci(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(_M(r))return r}return Array.prototype.find.call(n,_M)||t.getBoundingClientRect()}const Bce=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function E8(t,e,n){let{node:r,offset:o,atom:s}=t.docView.domFromPos(e,n<0?-1:1),i=Uy||zo;if(r.nodeType==3)if(i&&(Bce.test(r.nodeValue)||(n<0?!o:o==r.nodeValue.length))){let a=Ci($s(r,o,o),n);if(zo&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let l=Ci($s(r,o-1,o-1),-1);if(l.top==a.top){let c=Ci($s(r,o,o+1),-1);if(c.top!=a.top)return dd(c,c.left<l.left)}}return a}else{let a=o,l=o,c=n<0?1:-1;return n<0&&!o?(l++,c=-1):n>=0&&o==r.nodeValue.length?(a--,c=1):n<0?a--:l++,dd(Ci($s(r,a,l),c),c<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&o&&(n<0||o==ns(r))){let a=r.childNodes[o-1];if(a.nodeType==1)return Sv(a.getBoundingClientRect(),!1)}if(s==null&&o<ns(r)){let a=r.childNodes[o];if(a.nodeType==1)return Sv(a.getBoundingClientRect(),!0)}return Sv(r.getBoundingClientRect(),n>=0)}if(s==null&&o&&(n<0||o==ns(r))){let a=r.childNodes[o-1],l=a.nodeType==3?$s(a,ns(a)-(i?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(l)return dd(Ci(l,1),!1)}if(s==null&&o<ns(r)){let a=r.childNodes[o];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let l=a?a.nodeType==3?$s(a,0,i?0:1):a.nodeType==1?a:null:null;if(l)return dd(Ci(l,-1),!0)}return dd(Ci(r.nodeType==3?$s(r):r,-n),n>=0)}function dd(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Sv(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function O8(t,e,n){let r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}function jce(t,e,n){let r=e.selection,o=n=="up"?r.$from:r.$to;return O8(t,e,()=>{let{node:s}=t.docView.domFromPos(o.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let i=E8(t,o.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=$s(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?i.top-u.top>(u.bottom-i.top)*2:u.bottom-i.bottom>(i.bottom-u.top)*2))return!1}}return!0})}const zce=/[\u0590-\u08ac]/;function Vce(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,s=!o,i=o==r.parent.content.size,a=t.domSelection();return!zce.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:i:O8(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:m}=t.domSelectionRange(),v=p&&!h.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==m;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),v})}let SM=null,TM=null,MM=!1;function Uce(t,e,n){return SM==e&&TM==n?MM:(SM=e,TM=n,MM=n=="up"||n=="down"?jce(t,e,n):Vce(t,e,n))}const uo=0,EM=1,nl=2,bs=3;let Kh=class{constructor(e,n,r,o){this.parent=e,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=uo,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let o=this.children[n];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,i;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((i=s.pmViewDesc)&&i.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(i)+i.size:this.posAtStart}else{let s,i;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((i=s.pmViewDesc)&&i.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(i):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=n>Zr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!1;break}if(s.previousSibling)break}if(o==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!0;break}if(s.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,o=e;o;o=o.parentNode){let s=this.getDesc(o),i;if(s&&(!n||s.node))if(r&&(i=s.nodeDOM)&&!(i.nodeType==1?i.contains(e.nodeType==1?e:e.parentNode):i==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let o=e;o;o=o.parentNode){let s=this.getDesc(o);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],s=r+o.size;if(r==e&&s!=r){for(;!o.border&&o.children.length;)o=o.children[0];return o}if(e<s)return o.descAt(e-r-o.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let s=0;r<this.children.length;r++){let i=this.children[r],a=s+i.size;if(a>e||i instanceof R8){o=e-s;break}s=a}if(o)return this.children[r].domFromPos(o-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof I8&&s.side>=0;r--);if(n<=0){let s,i=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,i=!1);return s&&n&&i&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Zr(s.dom)+1:0}}else{let s,i=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,i=!1);return s&&i&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Zr(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,s=-1;for(let i=r,a=0;;a++){let l=this.children[a],c=i+l.size;if(o==-1&&e<=c){let u=i+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=i;for(let d=a;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){o=Zr(f.dom)+1;break}e-=f.size}o==-1&&(o=0)}if(o>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=Zr(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:e,to:n,fromOffset:o,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,o=!1){let s=Math.min(e,n),i=Math.max(e,n);for(let f=0,h=0;f<this.children.length;f++){let p=this.children[f],m=h+p.size;if(s>h&&i<m)return p.setSelection(e-h-p.border,n-h-p.border,r,o);h=m}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.getSelection(),u=!1;if((zo||rr)&&e==n){let{node:f,offset:h}=a;if(f.nodeType==3)u=!!(h&&f.nodeValue[h-1]==`
`);else{let p=f.childNodes[h-1];u=p&&(p.nodeName=="BR"||p.contentEditable=="false")}}if(zo&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let f=c.focusNode.childNodes[c.focusOffset];f&&f.contentEditable=="false"&&(o=!0)}if(!(o||u&&rr)&&$l(a.node,a.offset,c.anchorNode,c.anchorOffset)&&$l(l.node,l.offset,c.focusNode,c.focusOffset))return;let d=!1;if((c.extend||e==n)&&!u){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),d=!0}catch{}}if(!d){if(e>n){let h=a;a=l,l=h}let f=document.createRange();f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,o=0;o<this.children.length;o++){let s=this.children[o],i=r+s.size;if(r==i?e<=i&&n>=r:e<i&&n>r){let a=r+s.border,l=i-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==i?nl:EM,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=bs:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?nl:bs}r=i}this.dirty=nl}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?nl:EM;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}},I8=class extends Kh{constructor(e,n,r,o){let s,i=n.type.toDOM;if(typeof i=="function"&&(i=i(r,()=>{if(!s)return o;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(i.nodeType!=1){let a=document.createElement("span");a.appendChild(i),i=a}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(e,[],i,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==uo&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}};class qce extends Kh{constructor(e,n,r,o){super(e,[],n,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}let Ag=class cw extends Kh{constructor(e,n,r,o){super(e,[],r,o),this.mark=n}static create(e,n,r,o){let s=o.nodeViews[n.type.name],i=s&&s(n,o,r);return(!i||!i.dom)&&(i=qh.renderSpec(document,n.type.spec.toDOM(n,r))),new cw(e,n,i.dom,i.contentDOM||i.dom)}parseRule(){return this.dirty&bs||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(e){return this.dirty!=bs&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=uo){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=uo}}slice(e,n,r){let o=cw.create(this.parent,this.mark,!0,r),s=this.children,i=this.size;n<i&&(s=fw(s,n,i,r)),e>0&&(s=fw(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=o;return o.children=s,o}},Fc=class A8 extends Kh{constructor(e,n,r,o,s,i,a,l,c){super(e,[],s,i),this.node=n,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=a}static create(e,n,r,o,s,i){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return i;if(l.parent)return l.parent.posBeforeChild(l)},r,o),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=qh.renderSpec(document,n.type.spec.toDOM(n)));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let f=u;return u=$8(u,r,n),c?l=new Wce(e,n,r,o,u,d||null,f,c,s,i+1):n.isText?new N8(e,n,r,o,u,f,s):new A8(e,n,r,o,u,d||null,f,s,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>ce.empty)}return e}matchesNode(e,n,r){return this.dirty==uo&&e.eq(this.node)&&dw(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,o=n,s=e.composing?this.localCompositionInfo(e,n):null,i=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new Gce(this,i&&i.node,e);Xce(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?Tt.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,o)},(c,u,d,f)=>{l.syncToMarks(c.marks,r,e);let h;l.findNodeMatch(c,u,d,f)||a&&e.state.selection.from>o&&e.state.selection.to<o+c.nodeSize&&(h=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,d,h,e)||l.updateNextNode(c,u,d,e,f,o)||l.addNode(c,u,d,e,o),o+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==nl)&&(i&&this.protectLocalComposition(e,i),P8(this.contentDOM,this.children,e),hu&&Qce(this.dom))}localCompositionInfo(e,n){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof et)||r<n||o>n+this.node.content.size)return null;let s=e.domSelectionRange(),i=Zce(s.focusNode,s.focusOffset);if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let a=i.nodeValue,l=eue(this.node.content,a,r-n,o-n);return l<0?null:{node:i,pos:l,text:a}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:o}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let i=new qce(this,s,n,o);e.input.compositionNodes.push(i),this.children=fw(this.children,r,r+o.length,e,i)}update(e,n,r,o){return this.dirty==bs||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,o),!0)}updateInner(e,n,r,o){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=uo}updateOuterDeco(e){if(dw(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=D8(this.dom,this.nodeDOM,uw(this.outerDeco,this.node,n),uw(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}};function OM(t,e,n,r,o){$8(r,e,t);let s=new Fc(void 0,t,e,n,r,r,r,o,0);return s.contentDOM&&s.updateChildren(o,0),s}let N8=class L8 extends Fc{constructor(e,n,r,o,s,i,a){super(e,n,r,o,s,null,i,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,o){return this.dirty==bs||this.dirty!=uo&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=uo||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=uo,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let o=this.node.cut(e,n),s=document.createTextNode(o.text);return new L8(this.parent,o,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=bs)}get domAtom(){return!1}},R8=class extends Kh{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==uo&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}};class Wce extends Fc{constructor(e,n,r,o,s,i,a,l,c,u){super(e,n,r,o,s,i,a,c,u),this.spec=l}update(e,n,r,o){if(this.dirty==bs)return!1;if(this.spec.update){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,o),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r):super.setSelection(e,n,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function P8(t,e,n){let r=t.firstChild,o=!1;for(let s=0;s<e.length;s++){let i=e[s],a=i.dom;if(a.parentNode==t){for(;a!=r;)r=IM(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(a,r);if(i instanceof Ag){let l=r?r.previousSibling:t.lastChild;P8(i.contentDOM,i.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=IM(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}const hf=function(t){t&&(this.nodeName=t)};hf.prototype=Object.create(null);const rl=[new hf];function uw(t,e,n){if(t.length==0)return rl;let r=n?rl[0]:new hf,o=[r];for(let s=0;s<t.length;s++){let i=t[s].type.attrs;if(i){i.nodeName&&o.push(r=new hf(i.nodeName));for(let a in i){let l=i[a];l!=null&&(n&&o.length==1&&o.push(r=new hf(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return o}function D8(t,e,n,r){if(n==rl&&r==rl)return e;let o=e;for(let s=0;s<r.length;s++){let i=r[s],a=n[s];if(s){let l;a&&a.nodeName==i.nodeName&&o!=t&&(l=o.parentNode)&&l.nodeName.toLowerCase()==i.nodeName||(l=document.createElement(i.nodeName),l.pmIsDeco=!0,l.appendChild(o),a=rl[0]),o=l}Kce(o,a||rl[0],i)}return o}function Kce(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)o.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<o.length;s++)r.indexOf(o[s])==-1&&t.classList.add(o[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)t.style.removeProperty(o[1])}n.style&&(t.style.cssText+=n.style)}}function $8(t,e,n){return D8(t,t,rl,uw(e,n,t.nodeType!=1))}function dw(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function IM(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Gce{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Jce(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let o=0,s=this.stack.length>>1,i=Math.min(s,e.length);for(;o<i&&(o==s-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<s;)this.destroyRest(),this.top.dirty=uo,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Ag.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,o){let s=-1,i;if(o>=this.preMatch.index&&(i=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&i.matchesNode(e,n,r))s=this.top.children.indexOf(i,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,o,s){let i=this.top.children[o];return i.dirty==bs&&i.dom==i.contentDOM&&(i.dirty=nl),i.update(e,n,r,s)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=n}}updateNextNode(e,n,r,o,s,i){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Fc){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,d,f=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=bs&&dw(n,l.outerDeco));if(!f&&l.update(e,n,r,o))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(l,e,n,r,o,i)))return this.top.children[this.index]=d,d.dirty=nl,d.updateChildren(o,i+1),d.dirty=uo,this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,o,s,i){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content))return null;let a=Fc.create(this.top,n,r,o,s,i);if(!a.contentDOM)return null;a.children=e.children,e.children=[],e.destroy();for(let l of a.children)l.parent=a;return a}addNode(e,n,r,o,s){let i=Fc.create(this.top,e,n,r,o,s);i.contentDOM&&i.updateChildren(o,s+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(e,n,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let s=new I8(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Ag;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof N8)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((rr||Fn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new R8(this.top,[],r,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function Jce(t,e){let n=e,r=n.children.length,o=t.childCount,s=new Map,i=[];e:for(;o>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof Ag)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(o-1))break;--o,s.set(a,o),i.push(a)}}return{index:o,matched:s,matches:i.reverse()}}function Yce(t,e){return t.type.side-e.type.side}function Xce(t,e,n,r){let o=e.locals(t),s=0;if(o.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,o,e.forChild(s,u),c),s+=u.nodeSize}return}let i=0,a=[],l=null;for(let c=0;;){if(i<o.length&&o[i].to==s){let p=o[i++],m;for(;i<o.length&&o[i].to==s;)(m||(m=[p])).push(o[i++]);if(m){m.sort(Yce);for(let v=0;v<m.length;v++)n(m[v],c,!!l)}else n(p,c,!!l)}let u,d;if(l)d=-1,u=l,l=null;else if(c<t.childCount)d=c,u=t.child(c++);else break;for(let p=0;p<a.length;p++)a[p].to<=s&&a.splice(p--,1);for(;i<o.length&&o[i].from<=s&&o[i].to>s;)a.push(o[i++]);let f=s+u.nodeSize;if(u.isText){let p=f;i<o.length&&o[i].from<p&&(p=o[i].from);for(let m=0;m<a.length;m++)a[m].to<p&&(p=a[m].to);p<f&&(l=u.cut(p-s),u=u.cut(0,p-s),f=p,d=-1)}let h=u.isInline&&!u.isLeaf?a.filter(p=>!p.inline):a.slice();r(u,h,e.forChild(s,u),d),s=f}}function Qce(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function Zce(t,e){for(;;){if(t.nodeType==3)return t;if(t.nodeType==1&&e>0){if(t.childNodes.length>e&&t.childNodes[e].nodeType==3)return t.childNodes[e];t=t.childNodes[e-1],e=ns(t)}else if(t.nodeType==1&&e<t.childNodes.length)t=t.childNodes[e],e=0;else return null}}function eue(t,e,n,r){for(let o=0,s=0;o<t.childCount&&s<=r;){let i=t.child(o++),a=s;if(s+=i.nodeSize,!i.isText)continue;let l=i.text;for(;o<t.childCount;){let c=t.child(o++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function fw(t,e,n,r,o){let s=[];for(let i=0,a=0;i<t.length;i++){let l=t[i],c=a,u=a+=l.size;c>=n||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),o&&(s.push(o),o=void 0),u>n&&s.push(l.slice(n-c,l.size,r)))}return s}function cC(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let o=t.docView.nearestDesc(n.focusNode),s=o&&o.size==0,i=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(i<0)return null;let a=r.resolve(i),l,c;if(Vy(n)){for(l=a;o&&!o.node;)o=o.parent;let u=o.node;if(o&&u.isAtom&&Ye.isSelectable(u)&&o.parent&&!(u.isInline&&Cce(n.focusNode,n.focusOffset,o.dom))){let d=o.posBefore;c=new Ye(i==d?a:r.resolve(d))}}else{let u=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null;l=r.resolve(u)}if(!c){let u=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=uC(t,l,a,u)}return c}function H8(t){return t.editable?t.hasFocus():B8(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Xs(t,e=!1){let n=t.state.selection;if(F8(t,n),!!H8(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Fn){let r=t.domSelectionRange(),o=t.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&$l(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)nue(t);else{let{anchor:r,head:o}=n,s,i;AM&&!(n instanceof et)&&(n.$from.parent.inlineContent||(s=NM(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(i=NM(t,n.to))),t.docView.setSelection(r,o,t.root,e),AM&&(s&&LM(s),i&&LM(i)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&tue(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const AM=rr||Fn&&Mce<63;function NM(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),o=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(rr&&o&&o.contentEditable=="false")return Tv(o);if((!o||o.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(o)return Tv(o);if(s)return Tv(s)}}function Tv(t){return t.contentEditable="true",rr&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function LM(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function tue(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=o)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!H8(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function nue(t){let e=t.domSelection(),n=document.createRange(),r=t.cursorWrapper.dom,o=r.nodeName=="IMG";o?n.setEnd(r.parentNode,Zr(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&gr&&ra<=11&&(r.disabled=!0,r.disabled=!1)}function F8(t,e){if(e instanceof Ye){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(RM(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else RM(t)}function RM(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function uC(t,e,n,r){return t.someProp("createSelectionBetween",o=>o(t,e,n))||et.between(e,n,r)}function PM(t){return t.editable&&!t.hasFocus()?!1:B8(t)}function B8(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function rue(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return $l(e.node,e.offset,n.anchorNode,n.anchorOffset)}function hw(t,e){let{$anchor:n,$head:r}=t.selection,o=e>0?n.max(r):n.min(r),s=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return s&&Fe.findFrom(s,e)}function Qa(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function DM(t,e,n){let r=t.state.selection;if(r instanceof et){if(!r.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"forward":"backward")){let o=hw(t.state,e);return o&&o instanceof Ye?Qa(t,o):!1}else if(!(Jr&&n.indexOf("m")>-1)){let o=r.$head,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,i;if(!s||s.isText)return!1;let a=e<0?o.pos-s.nodeSize:o.pos;return s.isAtom||(i=t.docView.descAt(a))&&!i.contentDOM?Ye.isSelectable(s)?Qa(t,new Ye(e<0?t.state.doc.resolve(o.pos-s.nodeSize):o)):Uy?Qa(t,new et(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else{if(r instanceof Ye&&r.node.isInline)return Qa(t,new et(e>0?r.$to:r.$from));{let o=hw(t.state,e);return o?Qa(t,o):!1}}}function Ng(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function pf(t){let e=t.pmViewDesc;return e&&e.size==0&&(t.nextSibling||t.nodeName!="BR")}function fd(t,e){return e<0?oue(t):j8(t)}function oue(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o,s,i=!1;for(zo&&n.nodeType==1&&r<Ng(n)&&pf(n.childNodes[r])&&(i=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(pf(a))o=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(z8(n))break;{let a=n.previousSibling;for(;a&&pf(a);)o=n.parentNode,s=Zr(a),a=a.previousSibling;if(a)n=a,r=Ng(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}i?pw(t,n,r):o&&pw(t,o,s)}function j8(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o=Ng(n),s,i;for(;;)if(r<o){if(n.nodeType!=1)break;let a=n.childNodes[r];if(pf(a))s=n,i=++r;else break}else{if(z8(n))break;{let a=n.nextSibling;for(;a&&pf(a);)s=a.parentNode,i=Zr(a)+1,a=a.nextSibling;if(a)n=a,r=0,o=Ng(n);else{if(n=n.parentNode,n==t.dom)break;r=o=0}}}s&&pw(t,s,i)}function z8(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function pw(t,e,n){let r=t.domSelection();if(Vy(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:o}=t;setTimeout(()=>{t.state==o&&Xs(t)},50)}function $M(t,e){let n=t.state.doc.resolve(e);if(!(Fn||Ece)&&n.parent.inlineContent){let r=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),s=(o.top+o.bottom)/2;if(s>r.top&&s<r.bottom&&Math.abs(o.left-r.left)>1)return o.left<r.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),s=(o.top+o.bottom)/2;if(s>r.top&&s<r.bottom&&Math.abs(o.left-r.left)>1)return o.left>r.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function HM(t,e,n){let r=t.state.selection;if(r instanceof et&&!r.empty||n.indexOf("s")>-1||Jr&&n.indexOf("m")>-1)return!1;let{$from:o,$to:s}=r;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let i=hw(t.state,e);if(i&&i instanceof Ye)return Qa(t,i)}if(!o.parent.inlineContent){let i=e<0?o:s,a=r instanceof ml?Fe.near(i,e):Fe.findFrom(i,e);return a?Qa(t,a):!1}return!1}function FM(t,e){if(!(t.state.selection instanceof et))return!0;let{$head:n,$anchor:r,empty:o}=t.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let i=t.state.tr;return e<0?i.delete(n.pos-s.nodeSize,n.pos):i.delete(n.pos,n.pos+s.nodeSize),t.dispatch(i),!0}return!1}function BM(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function sue(t){if(!rr||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;BM(t,r,"true"),setTimeout(()=>BM(t,r,"false"),20)}return!1}function iue(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function aue(t,e){let n=e.keyCode,r=iue(e);if(n==8||Jr&&n==72&&r=="c")return FM(t,-1)||fd(t,-1);if(n==46||Jr&&n==68&&r=="c")return FM(t,1)||fd(t,1);if(n==13||n==27)return!0;if(n==37||Jr&&n==66&&r=="c"){let o=n==37?$M(t,t.state.selection.from)=="ltr"?-1:1:-1;return DM(t,o,r)||fd(t,o)}else if(n==39||Jr&&n==70&&r=="c"){let o=n==39?$M(t,t.state.selection.from)=="ltr"?1:-1:1;return DM(t,o,r)||fd(t,o)}else{if(n==38||Jr&&n==80&&r=="c")return HM(t,-1,r)||fd(t,-1);if(n==40||Jr&&n==78&&r=="c")return sue(t)||HM(t,1,r)||j8(t);if(r==(Jr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function V8(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:o,openEnd:s}=e;for(;o>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,s--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let i=t.someProp("clipboardSerializer")||qh.fromSchema(t.state.schema),a=J8(),l=a.createElement("div");l.appendChild(i.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=G8[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let p=a.createElement(u[h]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${o} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f}}function U8(t,e,n,r,o){let s=o.parent.type.spec.code,i,a;if(!n&&!e)return null;let l=e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,s||r,t)}),s)return e?new xe(ce.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):xe.empty;let d=t.someProp("clipboardTextParser",f=>f(e,o,r,t));if(d)a=d;else{let f=o.marks(),{schema:h}=t.state,p=qh.fromSchema(h);i=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let v=i.appendChild(document.createElement("p"));m&&v.appendChild(p.serializeNode(h.text(m,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),i=uue(n),Uy&&due(i);let c=i&&i.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=i.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;i=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||rC.fromSchema(t.state.schema)).parseSlice(i,{preserveWhitespace:!!(l||u),context:o,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!lue.test(d.parentNode.nodeName)?{ignore:!0}:null}})),u)a=fue(jM(a,+u[1],+u[2]),u[4]);else if(a=xe.maxOpen(cue(a.content,o),!0),a.openStart||a.openEnd){let d=0,f=0;for(let h=a.content.firstChild;d<a.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=a.content.lastChild;f<a.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);a=jM(a,d,f)}return t.someProp("transformPasted",d=>{a=d(a,t)}),a}const lue=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function cue(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.index(n)),o,s=[];if(t.forEach(i=>{if(!s)return;let a=r.findWrapping(i.type),l;if(!a)return s=null;if(l=s.length&&o.length&&W8(a,o,i,s[s.length-1],0))s[s.length-1]=l;else{s.length&&(s[s.length-1]=K8(s[s.length-1],o.length));let c=q8(i,a);s.push(c),r=r.matchType(c.type),o=a}}),s)return ce.from(s)}return t}function q8(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,ce.from(t));return t}function W8(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){let s=W8(t,e,n,r.lastChild,o+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(ce.from(q8(n,t,o+1))))}}function K8(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,K8(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(ce.empty,!0);return t.copy(n.append(r))}function mw(t,e,n,r,o,s){let i=e<0?t.firstChild:t.lastChild,a=i.content;return t.childCount>1&&(s=0),o<r-1&&(a=mw(a,e,n,r,o+1,s)),o>=n&&(a=e<0?i.contentMatchAt(0).fillBefore(a,s<=o).append(a):a.append(i.contentMatchAt(i.childCount).fillBefore(ce.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,i.copy(a))}function jM(t,e,n){return e<t.openStart&&(t=new xe(mw(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new xe(mw(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const G8={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let zM=null;function J8(){return zM||(zM=document.implementation.createHTMLDocument("title"))}function uue(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=J8().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),o;if((o=r&&G8[r[1].toLowerCase()])&&(t=o.map(s=>"<"+s+">").join("")+t+o.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=t,o)for(let s=0;s<o.length;s++)n=n.querySelector(o[s])||n;return n}function due(t){let e=t.querySelectorAll(Fn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function fue(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:o,openStart:s,openEnd:i}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;o=ce.from(l.create(r[a+1],o)),s++,i++}return new xe(o,s,i)}const or={},sr={},hue={touchstart:!0,touchmove:!0};class pue{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function mue(t){for(let e in or){let n=or[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{yue(t,r)&&!dC(t,r)&&(t.editable||!(r.type in sr))&&n(t,r)},hue[e]?{passive:!0}:void 0)}rr&&t.dom.addEventListener("input",()=>null),gw(t)}function qi(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function gue(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function gw(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>dC(t,r))})}function dC(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function yue(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function vue(t,e){!dC(t,e)&&or[e.type]&&(t.editable||!(e.type in sr))&&or[e.type](t,e)}sr.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!X8(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(No&&Fn&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),hu&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",o=>o(t,Xa(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||aue(t,n)?n.preventDefault():qi(t,"key")};sr.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};sr.keypress=(t,e)=>{let n=e;if(X8(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Jr&&n.metaKey)return;if(t.someProp("handleKeyPress",o=>o(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof et)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(n.charCode);!/[\r\n]/.test(o)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,o))&&t.dispatch(t.state.tr.insertText(o).scrollIntoView()),n.preventDefault()}};function qy(t){return{left:t.clientX,top:t.clientY}}function bue(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function fC(t,e,n,r,o){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let i=s.depth+1;i>0;i--)if(t.someProp(e,a=>i>s.depth?a(t,n,s.nodeAfter,s.before(i),o,!0):a(t,n,s.node(i),s.before(i),o,!1)))return!0;return!1}function Bc(t,e,n){t.focused||t.focus();let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function wue(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Ye.isSelectable(r)?(Bc(t,new Ye(n)),!0):!1}function kue(t,e){if(e==-1)return!1;let n=t.state.selection,r,o;n instanceof Ye&&(r=n.node);let s=t.state.doc.resolve(e);for(let i=s.depth+1;i>0;i--){let a=i>s.depth?s.nodeAfter:s.node(i);if(Ye.isSelectable(a)){r&&n.$from.depth>0&&i>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?o=s.before(n.$from.depth):o=s.before(i);break}}return o!=null?(Bc(t,Ye.create(t.state.doc,o)),!0):!1}function xue(t,e,n,r,o){return fC(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(o?kue(t,n):wue(t,n))}function Cue(t,e,n,r){return fC(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",o=>o(t,e,r))}function _ue(t,e,n,r){return fC(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",o=>o(t,e,r))||Sue(t,n,r)}function Sue(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Bc(t,et.create(r,0,r.content.size)),!0):!1;let o=r.resolve(e);for(let s=o.depth+1;s>0;s--){let i=s>o.depth?o.nodeAfter:o.node(s),a=o.before(s);if(i.inlineContent)Bc(t,et.create(r,a+1,a+1+i.content.size));else if(Ye.isSelectable(i))Bc(t,Ye.create(r,a));else continue;return!0}}function hC(t){return Lg(t)}const Y8=Jr?"metaKey":"ctrlKey";or.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=hC(t),o=Date.now(),s="singleClick";o-t.input.lastClick.time<500&&bue(n,t.input.lastClick)&&!n[Y8]&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:s};let i=t.posAtCoords(qy(n));i&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Tue(t,i,n,!!r)):(s=="doubleClick"?Cue:_ue)(t,i.pos,i.inside,n)?n.preventDefault():qi(t,"pointer"))};class Tue{constructor(e,n,r,o){this.view=e,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Y8],this.allowDefault=r.shiftKey;let s,i;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),i=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,i=u.depth?u.before():0}const a=o?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof Ye&&c.from<=i&&c.to>i)&&(this.mightDrag={node:s,pos:i,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&zo&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),qi(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Xs(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(qy(e))),this.updateAllowDefault(e),this.allowDefault||!n?qi(this.view,"pointer"):xue(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||rr&&this.mightDrag&&!this.mightDrag.node.isAtom||Fn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Bc(this.view,Fe.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):qi(this.view,"pointer")}move(e){this.updateAllowDefault(e),qi(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}or.touchstart=t=>{t.input.lastTouch=Date.now(),hC(t),qi(t,"pointer")};or.touchmove=t=>{t.input.lastTouch=Date.now(),qi(t,"pointer")};or.contextmenu=t=>hC(t);function X8(t,e){return t.composing?!0:rr&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const Mue=No?5e3:-1;sr.compositionstart=sr.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Lg(t,!0),t.markCursor=null;else if(Lg(t),zo&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let o=r.focusNode,s=r.focusOffset;o&&o.nodeType==1&&s!=0;){let i=s<0?o.lastChild:o.childNodes[s-1];if(!i)break;if(i.nodeType==3){t.domSelection().collapse(i,i.nodeValue.length);break}else o=i,s=-1}}t.input.composing=!0}Q8(t,Mue)};sr.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionID++,Q8(t,20))};function Q8(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Lg(t),e))}function Z8(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=Eue());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function Eue(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Lg(t,e=!1){if(!(No&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),Z8(t),e||t.docView&&t.docView.dirty){let n=cC(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}}function Oue(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const pu=gr&&ra<15||hu&&Oce<604;or.copy=sr.cut=(t,e)=>{let n=e,r=t.state.selection,o=n.type=="cut";if(r.empty)return;let s=pu?null:n.clipboardData,i=r.content(),{dom:a,text:l}=V8(t,i);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):Oue(t,a),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Iue(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function Aue(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Xf(t,r.value,null,t.input.shiftKey,e):Xf(t,r.textContent,r.innerHTML,t.input.shiftKey,e)},50)}function Xf(t,e,n,r,o){let s=U8(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,o,s||xe.empty)))return!0;if(!s)return!1;let i=Iue(s),a=i?t.state.tr.replaceSelectionWith(i,t.input.shiftKey):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}sr.paste=(t,e)=>{let n=e;if(t.composing&&!No)return;let r=pu?null:n.clipboardData;r&&Xf(t,r.getData("text/plain"),r.getData("text/html"),t.input.shiftKey,n)?n.preventDefault():Aue(t,n)};class Nue{constructor(e,n){this.slice=e,this.move=n}}const eL=Jr?"altKey":"ctrlKey";or.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=t.state.selection,s=o.empty?null:t.posAtCoords(qy(n));if(!(s&&s.pos>=o.from&&s.pos<=(o instanceof Ye?o.to-1:o.to))){if(r&&r.mightDrag)t.dispatch(t.state.tr.setSelection(Ye.create(t.state.doc,r.mightDrag.pos)));else if(n.target&&n.target.nodeType==1){let c=t.docView.nearestDesc(n.target,!0);c&&c.node.type.spec.draggable&&c!=t.docView&&t.dispatch(t.state.tr.setSelection(Ye.create(t.state.doc,c.posBefore)))}}let i=t.state.selection.content(),{dom:a,text:l}=V8(t,i);n.dataTransfer.clearData(),n.dataTransfer.setData(pu?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",pu||n.dataTransfer.setData("text/plain",l),t.dragging=new Nue(i,!n[eL])};or.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};sr.dragover=sr.dragenter=(t,e)=>e.preventDefault();sr.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let o=t.posAtCoords(qy(n));if(!o)return;let s=t.state.doc.resolve(o.pos),i=r&&r.slice;i?t.someProp("transformPasted",p=>{i=p(i,t)}):i=U8(t,n.dataTransfer.getData(pu?"Text":"text/plain"),pu?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&!n[eL]);if(t.someProp("handleDrop",p=>p(t,n,i||xe.empty,a))){n.preventDefault();return}if(!i)return;n.preventDefault();let l=i?u8(t.state.doc,s.pos,i):s.pos;l==null&&(l=s.pos);let c=t.state.tr;a&&c.deleteSelection();let u=c.mapping.map(l),d=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,f=c.doc;if(d?c.replaceRangeWith(u,u,i.content.firstChild):c.replaceRange(u,u,i),c.doc.eq(f))return;let h=c.doc.resolve(u);if(d&&Ye.isSelectable(i.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(i.content.firstChild))c.setSelection(new Ye(h));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,v,b,w)=>p=w),c.setSelection(uC(t,h,c.doc.resolve(p)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};or.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Xs(t)},20))};or.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};or.beforeinput=(t,e)=>{if(Fn&&No&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:n}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=n||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,Xa(8,"Backspace")))))return;let{$cursor:r}=t.state.selection;r&&r.pos>0&&t.dispatch(t.state.tr.delete(r.pos-1,r.pos).scrollIntoView())},50)}};for(let t in sr)or[t]=sr[t];function Qf(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}let Lue=class tL{constructor(e,n){this.toDOM=e,this.spec=n||gl,this.side=this.spec.side||0}map(e,n,r,o){let{pos:s,deleted:i}=e.mapResult(n.from+o,this.side<0?-1:1);return i?null:new di(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof tL&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Qf(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}},mf=class yw{constructor(e,n){this.attrs=e,this.spec=n||gl}map(e,n,r,o){let s=e.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,i=e.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return s>=i?null:new di(s,i,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof yw&&Qf(this.attrs,e.attrs)&&Qf(this.spec,e.spec)}static is(e){return e.type instanceof yw}destroy(){}},Rue=class nL{constructor(e,n){this.attrs=e,this.spec=n||gl}map(e,n,r,o){let s=e.mapResult(n.from+o,1);if(s.deleted)return null;let i=e.mapResult(n.to+o,-1);return i.deleted||i.pos<=s.pos?null:new di(s.pos-r,i.pos-r,this)}valid(e,n){let{index:r,offset:o}=e.content.findIndex(n.from),s;return o==n.from&&!(s=e.child(r)).isText&&o+s.nodeSize==n.to}eq(e){return this==e||e instanceof nL&&Qf(this.attrs,e.attrs)&&Qf(this.spec,e.spec)}destroy(){}},di=class Pd{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Pd(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Pd(e,e,new Lue(n,r))}static inline(e,n,r,o){return new Pd(e,n,new mf(r,o))}static node(e,n,r,o){return new Pd(e,n,new Rue(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof mf}};const mc=[],gl={};let yr=class _i{constructor(e,n){this.local=e.length?e:mc,this.children=n.length?n:mc}static create(e,n){return n.length?Rg(n,e,0,gl):Pn}find(e,n,r){let o=[];return this.findInner(e??0,n??1e9,o,0,r),o}findInner(e,n,r,o,s){for(let i=0;i<this.local.length;i++){let a=this.local[i];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+o,a.to+o))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<n&&this.children[i+1]>e){let a=this.children[i]+1;this.children[i+2].findInner(e-a,n-a,r,o+a,s)}}map(e,n,r){return this==Pn||e.maps.length==0?this:this.mapInner(e,n,0,0,r||gl)}mapInner(e,n,r,o,s){let i;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,o);l&&l.type.valid(n,l)?(i||(i=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?Pue(this.children,i||[],e,n,r,o,s):i?new _i(i.sort(yl),mc):Pn}add(e,n){return n.length?this==Pn?_i.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let o,s=0;e.forEach((a,l)=>{let c=l+r,u;if(u=oL(n,a,c)){for(o||(o=this.children.slice());s<o.length&&o[s]<l;)s+=3;o[s]==l?o[s+2]=o[s+2].addInner(a,u,c+1):o.splice(s,0,l,l+a.nodeSize,Rg(u,a,c+1,gl)),s+=3}});let i=rL(s?sL(n):n,-r);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||i.splice(a--,1);return new _i(i.length?this.local.concat(i).sort(yl):this.local,o||this.children)}remove(e){return e.length==0||this==Pn?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,o=this.local;for(let s=0;s<r.length;s+=3){let i,a=r[s]+n,l=r[s+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(i||(i=[])).push(d));if(!i)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(i,a+1);c!=Pn?r[s+2]=c:(r.splice(s,3),s-=3)}if(o.length){for(let s=0,i;s<e.length;s++)if(i=e[s])for(let a=0;a<o.length;a++)o[a].eq(i,n)&&(o==this.local&&(o=this.local.slice()),o.splice(a--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new _i(o,r):Pn}forChild(e,n){if(this==Pn)return this;if(n.isLeaf)return _i.empty;let r,o;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,i=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<i&&l.to>s&&l.type instanceof mf){let c=Math.max(s,l.from)-s,u=Math.min(i,l.to)-s;c<u&&(o||(o=[])).push(l.copy(c,u))}}if(o){let a=new _i(o.sort(yl),mc);return r?new Di([a,r]):a}return r||Pn}eq(e){if(this==e)return!0;if(!(e instanceof _i)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return pC(this.localsInner(e))}localsInner(e){if(this==Pn)return mc;if(e.inlineContent||!this.local.some(mf.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof mf||n.push(this.local[r]);return n}};yr.empty=new yr([],[]);yr.removeOverlap=pC;const Pn=yr.empty;class Di{constructor(e){this.members=e}map(e,n){const r=this.members.map(o=>o.map(e,n,gl));return Di.from(r)}forChild(e,n){if(n.isLeaf)return yr.empty;let r=[];for(let o=0;o<this.members.length;o++){let s=this.members[o].forChild(e,n);s!=Pn&&(s instanceof Di?r=r.concat(s.members):r.push(s))}return Di.from(r)}eq(e){if(!(e instanceof Di)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let o=0;o<this.members.length;o++){let s=this.members[o].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let i=0;i<s.length;i++)n.push(s[i])}}return n?pC(r?n:n.sort(yl)):mc}static from(e){switch(e.length){case 0:return Pn;case 1:return e[0];default:return new Di(e.every(n=>n instanceof yr)?e:e.reduce((n,r)=>n.concat(r instanceof yr?r:r.members),[]))}}}function Pue(t,e,n,r,o,s,i){let a=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let d=0;n.maps[c].forEach((f,h,p,m)=>{let v=m-p-(h-f);for(let b=0;b<a.length;b+=3){let w=a[b+1];if(w<0||f>w+u-d)continue;let k=a[b]+u-d;h>=k?a[b+1]=f<=k?-2:-1:p>=o&&v&&(a[b]+=v,a[b+1]+=v)}d+=v}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+s),d=u-o;if(d<0||d>=r.content.size){l=!0;continue}let f=n.map(t[c+1]+s,-1),h=f-o,{index:p,offset:m}=r.content.findIndex(d),v=r.maybeChild(p);if(v&&m==d&&m+v.nodeSize==h){let b=a[c+2].mapInner(n,v,u+1,t[c]+s+1,i);b!=Pn?(a[c]=d,a[c+1]=h,a[c+2]=b):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=Due(a,t,e,n,o,s,i),u=Rg(c,r,0,i);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let h=u.children[d];for(;f<a.length&&a[f]<h;)f+=3;a.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new yr(e.sort(yl),a)}function rL(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let o=t[r];n.push(new di(o.from+e,o.to+e,o.type))}return n}function Due(t,e,n,r,o,s,i){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,o,c);d?n.push(d):i.onRemove&&i.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function oL(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,o=null;for(let s=0,i;s<t.length;s++)(i=t[s])&&i.from>n&&i.to<r&&((o||(o=[])).push(i),t[s]=null);return o}function sL(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Rg(t,e,n,r){let o=[],s=!1;e.forEach((a,l)=>{let c=oL(t,a,l+n);if(c){s=!0;let u=Rg(c,a,n+l+1,r);u!=Pn&&o.push(l,l+a.nodeSize,u)}});let i=rL(s?sL(t):t,-n).sort(yl);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||(r.onRemove&&r.onRemove(i[a].spec),i.splice(a--,1));return i.length||o.length?new yr(i,o):Pn}function yl(t,e){return t.from-e.from||t.to-e.to}function pC(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let o=n+1;o<e.length;o++){let s=e[o];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[o]=s.copy(s.from,r.to),VM(e,o+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),VM(e,o,r.copy(s.from,r.to)));break}}}return e}function VM(t,e,n){for(;e<t.length&&yl(n,t[e])>0;)e++;t.splice(e,0,n)}function Mv(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Pn&&e.push(r)}),t.cursorWrapper&&e.push(yr.create(t.state.doc,[t.cursorWrapper.deco])),Di.from(e)}const $ue={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Hue=gr&&ra<=11;class Fue{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Bue{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Fue,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);gr&&ra<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),Hue&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,$ue)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(PM(this.view)){if(this.suppressingSelectionUpdates)return Xs(this.view);if(gr&&ra<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&$l(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Yf(s))n.add(s);for(let s=e.anchorNode;s;s=Yf(s))if(n.has(s)){r=s;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.observer?this.observer.takeRecords():[];this.queue.length&&(n=this.queue.concat(n),this.queue.length=0);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&PM(e)&&!this.ignoreSelectionChange(r),s=-1,i=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(s=s<0?d.from:Math.min(d.from,s),i=i<0?d.to:Math.max(d.to,i),d.typeOver&&(a=!0))}if(zo&&l.length>1){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let d=u[0],f=u[1];d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}}let c=null;s<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Vy(r)&&(c=cC(e))&&c.eq(Fe.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Xs(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||o)&&(s>-1&&(e.docView.markDirty(s,i),jue(e)),this.handleDOMChange(s,i,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Xs(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++)n.push(e.addedNodes[u]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,s=e.nextSibling;if(gr&&ra<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:f}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(o=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let i=o&&o.parentNode==e.target?Zr(o)+1:0,a=r.localPosFromDOM(e.target,i,-1),l=s&&s.parentNode==e.target?Zr(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let UM=new WeakMap,qM=!1;function jue(t){if(!UM.has(t)&&(UM.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=zo,qM)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),qM=!0}}function zue(t){let e;function n(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0);let r=e.startContainer,o=e.startOffset,s=e.endContainer,i=e.endOffset,a=t.domAtPos(t.state.selection.anchor);return $l(a.node,a.offset,s,i)&&([r,o,s,i]=[s,i,r,o]),{anchorNode:r,anchorOffset:o,focusNode:s,focusOffset:i}}function Vue(t,e,n){let{node:r,fromOffset:o,toOffset:s,from:i,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],Vy(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Fn&&t.input.lastKeyCode===8)for(let v=s;v>o;v--){let b=r.childNodes[v-1],w=b.pmViewDesc;if(b.nodeName=="BR"&&!w){s=v;break}if(!w||w.size)break}let d=t.state.doc,f=t.someProp("domParser")||rC.fromSchema(t.state.schema),h=d.resolve(i),p=null,m=f.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:o,to:s,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:Uue,context:h});if(c&&c[0].pos!=null){let v=c[0].pos,b=c[1]&&c[1].pos;b==null&&(b=v),p={anchor:v+i,head:b+i}}return{doc:m,sel:p,from:i,to:a}}function Uue(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(rr&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||rr&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const que=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Wue(t,e,n,r,o){if(e<0){let E=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,O=cC(t,E);if(O&&!t.state.selection.eq(O)){if(Fn&&No&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",R=>R(t,Xa(13,"Enter"))))return;let N=t.state.tr.setSelection(O);E=="pointer"?N.setMeta("pointer",!0):E=="key"&&N.scrollIntoView(),t.composing&&N.setMeta("composition",t.input.compositionID),t.dispatch(N)}return}let s=t.state.doc.resolve(e),i=s.sharedDepth(n);e=s.before(i+1),n=t.state.doc.resolve(n).after(i+1);let a=t.state.selection,l=Vue(t,e,n),c=t.state.doc,u=c.slice(l.from,l.to),d,f;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(d=t.state.selection.to,f="end"):(d=t.state.selection.from,f="start"),t.input.lastKeyCode=null;let h=Jue(u.content,l.doc.content,l.from,d,f);if((hu&&t.input.lastIOSEnter>Date.now()-225||No)&&o.some(E=>E.nodeType==1&&!que.test(E.nodeName))&&(!h||h.endA>=h.endB)&&t.someProp("handleKeyDown",E=>E(t,Xa(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!h)if(r&&a instanceof et&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(l.sel&&l.sel.anchor!=l.sel.head))h={start:a.from,endA:a.to,endB:a.to};else{if(l.sel){let E=WM(t,t.state.doc,l.sel);if(E&&!E.eq(t.state.selection)){let O=t.state.tr.setSelection(E);t.composing&&O.setMeta("composition",t.input.compositionID),t.dispatch(O)}}return}if(Fn&&t.cursorWrapper&&l.sel&&l.sel.anchor==t.cursorWrapper.deco.from&&l.sel.head==l.sel.anchor){let E=h.endB-h.start;l.sel={anchor:l.sel.anchor+E,head:l.sel.anchor+E}}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&h.start==h.endB&&t.state.selection instanceof et&&(h.start>t.state.selection.from&&h.start<=t.state.selection.from+2&&t.state.selection.from>=l.from?h.start=t.state.selection.from:h.endA<t.state.selection.to&&h.endA>=t.state.selection.to-2&&t.state.selection.to<=l.to&&(h.endB+=t.state.selection.to-h.endA,h.endA=t.state.selection.to)),gr&&ra<=11&&h.endB==h.start+1&&h.endA==h.start&&h.start>l.from&&l.doc.textBetween(h.start-l.from-1,h.start-l.from+1)==" "&&(h.start--,h.endA--,h.endB--);let p=l.doc.resolveNoCache(h.start-l.from),m=l.doc.resolveNoCache(h.endB-l.from),v=c.resolve(h.start),b=p.sameParent(m)&&p.parent.inlineContent&&v.end()>=h.endA,w;if((hu&&t.input.lastIOSEnter>Date.now()-225&&(!b||o.some(E=>E.nodeName=="DIV"||E.nodeName=="P"))||!b&&p.pos<l.doc.content.size&&(w=Fe.findFrom(l.doc.resolve(p.pos+1),1,!0))&&w.head==m.pos)&&t.someProp("handleKeyDown",E=>E(t,Xa(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>h.start&&Gue(c,h.start,h.endA,p,m)&&t.someProp("handleKeyDown",E=>E(t,Xa(8,"Backspace")))){No&&Fn&&t.domObserver.suppressSelectionUpdates();return}Fn&&No&&h.endB==h.start&&(t.input.lastAndroidDelete=Date.now()),No&&!b&&p.start()!=m.start()&&m.parentOffset==0&&p.depth==m.depth&&l.sel&&l.sel.anchor==l.sel.head&&l.sel.head==h.endA&&(h.endB-=2,m=l.doc.resolveNoCache(h.endB-l.from),setTimeout(()=>{t.someProp("handleKeyDown",function(E){return E(t,Xa(13,"Enter"))})},20));let k=h.start,y=h.endA,C,_,M;if(b){if(p.pos==m.pos)gr&&ra<=11&&p.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Xs(t),20)),C=t.state.tr.delete(k,y),_=c.resolve(h.start).marksAcross(c.resolve(h.endA));else if(h.endA==h.endB&&(M=Kue(p.parent.content.cut(p.parentOffset,m.parentOffset),v.parent.content.cut(v.parentOffset,h.endA-v.start()))))C=t.state.tr,M.type=="add"?C.addMark(k,y,M.mark):C.removeMark(k,y,M.mark);else if(p.parent.child(p.index()).isText&&p.index()==m.index()-(m.textOffset?0:1)){let E=p.parent.textBetween(p.parentOffset,m.parentOffset);if(t.someProp("handleTextInput",O=>O(t,k,y,E)))return;C=t.state.tr.insertText(E,k,y)}}if(C||(C=t.state.tr.replace(k,y,l.doc.slice(h.start-l.from,h.endB-l.from))),l.sel){let E=WM(t,C.doc,l.sel);E&&!(Fn&&No&&t.composing&&E.empty&&(h.start!=h.endB||t.input.lastAndroidDelete<Date.now()-100)&&(E.head==k||E.head==C.mapping.map(y)-1)||gr&&E.empty&&E.head==k)&&C.setSelection(E)}_&&C.ensureMarks(_),t.composing&&C.setMeta("composition",t.input.compositionID),t.dispatch(C.scrollIntoView())}function WM(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:uC(t,e.resolve(n.anchor),e.resolve(n.head))}function Kue(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,o=n,s=r,i,a,l;for(let u=0;u<r.length;u++)o=r[u].removeFromSet(o);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(o.length==1&&s.length==0)a=o[0],i="add",l=u=>u.mark(a.addToSet(u.marks));else if(o.length==0&&s.length==1)a=s[0],i="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(ce.from(c).eq(t))return{mark:a,type:i}}function Gue(t,e,n,r,o){if(!r.parent.isTextblock||n-e<=o.pos-r.pos||Ev(r,!0,!1)<o.pos)return!1;let s=t.resolve(e);if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let i=t.resolve(Ev(s,!0,!0));return!i.parent.isTextblock||i.pos>n||Ev(i,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(i.parent.content)}function Ev(t,e,n){let r=t.depth,o=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,o++}return o}function Jue(t,e,n,r,o){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:i,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(o=="end"){let l=Math.max(0,s-Math.min(i,a));r-=i+l-s}if(i<s&&t.size<e.size){let l=r<=s&&r>=i?s-r:0;s-=l,a=s+(a-i),i=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,i=s+(i-a),a=s}return{start:s,endA:i,endB:a}}class Yue{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new pue,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(XM),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=JM(this),GM(this),this.nodeViews=YM(this),this.docView=OM(this.state.doc,KM(this),Mv(this),this.dom,this),this.domObserver=new Bue(this,(r,o,s,i)=>Wue(this,r,o,s,i)),this.domObserver.start(),mue(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&gw(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(XM),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){let r=this.state,o=!1,s=!1;e.storedMarks&&this.composing&&(Z8(this),s=!0),this.state=e;let i=r.plugins!=e.plugins||this._props.plugins!=n.plugins;if(i||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let f=YM(this);Que(f,this.nodeViews)&&(this.nodeViews=f,o=!0)}(i||n.handleDOMEvents!=this._props.handleDOMEvents)&&gw(this),this.editable=JM(this),GM(this);let a=Mv(this),l=KM(this),c=r.plugins!=e.plugins&&!r.doc.eq(e.doc)?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",u=o||!this.docView.matchesNode(e.doc,l,a);(u||!e.selection.eq(r.selection))&&(s=!0);let d=c=="preserve"&&s&&this.dom.style.overflowAnchor==null&&Nce(this);if(s){this.domObserver.stop();let f=u&&(gr||Fn)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&Xue(r.selection,e.selection);if(u){let h=Fn?this.trackWrites=this.domSelectionRange().focusNode:null;(o||!this.docView.update(e.doc,l,a,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=OM(e.doc,l,a,this.dom,this)),h&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&rue(this))?Xs(this,f):(F8(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():d&&Lce(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Ye){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&CM(this,n.getBoundingClientRect(),e)}else CM(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}someProp(e,n){let r=this._props&&this._props[e],o;if(r!=null&&(o=n?n(r):r))return o;for(let i=0;i<this.directPlugins.length;i++){let a=this.directPlugins[i].props[e];if(a!=null&&(o=n?n(a):a))return o}let s=this.state.plugins;if(s)for(let i=0;i<s.length;i++){let a=s[i].props[e];if(a!=null&&(o=n?n(a):a))return o}}hasFocus(){if(gr){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Rce(this.dom),Xs(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}posAtCoords(e){return Fce(this,e)}coordsAtPos(e,n=1){return E8(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let o=this.docView.posFromDOM(e,n,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,n){return Uce(this,n||this.state,e)}pasteHTML(e,n){return Xf(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Xf(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(gue(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Mv(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return this.docView==null}dispatchEvent(e){return vue(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return rr&&this.root.nodeType===11&&Sce(this.dom.ownerDocument)==this.dom?zue(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function KM(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[di.node(0,t.state.doc.content.size,e)]}function GM(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:di.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function JM(t){return!t.someProp("editable",e=>e(t.state)===!1)}function Xue(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function YM(t){let e=Object.create(null);function n(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function Que(t,e){let n=0,r=0;for(let o in t){if(t[o]!=e[o])return!0;n++}for(let o in e)r++;return n!=r}function XM(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var ga={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Pg={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Zue=typeof navigator<"u"&&/Mac/.test(navigator.platform),ede=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var En=0;En<10;En++)ga[48+En]=ga[96+En]=String(En);for(var En=1;En<=24;En++)ga[En+111]="F"+En;for(var En=65;En<=90;En++)ga[En]=String.fromCharCode(En+32),Pg[En]=String.fromCharCode(En);for(var Ov in ga)Pg.hasOwnProperty(Ov)||(Pg[Ov]=ga[Ov]);function tde(t){var e=Zue&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||ede&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Pg:ga)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const nde=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function rde(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,o,s,i;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))nde?i=!0:o=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),i&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function ode(t){let e=Object.create(null);for(let n in t)e[rde(n)]=t[n];return e}function Iv(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function sde(t){return new Wn({props:{handleKeyDown:mC(t)}})}function mC(t){let e=ode(t);return function(n,r){let o=tde(r),s,i=e[Iv(o,r)];if(i&&i(n.state,n.dispatch,n))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let a=e[Iv(o,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||o.charCodeAt(0)>127)&&(s=ga[r.keyCode])&&s!=o){let a=e[Iv(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const ide=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function ade(t,e){let{$cursor:n}=t.selection;return!n||n.parentOffset>0?null:n}const lde=(t,e,n)=>{let r=ade(t);if(!r)return!1;let o=iL(r);if(!o){let i=r.blockRange(),a=i&&Ju(i);return a==null?!1:(e&&e(t.tr.lift(i,a).scrollIntoView()),!0)}let s=o.nodeBefore;if(!s.type.spec.isolating&&cL(t,o,e))return!0;if(r.parent.content.size==0&&(mu(s,"end")||Ye.isSelectable(s))){let i=aC(t.doc,r.before(),r.after(),xe.empty);if(i&&i.slice.size<i.to-i.from){if(e){let a=t.tr.step(i);a.setSelection(mu(s,"end")?Fe.findFrom(a.doc.resolve(a.mapping.map(o.pos,-1)),-1):Ye.create(a.doc,o.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}}return s.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos-s.nodeSize,o.pos).scrollIntoView()),!0):!1};function mu(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const cde=(t,e,n)=>{let{$head:r,empty:o}=t.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(r.parentOffset>0)return!1;s=iL(r)}let i=s&&s.nodeBefore;return!i||!Ye.isSelectable(i)?!1:(e&&e(t.tr.setSelection(Ye.create(t.doc,s.pos-i.nodeSize)).scrollIntoView()),!0)};function iL(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function ude(t,e){let{$cursor:n}=t.selection;return!n||n.parentOffset<n.parent.content.size?null:n}const dde=(t,e,n)=>{let r=ude(t);if(!r)return!1;let o=aL(r);if(!o)return!1;let s=o.nodeAfter;if(cL(t,o,e))return!0;if(r.parent.content.size==0&&(mu(s,"start")||Ye.isSelectable(s))){let i=aC(t.doc,r.before(),r.after(),xe.empty);if(i&&i.slice.size<i.to-i.from){if(e){let a=t.tr.step(i);a.setSelection(mu(s,"start")?Fe.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):Ye.create(a.doc,a.mapping.map(o.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos,o.pos+s.nodeSize).scrollIntoView()),!0):!1},fde=(t,e,n)=>{let{$head:r,empty:o}=t.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(r.parentOffset<r.parent.content.size)return!1;s=aL(r)}let i=s&&s.nodeAfter;return!i||!Ye.isSelectable(i)?!1:(e&&e(t.tr.setSelection(Ye.create(t.doc,s.pos)).scrollIntoView()),!0)};function aL(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const hde=(t,e)=>{let n=t.selection,r=n instanceof Ye,o;if(r){if(n.node.isTextblock||!_a(t.doc,n.from))return!1;o=n.from}else if(o=c8(t.doc,n.from,-1),o==null)return!1;if(e){let s=t.tr.join(o);r&&s.setSelection(Ye.create(s.doc,o-t.doc.resolve(o).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},pde=(t,e)=>{let n=t.selection,r;if(n instanceof Ye){if(n.node.isTextblock||!_a(t.doc,n.to))return!1;r=n.to}else if(r=c8(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},mde=(t,e)=>{let{$from:n,$to:r}=t.selection,o=n.blockRange(r),s=o&&Ju(o);return s==null?!1:(e&&e(t.tr.lift(o,s).scrollIntoView()),!0)},gde=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function lL(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const yde=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),s=n.indexAfter(-1),i=lL(o.contentMatchAt(s));if(!i||!o.canReplaceWith(s,s,i))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,i.createAndFill());l.setSelection(Fe.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},vde=(t,e)=>{let n=t.selection,{$from:r,$to:o}=n;if(n instanceof ml||r.parent.inlineContent||o.parent.inlineContent)return!1;let s=lL(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let i=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=t.tr.insert(i,s.createAndFill());a.setSelection(et.create(a.doc,i+1)),e(a.scrollIntoView())}return!0},bde=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Hc(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),o=r&&Ju(r);return o==null?!1:(e&&e(t.tr.lift(r,o).scrollIntoView()),!0)},wde=(t,e)=>{let{$from:n,to:r}=t.selection,o,s=n.sharedDepth(r);return s==0?!1:(o=n.before(s),e&&e(t.tr.setSelection(Ye.create(t.doc,o))),!0)};function kde(t,e,n){let r=e.nodeBefore,o=e.nodeAfter,s=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(o.isTextblock||_a(t.doc,e.pos))?!1:(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function cL(t,e,n){let r=e.nodeBefore,o=e.nodeAfter,s,i;if(r.type.spec.isolating||o.type.spec.isolating)return!1;if(kde(t,e,n))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(s=(i=r.contentMatchAt(r.childCount)).findWrapping(o.type))&&i.matchType(s[0]||o.type).validEnd){if(n){let d=e.pos+o.nodeSize,f=ce.empty;for(let m=s.length-1;m>=0;m--)f=ce.from(s[m].create(null,f));f=ce.from(r.copy(f));let h=t.tr.step(new Sr(e.pos-1,d,e.pos,d,new xe(f,1,0),s.length,!0)),p=d+2*s.length;_a(h.doc,p)&&h.join(p),n(h.scrollIntoView())}return!0}let l=Fe.findFrom(e,1),c=l&&l.$from.blockRange(l.$to),u=c&&Ju(c);if(u!=null&&u>=e.depth)return n&&n(t.tr.lift(c,u).scrollIntoView()),!0;if(a&&mu(o,"start",!0)&&mu(r,"end")){let d=r,f=[];for(;f.push(d),!d.isTextblock;)d=d.lastChild;let h=o,p=1;for(;!h.isTextblock;h=h.firstChild)p++;if(d.canReplace(d.childCount,d.childCount,h.content)){if(n){let m=ce.empty;for(let b=f.length-1;b>=0;b--)m=ce.from(f[b].copy(m));let v=t.tr.step(new Sr(e.pos-f.length,e.pos+o.nodeSize,e.pos+p,e.pos+o.nodeSize-p,new xe(m,f.length,0),0,!0));n(v.scrollIntoView())}return!0}}return!1}function uL(t){return function(e,n){let r=e.selection,o=t<0?r.$from:r.$to,s=o.depth;for(;o.node(s).isInline;){if(!s)return!1;s--}return o.node(s).isTextblock?(n&&n(e.tr.setSelection(et.create(e.doc,t<0?o.start(s):o.end(s)))),!0):!1}}const xde=uL(-1),Cde=uL(1);function _de(t,e=null){return function(n,r){let{$from:o,$to:s}=n.selection,i=o.blockRange(s),a=i&&iC(i,t,e);return a?(r&&r(n.tr.wrap(i,a).scrollIntoView()),!0):!1}}function QM(t,e=null){return function(n,r){let o=!1;for(let s=0;s<n.selection.ranges.length&&!o;s++){let{$from:{pos:i},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(i,a,(l,c)=>{if(o)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)o=!0;else{let u=n.doc.resolve(c),d=u.index();o=u.parent.canReplaceWith(d,d+1,t)}})}if(!o)return!1;if(r){let s=n.tr;for(let i=0;i<n.selection.ranges.length;i++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[i];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Sde(t,e=null){return function(n,r){let{$from:o,$to:s}=n.selection,i=o.blockRange(s),a=!1,l=i;if(!i)return!1;if(i.depth>=2&&o.node(i.depth-1).type.compatibleContent(t)&&i.startIndex==0){if(o.index(i.depth-1)==0)return!1;let u=n.doc.resolve(i.start-2);l=new Eg(u,u,i.depth),i.endIndex<i.parent.childCount&&(i=new Eg(o,n.doc.resolve(s.end(i.depth)),i.depth)),a=!0}let c=iC(l,t,e,i);return c?(r&&r(Tde(n.tr,i,c,a,t).scrollIntoView()),!0):!1}}function Tde(t,e,n,r,o){let s=ce.empty;for(let u=n.length-1;u>=0;u--)s=ce.from(n[u].type.create(n[u].attrs,s));t.step(new Sr(e.start-(r?2:0),e.end,e.start,e.end,new xe(s,0,0),n.length,!0));let i=0;for(let u=0;u<n.length;u++)n[u].type==o&&(i=u+1);let a=n.length-i,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&Hc(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function Mde(t){return function(e,n){let{$from:r,$to:o}=e.selection,s=r.blockRange(o,i=>i.childCount>0&&i.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?Ede(e,n,t,s):Ode(e,n,s):!0:!1}}function Ede(t,e,n,r){let o=t.tr,s=r.end,i=r.$to.end(r.depth);s<i&&(o.step(new Sr(s-1,i,s,i,new xe(ce.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Eg(o.doc.resolve(r.$from.pos),o.doc.resolve(i),r.depth));const a=Ju(r);if(a==null)return!1;o.lift(r,a);let l=o.mapping.map(s,-1)-1;return _a(o.doc,l)&&o.join(l),e(o.scrollIntoView()),!0}function Ode(t,e,n){let r=t.tr,o=n.parent;for(let h=n.end,p=n.endIndex-1,m=n.startIndex;p>m;p--)h-=o.child(p).nodeSize,r.delete(h-1,h+1);let s=r.doc.resolve(n.start),i=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==o.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,i.content.append(l?ce.empty:ce.from(o))))return!1;let d=s.pos,f=d+i.nodeSize;return r.step(new Sr(d-(a?1:0),f+(l?1:0),d+1,f-1,new xe((a?ce.empty:ce.from(o.copy(ce.empty))).append(l?ce.empty:ce.from(o.copy(ce.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function Ide(t){return function(e,n){let{$from:r,$to:o}=e.selection,s=r.blockRange(o,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let i=s.startIndex;if(i==0)return!1;let a=s.parent,l=a.child(i-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=ce.from(c?t.create():null),d=new xe(ce.from(t.create(null,ce.from(a.type.create(null,u)))),c?3:1,0),f=s.start,h=s.end;n(e.tr.step(new Sr(f-(c?3:1),h,f,h,d,1,!0)).scrollIntoView())}return!0}}function Wy(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:o}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),filterTransaction:e.filterTransaction,plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,s=n.storedMarks,n}}}let Ky=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:o}=n,{tr:s}=r,i=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>{const u=l(...c)(i);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(s),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:o,state:s}=this,{view:i}=o,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...p)=>{const m=this.buildProps(c,n),v=h(...p)(m);return a.push(v),d}])),run:u};return d}createCan(e){const{rawCommands:n,state:r}=this,o=!1,s=e||r.tr,i=this.buildProps(s,o);return{...Object.fromEntries(Object.entries(n).map(([a,l])=>[a,(...c)=>l(...c)({...i,dispatch:void 0})])),chain:()=>this.createChain(s,o)}}buildProps(e,n=!0){const{rawCommands:r,editor:o,state:s}=this,{view:i}=o;s.storedMarks&&e.setStoredMarks(s.storedMarks);const a={tr:e,editor:o,view:i,state:Wy({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}};class Ade{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(o=>o.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(o=>o!==n):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function Te(t,e,n){return t.config[e]===void 0&&t.parent?Te(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Te(t.parent,e,n):null}):t.config[e]}function Gy(t){const e=t.filter(o=>o.type==="extension"),n=t.filter(o=>o.type==="node"),r=t.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function dL(t){const e=[],{nodeExtensions:n,markExtensions:r}=Gy(t),o=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage},l=Te(i,"addGlobalAttributes",a);l&&l().forEach(c=>{c.types.forEach(u=>{Object.entries(c.attributes).forEach(([d,f])=>{e.push({type:u,name:d,attribute:{...s,...f}})})})})}),o.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage},l=Te(i,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const f={...s,...d};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:i.name,name:u,attribute:f})})}),e}function bn(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function $t(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([o,s])=>{if(!r[o]){r[o]=s;return}o==="class"?r[o]=[r[o],s].join(" "):o==="style"?r[o]=[r[o],s].join("; "):r[o]=s}),r},{})}function vw(t,e){return e.filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>$t(n,r),{})}function fL(t){return typeof t=="function"}function tt(t,e=void 0,...n){return fL(t)?e?t.bind(e)(...n):t(...n):t}function Nde(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Lde(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function ZM(t,e){return t.style?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const o=e.reduce((s,i)=>{const a=i.attribute.parseHTML?i.attribute.parseHTML(n):Lde(n.getAttribute(i.name));return a==null?s:{...s,[i.name]:a}},{});return{...r,...o}}}}function e2(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&Nde(n)?!1:n!=null))}function Rde(t,e){var n;const r=dL(t),{nodeExtensions:o,markExtensions:s}=Gy(t),i=(n=o.find(c=>Te(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(o.map(c=>{const u=r.filter(b=>b.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((b,w)=>{const k=Te(w,"extendNodeSchema",d);return{...b,...k?k(c):{}}},{}),h=e2({...f,content:tt(Te(c,"content",d)),marks:tt(Te(c,"marks",d)),group:tt(Te(c,"group",d)),inline:tt(Te(c,"inline",d)),atom:tt(Te(c,"atom",d)),selectable:tt(Te(c,"selectable",d)),draggable:tt(Te(c,"draggable",d)),code:tt(Te(c,"code",d)),defining:tt(Te(c,"defining",d)),isolating:tt(Te(c,"isolating",d)),attrs:Object.fromEntries(u.map(b=>{var w;return[b.name,{default:(w=b==null?void 0:b.attribute)===null||w===void 0?void 0:w.default}]}))}),p=tt(Te(c,"parseHTML",d));p&&(h.parseDOM=p.map(b=>ZM(b,u)));const m=Te(c,"renderHTML",d);m&&(h.toDOM=b=>m({node:b,HTMLAttributes:vw(b,u)}));const v=Te(c,"renderText",d);return v&&(h.toText=v),[c.name,h]})),l=Object.fromEntries(s.map(c=>{const u=r.filter(v=>v.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((v,b)=>{const w=Te(b,"extendMarkSchema",d);return{...v,...w?w(c):{}}},{}),h=e2({...f,inclusive:tt(Te(c,"inclusive",d)),excludes:tt(Te(c,"excludes",d)),group:tt(Te(c,"group",d)),spanning:tt(Te(c,"spanning",d)),code:tt(Te(c,"code",d)),attrs:Object.fromEntries(u.map(v=>{var b;return[v.name,{default:(b=v==null?void 0:v.attribute)===null||b===void 0?void 0:b.default}]}))}),p=tt(Te(c,"parseHTML",d));p&&(h.parseDOM=p.map(v=>ZM(v,u)));const m=Te(c,"renderHTML",d);return m&&(h.toDOM=v=>m({mark:v,HTMLAttributes:vw(v,u)})),[c.name,h]}));return new zle({topNode:i,nodes:a,marks:l})}function Av(t,e){return e.nodes[t]||e.marks[t]||null}function t2(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}const Pde=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(o,s,i,a)=>{var l,c;const u=((c=(l=o.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:o,pos:s,parent:i,index:a}))||o.textContent||"%leaf%";n+=u.slice(0,Math.max(0,r-s))}),n};function gC(t){return Object.prototype.toString.call(t)==="[object RegExp]"}let Jy=class{constructor(e){this.find=e.find,this.handler=e.handler}};const Dde=(t,e)=>{if(gC(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Nv(t){var e;const{editor:n,from:r,to:o,text:s,rules:i,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let u=!1;const d=Pde(c)+s;return i.forEach(f=>{if(u)return;const h=Dde(d,f.find);if(!h)return;const p=l.state.tr,m=Wy({state:l.state,transaction:p}),v={from:r-(h[0].length-s.length),to:o},{commands:b,chain:w,can:k}=new Ky({editor:n,state:m});f.handler({state:m,range:v,match:h,commands:b,chain:w,can:k})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:r,to:o,text:s}),l.dispatch(p),u=!0)}),u}function $de(t){const{editor:e,rules:n}=t,r=new Wn({state:{init(){return null},apply(o,s){return o.getMeta(r)||(o.selectionSet||o.docChanged?null:s)}},props:{handleTextInput(o,s,i,a){return Nv({editor:e,from:s,to:i,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:s}=o.state.selection;s&&Nv({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(o,s){if(s.key!=="Enter")return!1;const{$cursor:i}=o.state.selection;return i?Nv({editor:e,from:i.pos,to:i.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function Hde(t){return typeof t=="number"}class Fde{constructor(e){this.find=e.find,this.handler=e.handler}}const Bde=(t,e)=>{if(gC(e))return[...t.matchAll(e)];const n=e(t);return n?n.map(r=>{const o=[r.text];return o.index=r.index,o.input=t,o.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(r.replaceWith)),o}):[]};function jde(t){const{editor:e,state:n,from:r,to:o,rule:s}=t,{commands:i,chain:a,can:l}=new Ky({editor:e,state:n}),c=[];return n.doc.nodesBetween(r,o,(u,d)=>{if(!u.isTextblock||u.type.spec.code)return;const f=Math.max(r,d),h=Math.min(o,d+u.content.size),p=u.textBetween(f-d,h-d,void 0,"");Bde(p,s.find).forEach(m=>{if(m.index===void 0)return;const v=f+m.index+1,b=v+m[0].length,w={from:n.tr.mapping.map(v),to:n.tr.mapping.map(b)},k=s.handler({state:n,range:w,match:m,commands:i,chain:a,can:l});c.push(k)})}),c.every(u=>u!==null)}function zde(t){const{editor:e,rules:n}=t;let r=null,o=!1,s=!1;return n.map(i=>new Wn({view(a){const l=c=>{var u;r=!((u=a.dom.parentElement)===null||u===void 0)&&u.contains(c.target)?a.dom.parentElement:null};return window.addEventListener("dragstart",l),{destroy(){window.removeEventListener("dragstart",l)}}},props:{handleDOMEvents:{drop:a=>(s=r===a.dom.parentElement,!1),paste:(a,l)=>{var c;const u=(c=l.clipboardData)===null||c===void 0?void 0:c.getData("text/html");return o=!!(u!=null&&u.includes("data-pm-slice")),!1}}},appendTransaction:(a,l,c)=>{const u=a[0],d=u.getMeta("uiEvent")==="paste"&&!o,f=u.getMeta("uiEvent")==="drop"&&!s;if(!d&&!f)return;const h=l.doc.content.findDiffStart(c.doc.content),p=l.doc.content.findDiffEnd(c.doc.content);if(!Hde(h)||!p||h===p.b)return;const m=c.tr,v=Wy({state:c,transaction:m});if(!(!jde({editor:e,state:v,from:Math.max(h-1,0),to:p.b-1,rule:i})||!m.steps.length))return m}}))}function Vde(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return[...new Set(e)]}let Ude=class Dd{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Dd.resolve(e),this.schema=Rde(this.extensions,n),this.extensions.forEach(r=>{var o;this.editor.extensionStorage[r.name]=r.storage;const s={name:r.name,options:r.options,storage:r.storage,editor:this.editor,type:Av(r.name,this.schema)};r.type==="mark"&&(!((o=tt(Te(r,"keepOnSplit",s)))!==null&&o!==void 0)||o)&&this.splittableMarks.push(r.name);const i=Te(r,"onBeforeCreate",s);i&&this.editor.on("beforeCreate",i);const a=Te(r,"onCreate",s);a&&this.editor.on("create",a);const l=Te(r,"onUpdate",s);l&&this.editor.on("update",l);const c=Te(r,"onSelectionUpdate",s);c&&this.editor.on("selectionUpdate",c);const u=Te(r,"onTransaction",s);u&&this.editor.on("transaction",u);const d=Te(r,"onFocus",s);d&&this.editor.on("focus",d);const f=Te(r,"onBlur",s);f&&this.editor.on("blur",f);const h=Te(r,"onDestroy",s);h&&this.editor.on("destroy",h)})}static resolve(e){const n=Dd.sort(Dd.flatten(e)),r=Vde(n.map(o=>o.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},o=Te(n,"addExtensions",r);return o?[n,...this.flatten(o())]:n}).flat(10)}static sort(e){return e.sort((n,r)=>{const o=Te(n,"priority")||100,s=Te(r,"priority")||100;return o>s?-1:o<s?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Av(n.name,this.schema)},o=Te(n,"addCommands",r);return o?{...e,...o()}:e},{})}get plugins(){const{editor:e}=this,n=Dd.sort([...this.extensions].reverse()),r=[],o=[],s=n.map(i=>{const a={name:i.name,options:i.options,storage:i.storage,editor:e,type:Av(i.name,this.schema)},l=[],c=Te(i,"addKeyboardShortcuts",a);let u={};if(i.type==="mark"&&i.config.exitable&&(u.ArrowRight=()=>Ma.handleExit({editor:e,mark:i})),c){const m=Object.fromEntries(Object.entries(c()).map(([v,b])=>[v,()=>b({editor:e})]));u={...u,...m}}const d=sde(u);l.push(d);const f=Te(i,"addInputRules",a);t2(i,e.options.enableInputRules)&&f&&r.push(...f());const h=Te(i,"addPasteRules",a);t2(i,e.options.enablePasteRules)&&h&&o.push(...h());const p=Te(i,"addProseMirrorPlugins",a);if(p){const m=p();l.push(...m)}return l}).flat();return[$de({editor:e,rules:r}),...zde({editor:e,rules:o}),...s]}get attributes(){return dL(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=Gy(this.extensions);return Object.fromEntries(n.filter(r=>!!Te(r,"addNodeView")).map(r=>{const o=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:bn(r.name,this.schema)},i=Te(r,"addNodeView",s);if(!i)return[];const a=(l,c,u,d)=>{const f=vw(l,o);return i()({editor:e,node:l,getPos:u,decorations:d,HTMLAttributes:f,extension:r})};return[r.name,a]}))}};function qde(t){return Object.prototype.toString.call(t).slice(8,-1)}function Lv(t){return qde(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Yy(t,e){const n={...t};return Lv(t)&&Lv(e)&&Object.keys(e).forEach(r=>{Lv(e[r])?r in t?n[r]=Yy(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}class zn{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=tt(Te(this,"addOptions",{name:this.name}))),this.storage=tt(Te(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new zn(e)}configure(e={}){const n=this.extend();return n.options=Yy(this.options,e),n.storage=tt(Te(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new zn(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=tt(Te(n,"addOptions",{name:n.name})),n.storage=tt(Te(n,"addStorage",{name:n.name,options:n.options})),n}}function hL(t,e,n){const{from:r,to:o}=e,{blockSeparator:s=`

`,textSerializers:i={}}=n||{};let a="",l=!0;return t.nodesBetween(r,o,(c,u,d,f)=>{var h;const p=i==null?void 0:i[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,o-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function pL(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const Wde=zn.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Wn({key:new qr("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:o}=e,{ranges:s}=o,i=Math.min(...s.map(c=>c.$from.pos)),a=Math.max(...s.map(c=>c.$to.pos)),l=pL(n);return hL(r,{from:i,to:a},{textSerializers:l})}}})]}}),Kde=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),Gde=(t=!1)=>({commands:e})=>e.setContent("",t),Jde=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:o}=r;return n&&o.forEach(({$from:s,$to:i})=>{t.doc.nodesBetween(s.pos,i.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=Ju(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},Yde=t=>e=>t(e),Xde=()=>({state:t,dispatch:e})=>vde(t,e),Qde=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const o=t.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===r.type){if(e){const i=o.before(s),a=o.after(s);t.delete(i,a).scrollIntoView()}return!0}return!1},Zde=t=>({tr:e,state:n,dispatch:r})=>{const o=bn(t,n.schema),s=e.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===o){if(r){const a=s.before(i),l=s.after(i);e.delete(a,l).scrollIntoView()}return!0}return!1},efe=t=>({tr:e,dispatch:n})=>{const{from:r,to:o}=t;return n&&e.delete(r,o),!0},tfe=()=>({state:t,dispatch:e})=>ide(t,e),nfe=()=>({commands:t})=>t.keyboardShortcut("Enter"),rfe=()=>({state:t,dispatch:e})=>yde(t,e);function Dg(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>n.strict?e[o]===t[o]:gC(e[o])?e[o].test(t[o]):e[o]===t[o]):!0}function bw(t,e,n={}){return t.find(r=>r.type===e&&Dg(r.attrs,n))}function ofe(t,e,n={}){return!!bw(t,e,n)}function yC(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&r.offset!==0&&(r=t.parent.childBefore(t.parentOffset)),!r.node)return;const o=bw([...r.node.marks],e,n);if(!o)return;let s=r.index,i=t.start()+r.offset,a=s+1,l=i+r.node.nodeSize;for(bw([...r.node.marks],e,n);s>0&&o.isInSet(t.parent.child(s-1).marks);)s-=1,i-=t.parent.child(s).nodeSize;for(;a<t.parent.childCount&&ofe([...t.parent.child(a).marks],e,n);)l+=t.parent.child(a).nodeSize,a+=1;return{from:i,to:l}}function Ta(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const sfe=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const s=Ta(t,r.schema),{doc:i,selection:a}=n,{$from:l,from:c,to:u}=a;if(o){const d=yC(l,s,e);if(d&&d.from<=c&&d.to>=u){const f=et.create(i,d.from,d.to);n.setSelection(f)}}return!0},ife=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function vC(t){return t instanceof et}function Ws(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function mL(t,e=null){if(!e)return null;const n=Fe.atStart(t),r=Fe.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const o=n.from,s=r.to;return e==="all"?et.create(t,Ws(0,o,s),Ws(t.content.size,o,s)):et.create(t,Ws(e,o,s),Ws(e,o,s))}function bC(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const afe=(t=null,e={})=>({editor:n,view:r,tr:o,dispatch:s})=>{e={scrollIntoView:!0,...e};const i=()=>{bC()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!vC(n.state.selection))return i(),!0;const a=mL(o.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||o.setSelection(a),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),i()),!0},lfe=(t,e)=>n=>t.every((r,o)=>e(r,{...n,index:o})),cfe=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e);function n2(t){const e=`<body>${t}</body>`;return new window.DOMParser().parseFromString(e,"text/html").body}function $g(t,e,n){if(n={slice:!0,parseOptions:{},...n},typeof t=="object"&&t!==null)try{return Array.isArray(t)&&t.length>0?ce.fromArray(t.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(t)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",r),$g("",e,n)}if(typeof t=="string"){const r=rC.fromSchema(e);return n.slice?r.parseSlice(n2(t),n.parseOptions).content:r.parse(n2(t),n.parseOptions)}return $g("",e,n)}function ufe(t,e,n){const r=t.steps.length-1;if(r<e)return;const o=t.steps[r];if(!(o instanceof ui||o instanceof Sr))return;const s=t.mapping.maps[r];let i=0;s.forEach((a,l,c,u)=>{i===0&&(i=u)}),t.setSelection(Fe.near(t.doc.resolve(i),n))}const dfe=t=>t.toString().startsWith("<"),ffe=(t,e,n)=>({tr:r,dispatch:o,editor:s})=>{if(o){n={parseOptions:{},updateSelection:!0,...n};const i=$g(e,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if(i.toString()==="<>")return!0;let{from:a,to:l}=typeof t=="number"?{from:t,to:t}:t,c=!0,u=!0;if((dfe(i)?i:[i]).forEach(d=>{d.check(),c=c?d.isText&&d.marks.length===0:!1,u=u?d.isBlock:!1}),a===l&&u){const{parent:d}=r.doc.resolve(a);d.isTextblock&&!d.type.spec.code&&!d.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(d=>d.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,i),n.updateSelection&&ufe(r,r.steps.length-1,-1)}return!0},hfe=()=>({state:t,dispatch:e})=>hde(t,e),pfe=()=>({state:t,dispatch:e})=>pde(t,e),mfe=()=>({state:t,dispatch:e})=>lde(t,e),gfe=()=>({state:t,dispatch:e})=>dde(t,e);function gL(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function yfe(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,o,s,i;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))bC()||gL()?i=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),i&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const vfe=t=>({editor:e,view:n,tr:r,dispatch:o})=>{const s=yfe(t).split(/-(?!$)/),i=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:i==="Space"?" ":i,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&o&&r.maybeStep(u)}),!0};function Zf(t,e,n={}){const{from:r,to:o,empty:s}=t.selection,i=e?bn(e,t.schema):null,a=[];t.doc.nodesBetween(r,o,(u,d)=>{if(u.isText)return;const f=Math.max(r,d),h=Math.min(o,d+u.nodeSize);a.push({node:u,from:f,to:h})});const l=o-r,c=a.filter(u=>i?i.name===u.node.type.name:!0).filter(u=>Dg(u.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((u,d)=>u+d.to-d.from,0)>=l}const bfe=(t,e={})=>({state:n,dispatch:r})=>{const o=bn(t,n.schema);return Zf(n,o,e)?mde(n,r):!1},wfe=()=>({state:t,dispatch:e})=>bde(t,e),kfe=t=>({state:e,dispatch:n})=>{const r=bn(t,e.schema);return Mde(r)(e,n)},xfe=()=>({state:t,dispatch:e})=>gde(t,e);function Xy(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function r2(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,o)=>(n.includes(o)||(r[o]=t[o]),r),{})}const Cfe=(t,e)=>({tr:n,state:r,dispatch:o})=>{let s=null,i=null;const a=Xy(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=bn(t,r.schema)),a==="mark"&&(i=Ta(t,r.schema)),o&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&n.setNodeMarkup(u,void 0,r2(c.attrs,e)),i&&c.marks.length&&c.marks.forEach(d=>{i===d.type&&n.addMark(u,u+c.nodeSize,i.create(r2(d.attrs,e)))})})}),!0):!1},_fe=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),Sfe=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),Tfe=()=>({state:t,dispatch:e})=>cde(t,e),Mfe=()=>({state:t,dispatch:e})=>fde(t,e),Efe=()=>({state:t,dispatch:e})=>wde(t,e),Ofe=()=>({state:t,dispatch:e})=>Cde(t,e),Ife=()=>({state:t,dispatch:e})=>xde(t,e);function yL(t,e,n={}){return $g(t,e,{slice:!1,parseOptions:n})}const Afe=(t,e=!1,n={})=>({tr:r,editor:o,dispatch:s})=>{const{doc:i}=r,a=yL(t,o.schema,n);return s&&r.replaceWith(0,i.content.size,a).setMeta("preventUpdate",!e),!0};function Nfe(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function vL(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function wC(t){return e=>vL(e.$from,t)}function Lfe(t,e){const n=qh.fromSchema(e).serializeFragment(t),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(n),r.innerHTML}function Rfe(t,e){const n={from:0,to:t.content.size};return hL(t,n,e)}function Qy(t,e){const n=Ta(e,t.schema),{from:r,to:o,empty:s}=t.selection,i=[];s?(t.storedMarks&&i.push(...t.storedMarks),i.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,o,l=>{i.push(...l.marks)});const a=i.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function Pfe(t,e){const n=bn(e,t.schema),{from:r,to:o}=t.selection,s=[];t.doc.nodesBetween(r,o,a=>{s.push(a)});const i=s.reverse().find(a=>a.type.name===n.name);return i?{...i.attrs}:{}}function Dfe(t,e){const n=Xy(typeof e=="string"?e:e.name,t.schema);return n==="node"?Pfe(t,e):n==="mark"?Qy(t,e):{}}function bL(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(o=>{const s=n.resolve(t-1),i=yC(s,o.type);i&&r.push({mark:o,...i})}):n.nodesBetween(t,e,(o,s)=>{r.push(...o.marks.map(i=>({from:s,to:s+o.nodeSize,mark:i})))}),r}function gm(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const o=t.find(s=>s.type===e&&s.name===r);return o?o.attribute.keepOnSplit:!1}))}function ww(t,e,n={}){const{empty:r,ranges:o}=t.selection,s=e?Ta(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(u=>s?s.name===u.type.name:!0).find(u=>Dg(u.attrs,n,{strict:!1}));let i=0;const a=[];if(o.forEach(({$from:u,$to:d})=>{const f=u.pos,h=d.pos;t.doc.nodesBetween(f,h,(p,m)=>{if(!p.isText&&!p.marks.length)return;const v=Math.max(f,m),b=Math.min(h,m+p.nodeSize),w=b-v;i+=w,a.push(...p.marks.map(k=>({mark:k,from:v,to:b})))})}),i===0)return!1;const l=a.filter(u=>s?s.name===u.mark.type.name:!0).filter(u=>Dg(u.mark.attrs,n,{strict:!1})).reduce((u,d)=>u+d.to-d.from,0),c=a.filter(u=>s?u.mark.type!==s&&u.mark.type.excludes(s):!0).reduce((u,d)=>u+d.to-d.from,0);return(l>0?l+c:l)>=i}function $fe(t,e,n={}){if(!e)return Zf(t,null,n)||ww(t,null,n);const r=Xy(e,t.schema);return r==="node"?Zf(t,e,n):r==="mark"?ww(t,e,n):!1}function o2(t,e){const{nodeExtensions:n}=Gy(e),r=n.find(i=>i.name===t);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},s=tt(Te(r,"group",o));return typeof s!="string"?!1:s.split(" ").includes("list")}function Hfe(t){var e;const n=(e=t.type.createAndFill())===null||e===void 0?void 0:e.toJSON(),r=t.toJSON();return JSON.stringify(n)===JSON.stringify(r)}function Ffe(t){return t instanceof Ye}function wL(t,e,n){const r=t.state.doc.content.size,o=Ws(e,0,r),s=Ws(n,0,r),i=t.coordsAtPos(o),a=t.coordsAtPos(s,-1),l=Math.min(i.top,a.top),c=Math.max(i.bottom,a.bottom),u=Math.min(i.left,a.left),d=Math.max(i.right,a.right),f=d-u,h=c-l,p={top:l,bottom:c,left:u,right:d,width:f,height:h,x:u,y:l};return{...p,toJSON:()=>p}}function Bfe(t,e,n){var r;const{selection:o}=e;let s=null;if(vC(o)&&(s=o.$cursor),s){const a=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:i}=o;return i.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(n),p=!!n.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(n));c=h&&p}return!c}),c})}const jfe=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const{selection:s}=n,{empty:i,ranges:a}=s,l=Ta(t,r.schema);if(o)if(i){const c=Qy(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(v=>v.type===l)?f.marks.forEach(v=>{l===v.type&&n.addMark(p,m,l.create({...v.attrs,...e}))}):n.addMark(p,m,l.create(e))})});return Bfe(r,n,l)},zfe=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),Vfe=(t,e={})=>({state:n,dispatch:r,chain:o})=>{const s=bn(t,n.schema);return s.isTextblock?o().command(({commands:i})=>QM(s,e)(n)?!0:i.clearNodes()).command(({state:i})=>QM(s,e)(i,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Ufe=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,o=Ws(t,0,r.content.size),s=Ye.create(r,o);e.setSelection(s)}return!0},qfe=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:o,to:s}=typeof t=="number"?{from:t,to:t}:t,i=et.atStart(r).from,a=et.atEnd(r).to,l=Ws(o,i,a),c=Ws(s,i,a),u=et.create(r,l,c);e.setSelection(u)}return!0},Wfe=t=>({state:e,dispatch:n})=>{const r=bn(t,e.schema);return Ide(r)(e,n)};function s2(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(o=>e==null?void 0:e.includes(o.type.name));t.tr.ensureMarks(r)}}const Kfe=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:o})=>{const{selection:s,doc:i}=e,{$from:a,$to:l}=s,c=o.extensionManager.attributes,u=gm(c,a.node().type.name,a.node().attrs);if(s instanceof Ye&&s.node.isBlock)return!a.parentOffset||!Hc(i,a.pos)?!1:(r&&(t&&s2(n,o.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;s instanceof et&&e.deleteSelection();const f=a.depth===0?void 0:Nfe(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=Hc(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&Hc(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),v=e.doc.resolve(m);a.node(-1).canReplaceWith(v.index(),v.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&s2(n,o.extensionManager.splittableMarks),e.scrollIntoView()}return!0},Gfe=t=>({tr:e,state:n,dispatch:r,editor:o})=>{var s;const i=bn(t,n.schema),{$from:a,$to:l}=n.selection,c=n.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==i)return!1;const d=o.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==i||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let v=ce.empty;const b=a.index(-1)?1:a.index(-2)?2:3;for(let M=a.depth-b;M>=a.depth-3;M-=1)v=ce.from(a.node(M).copy(v));const w=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,k=gm(d,a.node().type.name,a.node().attrs),y=((s=i.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(k))||void 0;v=v.append(ce.from(i.createAndFill(null,y)||void 0));const C=a.before(a.depth-(b-1));e.replace(C,a.after(-w),new xe(v,4-b,0));let _=-1;e.doc.nodesBetween(C,e.doc.content.size,(M,E)=>{if(_>-1)return!1;M.isTextblock&&M.content.size===0&&(_=E+1)}),_>-1&&e.setSelection(et.near(e.doc.resolve(_))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=gm(d,u.type.name,u.attrs),p=gm(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=f?[{type:i,attrs:h},{type:f,attrs:p}]:[{type:i,attrs:h}];if(!Hc(e.doc,a.pos,2))return!1;if(r){const{selection:v,storedMarks:b}=n,{splittableMarks:w}=o.extensionManager,k=b||v.$to.parentOffset&&v.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!k||!r)return!0;const y=k.filter(C=>w.includes(C.type.name));e.ensureMarks(y)}return!0},Rv=(t,e)=>{const n=wC(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&_a(t.doc,n.pos)&&t.join(n.pos),!0},Pv=(t,e)=>{const n=wC(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&_a(t.doc,r)&&t.join(r),!0},Jfe=(t,e,n,r={})=>({editor:o,tr:s,state:i,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=o.extensionManager,h=bn(t,i.schema),p=bn(e,i.schema),{selection:m,storedMarks:v}=i,{$from:b,$to:w}=m,k=b.blockRange(w),y=v||m.$to.parentOffset&&m.$from.marks();if(!k)return!1;const C=wC(_=>o2(_.type.name,d))(m);if(k.depth>=1&&C&&k.depth-C.depth<=1){if(C.node.type===h)return c.liftListItem(p);if(o2(C.node.type.name,d)&&h.validContent(C.node.content)&&a)return l().command(()=>(s.setNodeMarkup(C.pos,h),!0)).command(()=>Rv(s,h)).command(()=>Pv(s,h)).run()}return!n||!y||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>Rv(s,h)).command(()=>Pv(s,h)).run():l().command(()=>{const _=u().wrapInList(h,r),M=y.filter(E=>f.includes(E.type.name));return s.ensureMarks(M),_?!0:c.clearNodes()}).wrapInList(h,r).command(()=>Rv(s,h)).command(()=>Pv(s,h)).run()},Yfe=(t,e={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:s=!1}=n,i=Ta(t,r.schema);return ww(r,i,e)?o.unsetMark(i,{extendEmptyMarkRange:s}):o.setMark(i,e)},Xfe=(t,e,n={})=>({state:r,commands:o})=>{const s=bn(t,r.schema),i=bn(e,r.schema);return Zf(r,s,n)?o.setNode(i):o.setNode(s,n)},Qfe=(t,e={})=>({state:n,commands:r})=>{const o=bn(t,n.schema);return Zf(n,o,e)?r.lift(o):r.wrapIn(o,e)},Zfe=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let s;if(o.spec.isInputRules&&(s=o.getState(t))){if(e){const i=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)i.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=i.doc.resolve(s.from).marks();i.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else i.delete(s.from,s.to)}return!0}}return!1},ehe=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:o}=n;return r||e&&o.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},the=(t,e={})=>({tr:n,state:r,dispatch:o})=>{var s;const{extendEmptyMarkRange:i=!1}=e,{selection:a}=n,l=Ta(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!o)return!0;if(u&&i){let{from:f,to:h}=a;const p=(s=c.marks().find(v=>v.type===l))===null||s===void 0?void 0:s.attrs,m=yC(c,l,p);m&&(f=m.from,h=m.to),n.removeMark(f,h,l)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,l)});return n.removeStoredMark(l),!0},nhe=(t,e={})=>({tr:n,state:r,dispatch:o})=>{let s=null,i=null;const a=Xy(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=bn(t,r.schema)),a==="mark"&&(i=Ta(t,r.schema)),o&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{s&&s===d.type&&n.setNodeMarkup(f,void 0,{...d.attrs,...e}),i&&d.marks.length&&d.marks.forEach(h=>{if(i===h.type){const p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);n.addMark(p,m,i.create({...h.attrs,...e}))}})})}),!0):!1},rhe=(t,e={})=>({state:n,dispatch:r})=>{const o=bn(t,n.schema);return _de(o,e)(n,r)},ohe=(t,e={})=>({state:n,dispatch:r})=>{const o=bn(t,n.schema);return Sde(o,e)(n,r)};var she=Object.freeze({__proto__:null,blur:Kde,clearContent:Gde,clearNodes:Jde,command:Yde,createParagraphNear:Xde,deleteCurrentNode:Qde,deleteNode:Zde,deleteRange:efe,deleteSelection:tfe,enter:nfe,exitCode:rfe,extendMarkRange:sfe,first:ife,focus:afe,forEach:lfe,insertContent:cfe,insertContentAt:ffe,joinUp:hfe,joinDown:pfe,joinBackward:mfe,joinForward:gfe,keyboardShortcut:vfe,lift:bfe,liftEmptyBlock:wfe,liftListItem:kfe,newlineInCode:xfe,resetAttributes:Cfe,scrollIntoView:_fe,selectAll:Sfe,selectNodeBackward:Tfe,selectNodeForward:Mfe,selectParentNode:Efe,selectTextblockEnd:Ofe,selectTextblockStart:Ife,setContent:Afe,setMark:jfe,setMeta:zfe,setNode:Vfe,setNodeSelection:Ufe,setTextSelection:qfe,sinkListItem:Wfe,splitBlock:Kfe,splitListItem:Gfe,toggleList:Jfe,toggleMark:Yfe,toggleNode:Xfe,toggleWrap:Qfe,undoInputRule:Zfe,unsetAllMarks:ehe,unsetMark:the,updateAttributes:nhe,wrapIn:rhe,wrapInList:ohe});const ihe=zn.create({name:"commands",addCommands(){return{...she}}}),ahe=zn.create({name:"editable",addProseMirrorPlugins(){return[new Wn({key:new qr("editable"),props:{editable:()=>this.editor.options.editable}})]}}),lhe=zn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Wn({key:new qr("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),che=zn.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:i})=>{const{selection:a,doc:l}=i,{empty:c,$anchor:u}=a,{pos:d,parent:f}=u,h=Fe.atStart(l).from===d;return!c||!h||!f.type.isTextblock||f.textContent.length?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},r={...n},o={...n,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return bC()||gL()?o:r},addProseMirrorPlugins(){return[new Wn({key:new qr("clearDocument"),appendTransaction:(t,e,n)=>{if(!(t.some(d=>d.docChanged)&&!e.doc.eq(n.doc)))return;const{empty:r,from:o,to:s}=e.selection,i=Fe.atStart(e.doc).from,a=Fe.atEnd(e.doc).to;if(r||!(o===i&&s===a)||n.doc.textBetween(0,n.doc.content.size," "," ").length!==0)return;const l=n.tr,c=Wy({state:n,transaction:l}),{commands:u}=new Ky({editor:this.editor,state:c});if(u.clearNodes(),!!l.steps.length)return l}})]}}),uhe=zn.create({name:"tabindex",addProseMirrorPlugins(){return[new Wn({key:new qr("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var dhe=Object.freeze({__proto__:null,ClipboardTextSerializer:Wde,Commands:ihe,Editable:ahe,FocusEvents:lhe,Keymap:che,Tabindex:uhe});const fhe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function hhe(t,e){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.setAttribute("data-tiptap-style",""),r.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(r),r}let phe=class extends Ade{constructor(t={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=hhe(fhe,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,e){const n=fL(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});this.view.updateState(r)}unregisterPlugin(t){if(this.isDestroyed)return;const e=typeof t=="string"?`${t}$`:t.key,n=this.state.reconfigure({plugins:this.state.plugins.filter(r=>!r.key.startsWith(e))});this.view.updateState(n)}createExtensionManager(){const t=[...this.options.enableCoreExtensions?Object.values(dhe):[],...this.options.extensions].filter(e=>["extension","node","mark"].includes(e==null?void 0:e.type));this.extensionManager=new Ude(t,this)}createCommandManager(){this.commandManager=new Ky({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const t=yL(this.options.content,this.schema,this.options.parseOptions),e=mL(t,this.options.autofocus);this.view=new Yue(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:kce.create({doc:t,selection:e||void 0})});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.createNodeViews();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(s=>{var i;return(i=this.capturedTransaction)===null||i===void 0?void 0:i.step(s)});return}const e=this.state.apply(t),n=!this.state.selection.eq(e.selection);this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t}),n&&this.emit("selectionUpdate",{editor:this,transaction:t});const r=t.getMeta("focus"),o=t.getMeta("blur");r&&this.emit("focus",{editor:this,event:r.event,transaction:t}),o&&this.emit("blur",{editor:this,event:o.event,transaction:t}),!(!t.docChanged||t.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return Dfe(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return $fe(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Lfe(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return Rfe(this.state.doc,{blockSeparator:e,textSerializers:{...pL(this.schema),...n}})}get isEmpty(){return Hfe(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var t;return!(!((t=this.view)===null||t===void 0)&&t.docView)}};function gu(t){return new Jy({find:t.find,handler:({state:e,range:n,match:r})=>{const o=tt(t.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:s}=e,i=r[r.length-1],a=r[0];let l=n.to;if(i){const c=a.search(/\S/),u=n.from+a.indexOf(i),d=u+i.length;if(bL(n.from,n.to,e.doc).filter(f=>f.mark.type.excluded.find(h=>h===t.type&&h!==f.mark.type)).filter(f=>f.to>u).length)return null;d<n.to&&s.delete(d,n.to),u>n.from&&s.delete(n.from+c,u),l=n.from+c+i.length,s.addMark(n.from+c,l,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}function mhe(t){return new Jy({find:t.find,handler:({state:e,range:n,match:r})=>{const o=tt(t.getAttributes,void 0,r)||{},{tr:s}=e,i=n.from;let a=n.to;if(r[1]){const l=r[0].lastIndexOf(r[1]);let c=i+l;c>a?c=a:a=c+r[1].length;const u=r[0][r[0].length-1];s.insertText(u,i+r[0].length-1),s.replaceWith(c,a,t.type.create(o))}else r[0]&&s.replaceWith(i,a,t.type.create(o))}})}function kw(t){return new Jy({find:t.find,handler:({state:e,range:n,match:r})=>{const o=e.doc.resolve(n.from),s=tt(t.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function eh(t){return new Jy({find:t.find,handler:({state:e,range:n,match:r,chain:o})=>{const s=tt(t.getAttributes,void 0,r)||{},i=e.tr.delete(n.from,n.to),a=i.doc.resolve(n.from).blockRange(),l=a&&iC(a,t.type,s);if(!l)return null;if(i.wrap(a,l),t.keepMarks&&t.editor){const{selection:u,storedMarks:d}=e,{splittableMarks:f}=t.editor.extensionManager,h=d||u.$to.parentOffset&&u.$from.marks();if(h){const p=h.filter(m=>f.includes(m.type.name));i.ensureMarks(p)}}if(t.keepAttributes){const u=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";o().updateAttributes(u,s).run()}const c=i.doc.resolve(n.from-1).nodeBefore;c&&c.type===t.type&&_a(i.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,c))&&i.join(n.from-1)}})}let Ma=class xw{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=tt(Te(this,"addOptions",{name:this.name}))),this.storage=tt(Te(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new xw(e)}configure(e={}){const n=this.extend();return n.options=Yy(this.options,e),n.storage=tt(Te(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new xw(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=tt(Te(n,"addOptions",{name:n.name})),n.storage=tt(Te(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const s=o.marks();if(!s.find(a=>(a==null?void 0:a.type.name)===n.name))return!1;const i=s.find(a=>(a==null?void 0:a.type.name)===n.name);return i&&r.removeStoredMark(i),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}};class on{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=tt(Te(this,"addOptions",{name:this.name}))),this.storage=tt(Te(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new on(e)}configure(e={}){const n=this.extend();return n.options=Yy(this.options,e),n.storage=tt(Te(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new on(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=tt(Te(n,"addOptions",{name:n.name})),n.storage=tt(Te(n,"addStorage",{name:n.name,options:n.options})),n}}function yu(t){return new Fde({find:t.find,handler:({state:e,range:n,match:r})=>{const o=tt(t.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:s}=e,i=r[r.length-1],a=r[0];let l=n.to;if(i){const c=a.search(/\S/),u=n.from+a.indexOf(i),d=u+i.length;if(bL(n.from,n.to,e.doc).filter(f=>f.mark.type.excluded.find(h=>h===t.type&&h!==f.mark.type)).filter(f=>f.to>u).length)return null;d<n.to&&s.delete(d,n.to),u>n.from&&s.delete(n.from+c,u),l=n.from+c+i.length,s.addMark(n.from+c,l,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}const ghe=/^\s*>\s$/,yhe=on.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",$t(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[eh({find:ghe,type:this.type})]}}),vhe=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,bhe=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,whe=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,khe=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,xhe=Ma.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",$t(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[gu({find:vhe,type:this.type}),gu({find:whe,type:this.type})]},addPasteRules(){return[yu({find:bhe,type:this.type}),yu({find:khe,type:this.type})]}}),Che=on.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",$t(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),i2=Ma.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",$t(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=Qy(t,this.type);return Object.entries(n).some(([,r])=>!!r)?!0:e.unsetMark(this.name)}}}}),a2=/^\s*([-+*])\s$/,_he=on.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",$t(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Che.name,this.editor.getAttributes(i2.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=eh({find:a2,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=eh({find:a2,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(i2.name),editor:this.editor})),[t]}}),She=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,The=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,Mhe=Ma.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",$t(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[gu({find:She,type:this.type})]},addPasteRules(){return[yu({find:The,type:this.type})]}}),Ehe=/^```([a-z]+)?[\s\n]$/,Ohe=/^~~~([a-z]+)?[\s\n]$/,Ihe=on.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;return[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(r=>r.startsWith(n)).map(r=>r.replace(n,""))[0]||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",$t(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:o}=n;if(!o||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,i=r.parent.textContent.endsWith(`

`);return!s||!i?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:o,empty:s}=n;if(!s||o.parent.type!==this.type||o.parentOffset!==o.parent.nodeSize-2)return!1;const i=o.after();return i===void 0||r.nodeAt(i)?!1:t.commands.exitCode()}}},addInputRules(){return[kw({find:Ehe,type:this.type,getAttributes:t=>({language:t[1]})}),kw({find:Ohe,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Wn({key:new qr("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,s=o==null?void 0:o.mode;if(!n||!s)return!1;const{tr:i}=t.state;return i.replaceSelectionWith(this.type.create({language:s})),i.setSelection(et.near(i.doc.resolve(Math.max(0,i.selection.from-2)))),i.insertText(n.replace(/\r\n?/g,`
`)),i.setMeta("paste",!0),t.dispatch(i),!0}}})]}}),Ahe=on.create({name:"doc",topNode:!0,content:"block+"});function Nhe(t={}){return new Wn({view(e){return new Lhe(e,t)}})}class Lhe{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let s=i=>{this[o](i)};return e.dom.addEventListener(o,s),{name:o,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=a?u.bottom:u.top;a&&l&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let o=this.editorView.dom.offsetParent;this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let s,i;if(!o||o==document.body&&getComputedStyle(o).position=="static")s=-pageXOffset,i=-pageYOffset;else{let a=o.getBoundingClientRect();s=a.left-o.scrollLeft,i=a.top-o.scrollTop}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-i+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=r&&r.type.spec.disableDropCursor,s=typeof o=="function"?o(this.editorView,n,e):o;if(n&&!s){let i=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=u8(this.editorView.state.doc,i,this.editorView.dragging.slice);a!=null&&(i=a)}this.setCursor(i),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const Rhe=zn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Nhe(this.options)]}});class Vt extends Fe{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Vt.valid(r)?new Vt(r):Fe.near(r)}content(){return xe.empty}eq(e){return e instanceof Vt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Vt(e.resolve(n.pos))}getBookmark(){return new Phe(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!Dhe(e)||!$he(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let o=n.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Vt.valid(e))return e;let o=e.pos,s=null;for(let i=e.depth;;i--){let a=e.node(i);if(n>0?e.indexAfter(i)<a.childCount:e.index(i)>0){s=a.child(n>0?e.indexAfter(i):e.index(i)-1);break}else if(i==0)return null;o+=n;let l=e.doc.resolve(o);if(Vt.valid(l))return l}for(;;){let i=n>0?s.firstChild:s.lastChild;if(!i){if(s.isAtom&&!s.isText&&!Ye.isSelectable(s)){e=e.doc.resolve(o+s.nodeSize*n),r=!1;continue e}break}s=i,o+=n;let a=e.doc.resolve(o);if(Vt.valid(a))return a}return null}}}Vt.prototype.visible=!1;Vt.findFrom=Vt.findGapCursorFrom;Fe.jsonID("gapcursor",Vt);let Phe=class kL{constructor(e){this.pos=e}map(e){return new kL(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Vt.valid(n)?new Vt(n):Fe.near(n)}};function Dhe(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function $he(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function Hhe(){return new Wn({props:{decorations:zhe,createSelectionBetween(t,e,n){return e.pos==n.pos&&Vt.valid(n)?new Vt(n):null},handleClick:Bhe,handleKeyDown:Fhe,handleDOMEvents:{beforeinput:jhe}}})}const Fhe=mC({ArrowLeft:Mp("horiz",-1),ArrowRight:Mp("horiz",1),ArrowUp:Mp("vert",-1),ArrowDown:Mp("vert",1)});function Mp(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,s){let i=r.selection,a=e>0?i.$to:i.$from,l=i.empty;if(i instanceof et){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=Vt.findGapCursorFrom(a,e,l);return c?(o&&o(r.tr.setSelection(new Vt(c))),!0):!1}}function Bhe(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Vt.valid(r))return!1;let o=t.posAtCoords({left:n.clientX,top:n.clientY});return o&&o.inside>-1&&Ye.isSelectable(t.state.doc.nodeAt(o.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Vt(r))),!0)}function jhe(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Vt))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let o=ce.empty;for(let i=r.length-1;i>=0;i--)o=ce.from(r[i].createAndFill(null,o));let s=t.state.tr.replace(n.pos,n.pos,new xe(o,0,0));return s.setSelection(et.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function zhe(t){if(!(t.selection instanceof Vt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",yr.create(t.doc,[di.widget(t.selection.head,e,{key:"gapcursor"})])}const Vhe=zn.create({name:"gapCursor",addProseMirrorPlugins(){return[Hhe()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=tt(Te(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),Uhe=on.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",$t(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:o,storedMarks:s}=n;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:a}=r.extensionManager,l=s||o.$to.parentOffset&&o.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&i){const d=l.filter(f=>a.includes(f.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),qhe=on.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,$t(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>kw({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var Hg=200,gn=function(){};gn.prototype.append=function(t){return t.length?(t=gn.from(t),!this.length&&t||t.length<Hg&&this.leafAppend(t)||this.length<Hg&&t.leafPrepend(this)||this.appendInner(t)):this};gn.prototype.prepend=function(t){return t.length?gn.from(t).append(this):this};gn.prototype.appendInner=function(t){return new Whe(this,t)};gn.prototype.slice=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=this.length),t>=e?gn.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))};gn.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};gn.prototype.forEach=function(t,e,n){e===void 0&&(e=0),n===void 0&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)};gn.prototype.map=function(t,e,n){e===void 0&&(e=0),n===void 0&&(n=this.length);var r=[];return this.forEach(function(o,s){return r.push(t(o,s))},e,n),r};gn.from=function(t){return t instanceof gn?t:t&&t.length?new xL(t):gn.empty};var xL=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(r,o){return r==0&&o==this.length?this:new e(this.values.slice(r,o))},e.prototype.getInner=function(r){return this.values[r]},e.prototype.forEachInner=function(r,o,s,i){for(var a=o;a<s;a++)if(r(this.values[a],i+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,s,i){for(var a=o-1;a>=s;a--)if(r(this.values[a],i+a)===!1)return!1},e.prototype.leafAppend=function(r){if(this.length+r.length<=Hg)return new e(this.values.concat(r.flatten()))},e.prototype.leafPrepend=function(r){if(this.length+r.length<=Hg)return new e(r.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(gn);gn.empty=new xL([]);var Whe=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,r,o,s){var i=this.left.length;if(r<i&&this.left.forEachInner(n,r,Math.min(o,i),s)===!1||o>i&&this.right.forEachInner(n,Math.max(r-i,0),Math.min(this.length,o)-i,s+i)===!1)return!1},e.prototype.forEachInvertedInner=function(n,r,o,s){var i=this.left.length;if(r>i&&this.right.forEachInvertedInner(n,r-i,Math.max(o,i)-i,s+i)===!1||o<i&&this.left.forEachInvertedInner(n,Math.min(r,i),o,s)===!1)return!1},e.prototype.sliceInner=function(n,r){if(n==0&&r==this.length)return this;var o=this.left.length;return r<=o?this.left.slice(n,r):n>=o?this.right.slice(n-o,r-o):this.left.slice(n,o).append(this.right.slice(0,r-o))},e.prototype.leafAppend=function(n){var r=this.right.leafAppend(n);if(r)return new e(this.left,r)},e.prototype.leafPrepend=function(n){var r=this.left.leafPrepend(n);if(r)return new e(r,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(gn);const Khe=500;let th=class gc{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,s;n&&(o=this.remapping(r,this.items.length),s=o.maps.length);let i=e.tr,a,l,c=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){o||(o=this.remapping(r,f+1),s=o.maps.length),s--,u.push(d);return}if(o){u.push(new bi(d.map));let h=d.step.map(o.slice(s)),p;h&&i.maybeStep(h).doc&&(p=i.mapping.maps[i.mapping.maps.length-1],c.push(new bi(p,void 0,void 0,c.length+u.length))),s--,p&&o.appendMap(p,s)}else i.maybeStep(d.step);if(d.selection)return a=o?d.selection.map(o.slice(s)):d.selection,l=new gc(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:i,selection:a}}addTransform(e,n,r,o){let s=[],i=this.eventCount,a=this.items,l=!o&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),f=new bi(e.mapping.maps[u],d,n),h;(h=l&&l.merge(f))&&(f=h,u?s.pop():a=a.slice(0,a.length-1)),s.push(f),n&&(i++,n=void 0),o||(l=f)}let c=i-r.depth;return c>Jhe&&(a=Ghe(a,c),i-=c),new gc(a.append(s),i)}remapping(e,n){let r=new a8;return this.items.forEach((o,s)=>{let i=o.mirrorOffset!=null&&s-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,i)},e,n),r}addMaps(e){return this.eventCount==0?this:new gc(this.items.append(e.map(n=>new bi(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-n),s=e.mapping,i=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},o);let l=n;this.items.forEach(f=>{let h=s.getMirror(--l);if(h==null)return;i=Math.min(i,h);let p=s.maps[h];if(f.step){let m=e.steps[h].invert(e.docs[h]),v=f.selection&&f.selection.map(s.slice(l+1,h));v&&a++,r.push(new bi(p,m,v))}else r.push(new bi(p))},o);let c=[];for(let f=n;f<i;f++)c.push(new bi(s.maps[f]));let u=this.items.slice(0,o).append(c).append(r),d=new gc(u,a);return d.emptyItemCount()>Khe&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,o=[],s=0;return this.items.forEach((i,a)=>{if(a>=e)o.push(i),i.selection&&s++;else if(i.step){let l=i.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=i.selection&&i.selection.map(n.slice(r));u&&s++;let d=new bi(c.invert(),l,u),f,h=o.length-1;(f=o.length&&o[h].merge(d))?o[h]=f:o.push(d)}}else i.map&&r--},this.items.length,0),new gc(gn.from(o.reverse()),s)}};th.empty=new th(gn.empty,0);function Ghe(t,e){let n;return t.forEach((r,o)=>{if(r.selection&&e--==0)return n=o,!1}),t.slice(n)}let bi=class CL{constructor(e,n,r,o){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new CL(n.getMap().invert(),n,this.selection)}}};class Ai{constructor(e,n,r,o,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=s}}const Jhe=20;function Yhe(t,e,n,r){let o=n.getMeta(oa),s;if(o)return o.historyState;n.getMeta(Qhe)&&(t=new Ai(t.done,t.undone,null,0,-1));let i=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(i&&i.getMeta(oa))return i.getMeta(oa).redo?new Ai(t.done.addTransform(n,void 0,r,ym(e)),t.undone,l2(n.mapping.maps[n.steps.length-1]),t.prevTime,t.prevComposition):new Ai(t.done,t.undone.addTransform(n,void 0,r,ym(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(i&&i.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!i&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!Xhe(n,t.prevRanges)),c=i?Dv(t.prevRanges,n.mapping):l2(n.mapping.maps[n.steps.length-1]);return new Ai(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,ym(e)),th.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new Ai(t.done.rebased(n,s),t.undone.rebased(n,s),Dv(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Ai(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Dv(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function Xhe(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,o)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&o>=e[s]&&(n=!0)}),n}function l2(t){let e=[];return t.forEach((n,r,o,s)=>e.push(o,s)),e}function Dv(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let o=e.map(t[r],1),s=e.map(t[r+1],-1);o<=s&&n.push(o,s)}return n}function _L(t,e,n,r){let o=ym(e),s=oa.get(e).spec.config,i=(r?t.undone:t.done).popEvent(e,o);if(!i)return;let a=i.selection.resolve(i.transform.doc),l=(r?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),s,o),c=new Ai(r?l:i.remaining,r?i.remaining:l,null,0,-1);n(i.transform.setSelection(a).setMeta(oa,{redo:r,historyState:c}).scrollIntoView())}let $v=!1,c2=null;function ym(t){let e=t.plugins;if(c2!=e){$v=!1,c2=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){$v=!0;break}}return $v}const oa=new qr("history"),Qhe=new qr("closeHistory");function Zhe(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Wn({key:oa,state:{init(){return new Ai(th.empty,th.empty,null,0,-1)},apply(e,n,r){return Yhe(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,o=r=="historyUndo"?SL:r=="historyRedo"?TL:null;return o?(n.preventDefault(),o(e.state,e.dispatch)):!1}}}})}const SL=(t,e)=>{let n=oa.getState(t);return!n||n.done.eventCount==0?!1:(e&&_L(n,t,e,!1),!0)},TL=(t,e)=>{let n=oa.getState(t);return!n||n.undone.eventCount==0?!1:(e&&_L(n,t,e,!0),!0)},epe=zn.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>SL(t,e),redo:()=>({state:t,dispatch:e})=>TL(t,e)}},addProseMirrorPlugins(){return[Zhe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),tpe=on.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",$t(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t})=>t().insertContent({type:this.name}).command(({tr:e,dispatch:n})=>{var r;if(n){const{$to:o}=e.selection,s=o.end();if(o.nodeAfter)e.setSelection(et.create(e.doc,o.pos));else{const i=(r=o.parent.type.contentMatch.defaultType)===null||r===void 0?void 0:r.create();i&&(e.insert(s,i),e.setSelection(et.create(e.doc,s)))}e.scrollIntoView()}return!0}).run()}},addInputRules(){return[mhe({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),npe=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,rpe=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,ope=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,spe=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,ipe=Ma.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",$t(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[gu({find:npe,type:this.type}),gu({find:ope,type:this.type})]},addPasteRules(){return[yu({find:rpe,type:this.type}),yu({find:spe,type:this.type})]}}),ape=on.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",$t(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),lpe=on.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",$t(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),u2=Ma.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",$t(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=Qy(t,this.type);return Object.entries(n).some(([,r])=>!!r)?!0:e.unsetMark(this.name)}}}}),d2=/^(\d+)\.\s$/,cpe=on.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",$t(this.options.HTMLAttributes,n),0]:["ol",$t(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(lpe.name,this.editor.getAttributes(u2.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=eh({find:d2,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=eh({find:d2,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(u2.name)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),upe=on.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",$t(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),dpe=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,fpe=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,hpe=Ma.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",$t(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[gu({find:dpe,type:this.type})]},addPasteRules(){return[yu({find:fpe,type:this.type})]}}),ppe=on.create({name:"text",group:"inline"}),mpe=zn.create({name:"starterKit",addExtensions(){var t,e,n,r,o,s,i,a,l,c,u,d,f,h,p,m,v,b;const w=[];return this.options.blockquote!==!1&&w.push(yhe.configure((t=this.options)===null||t===void 0?void 0:t.blockquote)),this.options.bold!==!1&&w.push(xhe.configure((e=this.options)===null||e===void 0?void 0:e.bold)),this.options.bulletList!==!1&&w.push(_he.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&w.push(Mhe.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&w.push(Ihe.configure((o=this.options)===null||o===void 0?void 0:o.codeBlock)),this.options.document!==!1&&w.push(Ahe.configure((s=this.options)===null||s===void 0?void 0:s.document)),this.options.dropcursor!==!1&&w.push(Rhe.configure((i=this.options)===null||i===void 0?void 0:i.dropcursor)),this.options.gapcursor!==!1&&w.push(Vhe.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&w.push(Uhe.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&w.push(qhe.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&w.push(epe.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&w.push(tpe.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&w.push(ipe.configure((f=this.options)===null||f===void 0?void 0:f.italic)),this.options.listItem!==!1&&w.push(ape.configure((h=this.options)===null||h===void 0?void 0:h.listItem)),this.options.orderedList!==!1&&w.push(cpe.configure((p=this.options)===null||p===void 0?void 0:p.orderedList)),this.options.paragraph!==!1&&w.push(upe.configure((m=this.options)===null||m===void 0?void 0:m.paragraph)),this.options.strike!==!1&&w.push(hpe.configure((v=this.options)===null||v===void 0?void 0:v.strike)),this.options.text!==!1&&w.push(ppe.configure((b=this.options)===null||b===void 0?void 0:b.text)),w}}),gpe=Ma.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",$t(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),ype=zn.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:"left"}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>t.style.textAlign||this.options.defaultAlignment,renderHTML:t=>t.textAlign===this.options.defaultAlignment?{}:{style:`text-align: ${t.textAlign}`}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.every(n=>e.updateAttributes(n,{textAlign:t})):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.every(e=>t.resetAttributes(e,"textAlign"))}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}});var vr="top",vo="bottom",bo="right",br="left",kC="auto",Gh=[vr,vo,bo,br],vu="start",nh="end",vpe="clippingParents",ML="viewport",hd="popper",bpe="reference",f2=Gh.reduce(function(t,e){return t.concat([e+"-"+vu,e+"-"+nh])},[]),EL=[].concat(Gh,[kC]).reduce(function(t,e){return t.concat([e,e+"-"+vu,e+"-"+nh])},[]),wpe="beforeRead",kpe="read",xpe="afterRead",Cpe="beforeMain",_pe="main",Spe="afterMain",Tpe="beforeWrite",Mpe="write",Epe="afterWrite",Ope=[wpe,kpe,xpe,Cpe,_pe,Spe,Tpe,Mpe,Epe];function ws(t){return t?(t.nodeName||"").toLowerCase():null}function jr(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Hl(t){var e=jr(t).Element;return t instanceof e||t instanceof Element}function fo(t){var e=jr(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function xC(t){if(typeof ShadowRoot>"u")return!1;var e=jr(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Ipe(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},o=e.attributes[n]||{},s=e.elements[n];!fo(s)||!ws(s)||(Object.assign(s.style,r),Object.keys(o).forEach(function(i){var a=o[i];a===!1?s.removeAttribute(i):s.setAttribute(i,a===!0?"":a)}))})}function Ape(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var o=e.elements[r],s=e.attributes[r]||{},i=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=i.reduce(function(l,c){return l[c]="",l},{});!fo(o)||!ws(o)||(Object.assign(o.style,a),Object.keys(s).forEach(function(l){o.removeAttribute(l)}))})}}const OL={name:"applyStyles",enabled:!0,phase:"write",fn:Ipe,effect:Ape,requires:["computeStyles"]};function hs(t){return t.split("-")[0]}var vl=Math.max,Fg=Math.min,bu=Math.round;function Cw(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function IL(){return!/^((?!chrome|android).)*safari/i.test(Cw())}function wu(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),o=1,s=1;e&&fo(t)&&(o=t.offsetWidth>0&&bu(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&bu(r.height)/t.offsetHeight||1);var i=Hl(t)?jr(t):window,a=i.visualViewport,l=!IL()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/o,u=(r.top+(l&&a?a.offsetTop:0))/s,d=r.width/o,f=r.height/s;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c,x:c,y:u}}function CC(t){var e=wu(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function AL(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&xC(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function oi(t){return jr(t).getComputedStyle(t)}function Npe(t){return["table","td","th"].indexOf(ws(t))>=0}function Ea(t){return((Hl(t)?t.ownerDocument:t.document)||window.document).documentElement}function Zy(t){return ws(t)==="html"?t:t.assignedSlot||t.parentNode||(xC(t)?t.host:null)||Ea(t)}function h2(t){return!fo(t)||oi(t).position==="fixed"?null:t.offsetParent}function Lpe(t){var e=/firefox/i.test(Cw()),n=/Trident/i.test(Cw());if(n&&fo(t)){var r=oi(t);if(r.position==="fixed")return null}var o=Zy(t);for(xC(o)&&(o=o.host);fo(o)&&["html","body"].indexOf(ws(o))<0;){var s=oi(o);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return o;o=o.parentNode}return null}function Jh(t){for(var e=jr(t),n=h2(t);n&&Npe(n)&&oi(n).position==="static";)n=h2(n);return n&&(ws(n)==="html"||ws(n)==="body"&&oi(n).position==="static")?e:n||Lpe(t)||e}function _C(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function gf(t,e,n){return vl(t,Fg(e,n))}function Rpe(t,e,n){var r=gf(t,e,n);return r>n?n:r}function NL(){return{top:0,right:0,bottom:0,left:0}}function LL(t){return Object.assign({},NL(),t)}function RL(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var Ppe=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,LL(typeof t!="number"?t:RL(t,Gh))};function Dpe(t){var e,n=t.state,r=t.name,o=t.options,s=n.elements.arrow,i=n.modifiersData.popperOffsets,a=hs(n.placement),l=_C(a),c=[br,bo].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!i)){var d=Ppe(o.padding,n),f=CC(s),h=l==="y"?vr:br,p=l==="y"?vo:bo,m=n.rects.reference[u]+n.rects.reference[l]-i[l]-n.rects.popper[u],v=i[l]-n.rects.reference[l],b=Jh(s),w=b?l==="y"?b.clientHeight||0:b.clientWidth||0:0,k=m/2-v/2,y=d[h],C=w-f[u]-d[p],_=w/2-f[u]/2+k,M=gf(y,_,C),E=l;n.modifiersData[r]=(e={},e[E]=M,e.centerOffset=M-_,e)}}function $pe(t){var e=t.state,n=t.options,r=n.element,o=r===void 0?"[data-popper-arrow]":r;o!=null&&(typeof o=="string"&&(o=e.elements.popper.querySelector(o),!o)||AL(e.elements.popper,o)&&(e.elements.arrow=o))}const Hpe={name:"arrow",enabled:!0,phase:"main",fn:Dpe,effect:$pe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ku(t){return t.split("-")[1]}var Fpe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Bpe(t,e){var n=t.x,r=t.y,o=e.devicePixelRatio||1;return{x:bu(n*o)/o||0,y:bu(r*o)/o||0}}function p2(t){var e,n=t.popper,r=t.popperRect,o=t.placement,s=t.variation,i=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,f=i.x,h=f===void 0?0:f,p=i.y,m=p===void 0?0:p,v=typeof u=="function"?u({x:h,y:m}):{x:h,y:m};h=v.x,m=v.y;var b=i.hasOwnProperty("x"),w=i.hasOwnProperty("y"),k=br,y=vr,C=window;if(c){var _=Jh(n),M="clientHeight",E="clientWidth";if(_===jr(n)&&(_=Ea(n),oi(_).position!=="static"&&a==="absolute"&&(M="scrollHeight",E="scrollWidth")),_=_,o===vr||(o===br||o===bo)&&s===nh){y=vo;var O=d&&_===C&&C.visualViewport?C.visualViewport.height:_[M];m-=O-r.height,m*=l?1:-1}if(o===br||(o===vr||o===vo)&&s===nh){k=bo;var N=d&&_===C&&C.visualViewport?C.visualViewport.width:_[E];h-=N-r.width,h*=l?1:-1}}var R=Object.assign({position:a},c&&Fpe),I=u===!0?Bpe({x:h,y:m},jr(n)):{x:h,y:m};if(h=I.x,m=I.y,l){var j;return Object.assign({},R,(j={},j[y]=w?"0":"",j[k]=b?"0":"",j.transform=(C.devicePixelRatio||1)<=1?"translate("+h+"px, "+m+"px)":"translate3d("+h+"px, "+m+"px, 0)",j))}return Object.assign({},R,(e={},e[y]=w?m+"px":"",e[k]=b?h+"px":"",e.transform="",e))}function jpe(t){var e=t.state,n=t.options,r=n.gpuAcceleration,o=r===void 0?!0:r,s=n.adaptive,i=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:hs(e.placement),variation:ku(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,p2(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:i,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,p2(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const zpe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:jpe,data:{}};var Ep={passive:!0};function Vpe(t){var e=t.state,n=t.instance,r=t.options,o=r.scroll,s=o===void 0?!0:o,i=r.resize,a=i===void 0?!0:i,l=jr(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,Ep)}),a&&l.addEventListener("resize",n.update,Ep),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,Ep)}),a&&l.removeEventListener("resize",n.update,Ep)}}const Upe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Vpe,data:{}};var qpe={left:"right",right:"left",bottom:"top",top:"bottom"};function vm(t){return t.replace(/left|right|bottom|top/g,function(e){return qpe[e]})}var Wpe={start:"end",end:"start"};function m2(t){return t.replace(/start|end/g,function(e){return Wpe[e]})}function SC(t){var e=jr(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function TC(t){return wu(Ea(t)).left+SC(t).scrollLeft}function Kpe(t,e){var n=jr(t),r=Ea(t),o=n.visualViewport,s=r.clientWidth,i=r.clientHeight,a=0,l=0;if(o){s=o.width,i=o.height;var c=IL();(c||!c&&e==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:s,height:i,x:a+TC(t),y:l}}function Gpe(t){var e,n=Ea(t),r=SC(t),o=(e=t.ownerDocument)==null?void 0:e.body,s=vl(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),i=vl(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),a=-r.scrollLeft+TC(t),l=-r.scrollTop;return oi(o||n).direction==="rtl"&&(a+=vl(n.clientWidth,o?o.clientWidth:0)-s),{width:s,height:i,x:a,y:l}}function MC(t){var e=oi(t),n=e.overflow,r=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function PL(t){return["html","body","#document"].indexOf(ws(t))>=0?t.ownerDocument.body:fo(t)&&MC(t)?t:PL(Zy(t))}function yf(t,e){var n;e===void 0&&(e=[]);var r=PL(t),o=r===((n=t.ownerDocument)==null?void 0:n.body),s=jr(r),i=o?[s].concat(s.visualViewport||[],MC(r)?r:[]):r,a=e.concat(i);return o?a:a.concat(yf(Zy(i)))}function _w(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Jpe(t,e){var n=wu(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function g2(t,e,n){return e===ML?_w(Kpe(t,n)):Hl(e)?Jpe(e,n):_w(Gpe(Ea(t)))}function Ype(t){var e=yf(Zy(t)),n=["absolute","fixed"].indexOf(oi(t).position)>=0,r=n&&fo(t)?Jh(t):t;return Hl(r)?e.filter(function(o){return Hl(o)&&AL(o,r)&&ws(o)!=="body"}):[]}function Xpe(t,e,n,r){var o=e==="clippingParents"?Ype(t):[].concat(e),s=[].concat(o,[n]),i=s[0],a=s.reduce(function(l,c){var u=g2(t,c,r);return l.top=vl(u.top,l.top),l.right=Fg(u.right,l.right),l.bottom=Fg(u.bottom,l.bottom),l.left=vl(u.left,l.left),l},g2(t,i,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function DL(t){var e=t.reference,n=t.element,r=t.placement,o=r?hs(r):null,s=r?ku(r):null,i=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(o){case vr:l={x:i,y:e.y-n.height};break;case vo:l={x:i,y:e.y+e.height};break;case bo:l={x:e.x+e.width,y:a};break;case br:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=o?_C(o):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case vu:l[c]=l[c]-(e[u]/2-n[u]/2);break;case nh:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function rh(t,e){e===void 0&&(e={});var n=e,r=n.placement,o=r===void 0?t.placement:r,s=n.strategy,i=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?vpe:a,c=n.rootBoundary,u=c===void 0?ML:c,d=n.elementContext,f=d===void 0?hd:d,h=n.altBoundary,p=h===void 0?!1:h,m=n.padding,v=m===void 0?0:m,b=LL(typeof v!="number"?v:RL(v,Gh)),w=f===hd?bpe:hd,k=t.rects.popper,y=t.elements[p?w:f],C=Xpe(Hl(y)?y:y.contextElement||Ea(t.elements.popper),l,u,i),_=wu(t.elements.reference),M=DL({reference:_,element:k,strategy:"absolute",placement:o}),E=_w(Object.assign({},k,M)),O=f===hd?E:_,N={top:C.top-O.top+b.top,bottom:O.bottom-C.bottom+b.bottom,left:C.left-O.left+b.left,right:O.right-C.right+b.right},R=t.modifiersData.offset;if(f===hd&&R){var I=R[o];Object.keys(N).forEach(function(j){var de=[bo,vo].indexOf(j)>=0?1:-1,te=[vr,vo].indexOf(j)>=0?"y":"x";N[j]+=I[te]*de})}return N}function Qpe(t,e){e===void 0&&(e={});var n=e,r=n.placement,o=n.boundary,s=n.rootBoundary,i=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?EL:l,u=ku(r),d=u?a?f2:f2.filter(function(p){return ku(p)===u}):Gh,f=d.filter(function(p){return c.indexOf(p)>=0});f.length===0&&(f=d);var h=f.reduce(function(p,m){return p[m]=rh(t,{placement:m,boundary:o,rootBoundary:s,padding:i})[hs(m)],p},{});return Object.keys(h).sort(function(p,m){return h[p]-h[m]})}function Zpe(t){if(hs(t)===kC)return[];var e=vm(t);return[m2(t),e,m2(e)]}function eme(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var o=n.mainAxis,s=o===void 0?!0:o,i=n.altAxis,a=i===void 0?!0:i,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,p=h===void 0?!0:h,m=n.allowedAutoPlacements,v=e.options.placement,b=hs(v),w=b===v,k=l||(w||!p?[vm(v)]:Zpe(v)),y=[v].concat(k).reduce(function(Re,Ke){return Re.concat(hs(Ke)===kC?Qpe(e,{placement:Ke,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:m}):Ke)},[]),C=e.rects.reference,_=e.rects.popper,M=new Map,E=!0,O=y[0],N=0;N<y.length;N++){var R=y[N],I=hs(R),j=ku(R)===vu,de=[vr,vo].indexOf(I)>=0,te=de?"width":"height",Q=rh(e,{placement:R,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),ie=de?j?bo:br:j?vo:vr;C[te]>_[te]&&(ie=vm(ie));var z=vm(ie),ge=[];if(s&&ge.push(Q[I]<=0),a&&ge.push(Q[ie]<=0,Q[z]<=0),ge.every(function(Re){return Re})){O=R,E=!1;break}M.set(R,ge)}if(E)for(var ve=p?3:1,be=function(Re){var Ke=y.find(function(je){var K=M.get(je);if(K)return K.slice(0,Re).every(function(le){return le})});if(Ke)return O=Ke,"break"},Se=ve;Se>0;Se--){var Ee=be(Se);if(Ee==="break")break}e.placement!==O&&(e.modifiersData[r]._skip=!0,e.placement=O,e.reset=!0)}}const tme={name:"flip",enabled:!0,phase:"main",fn:eme,requiresIfExists:["offset"],data:{_skip:!1}};function y2(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function v2(t){return[vr,bo,vo,br].some(function(e){return t[e]>=0})}function nme(t){var e=t.state,n=t.name,r=e.rects.reference,o=e.rects.popper,s=e.modifiersData.preventOverflow,i=rh(e,{elementContext:"reference"}),a=rh(e,{altBoundary:!0}),l=y2(i,r),c=y2(a,o,s),u=v2(l),d=v2(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const rme={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:nme};function ome(t,e,n){var r=hs(t),o=[br,vr].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,i=s[0],a=s[1];return i=i||0,a=(a||0)*o,[br,bo].indexOf(r)>=0?{x:a,y:i}:{x:i,y:a}}function sme(t){var e=t.state,n=t.options,r=t.name,o=n.offset,s=o===void 0?[0,0]:o,i=EL.reduce(function(u,d){return u[d]=ome(d,e.rects,s),u},{}),a=i[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=i}const ime={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:sme};function ame(t){var e=t.state,n=t.name;e.modifiersData[n]=DL({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const lme={name:"popperOffsets",enabled:!0,phase:"read",fn:ame,data:{}};function cme(t){return t==="x"?"y":"x"}function ume(t){var e=t.state,n=t.options,r=t.name,o=n.mainAxis,s=o===void 0?!0:o,i=n.altAxis,a=i===void 0?!1:i,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,f=n.tether,h=f===void 0?!0:f,p=n.tetherOffset,m=p===void 0?0:p,v=rh(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),b=hs(e.placement),w=ku(e.placement),k=!w,y=_C(b),C=cme(y),_=e.modifiersData.popperOffsets,M=e.rects.reference,E=e.rects.popper,O=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,N=typeof O=="number"?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),R=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,I={x:0,y:0};if(_){if(s){var j,de=y==="y"?vr:br,te=y==="y"?vo:bo,Q=y==="y"?"height":"width",ie=_[y],z=ie+v[de],ge=ie-v[te],ve=h?-E[Q]/2:0,be=w===vu?M[Q]:E[Q],Se=w===vu?-E[Q]:-M[Q],Ee=e.elements.arrow,Re=h&&Ee?CC(Ee):{width:0,height:0},Ke=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:NL(),je=Ke[de],K=Ke[te],le=gf(0,M[Q],Re[Q]),G=k?M[Q]/2-ve-le-je-N.mainAxis:be-le-je-N.mainAxis,Z=k?-M[Q]/2+ve+le+K+N.mainAxis:Se+le+K+N.mainAxis,ze=e.elements.arrow&&Jh(e.elements.arrow),st=ze?y==="y"?ze.clientTop||0:ze.clientLeft||0:0,P=(j=R==null?void 0:R[y])!=null?j:0,$=ie+G-P-st,U=ie+Z-P,X=gf(h?Fg(z,$):z,ie,h?vl(ge,U):ge);_[y]=X,I[y]=X-ie}if(a){var J,se=y==="x"?vr:br,fe=y==="x"?vo:bo,A=_[C],L=C==="y"?"height":"width",F=A+v[se],W=A-v[fe],ue=[vr,br].indexOf(b)!==-1,ne=(J=R==null?void 0:R[C])!=null?J:0,B=ue?F:A-M[L]-E[L]-ne+N.altAxis,q=ue?A+M[L]+E[L]-ne-N.altAxis:W,Oe=h&&ue?Rpe(B,A,q):gf(h?B:F,A,h?q:W);_[C]=Oe,I[C]=Oe-A}e.modifiersData[r]=I}}const dme={name:"preventOverflow",enabled:!0,phase:"main",fn:ume,requiresIfExists:["offset"]};function fme(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function hme(t){return t===jr(t)||!fo(t)?SC(t):fme(t)}function pme(t){var e=t.getBoundingClientRect(),n=bu(e.width)/t.offsetWidth||1,r=bu(e.height)/t.offsetHeight||1;return n!==1||r!==1}function mme(t,e,n){n===void 0&&(n=!1);var r=fo(e),o=fo(e)&&pme(e),s=Ea(e),i=wu(t,o,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((ws(e)!=="body"||MC(s))&&(a=hme(e)),fo(e)?(l=wu(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=TC(s))),{x:i.left+a.scrollLeft-l.x,y:i.top+a.scrollTop-l.y,width:i.width,height:i.height}}function gme(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function o(s){n.add(s.name);var i=[].concat(s.requires||[],s.requiresIfExists||[]);i.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&o(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||o(s)}),r}function yme(t){var e=gme(t);return Ope.reduce(function(n,r){return n.concat(e.filter(function(o){return o.phase===r}))},[])}function vme(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function bme(t){var e=t.reduce(function(n,r){var o=n[r.name];return n[r.name]=o?Object.assign({},o,r,{options:Object.assign({},o.options,r.options),data:Object.assign({},o.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var b2={placement:"bottom",modifiers:[],strategy:"absolute"};function w2(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function wme(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,o=e.defaultOptions,s=o===void 0?b2:o;return function(i,a,l){l===void 0&&(l=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},b2,s),modifiersData:{},elements:{reference:i,popper:a},attributes:{},styles:{}},u=[],d=!1,f={state:c,setOptions:function(m){var v=typeof m=="function"?m(c.options):m;p(),c.options=Object.assign({},s,c.options,v),c.scrollParents={reference:Hl(i)?yf(i):i.contextElement?yf(i.contextElement):[],popper:yf(a)};var b=yme(bme([].concat(r,c.options.modifiers)));return c.orderedModifiers=b.filter(function(w){return w.enabled}),h(),f.update()},forceUpdate:function(){if(!d){var m=c.elements,v=m.reference,b=m.popper;if(w2(v,b)){c.rects={reference:mme(v,Jh(b),c.options.strategy==="fixed"),popper:CC(b)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(E){return c.modifiersData[E.name]=Object.assign({},E.data)});for(var w=0;w<c.orderedModifiers.length;w++){if(c.reset===!0){c.reset=!1,w=-1;continue}var k=c.orderedModifiers[w],y=k.fn,C=k.options,_=C===void 0?{}:C,M=k.name;typeof y=="function"&&(c=y({state:c,options:_,name:M,instance:f})||c)}}}},update:vme(function(){return new Promise(function(m){f.forceUpdate(),m(c)})}),destroy:function(){p(),d=!0}};if(!w2(i,a))return f;f.setOptions(l).then(function(m){!d&&l.onFirstUpdate&&l.onFirstUpdate(m)});function h(){c.orderedModifiers.forEach(function(m){var v=m.name,b=m.options,w=b===void 0?{}:b,k=m.effect;if(typeof k=="function"){var y=k({state:c,name:v,instance:f,options:w}),C=function(){};u.push(y||C)}})}function p(){u.forEach(function(m){return m()}),u=[]}return f}}var kme=[Upe,lme,zpe,OL,ime,tme,dme,Hpe,rme],xme=wme({defaultModifiers:kme}),Cme="tippy-box",$L="tippy-content",_me="tippy-backdrop",HL="tippy-arrow",FL="tippy-svg-arrow",Wa={passive:!0,capture:!0},BL=function(){return document.body};function Hv(t,e,n){if(Array.isArray(t)){var r=t[e];return r??(Array.isArray(n)?n[e]:n)}return t}function EC(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function jL(t,e){return typeof t=="function"?t.apply(void 0,e):t}function k2(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function Sme(t){return t.split(/\s+/).filter(Boolean)}function yc(t){return[].concat(t)}function x2(t,e){t.indexOf(e)===-1&&t.push(e)}function Tme(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function Mme(t){return t.split("-")[0]}function Bg(t){return[].slice.call(t)}function C2(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function vf(){return document.createElement("div")}function e0(t){return["Element","Fragment"].some(function(e){return EC(t,e)})}function Eme(t){return EC(t,"NodeList")}function Ome(t){return EC(t,"MouseEvent")}function Ime(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function Ame(t){return e0(t)?[t]:Eme(t)?Bg(t):Array.isArray(t)?t:Bg(document.querySelectorAll(t))}function Fv(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function _2(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function Nme(t){var e,n=yc(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function Lme(t,e){var n=e.clientX,r=e.clientY;return t.every(function(o){var s=o.popperRect,i=o.popperState,a=o.props,l=a.interactiveBorder,c=Mme(i.placement),u=i.modifiersData.offset;if(!u)return!0;var d=c==="bottom"?u.top.y:0,f=c==="top"?u.bottom.y:0,h=c==="right"?u.left.x:0,p=c==="left"?u.right.x:0,m=s.top-r+d>l,v=r-s.bottom-f>l,b=s.left-n+h>l,w=n-s.right-p>l;return m||v||b||w})}function Bv(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(o){t[r](o,n)})}function S2(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var Qo={isTouch:!1},T2=0;function Rme(){Qo.isTouch||(Qo.isTouch=!0,window.performance&&document.addEventListener("mousemove",zL))}function zL(){var t=performance.now();t-T2<20&&(Qo.isTouch=!1,document.removeEventListener("mousemove",zL)),T2=t}function Pme(){var t=document.activeElement;if(Ime(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function Dme(){document.addEventListener("touchstart",Rme,Wa),window.addEventListener("blur",Pme)}var $me=typeof window<"u"&&typeof document<"u",Hme=$me?!!window.msCrypto:!1,Fme={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Bme={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},$o=Object.assign({appendTo:BL,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Fme,Bme),jme=Object.keys($o),zme=function(t){var e=Object.keys(t);e.forEach(function(n){$o[n]=t[n]})};function VL(t){var e=t.plugins||[],n=e.reduce(function(r,o){var s=o.name,i=o.defaultValue;if(s){var a;r[s]=t[s]!==void 0?t[s]:(a=$o[s])!=null?a:i}return r},{});return Object.assign({},t,n)}function Vme(t,e){var n=e?Object.keys(VL(Object.assign({},$o,{plugins:e}))):jme,r=n.reduce(function(o,s){var i=(t.getAttribute("data-tippy-"+s)||"").trim();if(!i)return o;if(s==="content")o[s]=i;else try{o[s]=JSON.parse(i)}catch{o[s]=i}return o},{});return r}function M2(t,e){var n=Object.assign({},e,{content:jL(e.content,[t])},e.ignoreAttributes?{}:Vme(t,e.plugins));return n.aria=Object.assign({},$o.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var Ume=function(){return"innerHTML"};function Sw(t,e){t[Ume()]=e}function E2(t){var e=vf();return t===!0?e.className=HL:(e.className=FL,e0(t)?e.appendChild(t):Sw(e,t)),e}function O2(t,e){e0(e.content)?(Sw(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?Sw(t,e.content):t.textContent=e.content)}function Tw(t){var e=t.firstElementChild,n=Bg(e.children);return{box:e,content:n.find(function(r){return r.classList.contains($L)}),arrow:n.find(function(r){return r.classList.contains(HL)||r.classList.contains(FL)}),backdrop:n.find(function(r){return r.classList.contains(_me)})}}function UL(t){var e=vf(),n=vf();n.className=Cme,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=vf();r.className=$L,r.setAttribute("data-state","hidden"),O2(r,t.props),e.appendChild(n),n.appendChild(r),o(t.props,t.props);function o(s,i){var a=Tw(e),l=a.box,c=a.content,u=a.arrow;i.theme?l.setAttribute("data-theme",i.theme):l.removeAttribute("data-theme"),typeof i.animation=="string"?l.setAttribute("data-animation",i.animation):l.removeAttribute("data-animation"),i.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof i.maxWidth=="number"?i.maxWidth+"px":i.maxWidth,i.role?l.setAttribute("role",i.role):l.removeAttribute("role"),(s.content!==i.content||s.allowHTML!==i.allowHTML)&&O2(c,t.props),i.arrow?u?s.arrow!==i.arrow&&(l.removeChild(u),l.appendChild(E2(i.arrow))):l.appendChild(E2(i.arrow)):u&&l.removeChild(u)}return{popper:e,onUpdate:o}}UL.$$tippy=!0;var qme=1,Op=[],jv=[];function Wme(t,e){var n=M2(t,Object.assign({},$o,VL(C2(e)))),r,o,s,i=!1,a=!1,l=!1,c=!1,u,d,f,h=[],p=k2($,n.interactiveDebounce),m,v=qme++,b=null,w=Tme(n.plugins),k={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},y={id:v,reference:t,popper:vf(),popperInstance:b,props:n,state:k,plugins:w,clearDelayTimeouts:B,setProps:q,setContent:Oe,show:Ne,hide:bt,hideWithInteractivity:tn,enable:ue,disable:ne,unmount:kn,destroy:fi};if(!n.render)return y;var C=n.render(y),_=C.popper,M=C.onUpdate;_.setAttribute("data-tippy-root",""),_.id="tippy-"+y.id,y.popper=_,t._tippy=y,_._tippy=y;var E=w.map(function(D){return D.fn(y)}),O=t.hasAttribute("aria-expanded");return ze(),ve(),ie(),z("onCreate",[y]),n.showOnCreate&&F(),_.addEventListener("mouseenter",function(){y.props.interactive&&y.state.isVisible&&y.clearDelayTimeouts()}),_.addEventListener("mouseleave",function(){y.props.interactive&&y.props.trigger.indexOf("mouseenter")>=0&&de().addEventListener("mousemove",p)}),y;function N(){var D=y.props.touch;return Array.isArray(D)?D:[D,0]}function R(){return N()[0]==="hold"}function I(){var D;return!!((D=y.props.render)!=null&&D.$$tippy)}function j(){return m||t}function de(){var D=j().parentNode;return D?Nme(D):document}function te(){return Tw(_)}function Q(D){return y.state.isMounted&&!y.state.isVisible||Qo.isTouch||u&&u.type==="focus"?0:Hv(y.props.delay,D?0:1,$o.delay)}function ie(D){D===void 0&&(D=!1),_.style.pointerEvents=y.props.interactive&&!D?"":"none",_.style.zIndex=""+y.props.zIndex}function z(D,ee,re){if(re===void 0&&(re=!0),E.forEach(function(_e){_e[D]&&_e[D].apply(_e,ee)}),re){var Ce;(Ce=y.props)[D].apply(Ce,ee)}}function ge(){var D=y.props.aria;if(D.content){var ee="aria-"+D.content,re=_.id,Ce=yc(y.props.triggerTarget||t);Ce.forEach(function(_e){var wt=_e.getAttribute(ee);if(y.state.isVisible)_e.setAttribute(ee,wt?wt+" "+re:re);else{var Rt=wt&&wt.replace(re,"").trim();Rt?_e.setAttribute(ee,Rt):_e.removeAttribute(ee)}})}}function ve(){if(!(O||!y.props.aria.expanded)){var D=yc(y.props.triggerTarget||t);D.forEach(function(ee){y.props.interactive?ee.setAttribute("aria-expanded",y.state.isVisible&&ee===j()?"true":"false"):ee.removeAttribute("aria-expanded")})}}function be(){de().removeEventListener("mousemove",p),Op=Op.filter(function(D){return D!==p})}function Se(D){if(!(Qo.isTouch&&(l||D.type==="mousedown"))){var ee=D.composedPath&&D.composedPath()[0]||D.target;if(!(y.props.interactive&&S2(_,ee))){if(yc(y.props.triggerTarget||t).some(function(re){return S2(re,ee)})){if(Qo.isTouch||y.state.isVisible&&y.props.trigger.indexOf("click")>=0)return}else z("onClickOutside",[y,D]);y.props.hideOnClick===!0&&(y.clearDelayTimeouts(),y.hide(),a=!0,setTimeout(function(){a=!1}),y.state.isMounted||je())}}}function Ee(){l=!0}function Re(){l=!1}function Ke(){var D=de();D.addEventListener("mousedown",Se,!0),D.addEventListener("touchend",Se,Wa),D.addEventListener("touchstart",Re,Wa),D.addEventListener("touchmove",Ee,Wa)}function je(){var D=de();D.removeEventListener("mousedown",Se,!0),D.removeEventListener("touchend",Se,Wa),D.removeEventListener("touchstart",Re,Wa),D.removeEventListener("touchmove",Ee,Wa)}function K(D,ee){G(D,function(){!y.state.isVisible&&_.parentNode&&_.parentNode.contains(_)&&ee()})}function le(D,ee){G(D,ee)}function G(D,ee){var re=te().box;function Ce(_e){_e.target===re&&(Bv(re,"remove",Ce),ee())}if(D===0)return ee();Bv(re,"remove",d),Bv(re,"add",Ce),d=Ce}function Z(D,ee,re){re===void 0&&(re=!1);var Ce=yc(y.props.triggerTarget||t);Ce.forEach(function(_e){_e.addEventListener(D,ee,re),h.push({node:_e,eventType:D,handler:ee,options:re})})}function ze(){R()&&(Z("touchstart",P,{passive:!0}),Z("touchend",U,{passive:!0})),Sme(y.props.trigger).forEach(function(D){if(D!=="manual")switch(Z(D,P),D){case"mouseenter":Z("mouseleave",U);break;case"focus":Z(Hme?"focusout":"blur",X);break;case"focusin":Z("focusout",X);break}})}function st(){h.forEach(function(D){var ee=D.node,re=D.eventType,Ce=D.handler,_e=D.options;ee.removeEventListener(re,Ce,_e)}),h=[]}function P(D){var ee,re=!1;if(!(!y.state.isEnabled||J(D)||a)){var Ce=((ee=u)==null?void 0:ee.type)==="focus";u=D,m=D.currentTarget,ve(),!y.state.isVisible&&Ome(D)&&Op.forEach(function(_e){return _e(D)}),D.type==="click"&&(y.props.trigger.indexOf("mouseenter")<0||i)&&y.props.hideOnClick!==!1&&y.state.isVisible?re=!0:F(D),D.type==="click"&&(i=!re),re&&!Ce&&W(D)}}function $(D){var ee=D.target,re=j().contains(ee)||_.contains(ee);if(!(D.type==="mousemove"&&re)){var Ce=L().concat(_).map(function(_e){var wt,Rt=_e._tippy,Er=(wt=Rt.popperInstance)==null?void 0:wt.state;return Er?{popperRect:_e.getBoundingClientRect(),popperState:Er,props:n}:null}).filter(Boolean);Lme(Ce,D)&&(be(),W(D))}}function U(D){var ee=J(D)||y.props.trigger.indexOf("click")>=0&&i;if(!ee){if(y.props.interactive){y.hideWithInteractivity(D);return}W(D)}}function X(D){y.props.trigger.indexOf("focusin")<0&&D.target!==j()||y.props.interactive&&D.relatedTarget&&_.contains(D.relatedTarget)||W(D)}function J(D){return Qo.isTouch?R()!==D.type.indexOf("touch")>=0:!1}function se(){fe();var D=y.props,ee=D.popperOptions,re=D.placement,Ce=D.offset,_e=D.getReferenceClientRect,wt=D.moveTransition,Rt=I()?Tw(_).arrow:null,Er=_e?{getBoundingClientRect:_e,contextElement:_e.contextElement||j()}:t,Os={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Is){var Or=Is.state;if(I()){var b0=te(),La=b0.box;["placement","reference-hidden","escaped"].forEach(function(As){As==="placement"?La.setAttribute("data-placement",Or.placement):Or.attributes.popper["data-popper-"+As]?La.setAttribute("data-"+As,""):La.removeAttribute("data-"+As)}),Or.attributes.popper={}}}},Gn=[{name:"offset",options:{offset:Ce}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!wt}},Os];I()&&Rt&&Gn.push({name:"arrow",options:{element:Rt,padding:3}}),Gn.push.apply(Gn,(ee==null?void 0:ee.modifiers)||[]),y.popperInstance=xme(Er,_,Object.assign({},ee,{placement:re,onFirstUpdate:f,modifiers:Gn}))}function fe(){y.popperInstance&&(y.popperInstance.destroy(),y.popperInstance=null)}function A(){var D=y.props.appendTo,ee,re=j();y.props.interactive&&D===BL||D==="parent"?ee=re.parentNode:ee=jL(D,[re]),ee.contains(_)||ee.appendChild(_),y.state.isMounted=!0,se()}function L(){return Bg(_.querySelectorAll("[data-tippy-root]"))}function F(D){y.clearDelayTimeouts(),D&&z("onTrigger",[y,D]),Ke();var ee=Q(!0),re=N(),Ce=re[0],_e=re[1];Qo.isTouch&&Ce==="hold"&&_e&&(ee=_e),ee?r=setTimeout(function(){y.show()},ee):y.show()}function W(D){if(y.clearDelayTimeouts(),z("onUntrigger",[y,D]),!y.state.isVisible){je();return}if(!(y.props.trigger.indexOf("mouseenter")>=0&&y.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(D.type)>=0&&i)){var ee=Q(!1);ee?o=setTimeout(function(){y.state.isVisible&&y.hide()},ee):s=requestAnimationFrame(function(){y.hide()})}}function ue(){y.state.isEnabled=!0}function ne(){y.hide(),y.state.isEnabled=!1}function B(){clearTimeout(r),clearTimeout(o),cancelAnimationFrame(s)}function q(D){if(!y.state.isDestroyed){z("onBeforeUpdate",[y,D]),st();var ee=y.props,re=M2(t,Object.assign({},ee,C2(D),{ignoreAttributes:!0}));y.props=re,ze(),ee.interactiveDebounce!==re.interactiveDebounce&&(be(),p=k2($,re.interactiveDebounce)),ee.triggerTarget&&!re.triggerTarget?yc(ee.triggerTarget).forEach(function(Ce){Ce.removeAttribute("aria-expanded")}):re.triggerTarget&&t.removeAttribute("aria-expanded"),ve(),ie(),M&&M(ee,re),y.popperInstance&&(se(),L().forEach(function(Ce){requestAnimationFrame(Ce._tippy.popperInstance.forceUpdate)})),z("onAfterUpdate",[y,D])}}function Oe(D){y.setProps({content:D})}function Ne(){var D=y.state.isVisible,ee=y.state.isDestroyed,re=!y.state.isEnabled,Ce=Qo.isTouch&&!y.props.touch,_e=Hv(y.props.duration,0,$o.duration);if(!(D||ee||re||Ce)&&!j().hasAttribute("disabled")&&(z("onShow",[y],!1),y.props.onShow(y)!==!1)){if(y.state.isVisible=!0,I()&&(_.style.visibility="visible"),ie(),Ke(),y.state.isMounted||(_.style.transition="none"),I()){var wt=te(),Rt=wt.box,Er=wt.content;Fv([Rt,Er],0)}f=function(){var Os;if(!(!y.state.isVisible||c)){if(c=!0,_.offsetHeight,_.style.transition=y.props.moveTransition,I()&&y.props.animation){var Gn=te(),Is=Gn.box,Or=Gn.content;Fv([Is,Or],_e),_2([Is,Or],"visible")}ge(),ve(),x2(jv,y),(Os=y.popperInstance)==null||Os.forceUpdate(),z("onMount",[y]),y.props.animation&&I()&&le(_e,function(){y.state.isShown=!0,z("onShown",[y])})}},A()}}function bt(){var D=!y.state.isVisible,ee=y.state.isDestroyed,re=!y.state.isEnabled,Ce=Hv(y.props.duration,1,$o.duration);if(!(D||ee||re)&&(z("onHide",[y],!1),y.props.onHide(y)!==!1)){if(y.state.isVisible=!1,y.state.isShown=!1,c=!1,i=!1,I()&&(_.style.visibility="hidden"),be(),je(),ie(!0),I()){var _e=te(),wt=_e.box,Rt=_e.content;y.props.animation&&(Fv([wt,Rt],Ce),_2([wt,Rt],"hidden"))}ge(),ve(),y.props.animation?I()&&K(Ce,y.unmount):y.unmount()}}function tn(D){de().addEventListener("mousemove",p),x2(Op,p),p(D)}function kn(){y.state.isVisible&&y.hide(),y.state.isMounted&&(fe(),L().forEach(function(D){D._tippy.unmount()}),_.parentNode&&_.parentNode.removeChild(_),jv=jv.filter(function(D){return D!==y}),y.state.isMounted=!1,z("onHidden",[y]))}function fi(){!y.state.isDestroyed&&(y.clearDelayTimeouts(),y.unmount(),st(),delete t._tippy,y.state.isDestroyed=!0,z("onDestroy",[y]))}}function Yu(t,e){e===void 0&&(e={});var n=$o.plugins.concat(e.plugins||[]);Dme();var r=Object.assign({},e,{plugins:n}),o=Ame(t),s=o.reduce(function(i,a){var l=a&&Wme(a,r);return l&&i.push(l),i},[]);return e0(t)?s[0]:s}Yu.defaultProps=$o;Yu.setDefaultProps=zme;Yu.currentInput=Qo;Object.assign({},OL,{effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow)}});Yu.setDefaultProps({render:UL});class Kme{constructor({editor:e,element:n,view:r,tippyOptions:o={},updateDelay:s=250,shouldShow:i}){this.preventHide=!1,this.shouldShow=({view:a,state:l,from:c,to:u})=>{const{doc:d,selection:f}=l,{empty:h}=f,p=!d.textBetween(c,u).length&&vC(l.selection),m=this.element.contains(document.activeElement);return!(!(a.hasFocus()||m)||h||p||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:a})=>{var l;if(this.preventHide){this.preventHide=!1;return}a!=null&&a.relatedTarget&&!((l=this.element.parentNode)===null||l===void 0)&&l.contains(a.relatedTarget)||this.hide()},this.tippyBlurHandler=a=>{this.blurHandler({event:a})},this.handleDebouncedUpdate=(a,l)=>{const c=!(l!=null&&l.selection.eq(a.state.selection)),u=!(l!=null&&l.doc.eq(a.state.doc));!c&&!u||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(a,c,u,l)},this.updateDelay))},this.updateHandler=(a,l,c,u)=>{var d,f,h;const{state:p,composing:m}=a,{selection:v}=p;if(m||!l&&!c)return;this.createTooltip();const{ranges:b}=v,w=Math.min(...b.map(y=>y.$from.pos)),k=Math.max(...b.map(y=>y.$to.pos));if(!(!((d=this.shouldShow)===null||d===void 0)&&d.call(this,{editor:this.editor,view:a,state:p,oldState:u,from:w,to:k}))){this.hide();return}(f=this.tippy)===null||f===void 0||f.setProps({getReferenceClientRect:((h=this.tippyOptions)===null||h===void 0?void 0:h.getReferenceClientRect)||(()=>{if(Ffe(p.selection)){let y=a.nodeDOM(w);const C=y.dataset.nodeViewWrapper?y:y.querySelector("[data-node-view-wrapper]");if(C&&(y=C.firstChild),y)return y.getBoundingClientRect()}return wL(a,w,k)})}),this.show()},this.editor=e,this.element=n,this.view=r,this.updateDelay=s,i&&(this.shouldShow=i),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=o,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,n=!!e.parentElement;this.tippy||!n||(this.tippy=Yu(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,n){const{state:r}=e,o=r.selection.$from.pos!==r.selection.$to.pos;if(this.updateDelay>0&&o){this.handleDebouncedUpdate(e,n);return}const s=!(n!=null&&n.selection.eq(e.state.selection)),i=!(n!=null&&n.doc.eq(e.state.doc));this.updateHandler(e,s,i,n)}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,n;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(n=this.tippy)===null||n===void 0||n.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const Gme=t=>new Wn({key:typeof t.pluginKey=="string"?new qr(t.pluginKey):t.pluginKey,view:e=>new Kme({view:e,...t})});zn.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[Gme({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});class Jme{constructor({editor:e,element:n,view:r,tippyOptions:o={},shouldShow:s}){this.preventHide=!1,this.shouldShow=({view:i,state:a})=>{const{selection:l}=a,{$anchor:c,empty:u}=l,d=c.depth===1,f=c.parent.isTextblock&&!c.parent.type.spec.code&&!c.parent.textContent;return!(!i.hasFocus()||!u||!d||!f||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:i})=>{var a;if(this.preventHide){this.preventHide=!1;return}i!=null&&i.relatedTarget&&!((a=this.element.parentNode)===null||a===void 0)&&a.contains(i.relatedTarget)||this.hide()},this.tippyBlurHandler=i=>{this.blurHandler({event:i})},this.editor=e,this.element=n,this.view=r,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=o,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,n=!!e.parentElement;this.tippy||!n||(this.tippy=Yu(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,n){var r,o,s;const{state:i}=e,{doc:a,selection:l}=i,{from:c,to:u}=l;if(!(n&&n.doc.eq(a)&&n.selection.eq(l))){if(this.createTooltip(),!(!((r=this.shouldShow)===null||r===void 0)&&r.call(this,{editor:this.editor,view:e,state:i,oldState:n}))){this.hide();return}(o=this.tippy)===null||o===void 0||o.setProps({getReferenceClientRect:((s=this.tippyOptions)===null||s===void 0?void 0:s.getReferenceClientRect)||(()=>wL(e,c,u))}),this.show()}}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,n;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(n=this.tippy)===null||n===void 0||n.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const Yme=t=>new Wn({key:typeof t.pluginKey=="string"?new qr(t.pluginKey):t.pluginKey,view:e=>new Jme({view:e,...t})});zn.create({name:"floatingMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[Yme({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}});function I2(t){return wk((e,n)=>({get(){return e(),t},set(r){t=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}class Xme extends phe{constructor(e={}){return super(e),this.vueRenderers=tr(new Map),this.contentComponent=null,this.reactiveState=I2(this.view.state),this.reactiveExtensionStorage=I2(this.extensionStorage),this.on("transaction",()=>{this.reactiveState.value=this.view.state,this.reactiveExtensionStorage.value=this.extensionStorage}),yh(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,n){super.registerPlugin(e,n),this.reactiveState.value=this.view.state}unregisterPlugin(e){super.unregisterPlugin(e),this.reactiveState.value=this.view.state}}const Qme=Ie({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(t){const e=ae(),n=Co();return Ak(()=>{const r=t.editor;r&&r.options.element&&e.value&&cr(()=>{if(!e.value||!r.options.element.firstChild)return;const o=x(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,r.setOptions({element:o}),r.createNodeViews()})}),_s(()=>{const r=t.editor;if(!r||(r.isDestroyed||r.view.setProps({nodeViews:{}}),r.contentComponent=null,!r.options.element.firstChild))return;const o=document.createElement("div");o.append(...r.options.element.childNodes),r.setOptions({element:o})}),{rootEl:e}},render(){const t=[];return this.editor&&this.editor.vueRenderers.forEach(e=>{const n=Lt(Rk,{to:e.teleportElement,key:e.id},Lt(e.component,{ref:e.id,...e.props}));t.push(n)}),Lt("div",{ref:e=>{this.rootEl=e}},...t)}});var Mw,Ew;if(typeof WeakMap<"u"){let t=new WeakMap;Mw=e=>t.get(e),Ew=(e,n)=>(t.set(e,n),n)}else{const t=[];let e=0;Mw=n=>{for(let r=0;r<t.length;r+=2)if(t[r]==n)return t[r+1]},Ew=(n,r)=>(e==10&&(e=0),t[e++]=n,t[e++]=r)}var Wt=class{constructor(e,n,r,o){this.width=e,this.height=n,this.map=r,this.problems=o}findCell(e){for(let n=0;n<this.map.length;n++){const r=this.map[n];if(r!=e)continue;const o=n%this.width,s=n/this.width|0;let i=o+1,a=s+1;for(let l=1;i<this.width&&this.map[n+l]==r;l++)i++;for(let l=1;a<this.height&&this.map[n+this.width*l]==r;l++)a++;return{left:o,top:s,right:i,bottom:a}}throw new RangeError(`No cell with offset ${e} found`)}colCount(e){for(let n=0;n<this.map.length;n++)if(this.map[n]==e)return n%this.width;throw new RangeError(`No cell with offset ${e} found`)}nextCell(e,n,r){const{left:o,right:s,top:i,bottom:a}=this.findCell(e);return n=="horiz"?(r<0?o==0:s==this.width)?null:this.map[i*this.width+(r<0?o-1:s)]:(r<0?i==0:a==this.height)?null:this.map[o+this.width*(r<0?i-1:a)]}rectBetween(e,n){const{left:r,right:o,top:s,bottom:i}=this.findCell(e),{left:a,right:l,top:c,bottom:u}=this.findCell(n);return{left:Math.min(r,a),top:Math.min(s,c),right:Math.max(o,l),bottom:Math.max(i,u)}}cellsInRect(e){const n=[],r={};for(let o=e.top;o<e.bottom;o++)for(let s=e.left;s<e.right;s++){const i=o*this.width+s,a=this.map[i];r[a]||(r[a]=!0,!(s==e.left&&s&&this.map[i-1]==a||o==e.top&&o&&this.map[i-this.width]==a)&&n.push(a))}return n}positionAt(e,n,r){for(let o=0,s=0;;o++){const i=s+r.child(o).nodeSize;if(o==e){let a=n+e*this.width;const l=(e+1)*this.width;for(;a<l&&this.map[a]<s;)a++;return a==l?i-1:this.map[a]}s=i}}static get(e){return Mw(e)||Ew(e,Zme(e))}};function Zme(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=ege(t),n=t.childCount,r=[];let o=0,s=null;const i=[];for(let c=0,u=e*n;c<u;c++)r[c]=0;for(let c=0,u=0;c<n;c++){const d=t.child(c);u++;for(let p=0;;p++){for(;o<r.length&&r[o]!=0;)o++;if(p==d.childCount)break;const m=d.child(p),{colspan:v,rowspan:b,colwidth:w}=m.attrs;for(let k=0;k<b;k++){if(k+c>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:u,n:b-k});break}const y=o+k*e;for(let C=0;C<v;C++){r[y+C]==0?r[y+C]=u:(s||(s=[])).push({type:"collision",row:c,pos:u,n:v-C});const _=w&&w[C];if(_){const M=(y+C)%e*2,E=i[M];E==null||E!=_&&i[M+1]==1?(i[M]=_,i[M+1]=1):E==_&&i[M+1]++}}}o+=v,u+=m.nodeSize}const f=(c+1)*e;let h=0;for(;o<f;)r[o++]==0&&h++;h&&(s||(s=[])).push({type:"missing",row:c,n:h}),u++}const a=new Wt(e,n,r,s);let l=!1;for(let c=0;!l&&c<i.length;c+=2)i[c]!=null&&i[c+1]<n&&(l=!0);return l&&tge(a,i,t),a}function ege(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const o=t.child(r);let s=0;if(n)for(let i=0;i<r;i++){const a=t.child(i);for(let l=0;l<a.childCount;l++){const c=a.child(l);i+c.attrs.rowspan>r&&(s+=c.attrs.colspan)}}for(let i=0;i<o.childCount;i++){const a=o.child(i);s+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}e==-1?e=s:e!=s&&(e=Math.max(e,s))}return e}function tge(t,e,n){t.problems||(t.problems=[]);const r={};for(let o=0;o<t.map.length;o++){const s=t.map[o];if(r[s])continue;r[s]=!0;const i=n.nodeAt(s);if(!i)throw new RangeError(`No cell with offset ${s} found`);let a=null;const l=i.attrs;for(let c=0;c<l.colspan;c++){const u=(o+c)%t.width,d=e[u*2];d!=null&&(!l.colwidth||l.colwidth[c]!=d)&&((a||(a=nge(l)))[c]=d)}a&&t.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:a})}}function nge(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function Vn(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],o=r.spec.tableRole;o&&(e[o]=r)}}return e}var $i=new qr("selectingCells");function Xu(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function rge(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function Wo(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function t0(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=Xu(e.$head)||oge(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function oge(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function Ow(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function sge(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function OC(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function qL(t,e,n){const r=t.node(-1),o=Wt.get(r),s=t.start(-1),i=o.nextCell(t.pos-s,e,n);return i==null?null:t.node(0).resolve(s+i)}function Fl(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(o=>o>0)||(r.colwidth=null)),r}function WL(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let o=0;o<n;o++)r.colwidth.splice(e,0,0)}return r}function ige(t,e,n){const r=Vn(e.type.schema).header_cell;for(let o=0;o<t.height;o++)if(e.nodeAt(t.map[n+o*t.width]).type!=r)return!1;return!0}var ft=class extends Fe{constructor(e,n=e){const r=e.node(-1),o=Wt.get(r),s=e.start(-1),i=o.rectBetween(e.pos-s,n.pos-s),a=e.node(0),l=o.cellsInRect(i).filter(u=>u!=n.pos-s);l.unshift(n.pos-s);const c=l.map(u=>{const d=r.nodeAt(u);if(!d)throw RangeError(`No cell with offset ${u} found`);const f=s+u+1;return new y8(a.resolve(f),a.resolve(f+d.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),o=e.resolve(n.map(this.$headCell.pos));if(Ow(r)&&Ow(o)&&OC(r,o)){const s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?ft.rowSelection(r,o):s&&this.isColSelection()?ft.colSelection(r,o):new ft(r,o)}return et.between(r,o)}content(){const e=this.$anchorCell.node(-1),n=Wt.get(e),r=this.$anchorCell.start(-1),o=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),s={},i=[];for(let l=o.top;l<o.bottom;l++){const c=[];for(let u=l*n.width+o.left,d=o.left;d<o.right;d++,u++){const f=n.map[u];if(s[f])continue;s[f]=!0;const h=n.findCell(f);let p=e.nodeAt(f);if(!p)throw RangeError(`No cell with offset ${f} found`);const m=o.left-h.left,v=h.right-o.right;if(m>0||v>0){let b=p.attrs;if(m>0&&(b=Fl(b,0,m)),v>0&&(b=Fl(b,b.colspan-v,v)),h.left<o.left){if(p=p.type.createAndFill(b),!p)throw RangeError(`Could not create cell with attrs ${JSON.stringify(b)}`)}else p=p.type.create(b,p.content)}if(h.top<o.top||h.bottom>o.bottom){const b={...p.attrs,rowspan:Math.min(h.bottom,o.bottom)-Math.max(h.top,o.top)};h.top<o.top?p=p.type.createAndFill(b):p=p.type.create(b,p.content)}c.push(p)}i.push(e.child(l).copy(ce.from(c)))}const a=this.isColSelection()&&this.isRowSelection()?e:i;return new xe(ce.from(a),1,1)}replace(e,n=xe.empty){const r=e.steps.length,o=this.ranges;for(let i=0;i<o.length;i++){const{$from:a,$to:l}=o[i],c=e.mapping.slice(r);e.replace(c.map(a.pos),c.map(l.pos),i?xe.empty:n)}const s=Fe.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);s&&e.setSelection(s)}replaceWith(e,n){this.replace(e,new xe(ce.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=Wt.get(n),o=this.$anchorCell.start(-1),s=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-o,this.$headCell.pos-o));for(let i=0;i<s.length;i++)e(n.nodeAt(s[i]),o+s[i])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,o=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,o)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),o=Wt.get(r),s=e.start(-1),i=o.findCell(e.pos-s),a=o.findCell(n.pos-s),l=e.node(0);return i.top<=a.top?(i.top>0&&(e=l.resolve(s+o.map[i.left])),a.bottom<o.height&&(n=l.resolve(s+o.map[o.width*(o.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(s+o.map[a.left])),i.bottom<o.height&&(e=l.resolve(s+o.map[o.width*(o.height-1)+i.right-1]))),new ft(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=Wt.get(e),r=this.$anchorCell.start(-1),o=n.colCount(this.$anchorCell.pos-r),s=n.colCount(this.$headCell.pos-r);if(Math.min(o,s)>0)return!1;const i=o+this.$anchorCell.nodeAfter.attrs.colspan,a=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,a)==n.width}eq(e){return e instanceof ft&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),o=Wt.get(r),s=e.start(-1),i=o.findCell(e.pos-s),a=o.findCell(n.pos-s),l=e.node(0);return i.left<=a.left?(i.left>0&&(e=l.resolve(s+o.map[i.top*o.width])),a.right<o.width&&(n=l.resolve(s+o.map[o.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(s+o.map[a.top*o.width])),i.right<o.width&&(e=l.resolve(s+o.map[o.width*(i.top+1)-1]))),new ft(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new ft(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new ft(e.resolve(n),e.resolve(r))}getBookmark(){return new KL(this.$anchorCell.pos,this.$headCell.pos)}};ft.prototype.visible=!1;Fe.jsonID("cell",ft);var KL=class{constructor(e,n){this.anchor=e,this.head=n}map(e){return new KL(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&OC(n,r)?new ft(n,r):Fe.near(r,1)}};function age(t){if(!(t.selection instanceof ft))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(di.node(r,r+n.nodeSize,{class:"selectedCell"}))}),yr.create(t.doc,e)}function lge({$from:t,$to:e}){if(t.pos==e.pos||t.pos<t.pos-6)return!1;let n=t.pos,r=e.pos,o=t.depth;for(;o>=0&&!(t.after(o+1)<t.end(o));o--,n++);for(let s=e.depth;s>=0&&!(e.before(s+1)>e.start(s));s--,r--);return n==r&&/row|table/.test(t.node(o).type.spec.tableRole)}function cge({$from:t,$to:e}){let n,r;for(let o=t.depth;o>0;o--){const s=t.node(o);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){n=s;break}}for(let o=e.depth;o>0;o--){const s=e.node(o);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}return n!==r&&e.parentOffset===0}function uge(t,e,n){const r=(e||t).selection,o=(e||t).doc;let s,i;if(r instanceof Ye&&(i=r.node.type.spec.tableRole)){if(i=="cell"||i=="header_cell")s=ft.create(o,r.from);else if(i=="row"){const a=o.resolve(r.from+1);s=ft.rowSelection(a,a)}else if(!n){const a=Wt.get(r.node),l=r.from+1,c=l+a.map[a.width*a.height-1];s=ft.create(o,l+1,c)}}else r instanceof et&&lge(r)?s=et.create(o,r.from):r instanceof et&&cge(r)&&(s=et.create(o,r.$from.start(),r.$from.end()));return s&&(e||(e=t.tr)).setSelection(s),e}var dge=new qr("fix-tables");function GL(t,e,n,r){const o=t.childCount,s=e.childCount;e:for(let i=0,a=0;i<s;i++){const l=e.child(i);for(let c=a,u=Math.min(o,i+3);c<u;c++)if(t.child(c)==l){a=c+1,n+=l.nodeSize;continue e}r(l,n),a<o&&t.child(a).sameMarkup(l)?GL(t.child(a),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function JL(t,e){let n;const r=(o,s)=>{o.type.spec.tableRole=="table"&&(n=fge(t,o,s,n))};return e?e.doc!=t.doc&&GL(e.doc,t.doc,0,r):t.doc.descendants(r),n}function fge(t,e,n,r){const o=Wt.get(e);if(!o.problems)return r;r||(r=t.tr);const s=[];for(let l=0;l<o.height;l++)s.push(0);for(let l=0;l<o.problems.length;l++){const c=o.problems[l];if(c.type=="collision"){const u=e.nodeAt(c.pos);if(!u)continue;const d=u.attrs;for(let f=0;f<d.rowspan;f++)s[c.row+f]+=c.n;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,Fl(d,d.colspan-c.n,c.n))}else if(c.type=="missing")s[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const u=e.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,rowspan:u.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const u=e.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,colwidth:c.colwidth})}}let i,a;for(let l=0;l<s.length;l++)s[l]&&(i==null&&(i=l),a=l);for(let l=0,c=n+1;l<o.height;l++){const u=e.child(l),d=c+u.nodeSize,f=s[l];if(f>0){let h="cell";u.firstChild&&(h=u.firstChild.type.spec.tableRole);const p=[];for(let v=0;v<f;v++){const b=Vn(t.schema)[h].createAndFill();b&&p.push(b)}const m=(l==0||i==l-1)&&a==l?c+1:d-1;r.insert(r.mapping.map(m),p)}c=d}return r.setMeta(dge,{fixTables:!0})}function hge(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const o=e.child(0),s=o.type.spec.tableRole,i=o.type.schema,a=[];if(s=="row")for(let l=0;l<e.childCount;l++){let c=e.child(l).content;const u=l?0:Math.max(0,n-1),d=l<e.childCount-1?0:Math.max(0,r-1);(u||d)&&(c=Iw(Vn(i).row,new xe(c,u,d)).content),a.push(c)}else if(s=="cell"||s=="header_cell")a.push(n||r?Iw(Vn(i).row,new xe(e,n,r)).content:e);else return null;return pge(i,a)}function pge(t,e){const n=[];for(let o=0;o<e.length;o++){const s=e[o];for(let i=s.childCount-1;i>=0;i--){const{rowspan:a,colspan:l}=s.child(i).attrs;for(let c=o;c<o+a;c++)n[c]=(n[c]||0)+l}}let r=0;for(let o=0;o<n.length;o++)r=Math.max(r,n[o]);for(let o=0;o<n.length;o++)if(o>=e.length&&e.push(ce.empty),n[o]<r){const s=Vn(t).cell.createAndFill(),i=[];for(let a=n[o];a<r;a++)i.push(s);e[o]=e[o].append(ce.from(i))}return{height:e.length,width:r,rows:e}}function Iw(t,e){const n=t.createAndFill();return new g8(n).replace(0,n.content.size,e).doc}function mge({width:t,height:e,rows:n},r,o){if(t!=r){const s=[],i=[];for(let a=0;a<n.length;a++){const l=n[a],c=[];for(let u=s[a]||0,d=0;u<r;d++){let f=l.child(d%l.childCount);u+f.attrs.colspan>r&&(f=f.type.createChecked(Fl(f.attrs,f.attrs.colspan,u+f.attrs.colspan-r),f.content)),c.push(f),u+=f.attrs.colspan;for(let h=1;h<f.attrs.rowspan;h++)s[a+h]=(s[a+h]||0)+f.attrs.colspan}i.push(ce.from(c))}n=i,t=r}if(e!=o){const s=[];for(let i=0,a=0;i<o;i++,a++){const l=[],c=n[a%e];for(let u=0;u<c.childCount;u++){let d=c.child(u);i+d.attrs.rowspan>o&&(d=d.type.create({...d.attrs,rowspan:Math.max(1,o-d.attrs.rowspan)},d.content)),l.push(d)}s.push(ce.from(l))}n=s,e=o}return{width:t,height:e,rows:n}}function gge(t,e,n,r,o,s,i){const a=t.doc.type.schema,l=Vn(a);let c,u;if(o>e.width)for(let d=0,f=0;d<e.height;d++){const h=n.child(d);f+=h.nodeSize;const p=[];let m;h.lastChild==null||h.lastChild.type==l.cell?m=c||(c=l.cell.createAndFill()):m=u||(u=l.header_cell.createAndFill());for(let v=e.width;v<o;v++)p.push(m);t.insert(t.mapping.slice(i).map(f-1+r),p)}if(s>e.height){const d=[];for(let p=0,m=(e.height-1)*e.width;p<Math.max(e.width,o);p++){const v=p>=e.width?!1:n.nodeAt(e.map[m+p]).type==l.header_cell;d.push(v?u||(u=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const f=l.row.create(null,ce.from(d)),h=[];for(let p=e.height;p<s;p++)h.push(f);t.insert(t.mapping.slice(i).map(r+n.nodeSize-2),h)}return!!(c||u)}function A2(t,e,n,r,o,s,i,a){if(i==0||i==e.height)return!1;let l=!1;for(let c=o;c<s;c++){const u=i*e.width+c,d=e.map[u];if(e.map[u-e.width]==d){l=!0;const f=n.nodeAt(d),{top:h,left:p}=e.findCell(d);t.setNodeMarkup(t.mapping.slice(a).map(d+r),null,{...f.attrs,rowspan:i-h}),t.insert(t.mapping.slice(a).map(e.positionAt(i,p,n)),f.type.createAndFill({...f.attrs,rowspan:h+f.attrs.rowspan-i})),c+=f.attrs.colspan-1}}return l}function N2(t,e,n,r,o,s,i,a){if(i==0||i==e.width)return!1;let l=!1;for(let c=o;c<s;c++){const u=c*e.width+i,d=e.map[u];if(e.map[u-1]==d){l=!0;const f=n.nodeAt(d),h=e.colCount(d),p=t.mapping.slice(a).map(d+r);t.setNodeMarkup(p,null,Fl(f.attrs,i-h,f.attrs.colspan-(i-h))),t.insert(p+f.nodeSize,f.type.createAndFill(Fl(f.attrs,0,i-h))),c+=f.attrs.rowspan-1}}return l}function L2(t,e,n,r,o){let s=n?t.doc.nodeAt(n-1):t.doc;if(!s)throw new Error("No table found");let i=Wt.get(s);const{top:a,left:l}=r,c=l+o.width,u=a+o.height,d=t.tr;let f=0;function h(){if(s=n?d.doc.nodeAt(n-1):d.doc,!s)throw new Error("No table found");i=Wt.get(s),f=d.mapping.maps.length}gge(d,i,s,n,c,u,f)&&h(),A2(d,i,s,n,l,c,a,f)&&h(),A2(d,i,s,n,l,c,u,f)&&h(),N2(d,i,s,n,a,u,l,f)&&h(),N2(d,i,s,n,a,u,c,f)&&h();for(let p=a;p<u;p++){const m=i.positionAt(p,l,s),v=i.positionAt(p,c,s);d.replace(d.mapping.slice(f).map(m+n),d.mapping.slice(f).map(v+n),new xe(o.rows[p-a],0,0))}h(),d.setSelection(new ft(d.doc.resolve(n+i.positionAt(a,l,s)),d.doc.resolve(n+i.positionAt(u-1,c-1,s)))),e(d)}var yge=mC({ArrowLeft:Ip("horiz",-1),ArrowRight:Ip("horiz",1),ArrowUp:Ip("vert",-1),ArrowDown:Ip("vert",1),"Shift-ArrowLeft":Ap("horiz",-1),"Shift-ArrowRight":Ap("horiz",1),"Shift-ArrowUp":Ap("vert",-1),"Shift-ArrowDown":Ap("vert",1),Backspace:Np,"Mod-Backspace":Np,Delete:Np,"Mod-Delete":Np});function bm(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function Ip(t,e){return(n,r,o)=>{if(!o)return!1;const s=n.selection;if(s instanceof ft)return bm(n,r,Fe.near(s.$headCell,e));if(t!="horiz"&&!s.empty)return!1;const i=YL(o,t,e);if(i==null)return!1;if(t=="horiz")return bm(n,r,Fe.near(n.doc.resolve(s.head+e),e));{const a=n.doc.resolve(i),l=qL(a,t,e);let c;return l?c=Fe.near(l,1):e<0?c=Fe.near(n.doc.resolve(a.before(-1)),-1):c=Fe.near(n.doc.resolve(a.after(-1)),1),bm(n,r,c)}}}function Ap(t,e){return(n,r,o)=>{if(!o)return!1;const s=n.selection;let i;if(s instanceof ft)i=s;else{const l=YL(o,t,e);if(l==null)return!1;i=new ft(n.doc.resolve(l))}const a=qL(i.$headCell,t,e);return a?bm(n,r,new ft(i.$anchorCell,a)):!1}}function Np(t,e){const n=t.selection;if(!(n instanceof ft))return!1;if(e){const r=t.tr,o=Vn(t.schema).cell.createAndFill().content;n.forEachCell((s,i)=>{s.content.eq(o)||r.replace(r.mapping.map(i+1),r.mapping.map(i+s.nodeSize-1),new xe(o,0,0))}),r.docChanged&&e(r)}return!0}function vge(t,e){const n=t.state.doc,r=Xu(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new ft(r))),!0):!1}function bge(t,e,n){if(!Wo(t.state))return!1;let r=hge(n);const o=t.state.selection;if(o instanceof ft){r||(r={width:1,height:1,rows:[ce.from(Iw(Vn(t.state.schema).cell,n))]});const s=o.$anchorCell.node(-1),i=o.$anchorCell.start(-1),a=Wt.get(s).rectBetween(o.$anchorCell.pos-i,o.$headCell.pos-i);return r=mge(r,a.right-a.left,a.bottom-a.top),L2(t.state,t.dispatch,i,a,r),!0}else if(r){const s=t0(t.state),i=s.start(-1);return L2(t.state,t.dispatch,i,Wt.get(s.node(-1)).findCell(s.pos-i),r),!0}else return!1}function wge(t,e){var n;if(e.ctrlKey||e.metaKey)return;const r=R2(t,e.target);let o;if(e.shiftKey&&t.state.selection instanceof ft)s(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(o=Xu(t.state.selection.$anchor))!=null&&((n=zv(t,e))==null?void 0:n.pos)!=o.pos)s(o,e),e.preventDefault();else if(!r)return;function s(l,c){let u=zv(t,c);const d=$i.getState(t.state)==null;if(!u||!OC(l,u))if(d)u=l;else return;const f=new ft(l,u);if(d||!t.state.selection.eq(f)){const h=t.state.tr.setSelection(f);d&&h.setMeta($i,l.pos),t.dispatch(h)}}function i(){t.root.removeEventListener("mouseup",i),t.root.removeEventListener("dragstart",i),t.root.removeEventListener("mousemove",a),$i.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta($i,-1))}function a(l){const c=l,u=$i.getState(t.state);let d;if(u!=null)d=t.state.doc.resolve(u);else if(R2(t,c.target)!=r&&(d=zv(t,e),!d))return i();d&&s(d,c)}t.root.addEventListener("mouseup",i),t.root.addEventListener("dragstart",i),t.root.addEventListener("mousemove",a)}function YL(t,e,n){if(!(t.state.selection instanceof et))return null;const{$head:r}=t.state.selection;for(let o=r.depth-1;o>=0;o--){const s=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const i=r.before(o),a=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(a)?i:null}}return null}function R2(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function zv(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?Xu(t.state.doc.resolve(n.pos)):null}var kge=class{constructor(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Aw(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!=this.node.type?!1:(this.node=t,Aw(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){return t.type=="attributes"&&(t.target==this.table||this.colgroup.contains(t.target))}};function Aw(t,e,n,r,o,s){var i;let a=0,l=!0,c=e.firstChild;const u=t.firstChild;if(u){for(let d=0,f=0;d<u.childCount;d++){const{colspan:h,colwidth:p}=u.child(d).attrs;for(let m=0;m<h;m++,f++){const v=o==f?s:p&&p[m],b=v?v+"px":"";a+=v||r,v||(l=!1),c?(c.style.width!=b&&(c.style.width=b),c=c.nextSibling):e.appendChild(document.createElement("col")).style.width=b}}for(;c;){const d=c.nextSibling;(i=c.parentNode)==null||i.removeChild(c),c=d}l?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}}var eo=new qr("tableColumnResizing");function xge({handleWidth:t=5,cellMinWidth:e=25,View:n=kge,lastColumnResizable:r=!0}={}){const o=new Wn({key:eo,state:{init(s,i){return o.spec.props.nodeViews[Vn(i.schema).table.name]=(a,l)=>new n(a,e,l),new wm(-1,!1)},apply(s,i){return i.apply(s)}},props:{attributes:s=>{const i=eo.getState(s);return i&&i.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(s,i)=>{Cge(s,i,t,e,r)},mouseleave:s=>{_ge(s)},mousedown:(s,i)=>{Sge(s,i,e)}},decorations:s=>{const i=eo.getState(s);if(i&&i.activeHandle>-1)return Age(s,i.activeHandle)},nodeViews:{}}});return o}var wm=class{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(eo);if(r&&r.setHandle!=null)return new wm(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new wm(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let o=e.mapping.map(n.activeHandle,-1);return Ow(e.doc.resolve(o))||(o=-1),new wm(o,n.dragging)}return n}};function Cge(t,e,n,r,o){const s=eo.getState(t.state);if(s&&!s.dragging){const i=Mge(e.target);let a=-1;if(i){const{left:l,right:c}=i.getBoundingClientRect();e.clientX-l<=n?a=P2(t,e,"left"):c-e.clientX<=n&&(a=P2(t,e,"right"))}if(a!=s.activeHandle){if(!o&&a!==-1){const l=t.state.doc.resolve(a),c=l.node(-1),u=Wt.get(c),d=l.start(-1);if(u.colCount(l.pos-d)+l.nodeAfter.attrs.colspan-1==u.width-1)return}XL(t,a)}}}function _ge(t){const e=eo.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&XL(t,-1)}function Sge(t,e,n){const r=eo.getState(t.state);if(!r||r.activeHandle==-1||r.dragging)return!1;const o=t.state.doc.nodeAt(r.activeHandle),s=Tge(t,r.activeHandle,o.attrs);t.dispatch(t.state.tr.setMeta(eo,{setDragging:{startX:e.clientX,startWidth:s}}));function i(l){window.removeEventListener("mouseup",i),window.removeEventListener("mousemove",a);const c=eo.getState(t.state);c!=null&&c.dragging&&(Ege(t,c.activeHandle,D2(c.dragging,l,n)),t.dispatch(t.state.tr.setMeta(eo,{setDragging:null})))}function a(l){if(!l.which)return i(l);const c=eo.getState(t.state);if(c&&c.dragging){const u=D2(c.dragging,l,n);Oge(t,c.activeHandle,u,n)}}return window.addEventListener("mouseup",i),window.addEventListener("mousemove",a),e.preventDefault(),!0}function Tge(t,e,{colspan:n,colwidth:r}){const o=r&&r[r.length-1];if(o)return o;const s=t.domAtPos(e);let i=s.node.childNodes[s.offset].offsetWidth,a=n;if(r)for(let l=0;l<n;l++)r[l]&&(i-=r[l],a--);return i/a}function Mge(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function P2(t,e,n){const r=t.posAtCoords({left:e.clientX,top:e.clientY});if(!r)return-1;const{pos:o}=r,s=Xu(t.state.doc.resolve(o));if(!s)return-1;if(n=="right")return s.pos;const i=Wt.get(s.node(-1)),a=s.start(-1),l=i.map.indexOf(s.pos-a);return l%i.width==0?-1:a+i.map[l-1]}function D2(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function XL(t,e){t.dispatch(t.state.tr.setMeta(eo,{setHandle:e}))}function Ege(t,e,n){const r=t.state.doc.resolve(e),o=r.node(-1),s=Wt.get(o),i=r.start(-1),a=s.colCount(r.pos-i)+r.nodeAfter.attrs.colspan-1,l=t.state.tr;for(let c=0;c<s.height;c++){const u=c*s.width+a;if(c&&s.map[u]==s.map[u-s.width])continue;const d=s.map[u],f=o.nodeAt(d).attrs,h=f.colspan==1?0:a-s.colCount(d);if(f.colwidth&&f.colwidth[h]==n)continue;const p=f.colwidth?f.colwidth.slice():Ige(f.colspan);p[h]=n,l.setNodeMarkup(i+d,null,{...f,colwidth:p})}l.docChanged&&t.dispatch(l)}function Oge(t,e,n,r){const o=t.state.doc.resolve(e),s=o.node(-1),i=o.start(-1),a=Wt.get(s).colCount(o.pos-i)+o.nodeAfter.attrs.colspan-1;let l=t.domAtPos(o.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&Aw(s,l.firstChild,l,r,a,n)}function Ige(t){return Array(t).fill(0)}function Age(t,e){const n=[],r=t.doc.resolve(e),o=r.node(-1);if(!o)return yr.empty;const s=Wt.get(o),i=r.start(-1),a=s.colCount(r.pos-i)+r.nodeAfter.attrs.colspan;for(let l=0;l<s.height;l++){const c=a+l*s.width-1;if((a==s.width||s.map[c]!=s.map[c+1])&&(l==0||s.map[c-1]!=s.map[c-1-s.width])){const u=s.map[c],d=i+u+o.nodeAt(u).nodeSize-1,f=document.createElement("div");f.className="column-resize-handle",n.push(di.widget(d,f))}}return yr.create(t.doc,n)}function Ms(t){const e=t.selection,n=t0(t),r=n.node(-1),o=n.start(-1),s=Wt.get(r);return{...e instanceof ft?s.rectBetween(e.$anchorCell.pos-o,e.$headCell.pos-o):s.findCell(n.pos-o),tableStart:o,map:s,table:r}}function QL(t,{map:e,tableStart:n,table:r},o){let s=o>0?-1:0;ige(e,r,o+s)&&(s=o==0||o==e.width?null:0);for(let i=0;i<e.height;i++){const a=i*e.width+o;if(o>0&&o<e.width&&e.map[a-1]==e.map[a]){const l=e.map[a],c=r.nodeAt(l);t.setNodeMarkup(t.mapping.map(n+l),null,WL(c.attrs,o-e.colCount(l))),i+=c.attrs.rowspan-1}else{const l=s==null?Vn(r.type.schema).cell:r.nodeAt(e.map[a+s]).type,c=e.positionAt(i,o,r);t.insert(t.mapping.map(n+c),l.createAndFill())}}return t}function Nge(t,e){if(!Wo(t))return!1;if(e){const n=Ms(t);e(QL(t.tr,n,n.left))}return!0}function Lge(t,e){if(!Wo(t))return!1;if(e){const n=Ms(t);e(QL(t.tr,n,n.right))}return!0}function Rge(t,{map:e,table:n,tableStart:r},o){const s=t.mapping.maps.length;for(let i=0;i<e.height;){const a=i*e.width+o,l=e.map[a],c=n.nodeAt(l),u=c.attrs;if(o>0&&e.map[a-1]==l||o<e.width-1&&e.map[a+1]==l)t.setNodeMarkup(t.mapping.slice(s).map(r+l),null,Fl(u,o-e.colCount(l)));else{const d=t.mapping.slice(s).map(r+l);t.delete(d,d+c.nodeSize)}i+=u.rowspan}}function Pge(t,e){if(!Wo(t))return!1;if(e){const n=Ms(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let o=n.right-1;Rge(r,n,o),o!=n.left;o--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=Wt.get(s)}e(r)}return!0}function Dge(t,e,n){var r;const o=Vn(e.type.schema).header_cell;for(let s=0;s<t.width;s++)if(((r=e.nodeAt(t.map[s+n*t.width]))==null?void 0:r.type)!=o)return!1;return!0}function ZL(t,{map:e,tableStart:n,table:r},o){var s;let i=n;for(let c=0;c<o;c++)i+=r.child(c).nodeSize;const a=[];let l=o>0?-1:0;Dge(e,r,o+l)&&(l=o==0||o==e.height?null:0);for(let c=0,u=e.width*o;c<e.width;c++,u++)if(o>0&&o<e.height&&e.map[u]==e.map[u-e.width]){const d=e.map[u],f=r.nodeAt(d).attrs;t.setNodeMarkup(n+d,null,{...f,rowspan:f.rowspan+1}),c+=f.colspan-1}else{const d=l==null?Vn(r.type.schema).cell:(s=r.nodeAt(e.map[u+l*e.width]))==null?void 0:s.type,f=d==null?void 0:d.createAndFill();f&&a.push(f)}return t.insert(i,Vn(r.type.schema).row.create(null,a)),t}function $ge(t,e){if(!Wo(t))return!1;if(e){const n=Ms(t);e(ZL(t.tr,n,n.top))}return!0}function Hge(t,e){if(!Wo(t))return!1;if(e){const n=Ms(t);e(ZL(t.tr,n,n.bottom))}return!0}function Fge(t,{map:e,table:n,tableStart:r},o){let s=0;for(let l=0;l<o;l++)s+=n.child(l).nodeSize;const i=s+n.child(o).nodeSize,a=t.mapping.maps.length;t.delete(s+r,i+r);for(let l=0,c=o*e.width;l<e.width;l++,c++){const u=e.map[c];if(o>0&&u==e.map[c-e.width]){const d=n.nodeAt(u).attrs;t.setNodeMarkup(t.mapping.slice(a).map(u+r),null,{...d,rowspan:d.rowspan-1}),l+=d.colspan-1}else if(o<e.width&&u==e.map[c+e.width]){const d=n.nodeAt(u),f=d.attrs,h=d.type.create({...f,rowspan:d.attrs.rowspan-1},d.content),p=e.positionAt(o+1,l,n);t.insert(t.mapping.slice(a).map(r+p),h),l+=f.colspan-1}}}function Bge(t,e){if(!Wo(t))return!1;if(e){const n=Ms(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let o=n.bottom-1;Fge(r,n,o),o!=n.top;o--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=Wt.get(n.table)}e(r)}return!0}function $2(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function jge({width:t,height:e,map:n},r){let o=r.top*t+r.left,s=o,i=(r.bottom-1)*t+r.left,a=o+(r.right-r.left-1);for(let l=r.top;l<r.bottom;l++){if(r.left>0&&n[s]==n[s-1]||r.right<t&&n[a]==n[a+1])return!0;s+=t,a+=t}for(let l=r.left;l<r.right;l++){if(r.top>0&&n[o]==n[o-t]||r.bottom<e&&n[i]==n[i+t])return!0;o++,i++}return!1}function H2(t,e){const n=t.selection;if(!(n instanceof ft)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=Ms(t),{map:o}=r;if(jge(o,r))return!1;if(e){const s=t.tr,i={};let a=ce.empty,l,c;for(let u=r.top;u<r.bottom;u++)for(let d=r.left;d<r.right;d++){const f=o.map[u*o.width+d],h=r.table.nodeAt(f);if(!(i[f]||!h))if(i[f]=!0,l==null)l=f,c=h;else{$2(h)||(a=a.append(h.content));const p=s.mapping.map(f+r.tableStart);s.delete(p,p+h.nodeSize)}}if(l==null||c==null)return!0;if(s.setNodeMarkup(l+r.tableStart,null,{...WL(c.attrs,c.attrs.colspan,r.right-r.left-c.attrs.colspan),rowspan:r.bottom-r.top}),a.size){const u=l+1+c.content.size,d=$2(c)?l+1:u;s.replaceWith(d+r.tableStart,u+r.tableStart,a)}s.setSelection(new ft(s.doc.resolve(l+r.tableStart))),e(s)}return!0}function F2(t,e){const n=Vn(t.schema);return zge(({node:r})=>n[r.type.spec.tableRole])(t,e)}function zge(t){return(e,n)=>{var r;const o=e.selection;let s,i;if(o instanceof ft){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;s=o.$anchorCell.nodeAfter,i=o.$anchorCell.pos}else{if(s=rge(o.$from),!s)return!1;i=(r=Xu(o.$from))==null?void 0:r.pos}if(s==null||i==null||s.attrs.colspan==1&&s.attrs.rowspan==1)return!1;if(n){let a=s.attrs;const l=[],c=a.colwidth;a.rowspan>1&&(a={...a,rowspan:1}),a.colspan>1&&(a={...a,colspan:1});const u=Ms(e),d=e.tr;for(let h=0;h<u.right-u.left;h++)l.push(c?{...a,colwidth:c&&c[h]?[c[h]]:null}:a);let f;for(let h=u.top;h<u.bottom;h++){let p=u.map.positionAt(h,u.left,u.table);h==u.top&&(p+=s.nodeSize);for(let m=u.left,v=0;m<u.right;m++,v++)m==u.left&&h==u.top||d.insert(f=d.mapping.map(p+u.tableStart,1),t({node:s,row:h,col:m}).createAndFill(l[v]))}d.setNodeMarkup(i,t({node:s,row:u.top,col:u.left}),l[0]),o instanceof ft&&d.setSelection(new ft(d.doc.resolve(o.$anchorCell.pos),f?d.doc.resolve(f):void 0)),n(d)}return!0}}function Vge(t,e){return function(n,r){if(!Wo(n))return!1;const o=t0(n);if(o.nodeAfter.attrs[t]===e)return!1;if(r){const s=n.tr;n.selection instanceof ft?n.selection.forEachCell((i,a)=>{i.attrs[t]!==e&&s.setNodeMarkup(a,null,{...i.attrs,[t]:e})}):s.setNodeMarkup(o.pos,null,{...o.nodeAfter.attrs,[t]:e}),r(s)}return!0}}function Uge(t){return function(e,n){if(!Wo(e))return!1;if(n){const r=Vn(e.schema),o=Ms(e),s=e.tr,i=o.map.cellsInRect(t=="column"?{left:o.left,top:0,right:o.right,bottom:o.map.height}:t=="row"?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),a=i.map(l=>o.table.nodeAt(l));for(let l=0;l<i.length;l++)a[l].type==r.header_cell&&s.setNodeMarkup(o.tableStart+i[l],r.cell,a[l].attrs);if(s.steps.length==0)for(let l=0;l<i.length;l++)s.setNodeMarkup(o.tableStart+i[l],r.header_cell,a[l].attrs);n(s)}return!0}}function B2(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let o=0;o<r.length;o++){const s=e.table.nodeAt(r[o]);if(s&&s.type!==n.header_cell)return!1}return!0}function oh(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?Uge(t):function(n,r){if(!Wo(n))return!1;if(r){const o=Vn(n.schema),s=Ms(n),i=n.tr,a=B2("row",s,o),l=B2("column",s,o),c=(t==="column"?a:t==="row"&&l)?1:0,u=t=="column"?{left:0,top:c,right:1,bottom:s.map.height}:t=="row"?{left:c,top:0,right:s.map.width,bottom:1}:s,d=t=="column"?l?o.cell:o.header_cell:t=="row"?a?o.cell:o.header_cell:o.cell;s.map.cellsInRect(u).forEach(f=>{const h=f+s.tableStart,p=i.doc.nodeAt(h);p&&i.setNodeMarkup(h,d,p.attrs)}),r(i)}return!0}}oh("row",{useDeprecatedLogic:!0});oh("column",{useDeprecatedLogic:!0});var qge=oh("cell",{useDeprecatedLogic:!0});function Wge(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,o=t.before();r>=0;r--){const s=t.node(-1).child(r),i=s.lastChild;if(i)return o-1-i.nodeSize;o-=s.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),o=t.after();r<n.childCount;r++){const s=n.child(r);if(s.childCount)return o+1;o+=s.nodeSize}}return null}function j2(t){return function(e,n){if(!Wo(e))return!1;const r=Wge(t0(e),t);if(r==null)return!1;if(n){const o=e.doc.resolve(r);n(e.tr.setSelection(et.between(o,sge(o))).scrollIntoView())}return!0}}function Kge(t,e){const n=t.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function Gge({allowTableNodeSelection:t=!1}={}){return new Wn({key:$i,state:{init(){return null},apply(e,n){const r=e.getMeta($i);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:o,pos:s}=e.mapping.mapResult(n);return o?null:s}},props:{decorations:age,handleDOMEvents:{mousedown:wge},createSelectionBetween(e){return $i.getState(e.state)!=null?e.state.selection:null},handleTripleClick:vge,handleKeyDown:yge,handlePaste:bge},appendTransaction(e,n,r){return uge(r,JL(r,n),t)}})}function z2(t,e,n,r,o,s){let i=0,a=!0,l=e.firstChild;const c=t.firstChild;for(let u=0,d=0;u<c.childCount;u+=1){const{colspan:f,colwidth:h}=c.child(u).attrs;for(let p=0;p<f;p+=1,d+=1){const m=o===d?s:h&&h[p],v=m?`${m}px`:"";i+=m||r,m||(a=!1),l?(l.style.width!==v&&(l.style.width=v),l=l.nextSibling):e.appendChild(document.createElement("col")).style.width=v}}for(;l;){const u=l.nextSibling;l.parentNode.removeChild(l),l=u}a?(n.style.width=`${i}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${i}px`)}class Jge{constructor(e,n){this.node=e,this.cellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),z2(e,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!==this.node.type?!1:(this.node=e,z2(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return e.type==="attributes"&&(e.target===this.table||this.colgroup.contains(e.target))}}function V2(t,e){return t.createAndFill()}function Yge(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;const e={};return Object.keys(t.nodes).forEach(n=>{const r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),t.cached.tableNodeTypes=e,e}function Xge(t,e,n,r,o){const s=Yge(t),i=[],a=[];for(let c=0;c<n;c+=1){const u=V2(s.cell);if(u&&a.push(u),r){const d=V2(s.header_cell);d&&i.push(d)}}const l=[];for(let c=0;c<e;c+=1)l.push(s.row.createChecked(null,r&&c===0?i:a));return s.table.createChecked(null,l)}function Qge(t){return t instanceof ft}const Lp=({editor:t})=>{const{selection:e}=t.state;if(!Qge(e))return!1;let n=0;const r=vL(e.ranges[0].$from,o=>o.type.name==="table");return r==null||r.node.descendants(o=>{if(o.type.name==="table")return!1;["tableCell","tableHeader"].includes(o.type.name)&&(n+=1)}),n===e.ranges.length?(t.commands.deleteTable(),!0):!1},Zge=on.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:Jge,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({HTMLAttributes:t}){return["table",$t(this.options.HTMLAttributes,t),["tbody",0]]},addCommands(){return{insertTable:({rows:t=3,cols:e=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:o,editor:s})=>{const i=Xge(s.schema,t,e,n);if(o){const a=r.selection.anchor+1;r.replaceSelectionWith(i).scrollIntoView().setSelection(et.near(r.doc.resolve(a)))}return!0},addColumnBefore:()=>({state:t,dispatch:e})=>Nge(t,e),addColumnAfter:()=>({state:t,dispatch:e})=>Lge(t,e),deleteColumn:()=>({state:t,dispatch:e})=>Pge(t,e),addRowBefore:()=>({state:t,dispatch:e})=>$ge(t,e),addRowAfter:()=>({state:t,dispatch:e})=>Hge(t,e),deleteRow:()=>({state:t,dispatch:e})=>Bge(t,e),deleteTable:()=>({state:t,dispatch:e})=>Kge(t,e),mergeCells:()=>({state:t,dispatch:e})=>H2(t,e),splitCell:()=>({state:t,dispatch:e})=>F2(t,e),toggleHeaderColumn:()=>({state:t,dispatch:e})=>oh("column")(t,e),toggleHeaderRow:()=>({state:t,dispatch:e})=>oh("row")(t,e),toggleHeaderCell:()=>({state:t,dispatch:e})=>qge(t,e),mergeOrSplit:()=>({state:t,dispatch:e})=>H2(t,e)?!0:F2(t,e),setCellAttribute:(t,e)=>({state:n,dispatch:r})=>Vge(t,e)(n,r),goToNextCell:()=>({state:t,dispatch:e})=>j2(1)(t,e),goToPreviousCell:()=>({state:t,dispatch:e})=>j2(-1)(t,e),fixTables:()=>({state:t,dispatch:e})=>(e&&JL(t),!0),setCellSelection:t=>({tr:e,dispatch:n})=>{if(n){const r=ft.create(e.doc,t.anchorCell,t.headCell);e.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:Lp,"Mod-Backspace":Lp,Delete:Lp,"Mod-Delete":Lp}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[xge({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],Gge({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:tt(Te(t,"tableRole",e))}}}),eye=on.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?[parseInt(e,10)]:null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",$t(this.options.HTMLAttributes,t),0]}}),tye=on.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?[parseInt(e,10)]:null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",$t(this.options.HTMLAttributes,t),0]}}),nye=on.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",$t(this.options.HTMLAttributes,t),0]}}),rye=(t,e)=>{const n=t.__vccOpts||t;for(const[r,o]of e)n[r]=o;return n},oye={components:{EditorContent:Qme},props:{modelValue:{type:String,default:""}},emits:["update:modelValue","close"],data(){return{editor:null,tableOptionsOpen:!1,selectedClasses:"fm-p-2 fm-w-[36px] fm-h-[36px] fm-flex fm-items-center fm-justify-center dark:fm-text-gray-300 fm-rounded fm-cursor-pointer dark:hover:fm-text-gray-300 dark:fm-bg-gray-600 dark:hover:fm-bg-gray-500 fm-text-gray-300 hover:fm-text-white hover:fm-bg-gray-500 !fm-bg-gray-600",unSelectedClasses:"fm-p-2 fm-w-[36px] fm-h-[36px] fm-flex fm-items-center fm-justify-center fm-text-gray-500 fm-rounded fm-cursor-pointer hover:fm-text-gray-900 hover:fm-bg-gray-100 dark:fm-text-gray-400 dark:hover:fm-text-white dark:hover:fm-bg-gray-600",unSelectedClassesNoSize:"fm-p-2 fm-flex fm-items-center fm-justify-center fm-text-gray-500 fm-rounded fm-cursor-pointer hover:fm-text-gray-900 hover:fm-bg-gray-100 dark:fm-text-gray-400 dark:hover:fm-text-white dark:hover:fm-bg-gray-600"}},watch:{modelValue(t){this.editor.getHTML()!==t&&this.editor.commands.setContent(t,!1)}},methods:{toggleTableOptions(){this.tableOptionsOpen=!this.tableOptionsOpen}},mounted(){this.editor=new Xme({extensions:[mpe,gpe,Zge.configure({resizable:!0}),nye,tye,eye,ype.configure({types:["heading","paragraph"],alignments:["left","center","right"]})],content:this.modelValue,onUpdate:()=>{this.$emit("update:modelValue",this.editor.getHTML())}}),this.editor.commands.focus("end")},beforeUnmount(){this.editor.destroy()}},sye={class:"wysiwyg"},iye={key:0,class:"fm-w-full fm-mb-4 fm-border fm-border-gray-200 fm-rounded-lg fm-bg-gray-50 dark:fm-bg-gray-700 dark:fm-border-gray-600"},aye={class:"fm-flex fm-items-center fm-justify-between fm-px-3 fm-py-2 fm-border-b dark:fm-border-gray-600"},lye={class:"fm-flex fm-flex-wrap fm-items-center fm-divide-gray-200 sm:fm-divide-x dark:fm-divide-gray-600"},cye={class:"fm-flex fm-items-center fm-space-x-1 sm:fm-pr-4"},uye=g("span",{class:"fm-sr-only"},"Heading 1",-1),dye=g("span",{class:"fm-sr-only"},"Heading 2",-1),fye=g("span",{class:"fm-sr-only"},"Heading 3",-1),hye=g("span",{class:"fm-sr-only"},"Heading 4",-1),pye=g("span",{class:"fm-sr-only"},"Heading 5",-1),mye=g("span",{class:"fm-sr-only"},"Heading 6",-1),gye=g("span",{class:"fm-sr-only"},"Paragraph",-1),yye={class:"fm-flex fm-flex-wrap fm-items-center fm-space-x-1 sm:fm-px-4"},vye=g("span",{class:"fm-sr-only"},"Bold",-1),bye=g("span",{class:"fm-sr-only"},"Italic",-1),wye=g("span",{class:"fm-sr-only"},"Underline",-1),kye=g("span",{class:"fm-sr-only"},"Strike through",-1),xye={class:"fm-flex fm-flex-wrap fm-items-center fm-space-x-1 sm:fm-px-4"},Cye=g("svg",{fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12"})],-1),_ye=g("span",{class:"fm-sr-only"},"Left align",-1),Sye=[Cye,_ye],Tye=g("svg",{fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",class:"fm-w-5 fm-h-5"},[g("path",{d:"M3.75 6.75H20.25M8 12H15.75M6.5 17.25H17.25","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Mye=g("span",{class:"fm-sr-only"},"Align center",-1),Eye=[Tye,Mye],Oye=g("svg",{fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5M12 17.25h8.25"})],-1),Iye=g("span",{class:"fm-sr-only"},"Right align",-1),Aye=[Oye,Iye],Nye={class:"fm-flex fm-flex-wrap fm-items-center fm-space-x-1 sm:fm-px-4"},Lye=g("svg",{fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})],-1),Rye=g("span",{class:"fm-sr-only"},"Unordered list",-1),Pye=[Lye,Rye],Dye=Fu('<svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="fm-w-5 fm-h-5"><path d="M8.25 6.75H20.25M8.25 12H20.25M8.25 17.25H20.25" stroke-linecap="round" stroke-linejoin="round"></path><path d="M5.31374 4.45459V7.00004H4.77557V4.96542H4.76065L4.17773 5.33083V4.85356L4.80788 4.45459H5.31374Z" fill="currentColor"></path><path d="M4.20632 13V12.6123L5.11239 11.7733C5.18945 11.6987 5.25408 11.6316 5.30629 11.572C5.35932 11.5123 5.3995 11.4539 5.42685 11.3967C5.45419 11.3387 5.46786 11.2761 5.46786 11.209C5.46786 11.1345 5.45088 11.0702 5.4169 11.0164C5.38293 10.9617 5.33653 10.9198 5.2777 10.8908C5.21887 10.861 5.15217 10.8461 5.07759 10.8461C4.9997 10.8461 4.93176 10.8618 4.87376 10.8933C4.81576 10.9248 4.77101 10.97 4.73952 11.0288C4.70804 11.0876 4.69229 11.1577 4.69229 11.2389H4.18146C4.18146 11.0723 4.21916 10.9277 4.29457 10.8051C4.36997 10.6825 4.47562 10.5876 4.61151 10.5205C4.7474 10.4533 4.904 10.4198 5.08132 10.4198C5.26361 10.4198 5.42229 10.4521 5.55735 10.5167C5.69324 10.5805 5.79889 10.6692 5.87429 10.7827C5.94969 10.8962 5.98739 11.0263 5.98739 11.173C5.98739 11.2691 5.96834 11.364 5.93022 11.4576C5.89293 11.5512 5.82623 11.6552 5.73011 11.7696C5.634 11.8831 5.49852 12.0194 5.32369 12.1785L4.95206 12.5427V12.5601H6.02095V13H4.20632Z" fill="currentColor"></path><path d="M5.14719 19.0348C4.96159 19.0348 4.79628 19.0029 4.65128 18.9391C4.5071 18.8745 4.39317 18.7859 4.30948 18.6732C4.22662 18.5596 4.18395 18.4287 4.18146 18.2804H4.72337C4.72668 18.3426 4.74698 18.3972 4.78427 18.4445C4.82238 18.4909 4.87293 18.5269 4.9359 18.5526C4.99888 18.5783 5.06972 18.5911 5.14844 18.5911C5.23047 18.5911 5.30297 18.5766 5.36594 18.5476C5.42892 18.5186 5.47822 18.4784 5.51385 18.4271C5.54948 18.3757 5.56729 18.3165 5.56729 18.2493C5.56729 18.1814 5.54824 18.1213 5.51012 18.0691C5.47283 18.0161 5.41897 17.9747 5.34854 17.9448C5.27894 17.915 5.19608 17.9001 5.09996 17.9001H4.86257V17.5048H5.09996C5.18117 17.5048 5.25284 17.4908 5.31499 17.4626C5.37796 17.4344 5.42685 17.3955 5.46165 17.3457C5.49645 17.2952 5.51385 17.2364 5.51385 17.1693C5.51385 17.1055 5.49852 17.0495 5.46786 17.0015C5.43803 16.9526 5.39577 16.9145 5.34109 16.8871C5.28723 16.8598 5.22425 16.8461 5.15217 16.8461C5.07925 16.8461 5.01255 16.8594 4.95206 16.8859C4.89157 16.9116 4.8431 16.9484 4.80664 16.9965C4.77018 17.0446 4.75071 17.1009 4.74822 17.1655H4.23242C4.23491 17.0189 4.27675 16.8896 4.35795 16.7777C4.43916 16.6659 4.54853 16.5785 4.68608 16.5155C4.82446 16.4517 4.98065 16.4198 5.15465 16.4198C5.33031 16.4198 5.48402 16.4517 5.61577 16.5155C5.74751 16.5793 5.84985 16.6655 5.92276 16.774C5.99651 16.8817 6.03297 17.0027 6.03214 17.1369C6.03297 17.2795 5.98864 17.3984 5.89915 17.4937C5.81049 17.5889 5.6949 17.6494 5.55238 17.6751V17.695C5.73964 17.719 5.88216 17.7841 5.97994 17.8901C6.07854 17.9954 6.12743 18.1271 6.1266 18.2854C6.12743 18.4304 6.08558 18.5592 6.00107 18.6719C5.91738 18.7846 5.80179 18.8733 5.6543 18.9379C5.50681 19.0025 5.33777 19.0348 5.14719 19.0348Z" fill="currentColor"></path></svg><span class="fm-sr-only">Ordered list</span>',2),$ye=[Dye],Hye={class:"fm-flex fm-flex-wrap fm-items-center fm-space-x-1 sm:fm-pl-4"},Fye={class:"fm-relative"},Bye=g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"fm-w-5 fm-h-5"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 01-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0112 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5"})],-1),jye=[Bye],zye={key:0,class:"fm-absolute fm-top-[40px] fm-left-0 fm-flex fm-flex-col fm-gap-1 fm-z-10 fm-w-[160px] fm-p-2 fm-bg-gray-50 fm-rounded-b-lg fm-max-h-[200px] fm-overflow-auto"},Vye=g("svg",{"aria-hidden":"true",class:"fm-w-4 fm-h-4",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[g("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),Uye=g("span",{class:"fm-sr-only"},"Close wysiwyg",-1),qye=[Vye,Uye],Wye=g("div",{id:"tooltip-fullscreen",role:"tooltip",class:"fm-absolute fm-z-10 fm-invisible fm-inline-block fm-px-3 fm-py-2 fm-text-sm fm-font-medium fm-text-white fm-transition-opacity fm-duration-300 fm-bg-gray-900 fm-rounded-lg fm-shadow-sm fm-opacity-0 tooltip dark:fm-bg-gray-700"},[Ge(" Show full screen "),g("div",{class:"tooltip-arrow","data-popper-arrow":""})],-1),Kye={class:"fm-p-2 fm-bg-white fm-rounded-b-lg dark:fm-bg-gray-800 dark:fm-text-white"};function Gye(t,e,n,r,o,s){const i=If("editor-content");return S(),T("div",sye,[o.editor?(S(),T("div",iye,[g("div",aye,[g("div",lye,[g("div",cye,[g("button",{onClick:e[0]||(e[0]=a=>o.editor.chain().focus().toggleHeading({level:1}).run()),type:"button",class:V(o.editor.isActive("heading",{level:1})?o.selectedClasses:o.unSelectedClasses)},[Ge(" H1 "),uye],2),g("button",{onClick:e[1]||(e[1]=a=>o.editor.chain().focus().toggleHeading({level:2}).run()),type:"button",class:V(o.editor.isActive("heading",{level:2})?o.selectedClasses:o.unSelectedClasses)},[Ge(" H2 "),dye],2),g("button",{onClick:e[2]||(e[2]=a=>o.editor.chain().focus().toggleHeading({level:3}).run()),type:"button",class:V(o.editor.isActive("heading",{level:3})?o.selectedClasses:o.unSelectedClasses)},[Ge(" H3 "),fye],2),g("button",{onClick:e[3]||(e[3]=a=>o.editor.chain().focus().toggleHeading({level:4}).run()),type:"button",class:V(o.editor.isActive("heading",{level:4})?o.selectedClasses:o.unSelectedClasses)},[Ge(" H4 "),hye],2),g("button",{onClick:e[4]||(e[4]=a=>o.editor.chain().focus().toggleHeading({level:5}).run()),type:"button",class:V(o.editor.isActive("heading",{level:5})?o.selectedClasses:o.unSelectedClasses)},[Ge(" H5 "),pye],2),g("button",{onClick:e[5]||(e[5]=a=>o.editor.chain().focus().toggleHeading({level:6}).run()),type:"button",class:V(o.editor.isActive("heading",{level:6})?o.selectedClasses:o.unSelectedClasses)},[Ge(" H6 "),mye],2),g("button",{onClick:e[6]||(e[6]=a=>o.editor.chain().focus().setParagraph().run()),type:"button",class:V(o.editor.isActive("paragraph")?o.selectedClasses:o.unSelectedClasses)},[Ge(" P "),gye],2)]),g("div",yye,[g("button",{onClick:e[7]||(e[7]=a=>o.editor.chain().focus().toggleBold().run()),type:"button",class:V(o.editor.isActive("bold")?o.selectedClasses:o.unSelectedClasses)},[Ge(" B "),vye],2),g("button",{onClick:e[8]||(e[8]=a=>o.editor.chain().focus().toggleItalic().run()),type:"button",class:V(o.editor.isActive("italic")?o.selectedClasses:o.unSelectedClasses)},[Ge(" I "),bye],2),g("button",{onClick:e[9]||(e[9]=a=>o.editor.chain().focus().toggleUnderline().run()),type:"button",class:V(o.editor.isActive("underline")?o.selectedClasses:o.unSelectedClasses)},[Ge(" U "),wye],2),g("button",{onClick:e[10]||(e[10]=a=>o.editor.chain().focus().toggleStrike().run()),type:"button",class:V(o.editor.isActive("strike")?o.selectedClasses:o.unSelectedClasses)},[Ge(" S "),kye],2)]),g("div",xye,[g("button",{onClick:e[11]||(e[11]=a=>o.editor.chain().focus().setTextAlign("left").run()),type:"button",class:V(o.editor.isActive({textAlign:"left"})?o.selectedClasses:o.unSelectedClasses)},Sye,2),g("button",{onClick:e[12]||(e[12]=a=>o.editor.chain().focus().setTextAlign("center").run()),type:"button",class:V(o.editor.isActive({textAlign:"center"})?o.selectedClasses:o.unSelectedClasses)},Eye,2),g("button",{onClick:e[13]||(e[13]=a=>o.editor.chain().focus().setTextAlign("right").run()),type:"button",class:V(o.editor.isActive({textAlign:"right"})?o.selectedClasses:o.unSelectedClasses)},Aye,2)]),g("div",Nye,[g("button",{onClick:e[14]||(e[14]=a=>o.editor.chain().focus().toggleBulletList().run()),type:"button",class:V(o.editor.isActive("bulletList")?o.selectedClasses:o.unSelectedClasses)},Pye,2),g("button",{onClick:e[15]||(e[15]=a=>o.editor.chain().focus().toggleOrderedList().run()),type:"button",class:V(o.editor.isActive("orderedList")?o.selectedClasses:o.unSelectedClasses)},$ye,2)]),g("div",Hye,[g("div",Fye,[g("button",{type:"button",class:V(o.unSelectedClasses),onClick:e[16]||(e[16]=a=>s.toggleTableOptions())},jye,2),o.tableOptionsOpen?(S(),T("div",zye,[g("button",{class:V(o.unSelectedClassesNoSize),onClick:e[17]||(e[17]=a=>(s.toggleTableOptions(),o.editor.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run()))},"Insert table",2),g("button",{class:V(o.unSelectedClassesNoSize),onClick:e[18]||(e[18]=a=>o.editor.chain().focus().addColumnBefore().run())},"Add column before",2),g("button",{class:V(o.unSelectedClassesNoSize),onClick:e[19]||(e[19]=a=>o.editor.chain().focus().addColumnAfter().run())},"Add column after",2),g("button",{class:V(o.unSelectedClassesNoSize),onClick:e[20]||(e[20]=a=>o.editor.chain().focus().addRowBefore().run())},"Add row before",2),g("button",{class:V(o.unSelectedClassesNoSize),onClick:e[21]||(e[21]=a=>o.editor.chain().focus().addRowAfter().run())},"Add row after",2),g("button",{class:V(o.unSelectedClassesNoSize),onClick:e[22]||(e[22]=a=>o.editor.chain().focus().deleteColumn().run())},"Delete column",2),g("button",{class:V(o.unSelectedClassesNoSize),onClick:e[23]||(e[23]=a=>o.editor.chain().focus().deleteRow().run())},"Delete row",2),g("button",{class:V(o.unSelectedClassesNoSize),onClick:e[24]||(e[24]=a=>(s.toggleTableOptions(),o.editor.chain().focus().deleteTable().run()))},"Delete table",2),g("button",{class:V(o.unSelectedClassesNoSize),onClick:e[25]||(e[25]=a=>o.editor.chain().focus().mergeCells().run())},"Merge cells",2),g("button",{class:V(o.unSelectedClassesNoSize),onClick:e[26]||(e[26]=a=>o.editor.chain().focus().splitCell().run())},"Split cells",2),g("button",{class:V(o.unSelectedClassesNoSize),onClick:e[27]||(e[27]=a=>o.editor.chain().focus().toggleHeaderColumn().run())},"Toggle header column",2),g("button",{class:V(o.unSelectedClassesNoSize),onClick:e[28]||(e[28]=a=>o.editor.chain().focus().toggleHeaderRow().run())},"Toggle header row",2),g("button",{class:V(o.unSelectedClassesNoSize),onClick:e[29]||(e[29]=a=>o.editor.chain().focus().toggleHeaderCell().run())},"Toggle header cell",2)])):H("",!0)])])]),g("button",{type:"button",onClick:e[30]||(e[30]=a=>t.$emit("close")),"data-tooltip-target":"tooltip-fullscreen",class:"fm-p-2 fm-text-gray-500 fm-rounded fm-cursor-pointer sm:fm-ml-auto hover:fm-text-gray-900 hover:fm-bg-gray-100 dark:fm-text-gray-400 dark:hover:fm-text-white dark:hover:fm-bg-gray-600"},qye),Wye]),g("div",Kye,[he(i,{editor:o.editor},null,8,["editor"])])])):H("",!0)])}const Jye=rye(oye,[["render",Gye]]),Yye={key:0},Xye={class:"fm-opacity-50"},Qye={key:1},Zye=Ie({__name:"FmWysiwyg",props:{block:{type:Object,required:!0},fieldName:{type:String,required:!0},label:{type:String,required:!0},editMode:{type:Boolean,required:!0,default:!1},configStore:{type:Object,required:!1,default:!1}},setup(t){const e=t;let n=ae(!1);const r=s=>{s.key==="Escape"&&(n.value=!1)},o=()=>{e.block[e.fieldName]&&e.block[e.fieldName].replace(/<\/?[^>]+(>|$)/g,"").length===0&&(e.block[e.fieldName]=null),n.value=!1,document.dispatchEvent(new CustomEvent("flowmate-input-updated",{}))};return(s,i)=>(S(),T("div",null,[e.editMode?(S(),T("div",Yye,[x(n)?(S(),T("span",Qye,[he(Jye,{onKeyup:r,onClose:o,class:"fm-text-black",modelValue:e.block[e.fieldName],"onUpdate:modelValue":i[1]||(i[1]=a=>e.block[e.fieldName]=a)},null,8,["modelValue"])])):(S(),T("span",{key:0,onClick:i[0]||(i[0]=a=>Ot(n)?n.value=!0:n=!0),class:"fm-cursor-pointer"},[Xt(s.$slots,"default",{},()=>[g("span",Xye,Le(e.label)+": Click to add",1)])]))])):Xt(s.$slots,"default",{key:1})]))}}),e0e={class:"fm-relative"},t0e=g("svg",{fill:"none",stroke:"currentColor",class:"fm-w-5 fm-h-5","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})],-1),n0e={class:"fm-sr-only"},r0e={key:1},o0e={key:2,class:"fm-w-full"},s0e=g("div",{class:"fm-flex fm-relative fm-items-center fm-justify-center fm-w-full fm-h-36 fm-bg-gray-300 fm-rounded dark:fm-bg-gray-700 fm-opacity-80"},[g("svg",{class:"fm-w-12 fm-h-12 fm-text-gray-200",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 640 512"},[g("path",{d:"M480 80C480 35.82 515.8 0 560 0C604.2 0 640 35.82 640 80C640 124.2 604.2 160 560 160C515.8 160 480 124.2 480 80zM0 456.1C0 445.6 2.964 435.3 8.551 426.4L225.3 81.01C231.9 70.42 243.5 64 256 64C268.5 64 280.1 70.42 286.8 81.01L412.7 281.7L460.9 202.7C464.1 196.1 472.2 192 480 192C487.8 192 495 196.1 499.1 202.7L631.1 419.1C636.9 428.6 640 439.7 640 450.9C640 484.6 612.6 512 578.9 512H55.91C25.03 512 .0006 486.1 .0006 456.1L0 456.1z"})])],-1),i0e=[s0e],a0e=Ie({__name:"FmImage",props:{block:{type:Object,required:!0},fieldName:{type:String,required:!0},blockIndex:{type:Number,required:!0,default:0},editMode:{type:Boolean,required:!0,default:!1},configStore:{type:Object,required:!1,default:!1}},setup(t){const e=t;return(n,r)=>(S(),T("div",null,[g("div",e0e,[e.editMode&&e.configStore?(S(),T("button",{key:0,type:"button",onClick:r[0]||(r[0]=o=>e.configStore.setValues(e.block,e.blockIndex,e.fieldName,["jpg","jpeg","png","gif","webp","avif"],e.configStore.getActiveFieldType,"media",e.block.acf_fc_layout,!1)),"data-dial-toggle":"speed-dial-menu-dropdown","aria-controls":"speed-dial-menu-dropdown","aria-expanded":"false",class:"fm-flex fm-items-center fm-justify-center fm-ml-auto fm-text-white !fm-bg-blue-700 fm-rounded-full fm-w-10 fm-h-10 hover:!fm-bg-blue-800 dark:!fm-bg-blue-600 dark:hover:!fm-bg-blue-700 focus:fm-ring-4 focus:fm-ring-blue-300 focus:fm-outline-none dark:focus:fm-ring-blue-800 fm-z-20 fm-absolute fm-top-2 fm-right-2"},[t0e,g("span",n0e,"Edit "+Le(e.configStore.getActiveFieldType),1)])):H("",!0),e.block[e.fieldName]&&e.block[e.fieldName].ID?(S(),T("div",r0e,[Xt(n.$slots,"default")])):(S(),T("div",o0e,i0e))])]))}}),l0e={class:"fm-relative"},c0e=g("svg",{fill:"none",stroke:"currentColor",class:"fm-w-5 fm-h-5","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})],-1),u0e=g("span",{class:"fm-sr-only"},"Edit gallery",-1),d0e=[c0e,u0e],f0e={key:1},h0e={key:2,class:"fm-w-full"},p0e=g("div",{class:"fm-flex fm-relative fm-items-center fm-justify-center fm-w-full fm-h-36 fm-bg-gray-300 fm-rounded dark:fm-bg-gray-700 fm-opacity-80"},[g("svg",{class:"fm-w-12 fm-h-12 fm-text-gray-200",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 640 512"},[g("path",{d:"M480 80C480 35.82 515.8 0 560 0C604.2 0 640 35.82 640 80C640 124.2 604.2 160 560 160C515.8 160 480 124.2 480 80zM0 456.1C0 445.6 2.964 435.3 8.551 426.4L225.3 81.01C231.9 70.42 243.5 64 256 64C268.5 64 280.1 70.42 286.8 81.01L412.7 281.7L460.9 202.7C464.1 196.1 472.2 192 480 192C487.8 192 495 196.1 499.1 202.7L631.1 419.1C636.9 428.6 640 439.7 640 450.9C640 484.6 612.6 512 578.9 512H55.91C25.03 512 .0006 486.1 .0006 456.1L0 456.1z"})])],-1),m0e=[p0e],g0e=Ie({__name:"FmGallery",props:{block:{type:Object,required:!0},fieldName:{type:String,required:!0},blockIndex:{type:Number,required:!0,default:0},editMode:{type:Boolean,required:!0,default:!1},configStore:{type:Object,required:!1,default:!1}},setup(t){const e=t;return(n,r)=>(S(),T("div",null,[g("div",l0e,[e.editMode&&e.configStore?(S(),T("button",{key:0,type:"button",onClick:r[0]||(r[0]=o=>e.configStore.setValues(e.block,e.blockIndex,e.fieldName,["jpg","jpeg","png","gif"],"gallery","media",e.block.acf_fc_layout,!1)),"data-dial-toggle":"speed-dial-menu-dropdown","aria-controls":"speed-dial-menu-dropdown","aria-expanded":"false",class:"fm-flex fm-items-center fm-justify-center fm-ml-auto fm-text-white !fm-bg-blue-700 fm-rounded-full fm-w-10 fm-h-10 hover:!fm-bg-blue-800 dark:!fm-bg-blue-600 dark:hover:!fm-bg-blue-700 focus:fm-ring-4 focus:fm-ring-blue-300 focus:fm-outline-none dark:focus:fm-ring-blue-800 fm-z-20 fm-absolute fm-top-2 fm-right-2"},d0e)):H("",!0),e.block[e.fieldName]&&e.block[e.fieldName].ID?(S(),T("div",f0e,[Xt(n.$slots,"default")])):(S(),T("div",h0e,m0e))])]))}}),y0e=g("svg",{"aria-hidden":"true",width:"20",height:"20",class:"fm-w-6 fm-h-6",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[g("path",{d:"M10 6C9.46957 6 8.96086 5.78929 8.58579 5.41421C8.21071 5.03914 8 4.53043 8 4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2C10.5304 2 11.0391 2.21071 11.4142 2.58579C11.7893 2.96086 12 3.46957 12 4C12 4.53043 11.7893 5.03914 11.4142 5.41421C11.0391 5.78929 10.5304 6 10 6ZM10 12C9.46957 12 8.96086 11.7893 8.58579 11.4142C8.21071 11.0391 8 10.5304 8 10C8 9.46957 8.21071 8.96086 8.58579 8.58579C8.96086 8.21071 9.46957 8 10 8C10.5304 8 11.0391 8.21071 11.4142 8.58579C11.7893 8.96086 12 9.46957 12 10C12 10.5304 11.7893 11.0391 11.4142 11.4142C11.0391 11.7893 10.5304 12 10 12ZM8 16C8 16.5304 8.21071 17.0391 8.58579 17.4142C8.96086 17.7893 9.46957 18 10 18C10.5304 18 11.0391 17.7893 11.4142 17.4142C11.7893 17.0391 12 16.5304 12 16C12 15.4696 11.7893 14.9609 11.4142 14.5858C11.0391 14.2107 10.5304 14 10 14C9.46957 14 8.96086 14.2107 8.58579 14.5858C8.21071 14.9609 8 15.4696 8 16Z",fill:"currentColor"})],-1),v0e=g("span",{class:"fm-sr-only"},"Open actions menu",-1),b0e=[y0e,v0e],w0e=["innerHTML"],k0e={class:"fm-absolute fm-bottom-0 fm-right-2 fm-flex fm-gap-1"},x0e={class:"fm-relative fm-inline-flex fm-items-center fm-justify-center fm-w-6 fm-h-6 fm-ml-1 fm-mt-1 fm-overflow-hidden fm-bg-gray-100 fm-rounded-full dark:fm-bg-gray-600"},C0e=["title"],_0e={class:"fm-flex fm-gap-2 fm-flex-col fm-justify-end fm-space-y-2"},S0e={key:0},T0e={key:0},M0e=["for","innerHTML"],E0e=["id","onUpdate:modelValue"],O0e={key:0,value:""},I0e=["value","innerHTML"],A0e={key:1,class:"fm-flex fm-items-center"},N0e=["id","onChange","checked"],L0e=["for","innerHTML"],R0e={key:2,class:"fm-flex fm-flex-col"},P0e=["innerHTML"],D0e=["id","value","onUpdate:modelValue"],$0e=["for","innerHTML"],H0e={key:3,class:"fm-flex fm-flex-col"},F0e=["innerHTML"],B0e={key:0},j0e=["id","onUpdate:modelValue"],z0e=["for"],V0e=["id","value","onUpdate:modelValue"],U0e=["for","innerHTML"],q0e={key:4,class:"fm-flex fm-flex-col"},W0e=["onClick"],K0e={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"fm-w-6 fm-h-6"},G0e=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"},null,-1),J0e=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 6h.008v.008H6V6z"},null,-1),Y0e=[G0e,J0e],X0e={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"fm-w-6 fm-h-6"},Q0e=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"},null,-1),Z0e=[Q0e],eve=["innerHTML"],tve={key:0},nve={key:0},rve=["for","innerHTML"],ove=["id","onUpdate:modelValue"],sve={key:0,value:""},ive=["value","innerHTML"],ave={key:1,class:"fm-flex fm-items-center"},lve=["id","onChange","checked"],cve=["for","innerHTML"],uve={key:2,class:"fm-flex fm-flex-col"},dve=["innerHTML"],fve=["id","value","onUpdate:modelValue"],hve=["for","innerHTML"],pve={key:3,class:"fm-flex fm-flex-col"},mve=["innerHTML"],gve={key:0},yve=["id","onUpdate:modelValue"],vve=["for"],bve=["id","value","onUpdate:modelValue"],wve=["for","innerHTML"],kve={key:4,class:"fm-flex fm-flex-col"},xve=["onClick"],Cve={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"fm-w-6 fm-h-6"},_ve=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"},null,-1),Sve=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 6h.008v.008H6V6z"},null,-1),Tve=[_ve,Sve],Mve={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"fm-w-6 fm-h-6"},Eve=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"},null,-1),Ove=[Eve],Ive=["innerHTML"],Ave=Ie({__name:"FmSettings",props:{layout:{type:String,required:!0},block:{type:Object,required:!0},editMode:{type:Boolean,required:!0,default:!1},blockIndex:{type:Number,required:!0,default:0},configStore:{type:Object,required:!1,default:!1},collaborationsStore:{type:Object,required:!1,default:!1},additionalFields:{type:Array,required:!1}},setup(t){const e=t,n=ae(!1),r=e.configStore?e.configStore.getConfig:!1,o=Math.random().toString(36).substring(7),s=()=>{n.value=!n.value},i=(m,v,b)=>{m&&m.target&&m.target&&m.target instanceof HTMLInputElement&&(m.target.checked?b?e.block[v]=!0:e.block.settings[v]=!0:b?e.block[v]=!1:e.block.settings[v]=!1,h())},a=ae(),l=m=>{if(n.value){if(m.target!==a.value&&m.composedPath().includes(a.value))return;n.value=!1}};xo(()=>{window.addEventListener("click",l)}),_s(()=>{window.removeEventListener("click",l)});const c=Y(()=>e.collaborationsStore&&e.collaborationsStore.getCollaborationGuests&&e.collaborationsStore.getCollaborationGuests.length>0?e.collaborationsStore.getCollaborationGuests.find(m=>m.activeBlockIndex===e.blockIndex):!1),u=Y(()=>{if(c.value)return e.collaborationsStore.getGuestColor(c.value.name).border}),d=Y(()=>{if(c.value)return e.collaborationsStore.getGuestColor(c.value.name).bg}),f=Y(()=>e.collaborationsStore&&e.collaborationsStore.getCollaborationGuests&&e.collaborationsStore.getCollaborationGuests.length>0?e.collaborationsStore.getCollaborationGuests.filter(m=>m.activeBlockIndex===e.blockIndex):!1),h=()=>{document.dispatchEvent(new CustomEvent("flowmate-input-updated",{}))},p=Y(()=>{var m;return(m=r.config[e.layout])==null?void 0:m.settings});return(m,v)=>e.editMode&&x(r)&&x(r).config?(S(),T("div",{key:0,ref_key:"fmSettings",ref:a,class:V(["fm-absolute fm-right-0 fm-bottom-0 fm-top-0 fm-left-0 fm-pointer-events-none group fm-settings",[n.value?"fm-z-40":"fm-z-10",u.value?u.value:"show-border"]])},[g("button",{type:"button",onClick:s,"aria-controls":"speed-dial-menu-dropdown","aria-expanded":"false",style:{"pointer-events":"all!important"},class:"fm-flex fm-absolute fm-top-4 fm-right-4 fm-items-center fm-justify-center fm-ml-auto fm-text-white !fm-bg-blue-700 fm-rounded-full fm-w-10 fm-h-10 hover:!fm-bg-blue-800 dark:!fm-bg-blue-600 dark:hover:!fm-bg-blue-700 focus:fm-ring-4 focus:fm-ring-blue-300 focus:fm-outline-none dark:focus:fm-ring-blue-800"},b0e),x(r).config[e.layout].acf_fc_label?(S(),T("span",{key:0,class:V(["fm-absolute fm-top-0 fm-left-0 fm-px-[8px] fm-py-[2px] fm-text-white fm-text-xs fm-layout-label fm-invisible",d.value?d.value:"!fm-bg-blue-700 dark:!fm-bg-blue-600"]),innerHTML:x(r).config[e.layout].acf_fc_label},null,10,w0e)):H("",!0),g("div",k0e,[(S(!0),T(ye,null,Pe(f.value,(b,w)=>(S(),T("div",{class:V(["fm-relative fm-w-8 fm-h-8 fm-rounded-full fm-rounded-bl-none fm-rounded-br-none",t.collaborationsStore.getGuestColor(b.name).bg]),key:w},[g("div",x0e,[g("span",{class:"fm-cursor-default fm-font-medium fm-text-gray-600 dark:fm-text-gray-300 fm-uppercase fm-text-sm",title:b.name},Le(t.collaborationsStore.getGuestInitials(b.name)),9,C0e)])],2))),128))]),g("div",{style:{"pointer-events":"all!important"},class:V(["fm-pointer-events-all fm-absolute fm-right-4 fm-top-14 fm-w-[300px] fm-max-h-[400px] fm-overflow-auto fm-p-4 fm-mt-2 fm-bg-white fm-border fm-border-gray-100 fm-rounded-lg fm-shadow-sm dark:fm-border-gray-600 dark:fm-bg-gray-700",n.value?"":"fm-hidden"])},[g("div",_0e,[(S(!0),T(ye,null,Pe(p.value.sub_fields,(b,w)=>(S(),T("div",null,[typeof b=="object"?(S(),T("div",S0e,[b.type==="select"?(S(),T("div",T0e,[g("label",{for:w+x(o),class:"fm-block fm-mb-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-white",innerHTML:b.label},null,8,M0e),qe(g("select",{id:w+x(o),"onUpdate:modelValue":k=>e.block.settings[w]=k,onChange:h,class:"fm-bg-gray-50 fm-border fm-border-gray-300 fm-text-gray-900 fm-text-sm fm-rounded-lg focus:fm-ring-blue-500 focus:fm-border-blue-500 fm-block fm-w-full fm-p-2.5 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-ring-blue-500 dark:focus:fm-border-blue-500"},[b.allow_null===1?(S(),T("option",O0e,"- Select -")):H("",!0),(S(!0),T(ye,null,Pe(b.choices,(k,y)=>(S(),T("option",{value:y,innerHTML:k},null,8,I0e))),256))],40,E0e),[[mo,e.block.settings[w]]])])):H("",!0),b.type==="true_false"?(S(),T("div",A0e,[g("input",{id:w+x(o),onChange:k=>i(k,w,!1),checked:e.block.settings[w]===!0,type:"checkbox",value:!0,class:"fm-w-4 fm-h-4 fm-text-blue-600 fm-bg-gray-100 fm-border-gray-300 fm-rounded-full focus:fm-ring-blue-500 dark:focus:fm-ring-blue-600 dark:fm-ring-offset-gray-800 focus:fm-ring-2 dark:fm-bg-gray-700 dark:fm-border-gray-600"},null,40,N0e),g("label",{for:w+x(o),class:"fm-ml-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-gray-300",innerHTML:b.label},null,8,L0e)])):H("",!0),b.type==="checkbox"?(S(),T("div",R0e,[g("p",{class:"fm-block fm-mb-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-white",innerHTML:b.label},null,8,P0e),(S(!0),T(ye,null,Pe(b.choices,(k,y)=>(S(),T("div",null,[qe(g("input",{id:y+w+x(o),value:y,type:"checkbox","onUpdate:modelValue":C=>e.block.settings[w]=C,onChange:h,class:"fm-w-4 fm-h-4 fm-text-blue-600 fm-bg-gray-100 fm-border-gray-300 fm-rounded-full focus:fm-ring-blue-500 dark:focus:fm-ring-blue-600 dark:fm-ring-offset-gray-800 focus:fm-ring-2 dark:fm-bg-gray-700 dark:fm-border-gray-600"},null,40,D0e),[[Il,e.block.settings[w]]]),g("label",{for:y+w+x(o),class:"fm-ml-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-gray-300",innerHTML:k},null,8,$0e)]))),256))])):H("",!0),b.type==="radio"?(S(),T("div",H0e,[g("p",{class:"fm-block fm-mb-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-white",innerHTML:b.label},null,8,F0e),b.allow_null===1?(S(),T("div",B0e,[qe(g("input",{id:"null_"+w+x(o),value:"",type:"radio","onUpdate:modelValue":k=>e.block.settings[w]=k,onChange:h,class:"fm-w-4 fm-h-4 fm-text-blue-600 fm-bg-gray-100 fm-border-gray-300 fm-rounded-full focus:fm-ring-blue-500 dark:focus:fm-ring-blue-600 dark:fm-ring-offset-gray-800 focus:fm-ring-2 dark:fm-bg-gray-700 dark:fm-border-gray-600"},null,40,j0e),[[zs,e.block.settings[w]]]),g("label",{for:"null_"+w+x(o),class:"fm-ml-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-gray-300"},"- None -",8,z0e)])):H("",!0),(S(!0),T(ye,null,Pe(b.choices,(k,y)=>(S(),T("div",null,[qe(g("input",{id:y+w+x(o),value:y,type:"radio","onUpdate:modelValue":C=>e.block.settings[w]=C,onChange:h,class:"fm-w-4 fm-h-4 fm-text-blue-600 fm-bg-gray-100 fm-border-gray-300 fm-rounded-full focus:fm-ring-blue-500 dark:focus:fm-ring-blue-600 dark:fm-ring-offset-gray-800 focus:fm-ring-2 dark:fm-bg-gray-700 dark:fm-border-gray-600"},null,40,V0e),[[zs,e.block.settings[w]]]),g("label",{for:y+w+x(o),class:"fm-ml-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-gray-300",innerHTML:k},null,8,U0e)]))),256))])):H("",!0),b.type==="taxonomy"||b.type==="post_object"||b.type==="relationship"?(S(),T("div",q0e,[e.configStore?(S(),T("button",{key:0,onClick:k=>e.configStore.setValues(e.block,e.blockIndex,w,[],"","posts",e.layout,!0),type:"button",class:"fm-text-white !fm-bg-blue-700 hover:!fm-bg-blue-800 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-blue-300 fm-font-medium fm-rounded-lg fm-text-sm fm-p-3 fm-text-center fm-inline-flex fm-items-center dark:!fm-bg-blue-600 dark:hover:!fm-bg-blue-700 dark:focus:fm-ring-blue-800 fm-justify-center fm-gap-2"},[b.type==="taxonomy"?(S(),T("svg",K0e,Y0e)):(S(),T("svg",X0e,Z0e)),g("span",{innerHTML:b.label},null,8,eve)],8,W0e)):H("",!0)])):H("",!0)])):H("",!0)]))),256)),e.additionalFields&&e.additionalFields.length>0?(S(!0),T(ye,{key:0},Pe(e.additionalFields,b=>(S(),T("div",null,[typeof b=="string"&&typeof x(r).config[e.layout][b]=="object"?(S(),T("div",tve,[x(r).config[e.layout][b].type==="select"?(S(),T("div",nve,[g("label",{for:b+x(o),class:"fm-block fm-mb-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-white",innerHTML:x(r).config[e.layout][b].label},null,8,rve),qe(g("select",{id:b+x(o),"onUpdate:modelValue":w=>e.block[b]=w,onChange:h,class:"fm-bg-gray-50 fm-border fm-border-gray-300 fm-text-gray-900 fm-text-sm fm-rounded-lg focus:fm-ring-blue-500 focus:fm-border-blue-500 fm-block fm-w-full fm-p-2.5 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-ring-blue-500 dark:focus:fm-border-blue-500"},[x(r).config[e.layout][b].allow_null===1?(S(),T("option",sve,"- Select -")):H("",!0),(S(!0),T(ye,null,Pe(x(r).config[e.layout][b].choices,(w,k)=>(S(),T("option",{value:k,innerHTML:w},null,8,ive))),256))],40,ove),[[mo,e.block[b]]])])):H("",!0),x(r).config[e.layout][b].type==="true_false"?(S(),T("div",ave,[g("input",{id:b+x(o),onChange:w=>i(w,b,!0),checked:e.block[b]===!0,type:"checkbox",value:!0,class:"fm-w-4 fm-h-4 fm-text-blue-600 fm-bg-gray-100 fm-border-gray-300 fm-rounded-full focus:fm-ring-blue-500 dark:focus:fm-ring-blue-600 dark:fm-ring-offset-gray-800 focus:fm-ring-2 dark:fm-bg-gray-700 dark:fm-border-gray-600"},null,40,lve),g("label",{for:b+x(o),class:"fm-ml-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-gray-300",innerHTML:x(r).config[e.layout][b].label},null,8,cve)])):H("",!0),x(r).config[e.layout][b].type==="checkbox"?(S(),T("div",uve,[g("p",{class:"fm-block fm-mb-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-white",innerHTML:x(r).config[e.layout][b].label},null,8,dve),(S(!0),T(ye,null,Pe(x(r).config[e.layout][b].choices,(w,k)=>(S(),T("div",null,[qe(g("input",{id:b+k+x(o),value:k,type:"checkbox","onUpdate:modelValue":y=>e.block[b]=y,onChange:h,class:"fm-w-4 fm-h-4 fm-text-blue-600 fm-bg-gray-100 fm-border-gray-300 fm-rounded-full focus:fm-ring-blue-500 dark:focus:fm-ring-blue-600 dark:fm-ring-offset-gray-800 focus:fm-ring-2 dark:fm-bg-gray-700 dark:fm-border-gray-600"},null,40,fve),[[Il,e.block[b]]]),g("label",{for:b+k+x(o),class:"fm-ml-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-gray-300",innerHTML:w},null,8,hve)]))),256))])):H("",!0),x(r).config[e.layout][b].type==="radio"?(S(),T("div",pve,[g("p",{class:"fm-block fm-mb-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-white",innerHTML:x(r).config[e.layout][b].label},null,8,mve),x(r).config[e.layout][b].allow_null===1?(S(),T("div",gve,[qe(g("input",{id:"null_"+b+x(o),value:"",type:"radio","onUpdate:modelValue":w=>e.block[b]=w,onChange:h,class:"fm-w-4 fm-h-4 fm-text-blue-600 fm-bg-gray-100 fm-border-gray-300 fm-rounded-full focus:fm-ring-blue-500 dark:focus:fm-ring-blue-600 dark:fm-ring-offset-gray-800 focus:fm-ring-2 dark:fm-bg-gray-700 dark:fm-border-gray-600"},null,40,yve),[[zs,e.block[b]]]),g("label",{for:"null_"+b+x(o),class:"fm-ml-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-gray-300"},"- None -",8,vve)])):H("",!0),(S(!0),T(ye,null,Pe(x(r).config[e.layout][b].choices,(w,k)=>(S(),T("div",null,[qe(g("input",{id:b+k+x(o),value:k,type:"radio","onUpdate:modelValue":y=>e.block[b]=y,onChange:h,class:"fm-w-4 fm-h-4 fm-text-blue-600 fm-bg-gray-100 fm-border-gray-300 fm-rounded-full focus:fm-ring-blue-500 dark:focus:fm-ring-blue-600 dark:fm-ring-offset-gray-800 focus:fm-ring-2 dark:fm-bg-gray-700 dark:fm-border-gray-600"},null,40,bve),[[zs,e.block[b]]]),g("label",{for:b+k+x(o),class:"fm-ml-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-gray-300",innerHTML:w},null,8,wve)]))),256))])):H("",!0),x(r).config[e.layout][b].type==="taxonomy"||x(r).config[e.layout][b].type==="post_object"||x(r).config[e.layout][b].type==="relationship"?(S(),T("div",kve,[e.configStore?(S(),T("button",{key:0,onClick:w=>e.configStore.setValues(e.block,e.blockIndex,b,[],"","posts",e.layout,!1),type:"button",class:"fm-text-white !fm-bg-blue-700 hover:!fm-bg-blue-800 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-blue-300 fm-font-medium fm-rounded-lg fm-text-sm fm-p-3 fm-text-center fm-inline-flex fm-items-center dark:!fm-bg-blue-600 dark:hover:!fm-bg-blue-700 dark:focus:fm-ring-blue-800 fm-justify-center fm-gap-2"},[x(r).config[e.layout][b].type==="taxonomy"?(S(),T("svg",Cve,Tve)):(S(),T("svg",Mve,Ove)),g("span",{innerHTML:x(r).config[e.layout][b].label},null,8,Ive)],8,xve)):H("",!0)])):H("",!0)])):H("",!0)]))),256)):H("",!0)])],2)],2)):H("",!0)}}),Nve={key:0},Lve={key:0,class:"fm-flex fm-gap-y-4 fm-gap-2 fm-flex-wrap fm-p-6 fm-bg-white fm-border fm-border-gray-200 fm-rounded-lg fm-shadow dark:fm-bg-gray-800 dark:fm-border-gray-700 fm-relative"},Rve=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"},null,-1),Pve=[Rve],Dve={key:0},$ve=["for","innerHTML"],Hve=["onUpdate:modelValue","type","id","placeholder"],Fve={key:1,class:"fm-flex fm-items-center"},Bve=["id","onChange","checked"],jve=["for"],zve={key:1},Vve=g("svg",{fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),U2=Ie({__name:"FmLink",props:{block:{type:Object,required:!0},field:{type:Object,required:!0},label:{type:String,required:!0},fieldName:{type:String,required:!0},required:{type:Boolean,required:!0,default:!1},repeaterIndex:{type:Number,required:!1,default:0},editMode:{type:Boolean,required:!0,default:!1},configStore:{type:Object,required:!1,default:!1}},setup(t){const e=t,n=Math.random().toString(36).substring(7);let r=tr({title:"",url:"",target:""});const o=(a,l)=>{a&&a.target&&a.target&&a.target instanceof HTMLInputElement&&(console.log(a.target.checked),a.target.checked?e.field[l]="_blank":e.field[l]="")},s=()=>{console.log("ADD LINK"),e.block[e.fieldName]=r,r=tr({title:"",url:"",target:""})},i=()=>{e.block[e.fieldName]=!1};return(a,l)=>(S(),T("div",null,[e.editMode?(S(),T("div",Nve,[e.field?(S(),T("div",Lve,[e.required?H("",!0):(S(),T("svg",{key:0,onClick:i,"aria-label":"Delete block",title:"Delete block",fill:"none",class:"fm-absolute fm-top-2 fm-right-2 fm-w-4 fm-h-4 fm-cursor-pointer",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},Pve)),(S(!0),T(ye,null,Pe(x(r),(c,u)=>(S(),T("div",{class:V(typeof u=="string"&&u==="target"?"fm-w-full":"fm-w-[calc(50%-0.25rem)]")},[typeof u=="string"&&u==="url"||typeof u=="string"&&u==="title"?(S(),T("div",Dve,[g("label",{for:x(n)+u,class:"fm-block fm-mb-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-white",innerHTML:u==="url"?"URL":u==="title"?"Title":u},null,8,$ve),qe(g("input",{"onUpdate:modelValue":d=>e.field[u]=d,type:u==="url"?"url":"text",id:x(n)+u,class:"fm-bg-gray-50 fm-border fm-border-gray-300 fm-text-gray-900 fm-text-sm fm-rounded-lg focus:fm-ring-blue-500 focus:fm-border-blue-500 fm-block fm-w-full fm-p-2.5 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-ring-blue-500 dark:focus:fm-border-blue-500",placeholder:u==="url"?"URL":u==="title"?"Title":u,required:""},null,8,Hve),[[rI,e.field[u]]])])):H("",!0),typeof u=="string"&&u==="target"?(S(),T("div",Fve,[g("input",{id:x(n)+u+t.repeaterIndex,onChange:d=>o(d,u),checked:e.field[u]==="_blank",type:"checkbox",value:"_blank",class:"fm-w-4 fm-h-4 fm-text-blue-600 fm-bg-gray-100 fm-border-gray-300 fm-rounded-full focus:fm-ring-blue-500 dark:focus:fm-ring-blue-600 dark:fm-ring-offset-gray-800 focus:fm-ring-2 dark:fm-bg-gray-700 dark:fm-border-gray-600"},null,40,Bve),g("label",{for:x(n)+u+t.repeaterIndex,class:"fm-ml-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-gray-300"},"Open in new tab",8,jve)])):H("",!0)],2))),256))])):(S(),T("div",zve,[g("button",{onClick:s,type:"button",class:"fm-mt-4 fm-text-white !fm-bg-blue-700 hover:!fm-bg-blue-800 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-blue-300 fm-font-medium fm-rounded-lg fm-text-sm fm-p-3 fm-text-center fm-inline-flex fm-items-center dark:!fm-bg-blue-600 dark:hover:!fm-bg-blue-700 dark:focus:fm-ring-blue-800 fm-justify-center fm-gap-2"},[Vve,g("span",null,"Add "+Le(e.label),1)])]))])):Xt(a.$slots,"default",{key:1})]))}}),Uve={key:0},qve=g("svg",{fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),Wve=Ie({__name:"FmRepeater",props:{block:{type:Object,required:!0},fieldName:{type:String,required:!0},label:{type:String,required:!0},layout:{type:String,required:!0},editMode:{type:Boolean,required:!0,default:!1},configStore:{type:Object,required:!1,default:!1}},setup(t){const e=t,n=e.configStore?e.configStore.getConfig:!1,r=()=>{e.block[e.fieldName]||(e.block[e.fieldName]=[]),e.block[e.fieldName].push({});for(const s in n.config[e.layout][e.fieldName].sub_fields)n.config[e.layout][e.fieldName].sub_fields[s].type==="link"?e.block[e.fieldName][e.block[e.fieldName].length-1][s]={title:"Button text",url:"https://example.com",target:""}:n.config[e.layout][e.fieldName].sub_fields[s].choices?e.block[e.fieldName][e.block[e.fieldName].length-1][s]=Object.keys(n.config[e.layout][e.fieldName].sub_fields[s].choices)[0]:e.block[e.fieldName][e.block[e.fieldName].length-1][s]=""};ot(n,(s,i)=>{console.log("CONFIG CHANGE FROM",i),console.log("CONFIG CHANGE TO",s)});const o=Y(()=>{if(n&&n.config&&n.config[e.layout])if(n.config[e.layout][e.fieldName].max){if(!e.block[e.fieldName]||e.block[e.fieldName].length<n.config[e.layout][e.fieldName].max)return!0}else return!0;return!1});return(s,i)=>(S(),T("div",null,[e.editMode?(S(),T("div",Uve,[Xt(s.$slots,"default"),g("button",{onClick:r,type:"button",class:V([o.value?"":"fm-opacity-30 fm-pointer-events-none","fm-mt-4 fm-text-white !fm-bg-blue-700 hover:!fm-bg-blue-800 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-blue-300 fm-font-medium fm-rounded-lg fm-text-sm fm-p-3 fm-text-center fm-inline-flex fm-items-center dark:!fm-bg-blue-600 dark:hover:!fm-bg-blue-700 dark:focus:fm-ring-blue-800 fm-justify-center fm-gap-2"])},[qve,g("span",null,"Add "+Le(e.label),1)],2)])):Xt(s.$slots,"default",{key:1})]))}}),Kve={key:0},Gve=["value","innerHTML"],Jve=["value","innerHTML"],q2=Ie({__name:"FmSelect",props:{layout:{type:String,required:!0},block:{type:Object,required:!0},fieldName:{type:String,required:!0},label:{type:String,required:!0},repeaterIndex:{type:Number,required:!1,default:0},parent:{type:String,required:!1},editMode:{type:Boolean,required:!0,default:!1},configStore:{type:Object,required:!1,default:!1}},setup(t){const e=t;ae(!1);const n=Y(()=>{const o=e.configStore?e.configStore.getConfig:!1;return o&&o.config&&o.config[e.layout]?e.parent?o.config[e.layout][e.parent].sub_fields[e.fieldName].choices:o.config[e.layout][e.fieldName].choices:!1}),r=()=>{document.dispatchEvent(new CustomEvent("flowmate-input-updated",{}))};return(o,s)=>(S(),T("div",null,[e.editMode&&n.value?(S(),T("div",Kve,[e.parent?qe((S(),T("select",{key:0,"onUpdate:modelValue":s[0]||(s[0]=i=>e.block[e.parent][e.repeaterIndex][e.fieldName]=i),onChange:r,class:"fm-bg-gray-50 fm-border fm-border-gray-300 fm-text-gray-900 fm-text-sm fm-rounded-lg focus:fm-ring-blue-500 focus:fm-border-blue-500 fm-block fm-w-full fm-p-2.5 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-ring-blue-500 dark:focus:fm-border-blue-500"},[(S(!0),T(ye,null,Pe(n.value,(i,a)=>(S(),T("option",{value:a,innerHTML:i},null,8,Gve))),256))],544)),[[mo,e.block[e.parent][e.repeaterIndex][e.fieldName]]]):qe((S(),T("select",{key:1,"onUpdate:modelValue":s[1]||(s[1]=i=>e.block[e.fieldName]=i),onChange:r,class:"fm-bg-gray-50 fm-border fm-border-gray-300 fm-text-gray-900 fm-text-sm fm-rounded-lg focus:fm-ring-blue-500 focus:fm-border-blue-500 fm-block fm-w-full fm-p-2.5 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-ring-blue-500 dark:focus:fm-border-blue-500"},[(S(!0),T(ye,null,Pe(n.value,(i,a)=>(S(),T("option",{value:a,innerHTML:i},null,8,Jve))),256))],544)),[[mo,e.block[e.fieldName]]])])):Xt(o.$slots,"default",{key:1})]))}}),Yve={key:0},Xve=g("svg",{fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),Qve=Ie({__name:"FmFile",props:{block:{type:Object,required:!0},fieldName:{type:String,required:!0},label:{type:String,required:!1,default:"file"},acceptedMediaTypes:{type:Array,required:!1,default:[]},blockIndex:{type:Number,required:!0,default:0},editMode:{type:Boolean,required:!0,default:!1},configStore:{type:Object,required:!1,default:!1}},setup(t){const e=t;return(n,r)=>e.editMode&&e.configStore?(S(),T("div",Yve,[g("button",{onClick:r[0]||(r[0]=o=>e.configStore.setValues(e.block,e.blockIndex,e.fieldName,e.acceptedMediaTypes,"file","media",e.block.acf_fc_layout,!1)),type:"button",class:"fm-mt-4 fm-text-white !fm-bg-blue-700 hover:!fm-bg-blue-800 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-blue-300 fm-font-medium fm-rounded-lg fm-text-sm fm-p-3 fm-text-center fm-inline-flex fm-items-center dark:!fm-bg-blue-600 dark:hover:!fm-bg-blue-700 dark:focus:fm-ring-blue-800 fm-justify-center fm-gap-2"},[Xve,g("span",null,"Add "+Le(e.label),1)])])):H("",!0)}}),Zve={key:0},ebe=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"},null,-1),tbe=[ebe],nbe=Ie({__name:"FmRemoveRepeaterIndexButton",props:{layout:{type:String,required:!0},block:{type:Object,required:!0},fieldName:{type:String,required:!0},repeaterIndex:{type:Number,required:!0,default:0},editMode:{type:Boolean,required:!0,default:!1},configStore:{type:Object,required:!1,default:!1}},setup(t){const e=t,n=()=>{e.block[e.fieldName].length===1?e.block[e.fieldName]=!1:e.block[e.fieldName].splice(e.repeaterIndex,1)},r=Y(()=>{const o=e.configStore?e.configStore.getConfig:!1;if(o&&o.config&&o.config[e.layout])if(o.config[e.layout][e.fieldName].min){if(e.block[e.fieldName].length>o.config[e.layout][e.fieldName].min)return!0}else return!0;return!1});return(o,s)=>e.editMode?(S(),T("div",Zve,[(S(),T("svg",{onClick:s[0]||(s[0]=i=>n()),class:V([r.value?"":"fm-opacity-30 fm-pointer-events-none","fm-z-10 fm-absolute fm-top-2 fm-right-2 fm-w-4 fm-h-4 fm-cursor-pointer"]),"aria-label":"Delete block",title:"Delete block",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},tbe,2))])):H("",!0)}}),rbe={class:"fm-px-4 fm-pt-4 fm-left-64 fm-bg-gray-100 fm-h-full dark:fm-bg-gray-900 dark:fm-border-gray-700"},obe={class:"fm-relative"},sbe={key:0,class:"fm-absolute fm-w-full fm-h-full fm-min-h-[80vh] fm-flex fm-items-center fm-justify-center"},ibe={key:1,class:"fm-w-full fm-text-sm fm-text-left fm-text-gray-500 dark:fm-text-gray-400"},abe=g("thead",{class:"fm-text-xs fm-text-gray-700 fm-uppercase fm-bg-gray-50 dark:fm-bg-gray-700 dark:fm-text-gray-400"},[g("tr",null,[g("th",{scope:"col",class:"fm-px-6 fm-py-3 fm-w-10"},"Status"),g("th",{scope:"col",class:"fm-px-6 fm-py-3"},"ID"),g("th",{scope:"col",class:"fm-px-6 fm-py-3"},"Title"),g("th",{scope:"col",class:"fm-px-6 fm-py-3"},"Type"),g("th",{scope:"col",class:"fm-px-6 fm-py-3"},"Updated"),g("th",{scope:"col",class:"fm-px-6 fm-py-3"},"Publishing date"),g("th",{scope:"col",class:"fm-px-6 fm-py-3"},"Actions")])],-1),lbe={class:"fm-px-6 fm-py-4 fm-capitalize"},cbe={key:0,class:"fm-inline-flex fm-items-center fm-bg-green-100 fm-text-green-800 fm-text-xs fm-font-medium fm-px-2.5 fm-py-0.5 fm-rounded-full dark:fm-bg-green-900 dark:fm-text-green-300"},ube=g("span",{class:"fm-w-2 fm-h-2 fm-mr-1 fm-bg-green-500 fm-rounded-full"},null,-1),dbe={key:1,class:"fm-inline-flex fm-items-center fm-bg-gray-100 fm-text-gray-800 fm-text-xs fm-font-medium fm-px-2.5 fm-py-0.5 fm-rounded-full dark:fm-bg-gray-900 dark:fm-text-gray-300"},fbe=g("span",{class:"fm-w-2 fm-h-2 fm-mr-1 fm-bg-gray-500 fm-rounded-full"},null,-1),hbe={key:2,class:"fm-inline-flex fm-items-center fm-bg-gray-100 fm-text-gray-800 fm-text-xs fm-font-medium fm-px-2.5 fm-py-0.5 fm-rounded-full dark:fm-bg-gray-900 dark:fm-text-gray-300"},pbe=g("span",{class:"fm-w-2 fm-h-2 fm-mr-1 fm-bg-gray-500 fm-rounded-full"},null,-1),mbe={class:"fm-px-6 fm-py-4"},gbe={class:"fm-px-6 fm-py-4"},ybe={class:"fm-px-6 fm-py-4 fm-capitalize"},vbe={class:"fm-px-6 fm-py-4"},bbe={class:"fm-px-6 fm-py-4"},wbe={class:"fm-px-6 fm-py-4 fm-flex fm-justify-end fm-gap-2"},kbe={class:"fm-flex fm-gap-4 fm-px-4 fm-py-2 fm-border-t dark:fm-border-gray-600"},xbe={"aria-label":"Page navigation example ",class:"fm-flex-auto"},Cbe={key:0,class:"fm-inline-flex fm-items-center fm--space-x-px"},_be=g("button",{class:"fm-block fm-px-3 fm-py-2 fm-ml-0 fm-leading-tight fm-text-gray-500 fm-bg-white fm-border fm-border-gray-300 fm-rounded-l-lg hover:fm-bg-gray-100 hover:fm-text-gray-700 dark:fm-bg-gray-800 dark:fm-border-gray-700 dark:fm-text-gray-400 dark:hover:fm-bg-gray-700 dark:hover:fm-text-white"},[g("span",{class:"fm-sr-only"},"Previous"),g("svg",{"aria-hidden":"true",class:"fm-w-5 fm-h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[g("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})])],-1),Sbe=[_be],Tbe=["onClick"],Mbe=g("button",{class:"fm-block fm-px-3 fm-py-2 fm-leading-tight fm-text-gray-500 fm-bg-white fm-border fm-border-gray-300 fm-rounded-r-lg hover:fm-bg-gray-100 hover:fm-text-gray-700 dark:fm-bg-gray-800 dark:fm-border-gray-700 dark:fm-text-gray-400 dark:hover:fm-bg-gray-700 dark:hover:fm-text-white"},[g("span",{class:"fm-sr-only"},"Next"),g("svg",{"aria-hidden":"true",class:"fm-w-5 fm-h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[g("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})])],-1),Ebe=[Mbe],Obe=Ie({__name:"FlowmateContentManager",setup(t){const e=ae(!1),{content:n,getContent:r,totalPages:o,currentPage:s,totalContent:i}=Yx(),{goTo:a}=_r(),l=async d=>{a("#/content/"+d+"/view")},c=async d=>{a("#/design/"+d)},u=async d=>{console.log("SET CURRENT PAGE",d),a("#/content?page="+d)};return(d,f)=>(S(),T("div",rbe,[g("div",obe,[e.value?(S(),T("div",sbe,[he(jy)])):H("",!0),e.value?H("",!0):(S(),T("table",ibe,[abe,g("tbody",null,[x(n)?(S(!0),T(ye,{key:0},Pe(x(n),(h,p)=>(S(),T("tr",{key:"content-"+p,class:"fm-bg-white fm-border-b dark:fm-bg-gray-800 dark:fm-border-gray-700"},[g("td",lbe,[h.post_status=="publish"?(S(),T("span",cbe,[ube,Ge(" "+Le(h.post_status),1)])):h.post_status=="draft"?(S(),T("span",dbe,[fbe,Ge(" "+Le(h.post_status),1)])):(S(),T("span",hbe,[pbe,Ge(" "+Le(h.post_status),1)]))]),g("td",mbe,Le(h.ID),1),g("td",gbe,Le(h.post_title),1),g("td",ybe,Le(h.post_type),1),g("td",vbe,Le(h.post_modified),1),g("td",bbe,Le(h.post_date),1),g("td",wbe,[x(De)("content.read").isEnabled()?(S(),$e(uf,{key:0,onClick:rt(m=>l(h.ID),["stop"]),icon:"eye",size:"md",type:"primary",description:"View the content"},null,8,["onClick"])):H("",!0),x(De)("design.read").isEnabled()?(S(),$e(uf,{key:1,onClick:rt(m=>c(h.ID),["stop"]),icon:"paint-brush",size:"md",type:"primary",description:"Design the content"},null,8,["onClick"])):H("",!0)])]))),128)):H("",!0)])])),g("div",kbe,[g("nav",xbe,[x(o)>1?(S(),T("ul",Cbe,[g("li",{class:V(["fm-duration-200",x(s)>1?"":"fm-disabled fm-opacity-30 fm-pointer-events-none"]),onClick:f[0]||(f[0]=rt(h=>u(x(s)-1),["stop"]))},Sbe,2),(S(!0),T(ye,null,Pe(x(o),h=>(S(),T("li",{key:"page-"+h,onClick:rt(p=>u(h),["stop"]),class:V(h==x(s)?"fm-pointer-events-none":"")},[g("button",{class:V(["fm-relative fm-px-3 fm-py-2 fm-leading-tight fm-border fm-duration-200",h==x(s)?"fm-z-10 fm-text-blue-600 fm-border-blue-300 fm-bg-blue-50 hover:fm-bg-blue-100 hover:fm-text-blue-700 dark:fm-border-gray-700 dark:fm-bg-gray-700 dark:fm-text-white":"fm-text-gray-500 fm-bg-white hover:fm-bg-gray-100 hover:fm-text-gray-700 dark:fm-bg-gray-800 dark:fm-border-gray-700 dark:fm-text-gray-400 dark:hover:fm-bg-gray-700 dark:hover:fm-text-white"])},Le(h),3)],10,Tbe))),128)),g("li",{class:V(["fm-duration-200",x(s)<x(o)?"":"fm-disabled fm-opacity-30 fm-pointer-events-none"]),onClick:f[1]||(f[1]=rt(h=>u(x(s)+1),["stop"]))},Ebe,2)])):H("",!0)])])])]))}}),Ibe={class:"fm-text-lg fm-font-medium dark:fm-text-white"},Abe=["onClick"],Nbe={class:"fm-text-lg fm-font-medium dark:fm-text-white"},Lbe=g("svg",{"data-accordion-icon":"",class:"fm-w-3 fm-h-3 fm-rotate-180 fm-shrink-0","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6"},[g("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5 5 1 1 5"})],-1),Rbe={class:"fm-mb-2 fm-text-gray-500 dark:fm-text-gray-400"},Pbe={__name:"FlowmateAccordion",props:{items:{type:Array,required:!0}},setup(t){const e=ae(null);function n(r){e.value=e.value===r?null:r}return(r,o)=>(S(!0),T(ye,null,Pe(t.items,(s,i)=>(S(),T("div",{id:"accordion-collapse","data-accordion":"collapse",key:i},[g("h6",Ibe,[g("button",{type:"button",class:V(["fm-flex fm-items-center fm-justify-between fm-w-full fm-p-5 fm-font-medium fm-text-left fm-text-gray-500 fm-border fm-border-b-0 fm-border-gray-200 focus:fm-ring-4 focus:fm-ring-gray-200 dark:focus:fm-ring-gray-800 dark:fm-border-gray-700 dark:fm-text-gray-400 hover:fm-bg-gray-100 dark:hover:fm-bg-gray-800",{"fm-rounded-t-xl":i===0,"!fm-border-b":i===t.items.length-1,"fm-bg-gray-100":e.value===i}]),onClick:a=>n(i)},[g("span",Nbe,Le(s.title),1),Lbe],10,Abe)]),qe(g("div",null,[g("div",{class:V(["fm-p-5 fm-border fm-border-b-0 fm-border-gray-200 dark:fm-border-gray-700 dark:fm-bg-gray-900",{"!fm-border-b":i===t.items.length-1}])},[g("p",Rbe,Le(s.content),1)],2)],512),[[Lf,e.value===i]])]))),128))}},Dbe=[{title:"What is Flowmate?",content:"Flowmate is a practical content management tool that allows you to edit and update your website content directly on the live site, without requiring backend access. Its user-friendly interface and real-time editing capabilities make it easy to maintain and refresh your content, even without technical expertise. Flowmate seamlessly integrates with existing websites and offers collaborative editing features, simplifying content management for all users."},{title:"How can I edit content?",content:"Access your content by clicking on 'Content' in the left sidebar. Here, you'll find an overview of all your website's pages. Simply select the page you want, and click on the pen icon to edit or add new content."},{title:"Can I add images and videos to my content?",content:"Access your media library by clicking on 'Media Library' in the left sidebar. Upload your files here to conveniently access them when editing your content."},{title:"Can I modify the settings for my block?",content:"Yes, you can adjust the settings of your block by accessing the three dots icon located in the top-right corner. From there, you can select your desired option from the preset choices available."},{title:"How do I add more blocks onto my page?",content:"To add more blocks, simply navigate to the desired page and click on the 'Design' button located in the left navigation. From there, you can select your preferred block from the variety of preset choices available."},{title:"What happens if I make a mistake while editing?",content:"Revision shows your history edits of your page. You can access it by going on your selected page then click the 'Revision' button located in the left navigation. From there, you can see an overview of what changes have been made. You can either delete or view your change from there."},{title:"Can I schedule content updates to be published at a specific time?",content:"Yes, Flowmate provides a scheduling feature, allowing you to set specific dates and times for content updates to be automatically published on your website."},{title:"Can I preview how my edited content will appear on the live site?",content:"Certainly! Flowmate provides a real-time preview option, allowing you to see exactly how your content will look on the live site before publishing it. Simply click the eye icon on the right side of each content block to preview it."},{title:"Is there an autosave feature in the content editor?",content:"Yes, Flowmate has an autosave feature that automatically saves your changes at regular intervals."},{title:"Can I revert back to previous versions of my content?",content:"Revision shows your history edits of your page. You can access it by going on your selected page then click the 'Revision' button located in the left navigation. From there, you can see an overview of what changes have been made. You can either delete or view your change from there."},{title:"Can multiple team members collaborate on the same content simultaneously?",content:"Yes, Flowmate offers collaborative editing, allowing multiple users to work on the same content simultaneously."},{title:"How do I invite people for collaboration?",content:"Simply click on 'Collaboration Mode' then 'Start Collaboration Mode' and send the link to your collaborators. Once they click on the link, they will be able to edit the content."},{title:"Can I share my page with others for preview?",content:"Yes, you have the option to share your page with others for preview. To do so, simply click on the 'Share' icon and follow the provided instructions on how to share your page effectively."},{title:"Does Flowmate support multi-language content?",content:"No, unfortunately Flowmate does not support this feature at the moment."}],$be=g("h3",{class:"fm-text-3xl fm-font-bold dark:fm-text-white fm-pt-8 fm-pb-4"},"FAQs",-1),Hbe=Ie({__name:"FlowmateHelp",setup(t){return(e,n)=>(S(),T(ye,null,[$be,he(Pbe,{items:x(Dbe)},null,8,["items"])],64))}}),Fbe={class:"fm-px-4 fm-pt-4 fm-left-64 fm-bg-white fm-h-full dark:fm-bg-gray-900 dark:fm-border-gray-700"},Bbe=g("h1",{class:"fm-text-5xl fm-font-extrabold dark:fm-text-white"},"Dashboard",-1),jbe=Ie({__name:"FlowmateDashboardManager",setup(t){return(e,n)=>(S(),T("div",Fbe,[Bbe,he(Hbe)]))}}),zbe={key:0},Vbe=["data-index"],Ube={class:"fm-absolute fm-top-0 fm-left-0 fm-justify-end fm-w-full fm-h-full fm-flex fm-gap-x-4"},qbe={class:"fm-w-full"},Wbe={key:0,class:"fm-flex fm-justify-between fm-gap-4 fm-items-center fm-mb-2"},Kbe={class:"fm-w-[20%]"},Gbe={class:"fm-text-lg"},Jbe=["innerHTML"],Ybe=["innerHTML"],Xbe={class:"fm-w-[78%]"},Qbe={key:0},Zbe={key:1},e1e={class:"fm-mb-3 fm-p-4 fm-bg-white fm-rounded-xl fm-relative"},t1e={key:3,class:"fm-mt-96"},n1e=Ie({__name:"FlowmateEditor",setup(t){const e=Ur(),{initFlowmate:n}=kle(),{setStatesFromLocalStorage:r}=Zse(),o=Y(()=>e.getMediaUpdatedAt),s=Y(()=>e.getPostsUpdatedAt),{initMediaLibrary:i}=zh(),{initPostLibrary:a}=wle();ot(o,()=>{i(e.getBlockContext,e.getBlockIndex,e.getFieldName,e.getActiveMediaTypes,e.getActiveFieldType)}),ot(s,()=>{a(e.getBlockIndex,e.getFieldName,e.getLayoutName,e.getIsSetting,e.getActiveParent,e.getActiveRepeaterIndex)});const{collaborationID:l,collaborationGuests:c,updateGuestActiveBlock:u,setUserIdleStatus:d}=Jl(),f=dt(),h=ai();ot(()=>f.getLoading,E=>{E?(document.body.classList.add("fm-overflow-hidden"),document.body.classList.add("fm-pointer-events-none")):(document.body.classList.remove("fm-overflow-hidden"),document.body.classList.remove("fm-pointer-events-none"))});const{contextId:p}=Fr(),{isUserLoggedIn:m,getUsername:v}=rn(),{initRouter:b,is404:w,currentRoute:k}=_r(),y=Bu(),C=(E,O,N)=>{if(O.startsWith("preview_image_")||O.startsWith("file_id_"))return null;const R=e.getConfig;if(R&&R.config&&R.config[E.acf_fc_layout]&&R.config[E.acf_fc_layout][O]&&R.config[E.acf_fc_layout][O][N])return R.config[E.acf_fc_layout][O][N]};Sk(async()=>{rn().initUser(),await n(),typeof window<"u"&&(b(window.location.hash),r())});const _=E=>{if(E.acf_fc_layout==="block_selected_posts")return["custom_select","selected_posts","categories"];if(E.acf_fc_layout==="block_relationship")return["relationship_field"]};xo(()=>{De("collaborate").isEnabled()&&document.addEventListener("visibilitychange",M)}),_s(()=>{De("collaborate").isEnabled()&&document.removeEventListener("visibilitychange",M)});const M=async()=>{document.hidden?await d(!0):await d(!1)};return(E,O)=>{var N,R;return S(),T(ye,null,[x(m)?x(f).isErrorPage?H("",!0):(S(),T("div",{key:1,id:"flowmate-wrap",class:V({"fm-dark":x(e).getDarkMode})},[x(De)("ui.navbar").isEnabled()?(S(),$e(oee,{key:0})):H("",!0),x(De)("ui.navigationLeft").isEnabled()?(S(),$e(pse,{key:1})):H("",!0),he(dne),he(Vre),g("div",{class:V(["editor fm-w-screen fm-bg-transparent fm-pr-[320px]",[x(h).getLeftOpenStatus?"fm-pl-[272px]":"fm-pl-[80px]",x(e).getEditMode?"":"!fm-pr-0",x(De)("ui.navbar").isEnabled()?"fm-mt-[5rem]":"",x(De)("ui.navigationLeft").isDisabled()?"!fm-pl-0":""]])},[((N=x(k))==null?void 0:N.path)=="#/dashboard"?(S(),$e(jbe,{key:0})):H("",!0),((R=x(k))==null?void 0:R.path)=="#/content"?(S(),$e(Obe,{key:1})):H("",!0),x(De)("ui.editor").isEnabled()?Xt(E.$slots,"default",{key:2},()=>[x(p)&&x(e).getConfig&&x(De)("design").isEnabled()?(S(),T("div",zbe,[(S(!0),T(ye,null,Pe(x(f).pageContext.acf.content,(I,j)=>(S(),T("div",{class:V(["flex-section fm-mx-auto fm-py-12 fm-px-8 fm-relative fm-duration-300",[j%2?"fm-bg-blue-50":"fm-bg-blue-100"]]),"data-index":j},[g("div",Ube,[I.settings&&x(e).getConfig&&x(e).getConfig.config?(S(),$e(x(Ave),{key:0,"additional-fields":_(I),layout:I.acf_fc_layout,block:I,blockIndex:j,"edit-mode":x(e).getEditMode,"config-store":x(e),"collaborations-store":x(y)},null,8,["additional-fields","layout","block","blockIndex","edit-mode","config-store","collaborations-store"])):H("",!0)]),g("div",qbe,[(S(!0),T(ye,null,Pe(I,(de,te)=>(S(),T(ye,null,[typeof te=="string"&&te!=="acf_fc_layout"&&te!=="acf_fc_label"&&C(I,te,"label")?(S(),T("div",Wbe,[g("div",Kbe,[g("h3",Gbe,[g("strong",{innerHTML:C(I,te,"label")+":"},null,8,Jbe)]),g("p",{class:"fm-text-xs fm-text-gray-500 fm-mt-1",innerHTML:C(I,te,"instructions")},null,8,Ybe)]),g("div",Xbe,[C(I,te,"type")==="image"?(S(),T("div",Qbe,[he(x(a0e),{block:I,"block-index":j,"field-name":te,"edit-mode":x(e).getEditMode,"config-store":x(e)},null,8,["block","block-index","field-name","edit-mode","config-store"])])):H("",!0),C(I,te,"type")==="gallery"?(S(),T("div",Zbe,[he(x(g0e),{block:I,"block-index":j,"field-name":te,"edit-mode":x(e).getEditMode,"config-store":x(e)},null,8,["block","block-index","field-name","edit-mode","config-store"])])):H("",!0),C(I,te,"type")==="file"?(S(),$e(x(Qve),{key:2,"accepted-media-types":C(I,te,"label").toLowerCase().includes("video")?["mp4","mov"]:["pdf","zip"],block:I,"block-index":j,label:C(I,te,"label"),"field-name":te,"edit-mode":x(e).getEditMode,"config-store":x(e)},null,8,["accepted-media-types","block","block-index","label","field-name","edit-mode","config-store"])):H("",!0),C(I,te,"type")==="text"||C(I,te,"type")==="oembed"?(S(),$e(x(Tle),{key:3,block:I,"field-name":te,label:C(I,te,"label"),"edit-mode":x(e).getEditMode,"config-store":x(e)},null,8,["block","field-name","label","edit-mode","config-store"])):H("",!0),C(I,te,"type")==="select"?(S(),$e(x(q2),{key:4,"block-index":j,block:I,layout:I.acf_fc_layout,"field-name":te,label:C(I,te,"label"),"edit-mode":x(e).getEditMode,"config-store":x(e)},null,8,["block-index","block","layout","field-name","label","edit-mode","config-store"])):H("",!0),C(I,te,"type")==="wysiwyg"?(S(),$e(x(Zye),{key:5,block:I,"block-index":j,"field-name":te,label:C(I,te,"label"),"edit-mode":x(e).getEditMode,"config-store":x(e)},null,8,["block","block-index","field-name","label","edit-mode","config-store"])):H("",!0),C(I,te,"type")==="link"?(S(),$e(x(U2),{key:6,block:I,"block-index":j,field:I[te],"field-name":te,required:!1,label:C(I,te,"label"),"edit-mode":x(e).getEditMode,"config-store":x(e)},null,8,["block","block-index","field","field-name","label","edit-mode","config-store"])):H("",!0),te==="buttons"?(S(),$e(x(Wve),{key:7,layout:I.acf_fc_layout,block:I,"block-index":j,"field-name":te,label:"button","edit-mode":x(e).getEditMode,"config-store":x(e)},{editable:At(()=>[(S(!0),T(ye,null,Pe(I[te],(Q,ie)=>(S(),T("div",e1e,[he(x(nbe),{block:I,layout:I.acf_fc_layout,"block-index":j,"repeater-index":ie,"field-name":te,"edit-mode":x(e).getEditMode,"config-store":x(e)},null,8,["block","layout","block-index","repeater-index","field-name","edit-mode","config-store"]),he(x(U2),{required:!0,"block-index":j,"repeater-index":ie,block:I,field:I[te][ie].link,"field-name":te,label:"Link","edit-mode":x(e).getEditMode,"config-store":x(e)},null,8,["block-index","repeater-index","block","field","field-name","edit-mode","config-store"]),he(x(q2),{"block-index":j,"repeater-index":ie,layout:I.acf_fc_layout,block:I,"field-name":"variant",label:"Variant",parent:"buttons","edit-mode":x(e).getEditMode,"config-store":x(e)},null,8,["block-index","repeater-index","layout","block","edit-mode","config-store"])]))),256))]),_:2},1032,["layout","block","block-index","field-name","edit-mode","config-store"])):H("",!0)])])):H("",!0)],64))),256))])],10,Vbe))),256))])):H("",!0)]):H("",!0),qe(he(ble,null,null,512),[[Lf,x(f).getBackdrop]])],2),x(De)("ui.navigationRight").isEnabled()?(S(),$e(Gae,{key:2})):H("",!0),he(nM),x(e).getEditMode?(S(),T("div",t1e,[he(Gre)])):H("",!0)],2)):(S(),T("div",{key:0,id:"flowmate-wrap",class:V({"fm-dark":x(e).getDarkMode})},[he(Fse),he(nM)],2)),x(f).isErrorPage?(S(),$e(Qse,{key:2})):H("",!0),he(zse)],64)}}}),r1e={install:(t,e,n)=>{n&&q3().setPluginDefinitions(n),dt().setOptions(e),t.component("flowmate-editor",n1e)}},o1e={key:0},s1e={class:"fm-opacity-50"},i1e={key:1},a1e=["placeholder"],l1e=["placeholder"],o3e=Ie({__name:"FmText",props:{block:{type:Object,required:!0},field:{type:String,required:!1,default:"default"},fieldName:{type:String,required:!0},label:{type:String,required:!0},repeaterIndex:{type:Number,required:!1,default:0},parent:{type:String,required:!1},group:{type:String,required:!1},isAlwaysVisible:{type:Boolean,required:!1,default:!1},editMode:{type:Boolean,required:!0,default:!1},configStore:{type:Object,required:!1,default:!1}},setup(t){const e=t;let n=ae(!1);const r=ae(e.block[e.fieldName]);e.parent&&e.group&&(r.value=e.block[e.parent][e.repeaterIndex][e.group][e.fieldName]),e.parent&&!e.group&&(r.value=e.block[e.parent][e.repeaterIndex][e.fieldName]);const o=i=>{console.log("KEYUP"),(i.key==="Escape"||i.key==="Enter")&&r.value.blur()},s=()=>{console.log("TOGGLE EDIT"),n.value=!n.value,n.value?cr(()=>{r.value.focus()}):document.dispatchEvent(new CustomEvent("flowmate-input-updated",{}))};return(i,a)=>(S(),T("div",null,[e.editMode?(S(),T("div",o1e,[!x(n)&&!t.isAlwaysVisible?(S(),T("span",{key:0,onClick:s,class:"fm-cursor-pointer"},[Xt(i.$slots,"default",{},()=>[g("span",s1e,Le(e.label)+": Click to add ",1)])])):x(n)||t.isAlwaysVisible?(S(),T("span",i1e,[e.parent&&e.group?qe((S(),T("input",{key:0,onKeyup:o,onFocusout:s,ref_key:"input",ref:r,"onUpdate:modelValue":a[0]||(a[0]=l=>e.block[e.parent][e.repeaterIndex][e.group][e.fieldName]=l),type:"text",class:"fm-bg-gray-50 fm-border fm-border-gray-300 fm-text-gray-900 fm-rounded-lg focus:fm-ring-blue-500 focus:fm-border-blue-500 fm-block fm-w-full fm-p-2.5 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-ring-blue-500 dark:focus:fm-border-blue-500",placeholder:e.label},null,40,a1e)),[[mn,e.block[e.parent][e.repeaterIndex][e.group][e.fieldName]]]):qe((S(),T("input",{key:1,onKeyup:o,onFocusout:s,ref_key:"input",ref:r,"onUpdate:modelValue":a[1]||(a[1]=l=>e.block[e.fieldName]=l),type:"text",class:"fm-bg-gray-50 fm-border fm-border-gray-300 fm-text-gray-900 fm-rounded-lg focus:fm-ring-blue-500 focus:fm-border-blue-500 fm-block fm-w-full fm-p-2.5 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-ring-blue-500 dark:focus:fm-border-blue-500",placeholder:e.label},null,40,l1e)),[[mn,e.block[e.fieldName]]])])):H("",!0)])):Xt(i.$slots,"default",{key:1})]))}});function Sn(t){this.content=t}Sn.prototype={constructor:Sn,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),s=r.content.slice();return o==-1?s.push(n||t,e):(s[o+1]=e,n&&(s[o]=n)),new Sn(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Sn(n)},addToStart:function(t,e){return new Sn([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Sn(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),s=r.find(t);return o.splice(s==-1?o.length:s,0,e,n),new Sn(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Sn.from(t),t.size?new Sn(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Sn.from(t),t.size?new Sn(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Sn.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Sn.from=function(t){if(t instanceof Sn)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Sn(e)};function e7(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let o=t.child(r),s=e.child(r);if(o==s){n+=o.nodeSize;continue}if(!o.sameMarkup(s))return n;if(o.isText&&o.text!=s.text){for(let i=0;o.text[i]==s.text[i];i++)n++;return n}if(o.content.size||s.content.size){let i=e7(o.content,s.content,n+1);if(i!=null)return i}n+=o.nodeSize}}function t7(t,e,n,r){for(let o=t.childCount,s=e.childCount;;){if(o==0||s==0)return o==s?null:{a:n,b:r};let i=t.child(--o),a=e.child(--s),l=i.nodeSize;if(i==a){n-=l,r-=l;continue}if(!i.sameMarkup(a))return{a:n,b:r};if(i.isText&&i.text!=a.text){let c=0,u=Math.min(i.text.length,a.text.length);for(;c<u&&i.text[i.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(i.content.size||a.content.size){let c=t7(i.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class oe{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,o=0,s){for(let i=0,a=0;a<n;i++){let l=this.content[i],c=a+l.nodeSize;if(c>e&&r(l,o+a,s||null,i)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,o+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,o){let s="",i=!0;return this.nodesBetween(e,n,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,n-l),i=!r):a.isLeaf?(o?s+=typeof o=="function"?o(a):o:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),i=!r):!i&&a.isBlock&&(s+=r,i=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,o=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)o.push(e.content[s]);return new oe(o,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],o=0;if(n>e)for(let s=0,i=0;i<n;s++){let a=this.content[s],l=i+a.nodeSize;l>e&&((i<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-i),Math.min(a.text.length,n-i)):a=a.cut(Math.max(0,e-i-1),Math.min(a.content.size,n-i-1))),r.push(a),o+=a.nodeSize),i=l}return new oe(r,o)}cutByIndex(e,n){return e==n?oe.empty:e==0&&n==this.content.length?this:new oe(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let o=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new oe(o,s)}addToStart(e){return new oe([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new oe(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let o=this.content[n];e(o,r,n),r+=o.nodeSize}}findDiffStart(e,n=0){return e7(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return t7(this,e,n,r)}findIndex(e,n=-1){if(e==0)return Rp(0,e);if(e==this.size)return Rp(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,o=0;;r++){let s=this.child(r),i=o+s.nodeSize;if(i>=e)return i==e||n>0?Rp(r+1,i):Rp(r,o);o=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return oe.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new oe(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return oe.empty;let n,r=0;for(let o=0;o<e.length;o++){let s=e[o];r+=s.nodeSize,o&&s.isText&&e[o-1].sameMarkup(s)?(n||(n=e.slice(0,o)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new oe(n||e,r)}static from(e){if(!e)return oe.empty;if(e instanceof oe)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new oe([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}oe.empty=new oe([],0);const Vv={index:0,offset:0};function Rp(t,e){return Vv.index=t,Vv.offset=e,Vv}function jg(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!jg(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!jg(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Mt=class Nw{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let o=0;o<e.length;o++){let s=e[o];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,o));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,o)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&jg(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);return r.create(n.attrs)}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Nw.none;if(e instanceof Nw)return[e];let n=e.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}};Mt.none=[];class zg extends Error{}class we{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=r7(this.content,e+this.openStart,n);return r&&new we(r,this.openStart,this.openEnd)}removeBetween(e,n){return new we(n7(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return we.empty;let r=n.openStart||0,o=n.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new we(oe.fromJSON(e,n.content),r,o)}static maxOpen(e,n=!0){let r=0,o=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)o++;return new we(e,r,o)}}we.empty=new we(oe.empty,0,0);function n7(t,e,n){let{index:r,offset:o}=t.findIndex(e),s=t.maybeChild(r),{index:i,offset:a}=t.findIndex(n);if(o==e||s.isText){if(a!=n&&!t.child(i).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=i)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(n7(s.content,e-o-1,n-o-1)))}function r7(t,e,n,r){let{index:o,offset:s}=t.findIndex(e),i=t.maybeChild(o);if(s==e||i.isText)return r&&!r.canReplace(o,o,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=r7(i.content,e-s-1,n);return a&&t.replaceChild(o,i.copy(a))}function c1e(t,e,n){if(n.openStart>t.depth)throw new zg("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new zg("Inconsistent open depths");return o7(t,e,n,0)}function o7(t,e,n,r){let o=t.index(r),s=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){let i=o7(t,e,n,r+1);return s.copy(s.content.replaceChild(o,i))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let i=t.parent,a=i.content;return wl(i,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:i,end:a}=u1e(n,t);return wl(s,i7(t,i,a,e,r))}else return wl(s,Vg(t,e,r))}function s7(t,e){if(!e.type.compatibleContent(t.type))throw new zg("Cannot join "+e.type.name+" onto "+t.type.name)}function Lw(t,e,n){let r=t.node(n);return s7(r,e.node(n)),r}function bl(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function bf(t,e,n,r){let o=(e||t).node(n),s=0,i=e?e.index(n):o.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(bl(t.nodeAfter,r),s++));for(let a=s;a<i;a++)bl(o.child(a),r);e&&e.depth==n&&e.textOffset&&bl(e.nodeBefore,r)}function wl(t,e){return t.type.checkContent(e),t.copy(e)}function i7(t,e,n,r,o){let s=t.depth>o&&Lw(t,e,o+1),i=r.depth>o&&Lw(n,r,o+1),a=[];return bf(null,t,o,a),s&&i&&e.index(o)==n.index(o)?(s7(s,i),bl(wl(s,i7(t,e,n,r,o+1)),a)):(s&&bl(wl(s,Vg(t,e,o+1)),a),bf(e,n,o,a),i&&bl(wl(i,Vg(n,r,o+1)),a)),bf(r,null,o,a),new oe(a)}function Vg(t,e,n){let r=[];if(bf(null,t,n,r),t.depth>n){let o=Lw(t,e,n+1);bl(wl(o,Vg(t,e,n+1)),r)}return bf(e,null,n,r),new oe(r)}function u1e(t,e){let n=e.depth-t.openStart,r=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)r=e.node(o).copy(oe.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}class sh{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(n);return r?e.child(n).cut(r):o}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],o=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)o+=r.child(s).nodeSize;return o}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Mt.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),o=e.maybeChild(n);if(!r){let a=r;r=o,o=a}let s=r.marks;for(var i=0;i<s.length;i++)s[i].type.spec.inclusive===!1&&(!o||!s[i].isInSet(o.marks))&&(s=s[i--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,o=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!o||!r[s].isInSet(o.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Ug(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],o=0,s=n;for(let i=e;;){let{index:a,offset:l}=i.content.findIndex(s),c=s-l;if(r.push(i,a,o+l),!c||(i=i.child(a),i.isText))break;s=c-1,o+=l+1}return new sh(n,r,s)}static resolveCached(e,n){for(let o=0;o<Uv.length;o++){let s=Uv[o];if(s.pos==n&&s.doc==e)return s}let r=Uv[qv]=sh.resolve(e,n);return qv=(qv+1)%d1e,r}}let Uv=[],qv=0,d1e=12;class Ug{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const f1e=Object.create(null);let kl=class Rw{constructor(e,n,r,o=Mt.none){this.type=e,this.attrs=n,this.marks=o,this.content=r||oe.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,o=0){this.content.nodesBetween(e,n,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,o){return this.content.textBetween(e,n,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&jg(this.attrs,n||e.defaultAttrs||f1e)&&Mt.sameSet(this.marks,r||Mt.none)}copy(e=null){return e==this.content?this:new Rw(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Rw(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return we.empty;let o=this.resolve(e),s=this.resolve(n),i=r?0:o.sharedDepth(n),a=o.start(i),l=o.node(i).content.cut(o.pos-a,s.pos-a);return new we(l,o.depth-i,s.depth-i)}replace(e,n,r){return c1e(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:o}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(o==e||n.isText)return n;e-=o+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}resolve(e){return sh.resolveCached(this,e)}resolveNoCache(e){return sh.resolve(this,e)}rangeHasMark(e,n,r){let o=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),a7(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=oe.empty,o=0,s=r.childCount){let i=this.contentMatchAt(e).matchFragment(r,o,s),a=i&&i.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=o;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;let s=this.contentMatchAt(e).matchType(r),i=s&&s.matchFragment(this.content,n);return i?i.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=Mt.none;for(let n=0;n<this.marks.length;n++)e=this.marks[n].addToSet(e);if(!Mt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let o=oe.fromJSON(e,n.content);return e.nodeType(n.type).create(n.attrs,o,r)}};kl.prototype.text=void 0;class qg extends kl{constructor(e,n,r,o){if(super(e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):a7(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new qg(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new qg(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function a7(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Bl{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new h1e(e,n);if(r.next==null)return Bl.empty;let o=l7(r);r.next&&r.err("Unexpected trailing text");let s=w1e(b1e(o));return k1e(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let o=this;for(let s=n;o&&s<r;s++)o=o.matchType(e.child(s).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let o=[this];function s(i,a){let l=i.matchFragment(e,r);if(l&&(!n||l.validEnd))return oe.from(a.map(c=>c.createAndFill()));for(let c=0;c<i.next.length;c++){let{type:u,next:d}=i.next[c];if(!(u.isText||u.hasRequiredAttrs())&&o.indexOf(d)==-1){o.push(d);let f=s(d,a.concat(u));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),s=o.match;if(s.matchType(e)){let i=[];for(let a=o;a.type;a=a.via)i.push(a.type);return i.reverse()}for(let i=0;i<s.next.length;i++){let{type:a,next:l}=s.next[i];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!o.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:o}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&n(r.next[o].next)}return n(this),e.map((r,o)=>{let s=o+(r.validEnd?"*":" ")+" ";for(let i=0;i<r.next.length;i++)s+=(i?", ":"")+r.next[i].type.name+"->"+e.indexOf(r.next[i].next);return s}).join(`
`)}}Bl.empty=new Bl(!0);class h1e{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function l7(t){let e=[];do e.push(p1e(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function p1e(t){let e=[];do e.push(m1e(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function m1e(t){let e=v1e(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=g1e(t,e);else break;return e}function W2(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function g1e(t,e){let n=W2(t),r=n;return t.eat(",")&&(t.next!="}"?r=W2(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function y1e(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let o=[];for(let s in n){let i=n[s];i.groups.indexOf(e)>-1&&o.push(i)}return o.length==0&&t.err("No node type or group '"+e+"' found"),o}function v1e(t){if(t.eat("(")){let e=l7(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=y1e(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function b1e(t){let e=[[]];return o(s(t,0),n()),e;function n(){return e.push([])-1}function r(i,a,l){let c={term:l,to:a};return e[i].push(c),c}function o(i,a){i.forEach(l=>l.to=a)}function s(i,a){if(i.type=="choice")return i.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(i.type=="seq")for(let l=0;;l++){let c=s(i.exprs[l],a);if(l==i.exprs.length-1)return c;o(c,a=n())}else if(i.type=="star"){let l=n();return r(a,l),o(s(i.expr,l),l),[r(l)]}else if(i.type=="plus"){let l=n();return o(s(i.expr,a),l),o(s(i.expr,l),l),[r(l)]}else{if(i.type=="opt")return[r(a)].concat(s(i.expr,a));if(i.type=="range"){let l=a;for(let c=0;c<i.min;c++){let u=n();o(s(i.expr,l),u),l=u}if(i.max==-1)o(s(i.expr,l),l);else for(let c=i.min;c<i.max;c++){let u=n();r(l,u),o(s(i.expr,l),u),l=u}return[r(l)]}else{if(i.type=="name")return[r(a,void 0,i.value)];throw new Error("Unknown expr type")}}}}function c7(t,e){return e-t}function K2(t,e){let n=[];return r(e),n.sort(c7);function r(o){let s=t[o];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(o);for(let i=0;i<s.length;i++){let{term:a,to:l}=s[i];!a&&n.indexOf(l)==-1&&r(l)}}}function w1e(t){let e=Object.create(null);return n(K2(t,0));function n(r){let o=[];r.forEach(i=>{t[i].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<o.length;u++)o[u][0]==a&&(c=o[u][1]);K2(t,l).forEach(u=>{c||o.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new Bl(r.indexOf(t.length-1)>-1);for(let i=0;i<o.length;i++){let a=o[i][1].sort(c7);s.next.push({type:o[i][0],next:e[a.join(",")]||n(a)})}return s}}function k1e(t,e){for(let n=0,r=[t];n<r.length;n++){let o=r[n],s=!o.validEnd,i=[];for(let a=0;a<o.next.length;a++){let{type:l,next:c}=o.next[a];i.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function u7(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function d7(t,e){let n=Object.create(null);for(let r in t){let o=e&&e[r];if(o===void 0){let s=t[r];if(s.hasDefault)o=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function f7(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new x1e(t[n]);return e}let G2=class h7{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=f7(r.attrs),this.defaultAttrs=u7(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Bl.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:d7(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new kl(this,this.computeAttrs(e),oe.from(n),Mt.setFrom(r))}createChecked(e=null,n,r){return n=oe.from(n),this.checkContent(n),new kl(this,this.computeAttrs(e),n,Mt.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=oe.from(n),n.size){let i=this.contentMatch.fillBefore(n);if(!i)return null;n=i.append(n)}let o=this.contentMatch.matchFragment(n),s=o&&o.fillBefore(oe.empty,!0);return s?new kl(this,e,n.append(s),Mt.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Mt.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,i)=>r[s]=new h7(s,n,i));let o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};class x1e{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class n0{constructor(e,n,r,o){this.name=e,this.rank=n,this.schema=r,this.spec=o,this.attrs=f7(o.attrs),this.excluded=null;let s=u7(this.attrs);this.instance=s?new Mt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Mt(this,d7(this.attrs,e))}static compile(e,n){let r=Object.create(null),o=0;return e.forEach((s,i)=>r[s]=new n0(s,o++,n,i)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}excludes(e){return this.excluded.indexOf(e)>-1}}class C1e{constructor(e){this.cached=Object.create(null);let n=this.spec={};for(let o in e)n[o]=e[o];n.nodes=Sn.from(e.nodes),n.marks=Sn.from(e.marks||{}),this.nodes=G2.compile(this.spec.nodes,this),this.marks=n0.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let s=this.nodes[o],i=s.spec.content||"",a=s.spec.marks;s.contentMatch=r[i]||(r[i]=Bl.parse(i,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet=a=="_"?null:a?J2(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let o in this.marks){let s=this.marks[o],i=s.spec.excludes;s.excluded=i==null?[s]:i==""?[]:J2(this,i.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof G2){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,o)}text(e,n){let r=this.nodes.text;return new qg(r,r.defaultAttrs,e,Mt.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return kl.fromJSON(this,e)}markFromJSON(e){return Mt.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function J2(t,e){let n=[];for(let r=0;r<e.length;r++){let o=e[r],s=t.marks[o],i=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(o=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(i=l)}if(!i)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}class xu{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let o=e.nodes[r.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new X2(this,n,!1);return r.addAll(e,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new X2(this,n,!0);return r.addAll(e,n.from,n.to),we.maxOpen(r.finish())}matchTag(e,n,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let s=this.tags[o];if(T1e(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let i=s.getAttrs(e);if(i===!1)continue;s.attrs=i||void 0}return s}}}matchStyle(e,n,r,o){for(let s=o?this.styles.indexOf(o)+1:0;s<this.styles.length;s++){let i=this.styles[s],a=i.style;if(!(a.indexOf(e)!=0||i.context&&!r.matchesContext(i.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(i.getAttrs){let l=i.getAttrs(n);if(l===!1)continue;i.attrs=l||void 0}return i}}}static schemaRules(e){let n=[];function r(o){let s=o.priority==null?50:o.priority,i=0;for(;i<n.length;i++){let a=n[i];if((a.priority==null?50:a.priority)<s)break}n.splice(i,0,o)}for(let o in e.marks){let s=e.marks[o].spec.parseDOM;s&&s.forEach(i=>{r(i=Q2(i)),i.mark||i.ignore||i.clearMark||(i.mark=o)})}for(let o in e.nodes){let s=e.nodes[o].spec.parseDOM;s&&s.forEach(i=>{r(i=Q2(i)),i.node||i.ignore||i.mark||(i.node=o)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new xu(e,xu.schemaRules(e)))}}const p7={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},_1e={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},m7={ol:!0,ul:!0},Wg=1,Kg=2,wf=4;function Y2(t,e,n){return e!=null?(e?Wg:0)|(e==="full"?Kg:0):t&&t.whitespace=="pre"?Wg|Kg:n&~wf}class Pp{constructor(e,n,r,o,s,i,a){this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=o,this.solid=s,this.options=a,this.content=[],this.activeMarks=Mt.none,this.stashMarks=[],this.match=i||(a&wf?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(oe.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Wg)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-o[0].length))}}let n=oe.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(oe.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(e){for(let n=this.stashMarks.length-1;n>=0;n--)if(e.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(e){for(let n=0,r=this.pendingMarks;n<r.length;n++){let o=r[n];(this.type?this.type.allowsMarkType(o.type):E1e(o.type,e))&&!o.isInSet(this.activeMarks)&&(this.activeMarks=o.addToSet(this.activeMarks),this.pendingMarks=o.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!p7.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class X2{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let o=n.topNode,s,i=Y2(null,n.preserveWhitespace,0)|(r?wf:0);o?s=new Pp(o.type,o.attrs,Mt.none,Mt.none,!0,n.topMatch||o.type.contentMatch,i):r?s=new Pp(null,null,Mt.none,Mt.none,!0,null,i):s=new Pp(e.schema.topNodeType,null,Mt.none,Mt.none,!0,null,i),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){if(e.nodeType==3)this.addTextNode(e);else if(e.nodeType==1){let n=e.getAttribute("style");if(!n)this.addElement(e);else{let r=this.readStyles(M1e(n));if(!r)return;let[o,s]=r,i=this.top;for(let a=0;a<s.length;a++)this.removePendingMark(s[a],i);for(let a=0;a<o.length;a++)this.addPendingMark(o[a]);this.addElement(e);for(let a=0;a<o.length;a++)this.removePendingMark(o[a],i);for(let a=0;a<s.length;a++)this.addPendingMark(s[a])}}}addTextNode(e){let n=e.nodeValue,r=this.top;if(r.options&Kg||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&Wg)r.options&Kg?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let o=r.content[r.content.length-1],s=e.previousSibling;(!o||s&&s.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)}else this.findInside(e)}addElement(e,n){let r=e.nodeName.toLowerCase(),o;m7.hasOwnProperty(r)&&this.parser.normalizeLists&&S1e(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(o=this.parser.matchTag(e,this,n));if(s?s.ignore:_1e.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let i,a=this.top,l=this.needsBlock;if(p7.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),i=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}this.addAll(e),i&&this.sync(a),this.needsBlock=l}else this.addElementByRule(e,s,s.consuming===!1?o:void 0)}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let n=Mt.none,r=Mt.none;for(let o=0;o<e.length;o+=2)for(let s=void 0;;){let i=this.parser.matchStyle(e[o],e[o+1],this,s);if(!i)break;if(i.ignore)return null;if(i.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{i.clearMark(a)&&(r=a.addToSet(r))}):n=this.parser.schema.marks[i.mark].create(i.attrs).addToSet(n),i.consuming===!1)s=i;else break}return[n,r]}addElementByRule(e,n,r){let o,s,i;n.node?(s=this.parser.schema.nodes[n.node],s.isLeaf?this.insertNode(s.create(n.attrs))||this.leafFallback(e):o=this.enter(s,n.attrs||null,n.preserveWhitespace)):(i=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(i));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l)}o&&this.sync(a)&&this.open--,i&&this.removePendingMark(i,a)}addAll(e,n,r){let o=n||0;for(let s=n?e.childNodes[n]:e.firstChild,i=r==null?null:e.childNodes[r];s!=i;s=s.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(s);this.findAtPoint(e,o)}findPlace(e){let n,r;for(let o=this.open;o>=0;o--){let s=this.nodes[o],i=s.findWrapping(e);if(i&&(!n||n.length>i.length)&&(n=i,r=s,!i.length)||s.solid)break}if(!n)return!1;this.sync(r);for(let o=0;o<n.length;o++)this.enterInner(n[o],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(e)){this.closeExtra();let n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));let r=n.activeMarks;for(let o=0;o<e.marks.length;o++)(!n.type||n.type.allowsMarkType(e.marks[o].type))&&(r=e.marks[o].addToSet(r));return n.content.push(e.mark(r)),!0}return!1}enter(e,n,r){let o=this.findPlace(e.create(n));return o&&this.enterInner(e,n,!0,r),o}enterInner(e,n=null,r=!1,o){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let i=Y2(e,o,s.options);s.options&wf&&s.content.length==0&&(i|=wf),this.nodes.push(new Pp(e,n,s.activeMarks,s.pendingMarks,r,null,i)),this.open++}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&n.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(o?0:1),i=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(i(a-1,l))return!0;return!1}else{let u=l>0||l==0&&o?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return i(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let n=O1e(e,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,n){for(let r=this.open;r>=0;r--){let o=this.nodes[r];if(o.pendingMarks.lastIndexOf(e)>-1)o.pendingMarks=e.removeFromSet(o.pendingMarks);else{o.activeMarks=e.removeFromSet(o.activeMarks);let s=o.popFromStashMark(e);s&&o.type&&o.type.allowsMarkType(s.type)&&(o.activeMarks=s.addToSet(o.activeMarks))}if(o==n)break}}}function S1e(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&m7.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function T1e(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function M1e(t){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,n,r=[];for(;n=e.exec(t);)r.push(n[1],n[2].trim());return r}function Q2(t){let e={};for(let n in t)e[n]=t[n];return e}function E1e(t,e){let n=e.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(t))continue;let s=[],i=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&i(u))return!0}};if(i(o.contentMatch))return!0}}function O1e(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}class as{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Wv(n).createDocumentFragment());let o=r,s=[];return e.forEach(i=>{if(s.length||i.marks.length){let a=0,l=0;for(;a<s.length&&l<i.marks.length;){let c=i.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)o=s.pop()[1];for(;l<i.marks.length;){let c=i.marks[l++],u=this.serializeMark(c,i.isInline,n);u&&(s.push([c,o]),o.appendChild(u.dom),o=u.contentDOM||u.dom)}}o.appendChild(this.serializeNodeInner(i,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:o}=as.renderSpec(Wv(n),this.nodes[e.type.name](e));if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,o)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let o=e.marks.length-1;o>=0;o--){let s=this.serializeMark(e.marks[o],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let o=this.marks[e.type.name];return o&&as.renderSpec(Wv(r),o(e,n))}static renderSpec(e,n,r=null){if(typeof n=="string")return{dom:e.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;let o=n[0],s=o.indexOf(" ");s>0&&(r=o.slice(0,s),o=o.slice(s+1));let i,a=r?e.createElementNS(r,o):e.createElement(o),l=n[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let u in l)if(l[u]!=null){let d=u.indexOf(" ");d>0?a.setAttributeNS(u.slice(0,d),u.slice(d+1),l[u]):a.setAttribute(u,l[u])}}for(let u=c;u<n.length;u++){let d=n[u];if(d===0){if(u<n.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:f,contentDOM:h}=as.renderSpec(e,d,r);if(a.appendChild(f),h){if(i)throw new RangeError("Multiple content holes");i=h}}}return{dom:a,contentDOM:i}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new as(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Z2(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Z2(e.marks)}}function Z2(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Wv(t){return t.document||window.document}const g7=65535,y7=Math.pow(2,16);function I1e(t,e){return t+e*y7}function eE(t){return t&g7}function A1e(t){return(t-(t&g7))/y7}const v7=1,b7=2,km=4,w7=8;class Pw{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&w7)>0}get deletedBefore(){return(this.delInfo&(v7|km))>0}get deletedAfter(){return(this.delInfo&(b7|km))>0}get deletedAcross(){return(this.delInfo&km)>0}}class to{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&to.empty)return to.empty}recover(e){let n=0,r=eE(e);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+A1e(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let o=0,s=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?o:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+i],d=l+c;if(e<=d){let f=c?e==l?-1:e==d?1:n:n,h=l+o+(f<0?0:u);if(r)return h;let p=e==(n<0?l:d)?null:I1e(a/3,e-l),m=e==l?b7:e==d?v7:km;return(n<0?e!=l:e!=d)&&(m|=w7),new Pw(h,m,p)}o+=u-c}return r?e+o:new Pw(e+o,0,null)}touches(e,n){let r=0,o=eE(n),s=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==o*3)return!0;r+=this.ranges[a+i]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,s=0;o<this.ranges.length;o+=3){let i=this.ranges[o],a=i-(this.inverted?s:0),l=i+(this.inverted?0:s),c=this.ranges[o+n],u=this.ranges[o+r];e(a,a+c,l,l+u),s+=u-c}}invert(){return new to(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?to.empty:new to(e<0?[0,-e,0]:[0,0,e])}}to.empty=new to([]);class jc{constructor(e=[],n,r=0,o=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=o}slice(e=0,n=this.maps.length){return new jc(this.maps,this.mirror,e,n)}copy(){return new jc(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let o=e.getMirror(n);this.appendMap(e.maps[n],o!=null&&o<n?r+o:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let o=e.getMirror(n);this.appendMap(e.maps[n].invert(),o!=null&&o>n?r-o-1:void 0)}}invert(){let e=new jc;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let o=0;for(let s=this.from;s<this.to;s++){let i=this.maps[s],a=i.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this.maps[l].recover(a.recover);continue}}o|=a.delInfo,e=a.pos}return r?e:new Pw(e,o,null)}}const Kv=Object.create(null);class Mr{getMap(){return to.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Kv[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Kv)throw new RangeError("Duplicate use of step JSON ID "+e);return Kv[e]=n,n.prototype.jsonID=e,n}}class fn{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new fn(e,null)}static fail(e){return new fn(null,e)}static fromReplace(e,n,r,o){try{return fn.ok(e.replace(n,r,o))}catch(s){if(s instanceof zg)return fn.fail(s.message);throw s}}}function IC(t,e,n){let r=[];for(let o=0;o<t.childCount;o++){let s=t.child(o);s.content.size&&(s=s.copy(IC(s.content,e,s))),s.isInline&&(s=e(s,n,o)),r.push(s)}return oe.fromArray(r)}class Wi extends Mr{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),s=new we(IC(n.content,(i,a)=>!i.isAtom||!a.type.allowsMarkType(this.mark.type)?i:i.mark(this.mark.addToSet(i.marks)),o),n.openStart,n.openEnd);return fn.fromReplace(e,this.from,this.to,s)}invert(){return new ls(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Wi(n.pos,r.pos,this.mark)}merge(e){return e instanceof Wi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Wi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Wi(n.from,n.to,e.markFromJSON(n.mark))}}Mr.jsonID("addMark",Wi);class ls extends Mr{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new we(IC(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),n.openStart,n.openEnd);return fn.fromReplace(e,this.from,this.to,r)}invert(){return new Wi(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ls(n.pos,r.pos,this.mark)}merge(e){return e instanceof ls&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ls(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ls(n.from,n.to,e.markFromJSON(n.mark))}}Mr.jsonID("removeMark",ls);class Ki extends Mr{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return fn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return fn.fromReplace(e,this.pos,this.pos+1,new we(oe.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new Ki(this.pos,n.marks[o]);return new Ki(this.pos,this.mark)}}return new Cu(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ki(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ki(n.pos,e.markFromJSON(n.mark))}}Mr.jsonID("addNodeMark",Ki);class Cu extends Mr{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return fn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return fn.fromReplace(e,this.pos,this.pos+1,new we(oe.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Ki(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Cu(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Cu(n.pos,e.markFromJSON(n.mark))}}Mr.jsonID("removeNodeMark",Cu);class $n extends Mr{constructor(e,n,r,o=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=o}apply(e){return this.structure&&Dw(e,this.from,this.to)?fn.fail("Structure replace would overwrite content"):fn.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new to([this.from,this.to-this.from,this.slice.size])}invert(e){return new $n(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new $n(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof $n)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?we.empty:new we(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new $n(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?we.empty:new we(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new $n(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new $n(n.from,n.to,we.fromJSON(e,n.slice),!!n.structure)}}Mr.jsonID("replace",$n);class yn extends Mr{constructor(e,n,r,o,s,i,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=s,this.insert=i,this.structure=a}apply(e){if(this.structure&&(Dw(e,this.from,this.gapFrom)||Dw(e,this.gapTo,this.to)))return fn.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return fn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?fn.fromReplace(e,this.from,this.to,r):fn.fail("Content does not fit in gap")}getMap(){return new to([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new yn(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=e.map(this.gapFrom,-1),s=e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||s>r.pos?null:new yn(n.pos,r.pos,o,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new yn(n.from,n.to,n.gapFrom,n.gapTo,we.fromJSON(e,n.slice),n.insert,!!n.structure)}}Mr.jsonID("replaceAround",yn);function Dw(t,e,n){let r=t.resolve(e),o=n-e,s=r.depth;for(;o>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,o--;if(o>0){let i=r.node(s).maybeChild(r.indexAfter(s));for(;o>0;){if(!i||i.isLeaf)return!0;i=i.firstChild,o--}}return!1}function N1e(t,e,n,r){let o=[],s=[],i,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let f=Math.max(c,e),h=Math.min(c+l.nodeSize,n),p=r.addToSet(d);for(let m=0;m<d.length;m++)d[m].isInSet(p)||(i&&i.to==f&&i.mark.eq(d[m])?i.to=h:o.push(i=new ls(f,h,d[m])));a&&a.to==f?a.to=h:s.push(a=new Wi(f,h,r))}}),o.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function L1e(t,e,n,r){let o=[],s=0;t.doc.nodesBetween(e,n,(i,a)=>{if(!i.isInline)return;s++;let l=null;if(r instanceof n0){let c=i.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(i.marks)&&(l=[r]):l=i.marks;if(l&&l.length){let c=Math.min(a+i.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],f;for(let h=0;h<o.length;h++){let p=o[h];p.step==s-1&&d.eq(o[h].style)&&(f=p)}f?(f.to=c,f.step=s):o.push({style:d,from:Math.max(a,e),to:c,step:s})}}}),o.forEach(i=>t.step(new ls(i.from,i.to,i.style)))}function R1e(t,e,n,r=n.contentMatch){let o=t.doc.nodeAt(e),s=[],i=e+1;for(let a=0;a<o.childCount;a++){let l=o.child(a),c=i+l.nodeSize,u=r.matchType(l.type);if(!u)s.push(new $n(i,c,we.empty));else{r=u;for(let d=0;d<l.marks.length;d++)n.allowsMarkType(l.marks[d].type)||t.step(new ls(i,c,l.marks[d]))}i=c}if(!r.validEnd){let a=r.fillBefore(oe.empty,!0);t.replace(i,i,new we(a,0,0))}for(let a=s.length-1;a>=0;a--)t.step(s[a])}function P1e(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Qu(t){let e=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth;;--n){let r=t.$from.node(n),o=t.$from.index(n),s=t.$to.indexAfter(n);if(n<t.depth&&r.canReplace(o,s,e))return n;if(n==0||r.type.spec.isolating||!P1e(r,o,s))break}return null}function D1e(t,e,n){let{$from:r,$to:o,depth:s}=e,i=r.before(s+1),a=o.after(s+1),l=i,c=a,u=oe.empty,d=0;for(let p=s,m=!1;p>n;p--)m||r.index(p)>0?(m=!0,u=oe.from(r.node(p).copy(u)),d++):l--;let f=oe.empty,h=0;for(let p=s,m=!1;p>n;p--)m||o.after(p+1)<o.end(p)?(m=!0,f=oe.from(o.node(p).copy(f)),h++):c++;t.step(new yn(l,c,i,a,new we(u.append(f),d,h),u.size-d,!0))}function AC(t,e,n=null,r=t){let o=$1e(t,e),s=o&&H1e(r,e);return s?o.map(tE).concat({type:e,attrs:n}).concat(s.map(tE)):null}function tE(t){return{type:t,attrs:null}}function $1e(t,e){let{parent:n,startIndex:r,endIndex:o}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let i=s.length?s[0]:e;return n.canReplaceWith(r,o,i)?s:null}function H1e(t,e){let{parent:n,startIndex:r,endIndex:o}=t,s=n.child(r),i=e.contentMatch.findWrapping(s.type);if(!i)return null;let a=(i.length?i[i.length-1]:e).contentMatch;for(let l=r;a&&l<o;l++)a=a.matchType(n.child(l).type);return!a||!a.validEnd?null:i}function F1e(t,e,n){let r=oe.empty;for(let i=n.length-1;i>=0;i--){if(r.size){let a=n[i].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=oe.from(n[i].type.create(n[i].attrs,r))}let o=e.start,s=e.end;t.step(new yn(o,s,o,s,new we(r,0,0),n.length,!0))}function B1e(t,e,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(i,a)=>{if(i.isTextblock&&!i.hasMarkup(r,o)&&j1e(t.doc,t.mapping.slice(s).map(a),r)){t.clearIncompatible(t.mapping.slice(s).map(a,1),r);let l=t.mapping.slice(s),c=l.map(a,1),u=l.map(a+i.nodeSize,1);return t.step(new yn(c,u,c+1,u-1,new we(oe.from(r.create(o,null,i.marks)),0,0),1,!0)),!1}})}function j1e(t,e,n){let r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function z1e(t,e,n,r,o){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let i=n.create(r,null,o||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,i);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new yn(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new we(oe.from(i),0,0),1,!0))}function zc(t,e,n=1,r){let o=t.resolve(e),s=o.depth-n,i=r&&r[r.length-1]||o.parent;if(s<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!i.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,u=n-2;c>s;c--,u--){let d=o.node(c),f=o.index(c);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(f,d.childCount),p=r&&r[u+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[u]||d;if(!d.canReplace(f+1,d.childCount)||!m.type.validContent(h))return!1}let a=o.indexAfter(s),l=r&&r[0];return o.node(s).canReplaceWith(a,a,l?l.type:o.node(s+1).type)}function V1e(t,e,n=1,r){let o=t.doc.resolve(e),s=oe.empty,i=oe.empty;for(let a=o.depth,l=o.depth-n,c=n-1;a>l;a--,c--){s=oe.from(o.node(a).copy(s));let u=r&&r[c];i=oe.from(u?u.type.create(u.attrs,i):o.node(a).copy(i))}t.step(new $n(e,e,new we(s.append(i),n,n),!0))}function Oa(t,e){let n=t.resolve(e),r=n.index();return k7(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function k7(t,e){return!!(t&&e&&!t.isLeaf&&t.canAppend(e))}function x7(t,e,n=-1){let r=t.resolve(e);for(let o=r.depth;;o--){let s,i,a=r.index(o);if(o==r.depth?(s=r.nodeBefore,i=r.nodeAfter):n>0?(s=r.node(o+1),a++,i=r.node(o).maybeChild(a)):(s=r.node(o).maybeChild(a-1),i=r.node(o+1)),s&&!s.isTextblock&&k7(s,i)&&r.node(o).canReplace(a,a+1))return e;if(o==0)break;e=n<0?r.before(o):r.after(o)}}function U1e(t,e,n){let r=new $n(e-n,e+n,we.empty,!0);t.step(r)}function q1e(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let s=r.index(o);if(r.node(o).canReplaceWith(s,s,n))return r.before(o+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let s=r.indexAfter(o);if(r.node(o).canReplaceWith(s,s,n))return r.after(o+1);if(s<r.node(o).childCount)return null}return null}function C7(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let o=n.content;for(let s=0;s<n.openStart;s++)o=o.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let i=r.depth;i>=0;i--){let a=i==r.depth?0:r.pos<=(r.start(i+1)+r.end(i+1))/2?-1:1,l=r.index(i)+(a>0?1:0),c=r.node(i),u=!1;if(s==1)u=c.canReplace(l,l,o);else{let d=c.contentMatchAt(l).findWrapping(o.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(i+1):r.after(i+1)}return null}function NC(t,e,n=e,r=we.empty){if(e==n&&!r.size)return null;let o=t.resolve(e),s=t.resolve(n);return _7(o,s,r)?new $n(e,n,r):new W1e(o,s,r).fit()}function _7(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class W1e{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=oe.empty;for(let o=0;o<=e.depth;o++){let s=e.node(o);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=oe.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let s=this.placed,i=r.depth,a=o.depth;for(;i&&a&&s.childCount==1;)s=s.firstChild.content,i--,a--;let l=new we(s,i,a);return e>-1?new yn(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new $n(r.pos,o.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(o=0),s.type.spec.isolating&&o<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let o,s=null;r?(s=Gv(this.unplaced.content,r-1).firstChild,o=s.content):o=this.unplaced.content;let i=o.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(i?c.matchType(i.type)||(d=c.fillBefore(oe.from(i),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:d};if(n==2&&i&&(u=c.findWrapping(i.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=Gv(e,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new we(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=Gv(e,n);if(o.childCount<=1&&n>0){let s=e.size-n<=n+o.size;this.unplaced=new we($d(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new we($d(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:o,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let i=this.unplaced,a=r?r.content:i.content,l=i.openStart-e,c=0,u=[],{match:d,type:f}=this.frontier[n];if(o){for(let m=0;m<o.childCount;m++)u.push(o.child(m));d=d.matchFragment(o)}let h=a.size+e-(i.content.size-i.openEnd);for(;c<a.childCount;){let m=a.child(c),v=d.matchType(m.type);if(!v)break;c++,(c>1||l==0||m.content.size)&&(d=v,u.push(S7(m.mark(f.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?h:-1)))}let p=c==a.childCount;p||(h=-1),this.placed=Hd(this.placed,n,oe.from(u)),this.frontier[n].match=d,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,v=a;m<h;m++){let b=v.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),v=b.content}this.unplaced=p?e==0?we.empty:new we($d(i.content,e-1,1),e-1,h<0?i.openEnd:e-1):new we($d(i.content,e,c),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Jv(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:o}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),i=Jv(e,n,o,r,s);if(i){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=Jv(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:i,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Hd(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let o=e.node(r),s=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,s)}return e}openFrontierNode(e,n=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=Hd(this.placed,this.depth,oe.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(oe.empty,!0);e.childCount&&(this.placed=Hd(this.placed,this.frontier.length,e))}}function $d(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy($d(t.firstChild.content,e-1,n)))}function Hd(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Hd(t.lastChild.content,e-1,n)))}function Gv(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function S7(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,S7(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(oe.empty,!0)))),t.copy(r)}function Jv(t,e,n,r,o){let s=t.node(e),i=o?t.indexAfter(e):t.index(e);if(i==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,i);return a&&!K1e(n,s.content,i)?a:null}function K1e(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function G1e(t){return t.spec.defining||t.spec.definingForContent}function J1e(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),s=t.doc.resolve(n);if(_7(o,s,r))return t.step(new $n(e,n,r));let i=M7(o,t.doc.resolve(n));i[i.length-1]==0&&i.pop();let a=-(o.depth+1);i.unshift(a);for(let f=o.depth,h=o.pos-1;f>0;f--,h--){let p=o.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;i.indexOf(f)>-1?a=f:o.before(f)==h&&i.splice(1,0,-f)}let l=i.indexOf(a),c=[],u=r.openStart;for(let f=r.content,h=0;;h++){let p=f.firstChild;if(c.push(p),h==r.openStart)break;f=p.content}for(let f=u-1;f>=0;f--){let h=c[f].type,p=G1e(h);if(p&&o.node(l).type!=h)u=f;else if(p||!h.isTextblock)break}for(let f=r.openStart;f>=0;f--){let h=(f+u+1)%(r.openStart+1),p=c[h];if(p)for(let m=0;m<i.length;m++){let v=i[(m+l)%i.length],b=!0;v<0&&(b=!1,v=-v);let w=o.node(v-1),k=o.index(v-1);if(w.canReplaceWith(k,k,p.type,p.marks))return t.replace(o.before(v),b?s.after(v):n,new we(T7(r.content,0,r.openStart,h),h,r.openEnd))}}let d=t.steps.length;for(let f=i.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let h=i[f];h<0||(e=o.before(h),n=s.after(h))}}function T7(t,e,n,r,o){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(T7(s.content,e+1,n,r,s)))}if(e>r){let s=o.contentMatchAt(0),i=s.fillBefore(t).append(t);t=i.append(s.matchFragment(i).fillBefore(oe.empty,!0))}return t}function Y1e(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let o=q1e(t.doc,e,r.type);o!=null&&(e=n=o)}t.replaceRange(e,n,new we(oe.from(r),0,0))}function X1e(t,e,n){let r=t.doc.resolve(e),o=t.doc.resolve(n),s=M7(r,o);for(let i=0;i<s.length;i++){let a=s[i],l=i==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),o.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),o.indexAfter(a-1))))return t.delete(r.before(a),o.after(a))}for(let i=1;i<=r.depth&&i<=o.depth;i++)if(e-r.start(i)==r.depth-i&&n>r.end(i)&&o.end(i)-n!=o.depth-i)return t.delete(r.before(i),n);t.delete(e,n)}function M7(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let o=r;o>=0;o--){let s=t.start(o);if(s<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(s==e.start(o)||o==t.depth&&o==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==s-1)&&n.push(o)}return n}class Vc extends Mr{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return fn.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let o=n.type.create(r,null,n.marks);return fn.fromReplace(e,this.pos,this.pos+1,new we(oe.from(o),0,n.isLeaf?0:1))}getMap(){return to.empty}invert(e){return new Vc(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Vc(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Vc(n.pos,n.attr,n.value)}}Mr.jsonID("attr",Vc);let _u=class extends Error{};_u=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};_u.prototype=Object.create(Error.prototype);_u.prototype.constructor=_u;_u.prototype.name="TransformError";class E7{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new jc}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new _u(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=we.empty){let o=NC(this.doc,e,n,r);return o&&this.step(o),this}replaceWith(e,n,r){return this.replace(e,n,new we(oe.from(r),0,0))}delete(e,n){return this.replace(e,n,we.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return J1e(this,e,n,r),this}replaceRangeWith(e,n,r){return Y1e(this,e,n,r),this}deleteRange(e,n){return X1e(this,e,n),this}lift(e,n){return D1e(this,e,n),this}join(e,n=1){return U1e(this,e,n),this}wrap(e,n){return F1e(this,e,n),this}setBlockType(e,n=e,r,o=null){return B1e(this,e,n,r,o),this}setNodeMarkup(e,n,r=null,o){return z1e(this,e,n,r,o),this}setNodeAttribute(e,n,r){return this.step(new Vc(e,n,r)),this}addNodeMark(e,n){return this.step(new Ki(e,n)),this}removeNodeMark(e,n){if(!(n instanceof Mt)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new Cu(e,n)),this}split(e,n=1,r){return V1e(this,e,n,r),this}addMark(e,n,r){return N1e(this,e,n,r),this}removeMark(e,n,r){return L1e(this,e,n,r),this}clearIncompatible(e,n,r){return R1e(this,e,n,r),this}}const Yv=Object.create(null);class Be{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new O7(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=we.empty){let r=n.content.lastChild,o=null;for(let a=0;a<n.openEnd;a++)o=r,r=r.lastChild;let s=e.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:l,$to:c}=i[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?we.empty:n),a==0&&oE(e,s,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:i,$to:a}=o[s],l=e.mapping.slice(r),c=l.map(i.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),oE(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let o=e.parent.inlineContent?new Je(e):vc(e.node(0),e.parent,e.pos,e.index(),n,r);if(o)return o;for(let s=e.depth-1;s>=0;s--){let i=n<0?vc(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):vc(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(i)return i}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Fo(e.node(0))}static atStart(e){return vc(e,e,0,0,1)||new Fo(e)}static atEnd(e){return vc(e,e,e.content.size,e.childCount,-1)||new Fo(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Yv[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Yv)throw new RangeError("Duplicate use of selection JSON ID "+e);return Yv[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Je.between(this.$anchor,this.$head).getBookmark()}}Be.prototype.visible=!0;class O7{constructor(e,n){this.$from=e,this.$to=n}}let nE=!1;function rE(t){!nE&&!t.parent.inlineContent&&(nE=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Je extends Be{constructor(e,n=e){rE(e),rE(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Be.near(r);let o=e.resolve(n.map(this.anchor));return new Je(o.parent.inlineContent?o:r,r)}replace(e,n=we.empty){if(super.replace(e,n),n==we.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Je&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new r0(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Je(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let o=e.resolve(n);return new this(o,r==n?o:e.resolve(r))}static between(e,n,r){let o=e.pos-n.pos;if((!r||o)&&(r=o>=0?1:-1),!n.parent.inlineContent){let s=Be.findFrom(n,r,!0)||Be.findFrom(n,-r,!0);if(s)n=s.$head;else return Be.near(n,r)}return e.parent.inlineContent||(o==0?e=n:(e=(Be.findFrom(e,-r,!0)||Be.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=o<0&&(e=n))),new Je(e,n)}}Be.jsonID("text",Je);class r0{constructor(e,n){this.anchor=e,this.head=n}map(e){return new r0(e.map(this.anchor),e.map(this.head))}resolve(e){return Je.between(e.resolve(this.anchor),e.resolve(this.head))}}class He extends Be{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:o}=n.mapResult(this.anchor),s=e.resolve(o);return r?Be.near(s):new He(s)}content(){return new we(oe.from(this.node),0,0)}eq(e){return e instanceof He&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new LC(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new He(e.resolve(n.anchor))}static create(e,n){return new He(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}He.prototype.visible=!1;Be.jsonID("node",He);class LC{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new r0(r,r):new LC(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&He.isSelectable(r)?new He(n):Be.near(n)}}class Fo extends Be{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=we.empty){if(n==we.empty){e.delete(0,e.doc.content.size);let r=Be.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Fo(e)}map(e){return new Fo(e)}eq(e){return e instanceof Fo}getBookmark(){return Q1e}}Be.jsonID("all",Fo);const Q1e={map(){return this},resolve(t){return new Fo(t)}};function vc(t,e,n,r,o,s=!1){if(e.inlineContent)return Je.create(t,n);for(let i=r-(o>0?0:1);o>0?i<e.childCount:i>=0;i+=o){let a=e.child(i);if(a.isAtom){if(!s&&He.isSelectable(a))return He.create(t,n-(o<0?a.nodeSize:0))}else{let l=vc(t,a,n+o,o<0?a.childCount:0,o,s);if(l)return l}n+=a.nodeSize*o}return null}function oE(t,e,n){let r=t.steps.length-1;if(r<e)return;let o=t.steps[r];if(!(o instanceof $n||o instanceof yn))return;let s=t.mapping.maps[r],i;s.forEach((a,l,c,u)=>{i==null&&(i=u)}),t.setSelection(Be.near(t.doc.resolve(i),n))}const sE=1,Dp=2,iE=4;class Z1e extends E7{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|sE)&~Dp,this.storedMarks=null,this}get selectionSet(){return(this.updated&sE)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Dp,this}ensureMarks(e){return Mt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Dp)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Dp,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Mt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let o=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let i=this.doc.resolve(n);s=r==n?i.marks():i.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,o.text(e,s)),this.selection.empty||this.setSelection(Be.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=iE,this}get scrolledIntoView(){return(this.updated&iE)>0}}function aE(t,e){return!e||!t?t:t.bind(e)}class Fd{constructor(e,n,r){this.name=e,this.init=aE(n.init,r),this.apply=aE(n.apply,r)}}const ewe=[new Fd("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Fd("selection",{init(t,e){return t.selection||Be.atStart(e.doc)},apply(t){return t.selection}}),new Fd("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Fd("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Xv{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=ewe.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Fd(r.key,r.spec.state,r))})}}class _c{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),o=null;for(;;){let s=!1;for(let i=0;i<this.config.plugins.length;i++){let a=this.config.plugins[i];if(a.spec.appendTransaction){let l=o?o[i].n:0,c=o?o[i].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,i)){if(u.setMeta("appendedTransaction",e),!o){o=[];for(let d=0;d<this.config.plugins.length;d++)o.push(d<i?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}o&&(o[i]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new _c(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let s=r[o];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new Z1e(this)}static create(e){let n=new Xv(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new _c(n);for(let o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(e,r);return r}reconfigure(e){let n=new Xv(this.schema,e.plugins),r=n.fields,o=new _c(n);for(let s=0;s<r.length;s++){let i=r[s].name;o[i]=this.hasOwnProperty(i)?this[i]:r[s].init(e,o)}return o}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],s=o.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(o,this[o.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new Xv(e.schema,e.plugins),s=new _c(o);return o.fields.forEach(i=>{if(i.name=="doc")s.doc=kl.fromJSON(e.schema,n.doc);else if(i.name=="selection")s.selection=Be.fromJSON(s.doc,n.selection);else if(i.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==i.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[i.name]=c.fromJSON.call(l,e,n[a],s);return}}s[i.name]=i.init(e,s)}}),s}}function I7(t,e,n){for(let r in t){let o=t[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=I7(o,e,{})),n[r]=o}return n}class Kn{constructor(e){this.spec=e,this.props={},e.props&&I7(e.props,this,this.props),this.key=e.key?e.key.key:A7("plugin")}getState(e){return e[this.key]}}const Qv=Object.create(null);function A7(t){return t in Qv?t+"$"+ ++Qv[t]:(Qv[t]=0,t+"$")}class Wr{constructor(e="key"){this.key=A7(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const no=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},ih=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let lE=null;const Hs=function(t,e,n){let r=lE||(lE=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},jl=function(t,e,n,r){return n&&(cE(t,e,n,r,-1)||cE(t,e,n,r,1))},twe=/^(img|br|input|textarea|hr)$/i;function cE(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:rs(t))){let s=t.parentNode;if(!s||s.nodeType!=1||rwe(t)||twe.test(t.nodeName)||t.contentEditable=="false")return!1;e=no(t)+(o<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(o<0?-1:0)],t.contentEditable=="false")return!1;e=o<0?rs(t):0}else return!1}}function rs(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function nwe(t,e,n){for(let r=e==0,o=e==rs(t);r||o;){if(t==n)return!0;let s=no(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,o=o&&s==rs(t)}}function rwe(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const o0=function(t){return t.focusNode&&jl(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Za(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function owe(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function swe(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:r.startOffset}}}const ks=typeof navigator<"u"?navigator:null,uE=typeof document<"u"?document:null,Ia=ks&&ks.userAgent||"",$w=/Edge\/(\d+)/.exec(Ia),N7=/MSIE \d/.exec(Ia),Hw=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ia),wr=!!(N7||Hw||$w),sa=N7?document.documentMode:Hw?+Hw[1]:$w?+$w[1]:0,Vo=!wr&&/gecko\/(\d+)/i.test(Ia);Vo&&+(/Firefox\/(\d+)/.exec(Ia)||[0,0])[1];const Fw=!wr&&/Chrome\/(\d+)/.exec(Ia),Bn=!!Fw,iwe=Fw?+Fw[1]:0,ir=!wr&&!!ks&&/Apple Computer/.test(ks.vendor),Su=ir&&(/Mobile\/\w+/.test(Ia)||!!ks&&ks.maxTouchPoints>2),Yr=Su||(ks?/Mac/.test(ks.platform):!1),awe=ks?/Win/.test(ks.platform):!1,Lo=/Android \d/.test(Ia),s0=!!uE&&"webkitFontSmoothing"in uE.documentElement.style,lwe=s0?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function cwe(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function wi(t,e){return typeof t=="number"?t:t[e]}function uwe(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function dE(t,e,n){let r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let i=n||t.dom;i;i=ih(i)){if(i.nodeType!=1)continue;let a=i,l=a==s.body,c=l?cwe(s):uwe(a),u=0,d=0;if(e.top<c.top+wi(r,"top")?d=-(c.top-e.top+wi(o,"top")):e.bottom>c.bottom-wi(r,"bottom")&&(d=e.bottom-c.bottom+wi(o,"bottom")),e.left<c.left+wi(r,"left")?u=-(c.left-e.left+wi(o,"left")):e.right>c.right-wi(r,"right")&&(u=e.right-c.right+wi(o,"right")),u||d)if(l)s.defaultView.scrollBy(u,d);else{let f=a.scrollLeft,h=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let p=a.scrollLeft-f,m=a.scrollTop-h;e={left:e.left-p,top:e.top-m,right:e.right-p,bottom:e.bottom-m}}if(l)break}}function dwe(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,o;for(let s=(e.left+e.right)/2,i=n+1;i<Math.min(innerHeight,e.bottom);i+=5){let a=t.root.elementFromPoint(s,i);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,o=l.top;break}}return{refDOM:r,refTop:o,stack:L7(t.dom)}}function L7(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=ih(r));return e}function fwe({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;R7(n,r==0?0:r-e)}function R7(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:o,left:s}=t[n];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let oc=null;function hwe(t){if(t.setActive)return t.setActive();if(oc)return t.focus(oc);let e=L7(t);t.focus(oc==null?{get preventScroll(){return oc={preventScroll:!0},!0}}:void 0),oc||(oc=!1,R7(e,0))}function P7(t,e){let n,r=2e8,o,s=0,i=e.top,a=e.top,l,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=Hs(u).getClientRects();else continue;for(let h=0;h<f.length;h++){let p=f[h];if(p.top<=i&&p.bottom>=a){i=Math.max(p.bottom,i),a=Math.min(p.top,a);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<r){n=u,r=m,o=m&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&m&&(s=d+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=d+1)}}return!n&&l&&(n=l,o=c,r=0),n&&n.nodeType==3?pwe(n,o):!n||r&&n.nodeType==1?{node:t,offset:s}:P7(n,o)}function pwe(t,e){let n=t.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let s=Si(r,1);if(s.top!=s.bottom&&RC(e,s))return{node:t,offset:o+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function RC(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function mwe(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function gwe(t,e,n){let{node:r,offset:o}=P7(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let i=r.getBoundingClientRect();s=i.left!=i.right&&n.left>(i.left+i.right)/2?1:-1}return t.docView.posFromDOM(r,o,s)}function ywe(t,e,n,r){let o=-1;for(let s=e,i=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent&&!i||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&!i&&(i=!0,l.left>r.left||l.top>r.top?o=a.posBefore:(l.right<r.left||l.bottom<r.top)&&(o=a.posAfter)),!a.contentDOM&&o<0)return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}s=a.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n,-1)}function D7(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=o;;){let i=t.childNodes[s];if(i.nodeType==1){let a=i.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(RC(e,c))return D7(i,e,c)}}if((s=(s+1)%r)==o)break}return t}function vwe(t,e){let n=t.dom.ownerDocument,r,o=0,s=swe(n,e.left,e.top);s&&({node:r,offset:o}=s);let i=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!i||!t.dom.contains(i.nodeType!=1?i.parentNode:i)){let c=t.dom.getBoundingClientRect();if(!RC(e,c)||(i=D7(t.dom,e,c),!i))return null}if(ir)for(let c=i;r&&c;c=ih(c))c.draggable&&(r=void 0);if(i=mwe(i,e),r){if(Vo&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let c=r.childNodes[o],u;c.nodeName=="IMG"&&(u=c.getBoundingClientRect()).right<=e.left&&u.bottom>e.top&&o++}r==t.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(a=ywe(t,r,o,e))}a==null&&(a=gwe(t,i,e));let l=t.docView.nearestDesc(i,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function fE(t){return t.top<t.bottom||t.left<t.right}function Si(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(fE(r))return r}return Array.prototype.find.call(n,fE)||t.getBoundingClientRect()}const bwe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function $7(t,e,n){let{node:r,offset:o,atom:s}=t.docView.domFromPos(e,n<0?-1:1),i=s0||Vo;if(r.nodeType==3)if(i&&(bwe.test(r.nodeValue)||(n<0?!o:o==r.nodeValue.length))){let a=Si(Hs(r,o,o),n);if(Vo&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let l=Si(Hs(r,o-1,o-1),-1);if(l.top==a.top){let c=Si(Hs(r,o,o+1),-1);if(c.top!=a.top)return pd(c,c.left<l.left)}}return a}else{let a=o,l=o,c=n<0?1:-1;return n<0&&!o?(l++,c=-1):n>=0&&o==r.nodeValue.length?(a--,c=1):n<0?a--:l++,pd(Si(Hs(r,a,l),c),c<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&o&&(n<0||o==rs(r))){let a=r.childNodes[o-1];if(a.nodeType==1)return Zv(a.getBoundingClientRect(),!1)}if(s==null&&o<rs(r)){let a=r.childNodes[o];if(a.nodeType==1)return Zv(a.getBoundingClientRect(),!0)}return Zv(r.getBoundingClientRect(),n>=0)}if(s==null&&o&&(n<0||o==rs(r))){let a=r.childNodes[o-1],l=a.nodeType==3?Hs(a,rs(a)-(i?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(l)return pd(Si(l,1),!1)}if(s==null&&o<rs(r)){let a=r.childNodes[o];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let l=a?a.nodeType==3?Hs(a,0,i?0:1):a.nodeType==1?a:null:null;if(l)return pd(Si(l,-1),!0)}return pd(Si(r.nodeType==3?Hs(r):r,-n),n>=0)}function pd(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Zv(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function H7(t,e,n){let r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}function wwe(t,e,n){let r=e.selection,o=n=="up"?r.$from:r.$to;return H7(t,e,()=>{let{node:s}=t.docView.domFromPos(o.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let i=$7(t,o.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Hs(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?i.top-u.top>(u.bottom-i.top)*2:u.bottom-i.bottom>(i.bottom-u.top)*2))return!1}}return!0})}const kwe=/[\u0590-\u08ac]/;function xwe(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,s=!o,i=o==r.parent.content.size,a=t.domSelection();return!kwe.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:i:H7(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:m}=t.domSelectionRange(),v=p&&!h.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==m;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),v})}let hE=null,pE=null,mE=!1;function Cwe(t,e,n){return hE==e&&pE==n?mE:(hE=e,pE=n,mE=n=="up"||n=="down"?wwe(t,e,n):xwe(t,e,n))}const ho=0,gE=1,ol=2,xs=3;class Yh{constructor(e,n,r,o){this.parent=e,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=ho,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let o=this.children[n];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,i;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((i=s.pmViewDesc)&&i.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(i)+i.size:this.posAtStart}else{let s,i;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((i=s.pmViewDesc)&&i.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(i):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=n>no(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!1;break}if(s.previousSibling)break}if(o==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!0;break}if(s.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,o=e;o;o=o.parentNode){let s=this.getDesc(o),i;if(s&&(!n||s.node))if(r&&(i=s.nodeDOM)&&!(i.nodeType==1?i.contains(e.nodeType==1?e:e.parentNode):i==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let o=e;o;o=o.parentNode){let s=this.getDesc(o);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],s=r+o.size;if(r==e&&s!=r){for(;!o.border&&o.children.length;)o=o.children[0];return o}if(e<s)return o.descAt(e-r-o.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let s=0;r<this.children.length;r++){let i=this.children[r],a=s+i.size;if(a>e||i instanceof B7){o=e-s;break}s=a}if(o)return this.children[r].domFromPos(o-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof F7&&s.side>=0;r--);if(n<=0){let s,i=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,i=!1);return s&&n&&i&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?no(s.dom)+1:0}}else{let s,i=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,i=!1);return s&&i&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?no(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,s=-1;for(let i=r,a=0;;a++){let l=this.children[a],c=i+l.size;if(o==-1&&e<=c){let u=i+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=i;for(let d=a;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){o=no(f.dom)+1;break}e-=f.size}o==-1&&(o=0)}if(o>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=no(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:e,to:n,fromOffset:o,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,o=!1){let s=Math.min(e,n),i=Math.max(e,n);for(let f=0,h=0;f<this.children.length;f++){let p=this.children[f],m=h+p.size;if(s>h&&i<m)return p.setSelection(e-h-p.border,n-h-p.border,r,o);h=m}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.getSelection(),u=!1;if((Vo||ir)&&e==n){let{node:f,offset:h}=a;if(f.nodeType==3)u=!!(h&&f.nodeValue[h-1]==`
`);else{let p=f.childNodes[h-1];u=p&&(p.nodeName=="BR"||p.contentEditable=="false")}}if(Vo&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let f=c.focusNode.childNodes[c.focusOffset];f&&f.contentEditable=="false"&&(o=!0)}if(!(o||u&&ir)&&jl(a.node,a.offset,c.anchorNode,c.anchorOffset)&&jl(l.node,l.offset,c.focusNode,c.focusOffset))return;let d=!1;if((c.extend||e==n)&&!u){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),d=!0}catch{}}if(!d){if(e>n){let h=a;a=l,l=h}let f=document.createRange();f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,o=0;o<this.children.length;o++){let s=this.children[o],i=r+s.size;if(r==i?e<=i&&n>=r:e<i&&n>r){let a=r+s.border,l=i-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==i?ol:gE,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=xs:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?ol:xs}r=i}this.dirty=ol}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?ol:gE;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class F7 extends Yh{constructor(e,n,r,o){let s,i=n.type.toDOM;if(typeof i=="function"&&(i=i(r,()=>{if(!s)return o;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(i.nodeType!=1){let a=document.createElement("span");a.appendChild(i),i=a}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(e,[],i,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==ho&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class _we extends Yh{constructor(e,n,r,o){super(e,[],n,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class zl extends Yh{constructor(e,n,r,o){super(e,[],r,o),this.mark=n}static create(e,n,r,o){let s=o.nodeViews[n.type.name],i=s&&s(n,o,r);return(!i||!i.dom)&&(i=as.renderSpec(document,n.type.spec.toDOM(n,r))),new zl(e,n,i.dom,i.contentDOM||i.dom)}parseRule(){return this.dirty&xs||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(e){return this.dirty!=xs&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=ho){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=ho}}slice(e,n,r){let o=zl.create(this.parent,this.mark,!0,r),s=this.children,i=this.size;n<i&&(s=zw(s,n,i,r)),e>0&&(s=zw(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=o;return o.children=s,o}}class ia extends Yh{constructor(e,n,r,o,s,i,a,l,c){super(e,[],s,i),this.node=n,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=a}static create(e,n,r,o,s,i){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return i;if(l.parent)return l.parent.posBeforeChild(l)},r,o),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=as.renderSpec(document,n.type.spec.toDOM(n)));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let f=u;return u=V7(u,r,n),c?l=new Swe(e,n,r,o,u,d||null,f,c,s,i+1):n.isText?new i0(e,n,r,o,u,f,s):new ia(e,n,r,o,u,d||null,f,s,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>oe.empty)}return e}matchesNode(e,n,r){return this.dirty==ho&&e.eq(this.node)&&jw(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,o=n,s=e.composing?this.localCompositionInfo(e,n):null,i=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new Mwe(this,i&&i.node,e);Iwe(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?Mt.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,o)},(c,u,d,f)=>{l.syncToMarks(c.marks,r,e);let h;l.findNodeMatch(c,u,d,f)||a&&e.state.selection.from>o&&e.state.selection.to<o+c.nodeSize&&(h=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,d,h,e)||l.updateNextNode(c,u,d,e,f,o)||l.addNode(c,u,d,e,o),o+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==ol)&&(i&&this.protectLocalComposition(e,i),j7(this.contentDOM,this.children,e),Su&&Awe(this.dom))}localCompositionInfo(e,n){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof Je)||r<n||o>n+this.node.content.size)return null;let s=e.domSelectionRange(),i=Nwe(s.focusNode,s.focusOffset);if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let a=i.nodeValue,l=Lwe(this.node.content,a,r-n,o-n);return l<0?null:{node:i,pos:l,text:a}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:o}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let i=new _we(this,s,n,o);e.input.compositionNodes.push(i),this.children=zw(this.children,r,r+o.length,e,i)}update(e,n,r,o){return this.dirty==xs||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,o),!0)}updateInner(e,n,r,o){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=ho}updateOuterDeco(e){if(jw(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=z7(this.dom,this.nodeDOM,Bw(this.outerDeco,this.node,n),Bw(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function yE(t,e,n,r,o){V7(r,e,t);let s=new ia(void 0,t,e,n,r,r,r,o,0);return s.contentDOM&&s.updateChildren(o,0),s}class i0 extends ia{constructor(e,n,r,o,s,i,a){super(e,n,r,o,s,null,i,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,o){return this.dirty==xs||this.dirty!=ho&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=ho||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=ho,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let o=this.node.cut(e,n),s=document.createTextNode(o.text);return new i0(this.parent,o,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=xs)}get domAtom(){return!1}}class B7 extends Yh{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ho&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Swe extends ia{constructor(e,n,r,o,s,i,a,l,c,u){super(e,n,r,o,s,i,a,c,u),this.spec=l}update(e,n,r,o){if(this.dirty==xs)return!1;if(this.spec.update){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,o),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r):super.setSelection(e,n,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function j7(t,e,n){let r=t.firstChild,o=!1;for(let s=0;s<e.length;s++){let i=e[s],a=i.dom;if(a.parentNode==t){for(;a!=r;)r=vE(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(a,r);if(i instanceof zl){let l=r?r.previousSibling:t.lastChild;j7(i.contentDOM,i.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=vE(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}const kf=function(t){t&&(this.nodeName=t)};kf.prototype=Object.create(null);const sl=[new kf];function Bw(t,e,n){if(t.length==0)return sl;let r=n?sl[0]:new kf,o=[r];for(let s=0;s<t.length;s++){let i=t[s].type.attrs;if(i){i.nodeName&&o.push(r=new kf(i.nodeName));for(let a in i){let l=i[a];l!=null&&(n&&o.length==1&&o.push(r=new kf(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return o}function z7(t,e,n,r){if(n==sl&&r==sl)return e;let o=e;for(let s=0;s<r.length;s++){let i=r[s],a=n[s];if(s){let l;a&&a.nodeName==i.nodeName&&o!=t&&(l=o.parentNode)&&l.nodeName.toLowerCase()==i.nodeName||(l=document.createElement(i.nodeName),l.pmIsDeco=!0,l.appendChild(o),a=sl[0]),o=l}Twe(o,a||sl[0],i)}return o}function Twe(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)o.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<o.length;s++)r.indexOf(o[s])==-1&&t.classList.add(o[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)t.style.removeProperty(o[1])}n.style&&(t.style.cssText+=n.style)}}function V7(t,e,n){return z7(t,t,sl,Bw(e,n,t.nodeType!=1))}function jw(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function vE(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Mwe{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Ewe(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let o=0,s=this.stack.length>>1,i=Math.min(s,e.length);for(;o<i&&(o==s-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<s;)this.destroyRest(),this.top.dirty=ho,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=zl.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,o){let s=-1,i;if(o>=this.preMatch.index&&(i=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&i.matchesNode(e,n,r))s=this.top.children.indexOf(i,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,o,s){let i=this.top.children[o];return i.dirty==xs&&i.dom==i.contentDOM&&(i.dirty=ol),i.update(e,n,r,s)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=n}}updateNextNode(e,n,r,o,s,i){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof ia){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,d,f=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=xs&&jw(n,l.outerDeco));if(!f&&l.update(e,n,r,o))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(l,e,n,r,o,i)))return this.top.children[this.index]=d,d.dirty=ol,d.updateChildren(o,i+1),d.dirty=ho,this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,o,s,i){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content))return null;let a=ia.create(this.top,n,r,o,s,i);if(!a.contentDOM)return null;a.children=e.children,e.children=[],e.destroy();for(let l of a.children)l.parent=a;return a}addNode(e,n,r,o,s){let i=ia.create(this.top,e,n,r,o,s);i.contentDOM&&i.updateChildren(o,s+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(e,n,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let s=new F7(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof zl;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof i0)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((ir||Bn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new B7(this.top,[],r,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function Ewe(t,e){let n=e,r=n.children.length,o=t.childCount,s=new Map,i=[];e:for(;o>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof zl)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(o-1))break;--o,s.set(a,o),i.push(a)}}return{index:o,matched:s,matches:i.reverse()}}function Owe(t,e){return t.type.side-e.type.side}function Iwe(t,e,n,r){let o=e.locals(t),s=0;if(o.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,o,e.forChild(s,u),c),s+=u.nodeSize}return}let i=0,a=[],l=null;for(let c=0;;){if(i<o.length&&o[i].to==s){let p=o[i++],m;for(;i<o.length&&o[i].to==s;)(m||(m=[p])).push(o[i++]);if(m){m.sort(Owe);for(let v=0;v<m.length;v++)n(m[v],c,!!l)}else n(p,c,!!l)}let u,d;if(l)d=-1,u=l,l=null;else if(c<t.childCount)d=c,u=t.child(c++);else break;for(let p=0;p<a.length;p++)a[p].to<=s&&a.splice(p--,1);for(;i<o.length&&o[i].from<=s&&o[i].to>s;)a.push(o[i++]);let f=s+u.nodeSize;if(u.isText){let p=f;i<o.length&&o[i].from<p&&(p=o[i].from);for(let m=0;m<a.length;m++)a[m].to<p&&(p=a[m].to);p<f&&(l=u.cut(p-s),u=u.cut(0,p-s),f=p,d=-1)}let h=u.isInline&&!u.isLeaf?a.filter(p=>!p.inline):a.slice();r(u,h,e.forChild(s,u),d),s=f}}function Awe(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function Nwe(t,e){for(;;){if(t.nodeType==3)return t;if(t.nodeType==1&&e>0){if(t.childNodes.length>e&&t.childNodes[e].nodeType==3)return t.childNodes[e];t=t.childNodes[e-1],e=rs(t)}else if(t.nodeType==1&&e<t.childNodes.length)t=t.childNodes[e],e=0;else return null}}function Lwe(t,e,n,r){for(let o=0,s=0;o<t.childCount&&s<=r;){let i=t.child(o++),a=s;if(s+=i.nodeSize,!i.isText)continue;let l=i.text;for(;o<t.childCount;){let c=t.child(o++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function zw(t,e,n,r,o){let s=[];for(let i=0,a=0;i<t.length;i++){let l=t[i],c=a,u=a+=l.size;c>=n||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),o&&(s.push(o),o=void 0),u>n&&s.push(l.slice(n-c,l.size,r)))}return s}function PC(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let o=t.docView.nearestDesc(n.focusNode),s=o&&o.size==0,i=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(i<0)return null;let a=r.resolve(i),l,c;if(o0(n)){for(l=a;o&&!o.node;)o=o.parent;let u=o.node;if(o&&u.isAtom&&He.isSelectable(u)&&o.parent&&!(u.isInline&&nwe(n.focusNode,n.focusOffset,o.dom))){let d=o.posBefore;c=new He(i==d?a:r.resolve(d))}}else{let u=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null;l=r.resolve(u)}if(!c){let u=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=DC(t,l,a,u)}return c}function U7(t){return t.editable?t.hasFocus():W7(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Qs(t,e=!1){let n=t.state.selection;if(q7(t,n),!!U7(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Bn){let r=t.domSelectionRange(),o=t.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&jl(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)Pwe(t);else{let{anchor:r,head:o}=n,s,i;bE&&!(n instanceof Je)&&(n.$from.parent.inlineContent||(s=wE(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(i=wE(t,n.to))),t.docView.setSelection(r,o,t.root,e),bE&&(s&&kE(s),i&&kE(i)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Rwe(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const bE=ir||Bn&&iwe<63;function wE(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),o=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(ir&&o&&o.contentEditable=="false")return eb(o);if((!o||o.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(o)return eb(o);if(s)return eb(s)}}function eb(t){return t.contentEditable="true",ir&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function kE(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function Rwe(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=o)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!U7(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function Pwe(t){let e=t.domSelection(),n=document.createRange(),r=t.cursorWrapper.dom,o=r.nodeName=="IMG";o?n.setEnd(r.parentNode,no(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&wr&&sa<=11&&(r.disabled=!0,r.disabled=!1)}function q7(t,e){if(e instanceof He){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(xE(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else xE(t)}function xE(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function DC(t,e,n,r){return t.someProp("createSelectionBetween",o=>o(t,e,n))||Je.between(e,n,r)}function CE(t){return t.editable&&!t.hasFocus()?!1:W7(t)}function W7(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function Dwe(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return jl(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Vw(t,e){let{$anchor:n,$head:r}=t.selection,o=e>0?n.max(r):n.min(r),s=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return s&&Be.findFrom(s,e)}function el(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function _E(t,e,n){let r=t.state.selection;if(r instanceof Je){if(!r.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"forward":"backward")){let o=Vw(t.state,e);return o&&o instanceof He?el(t,o):!1}else if(!(Yr&&n.indexOf("m")>-1)){let o=r.$head,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,i;if(!s||s.isText)return!1;let a=e<0?o.pos-s.nodeSize:o.pos;return s.isAtom||(i=t.docView.descAt(a))&&!i.contentDOM?He.isSelectable(s)?el(t,new He(e<0?t.state.doc.resolve(o.pos-s.nodeSize):o)):s0?el(t,new Je(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else{if(r instanceof He&&r.node.isInline)return el(t,new Je(e>0?r.$to:r.$from));{let o=Vw(t.state,e);return o?el(t,o):!1}}}function Gg(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function xf(t){let e=t.pmViewDesc;return e&&e.size==0&&(t.nextSibling||t.nodeName!="BR")}function md(t,e){return e<0?$we(t):K7(t)}function $we(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o,s,i=!1;for(Vo&&n.nodeType==1&&r<Gg(n)&&xf(n.childNodes[r])&&(i=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(xf(a))o=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(G7(n))break;{let a=n.previousSibling;for(;a&&xf(a);)o=n.parentNode,s=no(a),a=a.previousSibling;if(a)n=a,r=Gg(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}i?Uw(t,n,r):o&&Uw(t,o,s)}function K7(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o=Gg(n),s,i;for(;;)if(r<o){if(n.nodeType!=1)break;let a=n.childNodes[r];if(xf(a))s=n,i=++r;else break}else{if(G7(n))break;{let a=n.nextSibling;for(;a&&xf(a);)s=a.parentNode,i=no(a)+1,a=a.nextSibling;if(a)n=a,r=0,o=Gg(n);else{if(n=n.parentNode,n==t.dom)break;r=o=0}}}s&&Uw(t,s,i)}function G7(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Uw(t,e,n){let r=t.domSelection();if(o0(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:o}=t;setTimeout(()=>{t.state==o&&Qs(t)},50)}function SE(t,e){let n=t.state.doc.resolve(e);if(!(Bn||awe)&&n.parent.inlineContent){let r=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),s=(o.top+o.bottom)/2;if(s>r.top&&s<r.bottom&&Math.abs(o.left-r.left)>1)return o.left<r.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),s=(o.top+o.bottom)/2;if(s>r.top&&s<r.bottom&&Math.abs(o.left-r.left)>1)return o.left>r.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function TE(t,e,n){let r=t.state.selection;if(r instanceof Je&&!r.empty||n.indexOf("s")>-1||Yr&&n.indexOf("m")>-1)return!1;let{$from:o,$to:s}=r;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let i=Vw(t.state,e);if(i&&i instanceof He)return el(t,i)}if(!o.parent.inlineContent){let i=e<0?o:s,a=r instanceof Fo?Be.near(i,e):Be.findFrom(i,e);return a?el(t,a):!1}return!1}function ME(t,e){if(!(t.state.selection instanceof Je))return!0;let{$head:n,$anchor:r,empty:o}=t.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let i=t.state.tr;return e<0?i.delete(n.pos-s.nodeSize,n.pos):i.delete(n.pos,n.pos+s.nodeSize),t.dispatch(i),!0}return!1}function EE(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function Hwe(t){if(!ir||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;EE(t,r,"true"),setTimeout(()=>EE(t,r,"false"),20)}return!1}function Fwe(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function Bwe(t,e){let n=e.keyCode,r=Fwe(e);if(n==8||Yr&&n==72&&r=="c")return ME(t,-1)||md(t,-1);if(n==46||Yr&&n==68&&r=="c")return ME(t,1)||md(t,1);if(n==13||n==27)return!0;if(n==37||Yr&&n==66&&r=="c"){let o=n==37?SE(t,t.state.selection.from)=="ltr"?-1:1:-1;return _E(t,o,r)||md(t,o)}else if(n==39||Yr&&n==70&&r=="c"){let o=n==39?SE(t,t.state.selection.from)=="ltr"?1:-1:1;return _E(t,o,r)||md(t,o)}else{if(n==38||Yr&&n==80&&r=="c")return TE(t,-1,r)||md(t,-1);if(n==40||Yr&&n==78&&r=="c")return Hwe(t)||TE(t,1,r)||K7(t);if(r==(Yr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function J7(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:o,openEnd:s}=e;for(;o>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,s--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let i=t.someProp("clipboardSerializer")||as.fromSchema(t.state.schema),a=tR(),l=a.createElement("div");l.appendChild(i.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=eR[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let p=a.createElement(u[h]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${o} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f}}function Y7(t,e,n,r,o){let s=o.parent.type.spec.code,i,a;if(!n&&!e)return null;let l=e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,s||r,t)}),s)return e?new we(oe.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):we.empty;let d=t.someProp("clipboardTextParser",f=>f(e,o,r,t));if(d)a=d;else{let f=o.marks(),{schema:h}=t.state,p=as.fromSchema(h);i=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let v=i.appendChild(document.createElement("p"));m&&v.appendChild(p.serializeNode(h.text(m,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),i=Vwe(n),s0&&Uwe(i);let c=i&&i.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=i.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;i=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||xu.fromSchema(t.state.schema)).parseSlice(i,{preserveWhitespace:!!(l||u),context:o,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!jwe.test(d.parentNode.nodeName)?{ignore:!0}:null}})),u)a=qwe(OE(a,+u[1],+u[2]),u[4]);else if(a=we.maxOpen(zwe(a.content,o),!0),a.openStart||a.openEnd){let d=0,f=0;for(let h=a.content.firstChild;d<a.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=a.content.lastChild;f<a.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);a=OE(a,d,f)}return t.someProp("transformPasted",d=>{a=d(a,t)}),a}const jwe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function zwe(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.index(n)),o,s=[];if(t.forEach(i=>{if(!s)return;let a=r.findWrapping(i.type),l;if(!a)return s=null;if(l=s.length&&o.length&&Q7(a,o,i,s[s.length-1],0))s[s.length-1]=l;else{s.length&&(s[s.length-1]=Z7(s[s.length-1],o.length));let c=X7(i,a);s.push(c),r=r.matchType(c.type),o=a}}),s)return oe.from(s)}return t}function X7(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,oe.from(t));return t}function Q7(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){let s=Q7(t,e,n,r.lastChild,o+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(oe.from(X7(n,t,o+1))))}}function Z7(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,Z7(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(oe.empty,!0);return t.copy(n.append(r))}function qw(t,e,n,r,o,s){let i=e<0?t.firstChild:t.lastChild,a=i.content;return t.childCount>1&&(s=0),o<r-1&&(a=qw(a,e,n,r,o+1,s)),o>=n&&(a=e<0?i.contentMatchAt(0).fillBefore(a,s<=o).append(a):a.append(i.contentMatchAt(i.childCount).fillBefore(oe.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,i.copy(a))}function OE(t,e,n){return e<t.openStart&&(t=new we(qw(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new we(qw(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const eR={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let IE=null;function tR(){return IE||(IE=document.implementation.createHTMLDocument("title"))}function Vwe(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=tR().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),o;if((o=r&&eR[r[1].toLowerCase()])&&(t=o.map(s=>"<"+s+">").join("")+t+o.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=t,o)for(let s=0;s<o.length;s++)n=n.querySelector(o[s])||n;return n}function Uwe(t){let e=t.querySelectorAll(Bn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function qwe(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:o,openStart:s,openEnd:i}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;o=oe.from(l.create(r[a+1],o)),s++,i++}return new we(o,s,i)}const ar={},lr={},Wwe={touchstart:!0,touchmove:!0};class Kwe{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Gwe(t){for(let e in ar){let n=ar[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{Ywe(t,r)&&!$C(t,r)&&(t.editable||!(r.type in lr))&&n(t,r)},Wwe[e]?{passive:!0}:void 0)}ir&&t.dom.addEventListener("input",()=>null),Ww(t)}function Gi(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Jwe(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Ww(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>$C(t,r))})}function $C(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function Ywe(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Xwe(t,e){!$C(t,e)&&ar[e.type]&&(t.editable||!(e.type in lr))&&ar[e.type](t,e)}lr.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!rR(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Lo&&Bn&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Su&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",o=>o(t,Za(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||Bwe(t,n)?n.preventDefault():Gi(t,"key")};lr.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};lr.keypress=(t,e)=>{let n=e;if(rR(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Yr&&n.metaKey)return;if(t.someProp("handleKeyPress",o=>o(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Je)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(n.charCode);!/[\r\n]/.test(o)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,o))&&t.dispatch(t.state.tr.insertText(o).scrollIntoView()),n.preventDefault()}};function a0(t){return{left:t.clientX,top:t.clientY}}function Qwe(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function HC(t,e,n,r,o){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let i=s.depth+1;i>0;i--)if(t.someProp(e,a=>i>s.depth?a(t,n,s.nodeAfter,s.before(i),o,!0):a(t,n,s.node(i),s.before(i),o,!1)))return!0;return!1}function Uc(t,e,n){t.focused||t.focus();let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function Zwe(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&He.isSelectable(r)?(Uc(t,new He(n)),!0):!1}function eke(t,e){if(e==-1)return!1;let n=t.state.selection,r,o;n instanceof He&&(r=n.node);let s=t.state.doc.resolve(e);for(let i=s.depth+1;i>0;i--){let a=i>s.depth?s.nodeAfter:s.node(i);if(He.isSelectable(a)){r&&n.$from.depth>0&&i>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?o=s.before(n.$from.depth):o=s.before(i);break}}return o!=null?(Uc(t,He.create(t.state.doc,o)),!0):!1}function tke(t,e,n,r,o){return HC(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(o?eke(t,n):Zwe(t,n))}function nke(t,e,n,r){return HC(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",o=>o(t,e,r))}function rke(t,e,n,r){return HC(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",o=>o(t,e,r))||oke(t,n,r)}function oke(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Uc(t,Je.create(r,0,r.content.size)),!0):!1;let o=r.resolve(e);for(let s=o.depth+1;s>0;s--){let i=s>o.depth?o.nodeAfter:o.node(s),a=o.before(s);if(i.inlineContent)Uc(t,Je.create(r,a+1,a+1+i.content.size));else if(He.isSelectable(i))Uc(t,He.create(r,a));else continue;return!0}}function FC(t){return Jg(t)}const nR=Yr?"metaKey":"ctrlKey";ar.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=FC(t),o=Date.now(),s="singleClick";o-t.input.lastClick.time<500&&Qwe(n,t.input.lastClick)&&!n[nR]&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:s};let i=t.posAtCoords(a0(n));i&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new ske(t,i,n,!!r)):(s=="doubleClick"?nke:rke)(t,i.pos,i.inside,n)?n.preventDefault():Gi(t,"pointer"))};class ske{constructor(e,n,r,o){this.view=e,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[nR],this.allowDefault=r.shiftKey;let s,i;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),i=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,i=u.depth?u.before():0}const a=o?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof He&&c.from<=i&&c.to>i)&&(this.mightDrag={node:s,pos:i,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Vo&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Gi(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Qs(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(a0(e))),this.updateAllowDefault(e),this.allowDefault||!n?Gi(this.view,"pointer"):tke(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||ir&&this.mightDrag&&!this.mightDrag.node.isAtom||Bn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Uc(this.view,Be.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Gi(this.view,"pointer")}move(e){this.updateAllowDefault(e),Gi(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}ar.touchstart=t=>{t.input.lastTouch=Date.now(),FC(t),Gi(t,"pointer")};ar.touchmove=t=>{t.input.lastTouch=Date.now(),Gi(t,"pointer")};ar.contextmenu=t=>FC(t);function rR(t,e){return t.composing?!0:ir&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const ike=Lo?5e3:-1;lr.compositionstart=lr.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Jg(t,!0),t.markCursor=null;else if(Jg(t),Vo&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let o=r.focusNode,s=r.focusOffset;o&&o.nodeType==1&&s!=0;){let i=s<0?o.lastChild:o.childNodes[s-1];if(!i)break;if(i.nodeType==3){t.domSelection().collapse(i,i.nodeValue.length);break}else o=i,s=-1}}t.input.composing=!0}oR(t,ike)};lr.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionID++,oR(t,20))};function oR(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Jg(t),e))}function sR(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=ake());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function ake(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Jg(t,e=!1){if(!(Lo&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),sR(t),e||t.docView&&t.docView.dirty){let n=PC(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}}function lke(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Tu=wr&&sa<15||Su&&lwe<604;ar.copy=lr.cut=(t,e)=>{let n=e,r=t.state.selection,o=n.type=="cut";if(r.empty)return;let s=Tu?null:n.clipboardData,i=r.content(),{dom:a,text:l}=J7(t,i);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):lke(t,a),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function cke(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function uke(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?ah(t,r.value,null,t.input.shiftKey,e):ah(t,r.textContent,r.innerHTML,t.input.shiftKey,e)},50)}function ah(t,e,n,r,o){let s=Y7(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,o,s||we.empty)))return!0;if(!s)return!1;let i=cke(s),a=i?t.state.tr.replaceSelectionWith(i,t.input.shiftKey):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}lr.paste=(t,e)=>{let n=e;if(t.composing&&!Lo)return;let r=Tu?null:n.clipboardData;r&&ah(t,r.getData("text/plain"),r.getData("text/html"),t.input.shiftKey,n)?n.preventDefault():uke(t,n)};class dke{constructor(e,n){this.slice=e,this.move=n}}const iR=Yr?"altKey":"ctrlKey";ar.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=t.state.selection,s=o.empty?null:t.posAtCoords(a0(n));if(!(s&&s.pos>=o.from&&s.pos<=(o instanceof He?o.to-1:o.to))){if(r&&r.mightDrag)t.dispatch(t.state.tr.setSelection(He.create(t.state.doc,r.mightDrag.pos)));else if(n.target&&n.target.nodeType==1){let c=t.docView.nearestDesc(n.target,!0);c&&c.node.type.spec.draggable&&c!=t.docView&&t.dispatch(t.state.tr.setSelection(He.create(t.state.doc,c.posBefore)))}}let i=t.state.selection.content(),{dom:a,text:l}=J7(t,i);n.dataTransfer.clearData(),n.dataTransfer.setData(Tu?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",Tu||n.dataTransfer.setData("text/plain",l),t.dragging=new dke(i,!n[iR])};ar.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};lr.dragover=lr.dragenter=(t,e)=>e.preventDefault();lr.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let o=t.posAtCoords(a0(n));if(!o)return;let s=t.state.doc.resolve(o.pos),i=r&&r.slice;i?t.someProp("transformPasted",p=>{i=p(i,t)}):i=Y7(t,n.dataTransfer.getData(Tu?"Text":"text/plain"),Tu?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&!n[iR]);if(t.someProp("handleDrop",p=>p(t,n,i||we.empty,a))){n.preventDefault();return}if(!i)return;n.preventDefault();let l=i?C7(t.state.doc,s.pos,i):s.pos;l==null&&(l=s.pos);let c=t.state.tr;a&&c.deleteSelection();let u=c.mapping.map(l),d=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,f=c.doc;if(d?c.replaceRangeWith(u,u,i.content.firstChild):c.replaceRange(u,u,i),c.doc.eq(f))return;let h=c.doc.resolve(u);if(d&&He.isSelectable(i.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(i.content.firstChild))c.setSelection(new He(h));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,v,b,w)=>p=w),c.setSelection(DC(t,h,c.doc.resolve(p)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};ar.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Qs(t)},20))};ar.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};ar.beforeinput=(t,e)=>{if(Bn&&Lo&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:n}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=n||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,Za(8,"Backspace")))))return;let{$cursor:r}=t.state.selection;r&&r.pos>0&&t.dispatch(t.state.tr.delete(r.pos-1,r.pos).scrollIntoView())},50)}};for(let t in lr)ar[t]=lr[t];function lh(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class BC{constructor(e,n){this.toDOM=e,this.spec=n||xl,this.side=this.spec.side||0}map(e,n,r,o){let{pos:s,deleted:i}=e.mapResult(n.from+o,this.side<0?-1:1);return i?null:new mr(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof BC&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&lh(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class aa{constructor(e,n){this.attrs=e,this.spec=n||xl}map(e,n,r,o){let s=e.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,i=e.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return s>=i?null:new mr(s,i,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof aa&&lh(this.attrs,e.attrs)&&lh(this.spec,e.spec)}static is(e){return e.type instanceof aa}destroy(){}}class jC{constructor(e,n){this.attrs=e,this.spec=n||xl}map(e,n,r,o){let s=e.mapResult(n.from+o,1);if(s.deleted)return null;let i=e.mapResult(n.to+o,-1);return i.deleted||i.pos<=s.pos?null:new mr(s.pos-r,i.pos-r,this)}valid(e,n){let{index:r,offset:o}=e.content.findIndex(n.from),s;return o==n.from&&!(s=e.child(r)).isText&&o+s.nodeSize==n.to}eq(e){return this==e||e instanceof jC&&lh(this.attrs,e.attrs)&&lh(this.spec,e.spec)}destroy(){}}class mr{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new mr(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new mr(e,e,new BC(n,r))}static inline(e,n,r,o){return new mr(e,n,new aa(r,o))}static node(e,n,r,o){return new mr(e,n,new jC(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof aa}}const bc=[],xl={};class Ut{constructor(e,n){this.local=e.length?e:bc,this.children=n.length?n:bc}static create(e,n){return n.length?Yg(n,e,0,xl):Dn}find(e,n,r){let o=[];return this.findInner(e??0,n??1e9,o,0,r),o}findInner(e,n,r,o,s){for(let i=0;i<this.local.length;i++){let a=this.local[i];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+o,a.to+o))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<n&&this.children[i+1]>e){let a=this.children[i]+1;this.children[i+2].findInner(e-a,n-a,r,o+a,s)}}map(e,n,r){return this==Dn||e.maps.length==0?this:this.mapInner(e,n,0,0,r||xl)}mapInner(e,n,r,o,s){let i;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,o);l&&l.type.valid(n,l)?(i||(i=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?fke(this.children,i||[],e,n,r,o,s):i?new Ut(i.sort(Cl),bc):Dn}add(e,n){return n.length?this==Dn?Ut.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let o,s=0;e.forEach((a,l)=>{let c=l+r,u;if(u=lR(n,a,c)){for(o||(o=this.children.slice());s<o.length&&o[s]<l;)s+=3;o[s]==l?o[s+2]=o[s+2].addInner(a,u,c+1):o.splice(s,0,l,l+a.nodeSize,Yg(u,a,c+1,xl)),s+=3}});let i=aR(s?cR(n):n,-r);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||i.splice(a--,1);return new Ut(i.length?this.local.concat(i).sort(Cl):this.local,o||this.children)}remove(e){return e.length==0||this==Dn?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,o=this.local;for(let s=0;s<r.length;s+=3){let i,a=r[s]+n,l=r[s+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(i||(i=[])).push(d));if(!i)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(i,a+1);c!=Dn?r[s+2]=c:(r.splice(s,3),s-=3)}if(o.length){for(let s=0,i;s<e.length;s++)if(i=e[s])for(let a=0;a<o.length;a++)o[a].eq(i,n)&&(o==this.local&&(o=this.local.slice()),o.splice(a--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new Ut(o,r):Dn}forChild(e,n){if(this==Dn)return this;if(n.isLeaf)return Ut.empty;let r,o;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,i=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<i&&l.to>s&&l.type instanceof aa){let c=Math.max(s,l.from)-s,u=Math.min(i,l.to)-s;c<u&&(o||(o=[])).push(l.copy(c,u))}}if(o){let a=new Ut(o.sort(Cl),bc);return r?new Hi([a,r]):a}return r||Dn}eq(e){if(this==e)return!0;if(!(e instanceof Ut)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return zC(this.localsInner(e))}localsInner(e){if(this==Dn)return bc;if(e.inlineContent||!this.local.some(aa.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof aa||n.push(this.local[r]);return n}}Ut.empty=new Ut([],[]);Ut.removeOverlap=zC;const Dn=Ut.empty;class Hi{constructor(e){this.members=e}map(e,n){const r=this.members.map(o=>o.map(e,n,xl));return Hi.from(r)}forChild(e,n){if(n.isLeaf)return Ut.empty;let r=[];for(let o=0;o<this.members.length;o++){let s=this.members[o].forChild(e,n);s!=Dn&&(s instanceof Hi?r=r.concat(s.members):r.push(s))}return Hi.from(r)}eq(e){if(!(e instanceof Hi)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let o=0;o<this.members.length;o++){let s=this.members[o].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let i=0;i<s.length;i++)n.push(s[i])}}return n?zC(r?n:n.sort(Cl)):bc}static from(e){switch(e.length){case 0:return Dn;case 1:return e[0];default:return new Hi(e.every(n=>n instanceof Ut)?e:e.reduce((n,r)=>n.concat(r instanceof Ut?r:r.members),[]))}}}function fke(t,e,n,r,o,s,i){let a=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let d=0;n.maps[c].forEach((f,h,p,m)=>{let v=m-p-(h-f);for(let b=0;b<a.length;b+=3){let w=a[b+1];if(w<0||f>w+u-d)continue;let k=a[b]+u-d;h>=k?a[b+1]=f<=k?-2:-1:p>=o&&v&&(a[b]+=v,a[b+1]+=v)}d+=v}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+s),d=u-o;if(d<0||d>=r.content.size){l=!0;continue}let f=n.map(t[c+1]+s,-1),h=f-o,{index:p,offset:m}=r.content.findIndex(d),v=r.maybeChild(p);if(v&&m==d&&m+v.nodeSize==h){let b=a[c+2].mapInner(n,v,u+1,t[c]+s+1,i);b!=Dn?(a[c]=d,a[c+1]=h,a[c+2]=b):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=hke(a,t,e,n,o,s,i),u=Yg(c,r,0,i);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let h=u.children[d];for(;f<a.length&&a[f]<h;)f+=3;a.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new Ut(e.sort(Cl),a)}function aR(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let o=t[r];n.push(new mr(o.from+e,o.to+e,o.type))}return n}function hke(t,e,n,r,o,s,i){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,o,c);d?n.push(d):i.onRemove&&i.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function lR(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,o=null;for(let s=0,i;s<t.length;s++)(i=t[s])&&i.from>n&&i.to<r&&((o||(o=[])).push(i),t[s]=null);return o}function cR(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Yg(t,e,n,r){let o=[],s=!1;e.forEach((a,l)=>{let c=lR(t,a,l+n);if(c){s=!0;let u=Yg(c,a,n+l+1,r);u!=Dn&&o.push(l,l+a.nodeSize,u)}});let i=aR(s?cR(t):t,-n).sort(Cl);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||(r.onRemove&&r.onRemove(i[a].spec),i.splice(a--,1));return i.length||o.length?new Ut(i,o):Dn}function Cl(t,e){return t.from-e.from||t.to-e.to}function zC(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let o=n+1;o<e.length;o++){let s=e[o];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[o]=s.copy(s.from,r.to),AE(e,o+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),AE(e,o,r.copy(s.from,r.to)));break}}}return e}function AE(t,e,n){for(;e<t.length&&Cl(n,t[e])>0;)e++;t.splice(e,0,n)}function tb(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Dn&&e.push(r)}),t.cursorWrapper&&e.push(Ut.create(t.state.doc,[t.cursorWrapper.deco])),Hi.from(e)}const pke={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},mke=wr&&sa<=11;class gke{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class yke{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new gke,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);wr&&sa<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),mke&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,pke)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(CE(this.view)){if(this.suppressingSelectionUpdates)return Qs(this.view);if(wr&&sa<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&jl(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=ih(s))n.add(s);for(let s=e.anchorNode;s;s=ih(s))if(n.has(s)){r=s;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.observer?this.observer.takeRecords():[];this.queue.length&&(n=this.queue.concat(n),this.queue.length=0);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&CE(e)&&!this.ignoreSelectionChange(r),s=-1,i=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(s=s<0?d.from:Math.min(d.from,s),i=i<0?d.to:Math.max(d.to,i),d.typeOver&&(a=!0))}if(Vo&&l.length>1){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let d=u[0],f=u[1];d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}}let c=null;s<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&o0(r)&&(c=PC(e))&&c.eq(Be.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Qs(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||o)&&(s>-1&&(e.docView.markDirty(s,i),vke(e)),this.handleDOMChange(s,i,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Qs(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++)n.push(e.addedNodes[u]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,s=e.nextSibling;if(wr&&sa<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:f}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(o=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let i=o&&o.parentNode==e.target?no(o)+1:0,a=r.localPosFromDOM(e.target,i,-1),l=s&&s.parentNode==e.target?no(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let NE=new WeakMap,LE=!1;function vke(t){if(!NE.has(t)&&(NE.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Vo,LE)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),LE=!0}}function bke(t){let e;function n(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0);let r=e.startContainer,o=e.startOffset,s=e.endContainer,i=e.endOffset,a=t.domAtPos(t.state.selection.anchor);return jl(a.node,a.offset,s,i)&&([r,o,s,i]=[s,i,r,o]),{anchorNode:r,anchorOffset:o,focusNode:s,focusOffset:i}}function wke(t,e,n){let{node:r,fromOffset:o,toOffset:s,from:i,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],o0(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Bn&&t.input.lastKeyCode===8)for(let v=s;v>o;v--){let b=r.childNodes[v-1],w=b.pmViewDesc;if(b.nodeName=="BR"&&!w){s=v;break}if(!w||w.size)break}let d=t.state.doc,f=t.someProp("domParser")||xu.fromSchema(t.state.schema),h=d.resolve(i),p=null,m=f.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:o,to:s,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:kke,context:h});if(c&&c[0].pos!=null){let v=c[0].pos,b=c[1]&&c[1].pos;b==null&&(b=v),p={anchor:v+i,head:b+i}}return{doc:m,sel:p,from:i,to:a}}function kke(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(ir&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||ir&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const xke=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Cke(t,e,n,r,o){if(e<0){let E=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,O=PC(t,E);if(O&&!t.state.selection.eq(O)){if(Bn&&Lo&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",R=>R(t,Za(13,"Enter"))))return;let N=t.state.tr.setSelection(O);E=="pointer"?N.setMeta("pointer",!0):E=="key"&&N.scrollIntoView(),t.composing&&N.setMeta("composition",t.input.compositionID),t.dispatch(N)}return}let s=t.state.doc.resolve(e),i=s.sharedDepth(n);e=s.before(i+1),n=t.state.doc.resolve(n).after(i+1);let a=t.state.selection,l=wke(t,e,n),c=t.state.doc,u=c.slice(l.from,l.to),d,f;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(d=t.state.selection.to,f="end"):(d=t.state.selection.from,f="start"),t.input.lastKeyCode=null;let h=Tke(u.content,l.doc.content,l.from,d,f);if((Su&&t.input.lastIOSEnter>Date.now()-225||Lo)&&o.some(E=>E.nodeType==1&&!xke.test(E.nodeName))&&(!h||h.endA>=h.endB)&&t.someProp("handleKeyDown",E=>E(t,Za(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!h)if(r&&a instanceof Je&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(l.sel&&l.sel.anchor!=l.sel.head))h={start:a.from,endA:a.to,endB:a.to};else{if(l.sel){let E=RE(t,t.state.doc,l.sel);if(E&&!E.eq(t.state.selection)){let O=t.state.tr.setSelection(E);t.composing&&O.setMeta("composition",t.input.compositionID),t.dispatch(O)}}return}if(Bn&&t.cursorWrapper&&l.sel&&l.sel.anchor==t.cursorWrapper.deco.from&&l.sel.head==l.sel.anchor){let E=h.endB-h.start;l.sel={anchor:l.sel.anchor+E,head:l.sel.anchor+E}}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&h.start==h.endB&&t.state.selection instanceof Je&&(h.start>t.state.selection.from&&h.start<=t.state.selection.from+2&&t.state.selection.from>=l.from?h.start=t.state.selection.from:h.endA<t.state.selection.to&&h.endA>=t.state.selection.to-2&&t.state.selection.to<=l.to&&(h.endB+=t.state.selection.to-h.endA,h.endA=t.state.selection.to)),wr&&sa<=11&&h.endB==h.start+1&&h.endA==h.start&&h.start>l.from&&l.doc.textBetween(h.start-l.from-1,h.start-l.from+1)==" "&&(h.start--,h.endA--,h.endB--);let p=l.doc.resolveNoCache(h.start-l.from),m=l.doc.resolveNoCache(h.endB-l.from),v=c.resolve(h.start),b=p.sameParent(m)&&p.parent.inlineContent&&v.end()>=h.endA,w;if((Su&&t.input.lastIOSEnter>Date.now()-225&&(!b||o.some(E=>E.nodeName=="DIV"||E.nodeName=="P"))||!b&&p.pos<l.doc.content.size&&(w=Be.findFrom(l.doc.resolve(p.pos+1),1,!0))&&w.head==m.pos)&&t.someProp("handleKeyDown",E=>E(t,Za(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>h.start&&Ske(c,h.start,h.endA,p,m)&&t.someProp("handleKeyDown",E=>E(t,Za(8,"Backspace")))){Lo&&Bn&&t.domObserver.suppressSelectionUpdates();return}Bn&&Lo&&h.endB==h.start&&(t.input.lastAndroidDelete=Date.now()),Lo&&!b&&p.start()!=m.start()&&m.parentOffset==0&&p.depth==m.depth&&l.sel&&l.sel.anchor==l.sel.head&&l.sel.head==h.endA&&(h.endB-=2,m=l.doc.resolveNoCache(h.endB-l.from),setTimeout(()=>{t.someProp("handleKeyDown",function(E){return E(t,Za(13,"Enter"))})},20));let k=h.start,y=h.endA,C,_,M;if(b){if(p.pos==m.pos)wr&&sa<=11&&p.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Qs(t),20)),C=t.state.tr.delete(k,y),_=c.resolve(h.start).marksAcross(c.resolve(h.endA));else if(h.endA==h.endB&&(M=_ke(p.parent.content.cut(p.parentOffset,m.parentOffset),v.parent.content.cut(v.parentOffset,h.endA-v.start()))))C=t.state.tr,M.type=="add"?C.addMark(k,y,M.mark):C.removeMark(k,y,M.mark);else if(p.parent.child(p.index()).isText&&p.index()==m.index()-(m.textOffset?0:1)){let E=p.parent.textBetween(p.parentOffset,m.parentOffset);if(t.someProp("handleTextInput",O=>O(t,k,y,E)))return;C=t.state.tr.insertText(E,k,y)}}if(C||(C=t.state.tr.replace(k,y,l.doc.slice(h.start-l.from,h.endB-l.from))),l.sel){let E=RE(t,C.doc,l.sel);E&&!(Bn&&Lo&&t.composing&&E.empty&&(h.start!=h.endB||t.input.lastAndroidDelete<Date.now()-100)&&(E.head==k||E.head==C.mapping.map(y)-1)||wr&&E.empty&&E.head==k)&&C.setSelection(E)}_&&C.ensureMarks(_),t.composing&&C.setMeta("composition",t.input.compositionID),t.dispatch(C.scrollIntoView())}function RE(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:DC(t,e.resolve(n.anchor),e.resolve(n.head))}function _ke(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,o=n,s=r,i,a,l;for(let u=0;u<r.length;u++)o=r[u].removeFromSet(o);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(o.length==1&&s.length==0)a=o[0],i="add",l=u=>u.mark(a.addToSet(u.marks));else if(o.length==0&&s.length==1)a=s[0],i="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(oe.from(c).eq(t))return{mark:a,type:i}}function Ske(t,e,n,r,o){if(!r.parent.isTextblock||n-e<=o.pos-r.pos||nb(r,!0,!1)<o.pos)return!1;let s=t.resolve(e);if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let i=t.resolve(nb(s,!0,!0));return!i.parent.isTextblock||i.pos>n||nb(i,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(i.parent.content)}function nb(t,e,n){let r=t.depth,o=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,o++}return o}function Tke(t,e,n,r,o){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:i,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(o=="end"){let l=Math.max(0,s-Math.min(i,a));r-=i+l-s}if(i<s&&t.size<e.size){let l=r<=s&&r>=i?s-r:0;s-=l,a=s+(a-i),i=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,i=s+(i-a),a=s}return{start:s,endA:i,endB:a}}class Mke{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Kwe,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(FE),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=$E(this),DE(this),this.nodeViews=HE(this),this.docView=yE(this.state.doc,PE(this),tb(this),this.dom,this),this.domObserver=new yke(this,(r,o,s,i)=>Cke(this,r,o,s,i)),this.domObserver.start(),Gwe(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ww(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(FE),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){let r=this.state,o=!1,s=!1;e.storedMarks&&this.composing&&(sR(this),s=!0),this.state=e;let i=r.plugins!=e.plugins||this._props.plugins!=n.plugins;if(i||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let f=HE(this);Oke(f,this.nodeViews)&&(this.nodeViews=f,o=!0)}(i||n.handleDOMEvents!=this._props.handleDOMEvents)&&Ww(this),this.editable=$E(this),DE(this);let a=tb(this),l=PE(this),c=r.plugins!=e.plugins&&!r.doc.eq(e.doc)?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",u=o||!this.docView.matchesNode(e.doc,l,a);(u||!e.selection.eq(r.selection))&&(s=!0);let d=c=="preserve"&&s&&this.dom.style.overflowAnchor==null&&dwe(this);if(s){this.domObserver.stop();let f=u&&(wr||Bn)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&Eke(r.selection,e.selection);if(u){let h=Bn?this.trackWrites=this.domSelectionRange().focusNode:null;(o||!this.docView.update(e.doc,l,a,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=yE(e.doc,l,a,this.dom,this)),h&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Dwe(this))?Qs(this,f):(q7(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():d&&fwe(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof He){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&dE(this,n.getBoundingClientRect(),e)}else dE(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}someProp(e,n){let r=this._props&&this._props[e],o;if(r!=null&&(o=n?n(r):r))return o;for(let i=0;i<this.directPlugins.length;i++){let a=this.directPlugins[i].props[e];if(a!=null&&(o=n?n(a):a))return o}let s=this.state.plugins;if(s)for(let i=0;i<s.length;i++){let a=s[i].props[e];if(a!=null&&(o=n?n(a):a))return o}}hasFocus(){if(wr){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&hwe(this.dom),Qs(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}posAtCoords(e){return vwe(this,e)}coordsAtPos(e,n=1){return $7(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let o=this.docView.posFromDOM(e,n,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,n){return Cwe(this,n||this.state,e)}pasteHTML(e,n){return ah(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return ah(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(Jwe(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],tb(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Xwe(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return ir&&this.root.nodeType===11&&owe(this.dom.ownerDocument)==this.dom?bke(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function PE(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[mr.node(0,t.state.doc.content.size,e)]}function DE(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:mr.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function $E(t){return!t.someProp("editable",e=>e(t.state)===!1)}function Eke(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function HE(t){let e=Object.create(null);function n(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function Oke(t,e){let n=0,r=0;for(let o in t){if(t[o]!=e[o])return!0;n++}for(let o in e)r++;return n!=r}function FE(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var ya={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Xg={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Ike=typeof navigator<"u"&&/Mac/.test(navigator.platform),Ake=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var On=0;On<10;On++)ya[48+On]=ya[96+On]=String(On);for(var On=1;On<=24;On++)ya[On+111]="F"+On;for(var On=65;On<=90;On++)ya[On]=String.fromCharCode(On+32),Xg[On]=String.fromCharCode(On);for(var rb in ya)Xg.hasOwnProperty(rb)||(Xg[rb]=ya[rb]);function Nke(t){var e=Ike&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Ake&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Xg:ya)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const Lke=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function Rke(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,o,s,i;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))Lke?i=!0:o=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),i&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function Pke(t){let e=Object.create(null);for(let n in t)e[Rke(n)]=t[n];return e}function ob(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function Dke(t){return new Kn({props:{handleKeyDown:VC(t)}})}function VC(t){let e=Pke(t);return function(n,r){let o=Nke(r),s,i=e[ob(o,r)];if(i&&i(n.state,n.dispatch,n))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let a=e[ob(o,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||o.charCodeAt(0)>127)&&(s=ya[r.keyCode])&&s!=o){let a=e[ob(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const $ke=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function Hke(t,e){let{$cursor:n}=t.selection;return!n||n.parentOffset>0?null:n}const Fke=(t,e,n)=>{let r=Hke(t);if(!r)return!1;let o=uR(r);if(!o){let i=r.blockRange(),a=i&&Qu(i);return a==null?!1:(e&&e(t.tr.lift(i,a).scrollIntoView()),!0)}let s=o.nodeBefore;if(!s.type.spec.isolating&&hR(t,o,e))return!0;if(r.parent.content.size==0&&(Mu(s,"end")||He.isSelectable(s))){let i=NC(t.doc,r.before(),r.after(),we.empty);if(i&&i.slice.size<i.to-i.from){if(e){let a=t.tr.step(i);a.setSelection(Mu(s,"end")?Be.findFrom(a.doc.resolve(a.mapping.map(o.pos,-1)),-1):He.create(a.doc,o.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}}return s.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos-s.nodeSize,o.pos).scrollIntoView()),!0):!1};function Mu(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Bke=(t,e,n)=>{let{$head:r,empty:o}=t.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(r.parentOffset>0)return!1;s=uR(r)}let i=s&&s.nodeBefore;return!i||!He.isSelectable(i)?!1:(e&&e(t.tr.setSelection(He.create(t.doc,s.pos-i.nodeSize)).scrollIntoView()),!0)};function uR(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function jke(t,e){let{$cursor:n}=t.selection;return!n||n.parentOffset<n.parent.content.size?null:n}const zke=(t,e,n)=>{let r=jke(t);if(!r)return!1;let o=dR(r);if(!o)return!1;let s=o.nodeAfter;if(hR(t,o,e))return!0;if(r.parent.content.size==0&&(Mu(s,"start")||He.isSelectable(s))){let i=NC(t.doc,r.before(),r.after(),we.empty);if(i&&i.slice.size<i.to-i.from){if(e){let a=t.tr.step(i);a.setSelection(Mu(s,"start")?Be.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):He.create(a.doc,a.mapping.map(o.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos,o.pos+s.nodeSize).scrollIntoView()),!0):!1},Vke=(t,e,n)=>{let{$head:r,empty:o}=t.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(r.parentOffset<r.parent.content.size)return!1;s=dR(r)}let i=s&&s.nodeAfter;return!i||!He.isSelectable(i)?!1:(e&&e(t.tr.setSelection(He.create(t.doc,s.pos)).scrollIntoView()),!0)};function dR(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const Uke=(t,e)=>{let n=t.selection,r=n instanceof He,o;if(r){if(n.node.isTextblock||!Oa(t.doc,n.from))return!1;o=n.from}else if(o=x7(t.doc,n.from,-1),o==null)return!1;if(e){let s=t.tr.join(o);r&&s.setSelection(He.create(s.doc,o-t.doc.resolve(o).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},qke=(t,e)=>{let n=t.selection,r;if(n instanceof He){if(n.node.isTextblock||!Oa(t.doc,n.to))return!1;r=n.to}else if(r=x7(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},Wke=(t,e)=>{let{$from:n,$to:r}=t.selection,o=n.blockRange(r),s=o&&Qu(o);return s==null?!1:(e&&e(t.tr.lift(o,s).scrollIntoView()),!0)},Kke=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function fR(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Gke=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),s=n.indexAfter(-1),i=fR(o.contentMatchAt(s));if(!i||!o.canReplaceWith(s,s,i))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,i.createAndFill());l.setSelection(Be.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},Jke=(t,e)=>{let n=t.selection,{$from:r,$to:o}=n;if(n instanceof Fo||r.parent.inlineContent||o.parent.inlineContent)return!1;let s=fR(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let i=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=t.tr.insert(i,s.createAndFill());a.setSelection(Je.create(a.doc,i+1)),e(a.scrollIntoView())}return!0},Yke=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(zc(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),o=r&&Qu(r);return o==null?!1:(e&&e(t.tr.lift(r,o).scrollIntoView()),!0)},Xke=(t,e)=>{let{$from:n,to:r}=t.selection,o,s=n.sharedDepth(r);return s==0?!1:(o=n.before(s),e&&e(t.tr.setSelection(He.create(t.doc,o))),!0)};function Qke(t,e,n){let r=e.nodeBefore,o=e.nodeAfter,s=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(o.isTextblock||Oa(t.doc,e.pos))?!1:(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function hR(t,e,n){let r=e.nodeBefore,o=e.nodeAfter,s,i;if(r.type.spec.isolating||o.type.spec.isolating)return!1;if(Qke(t,e,n))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(s=(i=r.contentMatchAt(r.childCount)).findWrapping(o.type))&&i.matchType(s[0]||o.type).validEnd){if(n){let d=e.pos+o.nodeSize,f=oe.empty;for(let m=s.length-1;m>=0;m--)f=oe.from(s[m].create(null,f));f=oe.from(r.copy(f));let h=t.tr.step(new yn(e.pos-1,d,e.pos,d,new we(f,1,0),s.length,!0)),p=d+2*s.length;Oa(h.doc,p)&&h.join(p),n(h.scrollIntoView())}return!0}let l=Be.findFrom(e,1),c=l&&l.$from.blockRange(l.$to),u=c&&Qu(c);if(u!=null&&u>=e.depth)return n&&n(t.tr.lift(c,u).scrollIntoView()),!0;if(a&&Mu(o,"start",!0)&&Mu(r,"end")){let d=r,f=[];for(;f.push(d),!d.isTextblock;)d=d.lastChild;let h=o,p=1;for(;!h.isTextblock;h=h.firstChild)p++;if(d.canReplace(d.childCount,d.childCount,h.content)){if(n){let m=oe.empty;for(let b=f.length-1;b>=0;b--)m=oe.from(f[b].copy(m));let v=t.tr.step(new yn(e.pos-f.length,e.pos+o.nodeSize,e.pos+p,e.pos+o.nodeSize-p,new we(m,f.length,0),0,!0));n(v.scrollIntoView())}return!0}}return!1}function pR(t){return function(e,n){let r=e.selection,o=t<0?r.$from:r.$to,s=o.depth;for(;o.node(s).isInline;){if(!s)return!1;s--}return o.node(s).isTextblock?(n&&n(e.tr.setSelection(Je.create(e.doc,t<0?o.start(s):o.end(s)))),!0):!1}}const Zke=pR(-1),exe=pR(1);function txe(t,e=null){return function(n,r){let{$from:o,$to:s}=n.selection,i=o.blockRange(s),a=i&&AC(i,t,e);return a?(r&&r(n.tr.wrap(i,a).scrollIntoView()),!0):!1}}function BE(t,e=null){return function(n,r){let o=!1;for(let s=0;s<n.selection.ranges.length&&!o;s++){let{$from:{pos:i},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(i,a,(l,c)=>{if(o)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)o=!0;else{let u=n.doc.resolve(c),d=u.index();o=u.parent.canReplaceWith(d,d+1,t)}})}if(!o)return!1;if(r){let s=n.tr;for(let i=0;i<n.selection.ranges.length;i++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[i];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function nxe(t,e=null){return function(n,r){let{$from:o,$to:s}=n.selection,i=o.blockRange(s),a=!1,l=i;if(!i)return!1;if(i.depth>=2&&o.node(i.depth-1).type.compatibleContent(t)&&i.startIndex==0){if(o.index(i.depth-1)==0)return!1;let u=n.doc.resolve(i.start-2);l=new Ug(u,u,i.depth),i.endIndex<i.parent.childCount&&(i=new Ug(o,n.doc.resolve(s.end(i.depth)),i.depth)),a=!0}let c=AC(l,t,e,i);return c?(r&&r(rxe(n.tr,i,c,a,t).scrollIntoView()),!0):!1}}function rxe(t,e,n,r,o){let s=oe.empty;for(let u=n.length-1;u>=0;u--)s=oe.from(n[u].type.create(n[u].attrs,s));t.step(new yn(e.start-(r?2:0),e.end,e.start,e.end,new we(s,0,0),n.length,!0));let i=0;for(let u=0;u<n.length;u++)n[u].type==o&&(i=u+1);let a=n.length-i,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&zc(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function oxe(t){return function(e,n){let{$from:r,$to:o}=e.selection,s=r.blockRange(o,i=>i.childCount>0&&i.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?sxe(e,n,t,s):ixe(e,n,s):!0:!1}}function sxe(t,e,n,r){let o=t.tr,s=r.end,i=r.$to.end(r.depth);s<i&&(o.step(new yn(s-1,i,s,i,new we(oe.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Ug(o.doc.resolve(r.$from.pos),o.doc.resolve(i),r.depth));const a=Qu(r);if(a==null)return!1;o.lift(r,a);let l=o.mapping.map(s,-1)-1;return Oa(o.doc,l)&&o.join(l),e(o.scrollIntoView()),!0}function ixe(t,e,n){let r=t.tr,o=n.parent;for(let h=n.end,p=n.endIndex-1,m=n.startIndex;p>m;p--)h-=o.child(p).nodeSize,r.delete(h-1,h+1);let s=r.doc.resolve(n.start),i=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==o.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,i.content.append(l?oe.empty:oe.from(o))))return!1;let d=s.pos,f=d+i.nodeSize;return r.step(new yn(d-(a?1:0),f+(l?1:0),d+1,f-1,new we((a?oe.empty:oe.from(o.copy(oe.empty))).append(l?oe.empty:oe.from(o.copy(oe.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function axe(t){return function(e,n){let{$from:r,$to:o}=e.selection,s=r.blockRange(o,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let i=s.startIndex;if(i==0)return!1;let a=s.parent,l=a.child(i-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=oe.from(c?t.create():null),d=new we(oe.from(t.create(null,oe.from(a.type.create(null,u)))),c?3:1,0),f=s.start,h=s.end;n(e.tr.step(new yn(f-(c?3:1),h,f,h,d,1,!0)).scrollIntoView())}return!0}}function l0(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:o}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),filterTransaction:e.filterTransaction,plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,s=n.storedMarks,n}}}class c0{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:o}=n,{tr:s}=r,i=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>{const u=l(...c)(i);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(s),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:o,state:s}=this,{view:i}=o,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...p)=>{const m=this.buildProps(c,n),v=h(...p)(m);return a.push(v),d}])),run:u};return d}createCan(e){const{rawCommands:n,state:r}=this,o=!1,s=e||r.tr,i=this.buildProps(s,o);return{...Object.fromEntries(Object.entries(n).map(([a,l])=>[a,(...c)=>l(...c)({...i,dispatch:void 0})])),chain:()=>this.createChain(s,o)}}buildProps(e,n=!0){const{rawCommands:r,editor:o,state:s}=this,{view:i}=o;s.storedMarks&&e.setStoredMarks(s.storedMarks);const a={tr:e,editor:o,view:i,state:l0({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class lxe{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(o=>o.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(o=>o!==n):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function Me(t,e,n){return t.config[e]===void 0&&t.parent?Me(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Me(t.parent,e,n):null}):t.config[e]}function u0(t){const e=t.filter(o=>o.type==="extension"),n=t.filter(o=>o.type==="node"),r=t.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function mR(t){const e=[],{nodeExtensions:n,markExtensions:r}=u0(t),o=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage},l=Me(i,"addGlobalAttributes",a);l&&l().forEach(c=>{c.types.forEach(u=>{Object.entries(c.attributes).forEach(([d,f])=>{e.push({type:u,name:d,attribute:{...s,...f}})})})})}),o.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage},l=Me(i,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const f={...s,...d};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:i.name,name:u,attribute:f})})}),e}function wn(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Ht(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([o,s])=>{if(!r[o]){r[o]=s;return}o==="class"?r[o]=[r[o],s].join(" "):o==="style"?r[o]=[r[o],s].join("; "):r[o]=s}),r},{})}function Kw(t,e){return e.filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Ht(n,r),{})}function gR(t){return typeof t=="function"}function nt(t,e=void 0,...n){return gR(t)?e?t.bind(e)(...n):t(...n):t}function cxe(t={}){return Object.keys(t).length===0&&t.constructor===Object}function uxe(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function jE(t,e){return t.style?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const o=e.reduce((s,i)=>{const a=i.attribute.parseHTML?i.attribute.parseHTML(n):uxe(n.getAttribute(i.name));return a==null?s:{...s,[i.name]:a}},{});return{...r,...o}}}}function zE(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&cxe(n)?!1:n!=null))}function dxe(t,e){var n;const r=mR(t),{nodeExtensions:o,markExtensions:s}=u0(t),i=(n=o.find(c=>Me(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(o.map(c=>{const u=r.filter(b=>b.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((b,w)=>{const k=Me(w,"extendNodeSchema",d);return{...b,...k?k(c):{}}},{}),h=zE({...f,content:nt(Me(c,"content",d)),marks:nt(Me(c,"marks",d)),group:nt(Me(c,"group",d)),inline:nt(Me(c,"inline",d)),atom:nt(Me(c,"atom",d)),selectable:nt(Me(c,"selectable",d)),draggable:nt(Me(c,"draggable",d)),code:nt(Me(c,"code",d)),defining:nt(Me(c,"defining",d)),isolating:nt(Me(c,"isolating",d)),attrs:Object.fromEntries(u.map(b=>{var w;return[b.name,{default:(w=b==null?void 0:b.attribute)===null||w===void 0?void 0:w.default}]}))}),p=nt(Me(c,"parseHTML",d));p&&(h.parseDOM=p.map(b=>jE(b,u)));const m=Me(c,"renderHTML",d);m&&(h.toDOM=b=>m({node:b,HTMLAttributes:Kw(b,u)}));const v=Me(c,"renderText",d);return v&&(h.toText=v),[c.name,h]})),l=Object.fromEntries(s.map(c=>{const u=r.filter(v=>v.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((v,b)=>{const w=Me(b,"extendMarkSchema",d);return{...v,...w?w(c):{}}},{}),h=zE({...f,inclusive:nt(Me(c,"inclusive",d)),excludes:nt(Me(c,"excludes",d)),group:nt(Me(c,"group",d)),spanning:nt(Me(c,"spanning",d)),code:nt(Me(c,"code",d)),attrs:Object.fromEntries(u.map(v=>{var b;return[v.name,{default:(b=v==null?void 0:v.attribute)===null||b===void 0?void 0:b.default}]}))}),p=nt(Me(c,"parseHTML",d));p&&(h.parseDOM=p.map(v=>jE(v,u)));const m=Me(c,"renderHTML",d);return m&&(h.toDOM=v=>m({mark:v,HTMLAttributes:Kw(v,u)})),[c.name,h]}));return new C1e({topNode:i,nodes:a,marks:l})}function sb(t,e){return e.nodes[t]||e.marks[t]||null}function VE(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}const fxe=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(o,s,i,a)=>{var l,c;const u=((c=(l=o.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:o,pos:s,parent:i,index:a}))||o.textContent||"%leaf%";n+=u.slice(0,Math.max(0,r-s))}),n};function UC(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class d0{constructor(e){this.find=e.find,this.handler=e.handler}}const hxe=(t,e)=>{if(UC(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function ib(t){var e;const{editor:n,from:r,to:o,text:s,rules:i,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let u=!1;const d=fxe(c)+s;return i.forEach(f=>{if(u)return;const h=hxe(d,f.find);if(!h)return;const p=l.state.tr,m=l0({state:l.state,transaction:p}),v={from:r-(h[0].length-s.length),to:o},{commands:b,chain:w,can:k}=new c0({editor:n,state:m});f.handler({state:m,range:v,match:h,commands:b,chain:w,can:k})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:r,to:o,text:s}),l.dispatch(p),u=!0)}),u}function pxe(t){const{editor:e,rules:n}=t,r=new Kn({state:{init(){return null},apply(o,s){return o.getMeta(r)||(o.selectionSet||o.docChanged?null:s)}},props:{handleTextInput(o,s,i,a){return ib({editor:e,from:s,to:i,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:s}=o.state.selection;s&&ib({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(o,s){if(s.key!=="Enter")return!1;const{$cursor:i}=o.state.selection;return i?ib({editor:e,from:i.pos,to:i.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function mxe(t){return typeof t=="number"}class gxe{constructor(e){this.find=e.find,this.handler=e.handler}}const yxe=(t,e)=>{if(UC(e))return[...t.matchAll(e)];const n=e(t);return n?n.map(r=>{const o=[r.text];return o.index=r.index,o.input=t,o.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(r.replaceWith)),o}):[]};function vxe(t){const{editor:e,state:n,from:r,to:o,rule:s}=t,{commands:i,chain:a,can:l}=new c0({editor:e,state:n}),c=[];return n.doc.nodesBetween(r,o,(u,d)=>{if(!u.isTextblock||u.type.spec.code)return;const f=Math.max(r,d),h=Math.min(o,d+u.content.size),p=u.textBetween(f-d,h-d,void 0,"");yxe(p,s.find).forEach(m=>{if(m.index===void 0)return;const v=f+m.index+1,b=v+m[0].length,w={from:n.tr.mapping.map(v),to:n.tr.mapping.map(b)},k=s.handler({state:n,range:w,match:m,commands:i,chain:a,can:l});c.push(k)})}),c.every(u=>u!==null)}function bxe(t){const{editor:e,rules:n}=t;let r=null,o=!1,s=!1;return n.map(i=>new Kn({view(a){const l=c=>{var u;r=!((u=a.dom.parentElement)===null||u===void 0)&&u.contains(c.target)?a.dom.parentElement:null};return window.addEventListener("dragstart",l),{destroy(){window.removeEventListener("dragstart",l)}}},props:{handleDOMEvents:{drop:a=>(s=r===a.dom.parentElement,!1),paste:(a,l)=>{var c;const u=(c=l.clipboardData)===null||c===void 0?void 0:c.getData("text/html");return o=!!(u!=null&&u.includes("data-pm-slice")),!1}}},appendTransaction:(a,l,c)=>{const u=a[0],d=u.getMeta("uiEvent")==="paste"&&!o,f=u.getMeta("uiEvent")==="drop"&&!s;if(!d&&!f)return;const h=l.doc.content.findDiffStart(c.doc.content),p=l.doc.content.findDiffEnd(c.doc.content);if(!mxe(h)||!p||h===p.b)return;const m=c.tr,v=l0({state:c,transaction:m});if(!(!vxe({editor:e,state:v,from:Math.max(h-1,0),to:p.b-1,rule:i})||!m.steps.length))return m}}))}function wxe(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return[...new Set(e)]}class Sc{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Sc.resolve(e),this.schema=dxe(this.extensions,n),this.extensions.forEach(r=>{var o;this.editor.extensionStorage[r.name]=r.storage;const s={name:r.name,options:r.options,storage:r.storage,editor:this.editor,type:sb(r.name,this.schema)};r.type==="mark"&&(!((o=nt(Me(r,"keepOnSplit",s)))!==null&&o!==void 0)||o)&&this.splittableMarks.push(r.name);const i=Me(r,"onBeforeCreate",s);i&&this.editor.on("beforeCreate",i);const a=Me(r,"onCreate",s);a&&this.editor.on("create",a);const l=Me(r,"onUpdate",s);l&&this.editor.on("update",l);const c=Me(r,"onSelectionUpdate",s);c&&this.editor.on("selectionUpdate",c);const u=Me(r,"onTransaction",s);u&&this.editor.on("transaction",u);const d=Me(r,"onFocus",s);d&&this.editor.on("focus",d);const f=Me(r,"onBlur",s);f&&this.editor.on("blur",f);const h=Me(r,"onDestroy",s);h&&this.editor.on("destroy",h)})}static resolve(e){const n=Sc.sort(Sc.flatten(e)),r=wxe(n.map(o=>o.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},o=Me(n,"addExtensions",r);return o?[n,...this.flatten(o())]:n}).flat(10)}static sort(e){return e.sort((n,r)=>{const o=Me(n,"priority")||100,s=Me(r,"priority")||100;return o>s?-1:o<s?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:sb(n.name,this.schema)},o=Me(n,"addCommands",r);return o?{...e,...o()}:e},{})}get plugins(){const{editor:e}=this,n=Sc.sort([...this.extensions].reverse()),r=[],o=[],s=n.map(i=>{const a={name:i.name,options:i.options,storage:i.storage,editor:e,type:sb(i.name,this.schema)},l=[],c=Me(i,"addKeyboardShortcuts",a);let u={};if(i.type==="mark"&&i.config.exitable&&(u.ArrowRight=()=>Uo.handleExit({editor:e,mark:i})),c){const m=Object.fromEntries(Object.entries(c()).map(([v,b])=>[v,()=>b({editor:e})]));u={...u,...m}}const d=Dke(u);l.push(d);const f=Me(i,"addInputRules",a);VE(i,e.options.enableInputRules)&&f&&r.push(...f());const h=Me(i,"addPasteRules",a);VE(i,e.options.enablePasteRules)&&h&&o.push(...h());const p=Me(i,"addProseMirrorPlugins",a);if(p){const m=p();l.push(...m)}return l}).flat();return[pxe({editor:e,rules:r}),...bxe({editor:e,rules:o}),...s]}get attributes(){return mR(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=u0(this.extensions);return Object.fromEntries(n.filter(r=>!!Me(r,"addNodeView")).map(r=>{const o=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:wn(r.name,this.schema)},i=Me(r,"addNodeView",s);if(!i)return[];const a=(l,c,u,d)=>{const f=Kw(l,o);return i()({editor:e,node:l,getPos:u,decorations:d,HTMLAttributes:f,extension:r})};return[r.name,a]}))}}function kxe(t){return Object.prototype.toString.call(t).slice(8,-1)}function ab(t){return kxe(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function f0(t,e){const n={...t};return ab(t)&&ab(e)&&Object.keys(e).forEach(r=>{ab(e[r])?r in t?n[r]=f0(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}class Un{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=nt(Me(this,"addOptions",{name:this.name}))),this.storage=nt(Me(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Un(e)}configure(e={}){const n=this.extend();return n.options=f0(this.options,e),n.storage=nt(Me(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new Un(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=nt(Me(n,"addOptions",{name:n.name})),n.storage=nt(Me(n,"addStorage",{name:n.name,options:n.options})),n}}function yR(t,e,n){const{from:r,to:o}=e,{blockSeparator:s=`

`,textSerializers:i={}}=n||{};let a="",l=!0;return t.nodesBetween(r,o,(c,u,d,f)=>{var h;const p=i==null?void 0:i[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,o-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function vR(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const xxe=Un.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Kn({key:new Wr("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:o}=e,{ranges:s}=o,i=Math.min(...s.map(c=>c.$from.pos)),a=Math.max(...s.map(c=>c.$to.pos)),l=vR(n);return yR(r,{from:i,to:a},{textSerializers:l})}}})]}}),Cxe=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),_xe=(t=!1)=>({commands:e})=>e.setContent("",t),Sxe=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:o}=r;return n&&o.forEach(({$from:s,$to:i})=>{t.doc.nodesBetween(s.pos,i.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=Qu(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},Txe=t=>e=>t(e),Mxe=()=>({state:t,dispatch:e})=>Jke(t,e),Exe=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const o=t.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===r.type){if(e){const i=o.before(s),a=o.after(s);t.delete(i,a).scrollIntoView()}return!0}return!1},Oxe=t=>({tr:e,state:n,dispatch:r})=>{const o=wn(t,n.schema),s=e.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===o){if(r){const a=s.before(i),l=s.after(i);e.delete(a,l).scrollIntoView()}return!0}return!1},Ixe=t=>({tr:e,dispatch:n})=>{const{from:r,to:o}=t;return n&&e.delete(r,o),!0},Axe=()=>({state:t,dispatch:e})=>$ke(t,e),Nxe=()=>({commands:t})=>t.keyboardShortcut("Enter"),Lxe=()=>({state:t,dispatch:e})=>Gke(t,e);function Qg(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>n.strict?e[o]===t[o]:UC(e[o])?e[o].test(t[o]):e[o]===t[o]):!0}function Gw(t,e,n={}){return t.find(r=>r.type===e&&Qg(r.attrs,n))}function Rxe(t,e,n={}){return!!Gw(t,e,n)}function qC(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&r.offset!==0&&(r=t.parent.childBefore(t.parentOffset)),!r.node)return;const o=Gw([...r.node.marks],e,n);if(!o)return;let s=r.index,i=t.start()+r.offset,a=s+1,l=i+r.node.nodeSize;for(Gw([...r.node.marks],e,n);s>0&&o.isInSet(t.parent.child(s-1).marks);)s-=1,i-=t.parent.child(s).nodeSize;for(;a<t.parent.childCount&&Rxe([...t.parent.child(a).marks],e,n);)l+=t.parent.child(a).nodeSize,a+=1;return{from:i,to:l}}function Aa(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const Pxe=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const s=Aa(t,r.schema),{doc:i,selection:a}=n,{$from:l,from:c,to:u}=a;if(o){const d=qC(l,s,e);if(d&&d.from<=c&&d.to>=u){const f=Je.create(i,d.from,d.to);n.setSelection(f)}}return!0},Dxe=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function WC(t){return t instanceof Je}function Ks(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function bR(t,e=null){if(!e)return null;const n=Be.atStart(t),r=Be.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const o=n.from,s=r.to;return e==="all"?Je.create(t,Ks(0,o,s),Ks(t.content.size,o,s)):Je.create(t,Ks(e,o,s),Ks(e,o,s))}function KC(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const $xe=(t=null,e={})=>({editor:n,view:r,tr:o,dispatch:s})=>{e={scrollIntoView:!0,...e};const i=()=>{KC()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!WC(n.state.selection))return i(),!0;const a=bR(o.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||o.setSelection(a),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),i()),!0},Hxe=(t,e)=>n=>t.every((r,o)=>e(r,{...n,index:o})),Fxe=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e);function UE(t){const e=`<body>${t}</body>`;return new window.DOMParser().parseFromString(e,"text/html").body}function Zg(t,e,n){if(n={slice:!0,parseOptions:{},...n},typeof t=="object"&&t!==null)try{return Array.isArray(t)&&t.length>0?oe.fromArray(t.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(t)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",r),Zg("",e,n)}if(typeof t=="string"){const r=xu.fromSchema(e);return n.slice?r.parseSlice(UE(t),n.parseOptions).content:r.parse(UE(t),n.parseOptions)}return Zg("",e,n)}function Bxe(t,e,n){const r=t.steps.length-1;if(r<e)return;const o=t.steps[r];if(!(o instanceof $n||o instanceof yn))return;const s=t.mapping.maps[r];let i=0;s.forEach((a,l,c,u)=>{i===0&&(i=u)}),t.setSelection(Be.near(t.doc.resolve(i),n))}const jxe=t=>t.toString().startsWith("<"),zxe=(t,e,n)=>({tr:r,dispatch:o,editor:s})=>{if(o){n={parseOptions:{},updateSelection:!0,...n};const i=Zg(e,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if(i.toString()==="<>")return!0;let{from:a,to:l}=typeof t=="number"?{from:t,to:t}:t,c=!0,u=!0;if((jxe(i)?i:[i]).forEach(d=>{d.check(),c=c?d.isText&&d.marks.length===0:!1,u=u?d.isBlock:!1}),a===l&&u){const{parent:d}=r.doc.resolve(a);d.isTextblock&&!d.type.spec.code&&!d.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(d=>d.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,i),n.updateSelection&&Bxe(r,r.steps.length-1,-1)}return!0},Vxe=()=>({state:t,dispatch:e})=>Uke(t,e),Uxe=()=>({state:t,dispatch:e})=>qke(t,e),qxe=()=>({state:t,dispatch:e})=>Fke(t,e),Wxe=()=>({state:t,dispatch:e})=>zke(t,e);function wR(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Kxe(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,o,s,i;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))KC()||wR()?i=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),i&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const Gxe=t=>({editor:e,view:n,tr:r,dispatch:o})=>{const s=Kxe(t).split(/-(?!$)/),i=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:i==="Space"?" ":i,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&o&&r.maybeStep(u)}),!0};function ch(t,e,n={}){const{from:r,to:o,empty:s}=t.selection,i=e?wn(e,t.schema):null,a=[];t.doc.nodesBetween(r,o,(u,d)=>{if(u.isText)return;const f=Math.max(r,d),h=Math.min(o,d+u.nodeSize);a.push({node:u,from:f,to:h})});const l=o-r,c=a.filter(u=>i?i.name===u.node.type.name:!0).filter(u=>Qg(u.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((u,d)=>u+d.to-d.from,0)>=l}const Jxe=(t,e={})=>({state:n,dispatch:r})=>{const o=wn(t,n.schema);return ch(n,o,e)?Wke(n,r):!1},Yxe=()=>({state:t,dispatch:e})=>Yke(t,e),Xxe=t=>({state:e,dispatch:n})=>{const r=wn(t,e.schema);return oxe(r)(e,n)},Qxe=()=>({state:t,dispatch:e})=>Kke(t,e);function h0(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function qE(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,o)=>(n.includes(o)||(r[o]=t[o]),r),{})}const Zxe=(t,e)=>({tr:n,state:r,dispatch:o})=>{let s=null,i=null;const a=h0(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=wn(t,r.schema)),a==="mark"&&(i=Aa(t,r.schema)),o&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&n.setNodeMarkup(u,void 0,qE(c.attrs,e)),i&&c.marks.length&&c.marks.forEach(d=>{i===d.type&&n.addMark(u,u+c.nodeSize,i.create(qE(d.attrs,e)))})})}),!0):!1},eCe=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),tCe=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),nCe=()=>({state:t,dispatch:e})=>Bke(t,e),rCe=()=>({state:t,dispatch:e})=>Vke(t,e),oCe=()=>({state:t,dispatch:e})=>Xke(t,e),sCe=()=>({state:t,dispatch:e})=>exe(t,e),iCe=()=>({state:t,dispatch:e})=>Zke(t,e);function kR(t,e,n={}){return Zg(t,e,{slice:!1,parseOptions:n})}const aCe=(t,e=!1,n={})=>({tr:r,editor:o,dispatch:s})=>{const{doc:i}=r,a=kR(t,o.schema,n);return s&&r.replaceWith(0,i.content.size,a).setMeta("preventUpdate",!e),!0};function lCe(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function xR(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function GC(t){return e=>xR(e.$from,t)}function cCe(t,e){const n=as.fromSchema(e).serializeFragment(t),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(n),r.innerHTML}function uCe(t,e){const n={from:0,to:t.content.size};return yR(t,n,e)}function p0(t,e){const n=Aa(e,t.schema),{from:r,to:o,empty:s}=t.selection,i=[];s?(t.storedMarks&&i.push(...t.storedMarks),i.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,o,l=>{i.push(...l.marks)});const a=i.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function dCe(t,e){const n=wn(e,t.schema),{from:r,to:o}=t.selection,s=[];t.doc.nodesBetween(r,o,a=>{s.push(a)});const i=s.reverse().find(a=>a.type.name===n.name);return i?{...i.attrs}:{}}function fCe(t,e){const n=h0(typeof e=="string"?e:e.name,t.schema);return n==="node"?dCe(t,e):n==="mark"?p0(t,e):{}}function CR(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(o=>{const s=n.resolve(t-1),i=qC(s,o.type);i&&r.push({mark:o,...i})}):n.nodesBetween(t,e,(o,s)=>{r.push(...o.marks.map(i=>({from:s,to:s+o.nodeSize,mark:i})))}),r}function xm(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const o=t.find(s=>s.type===e&&s.name===r);return o?o.attribute.keepOnSplit:!1}))}function Jw(t,e,n={}){const{empty:r,ranges:o}=t.selection,s=e?Aa(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(u=>s?s.name===u.type.name:!0).find(u=>Qg(u.attrs,n,{strict:!1}));let i=0;const a=[];if(o.forEach(({$from:u,$to:d})=>{const f=u.pos,h=d.pos;t.doc.nodesBetween(f,h,(p,m)=>{if(!p.isText&&!p.marks.length)return;const v=Math.max(f,m),b=Math.min(h,m+p.nodeSize),w=b-v;i+=w,a.push(...p.marks.map(k=>({mark:k,from:v,to:b})))})}),i===0)return!1;const l=a.filter(u=>s?s.name===u.mark.type.name:!0).filter(u=>Qg(u.mark.attrs,n,{strict:!1})).reduce((u,d)=>u+d.to-d.from,0),c=a.filter(u=>s?u.mark.type!==s&&u.mark.type.excludes(s):!0).reduce((u,d)=>u+d.to-d.from,0);return(l>0?l+c:l)>=i}function hCe(t,e,n={}){if(!e)return ch(t,null,n)||Jw(t,null,n);const r=h0(e,t.schema);return r==="node"?ch(t,e,n):r==="mark"?Jw(t,e,n):!1}function WE(t,e){const{nodeExtensions:n}=u0(e),r=n.find(i=>i.name===t);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},s=nt(Me(r,"group",o));return typeof s!="string"?!1:s.split(" ").includes("list")}function pCe(t){var e;const n=(e=t.type.createAndFill())===null||e===void 0?void 0:e.toJSON(),r=t.toJSON();return JSON.stringify(n)===JSON.stringify(r)}function mCe(t){return t instanceof He}function _R(t,e,n){const r=t.state.doc.content.size,o=Ks(e,0,r),s=Ks(n,0,r),i=t.coordsAtPos(o),a=t.coordsAtPos(s,-1),l=Math.min(i.top,a.top),c=Math.max(i.bottom,a.bottom),u=Math.min(i.left,a.left),d=Math.max(i.right,a.right),f=d-u,h=c-l,p={top:l,bottom:c,left:u,right:d,width:f,height:h,x:u,y:l};return{...p,toJSON:()=>p}}function gCe(t,e,n){var r;const{selection:o}=e;let s=null;if(WC(o)&&(s=o.$cursor),s){const a=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:i}=o;return i.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(n),p=!!n.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(n));c=h&&p}return!c}),c})}const yCe=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const{selection:s}=n,{empty:i,ranges:a}=s,l=Aa(t,r.schema);if(o)if(i){const c=p0(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(v=>v.type===l)?f.marks.forEach(v=>{l===v.type&&n.addMark(p,m,l.create({...v.attrs,...e}))}):n.addMark(p,m,l.create(e))})});return gCe(r,n,l)},vCe=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),bCe=(t,e={})=>({state:n,dispatch:r,chain:o})=>{const s=wn(t,n.schema);return s.isTextblock?o().command(({commands:i})=>BE(s,e)(n)?!0:i.clearNodes()).command(({state:i})=>BE(s,e)(i,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},wCe=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,o=Ks(t,0,r.content.size),s=He.create(r,o);e.setSelection(s)}return!0},kCe=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:o,to:s}=typeof t=="number"?{from:t,to:t}:t,i=Je.atStart(r).from,a=Je.atEnd(r).to,l=Ks(o,i,a),c=Ks(s,i,a),u=Je.create(r,l,c);e.setSelection(u)}return!0},xCe=t=>({state:e,dispatch:n})=>{const r=wn(t,e.schema);return axe(r)(e,n)};function KE(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(o=>e==null?void 0:e.includes(o.type.name));t.tr.ensureMarks(r)}}const CCe=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:o})=>{const{selection:s,doc:i}=e,{$from:a,$to:l}=s,c=o.extensionManager.attributes,u=xm(c,a.node().type.name,a.node().attrs);if(s instanceof He&&s.node.isBlock)return!a.parentOffset||!zc(i,a.pos)?!1:(r&&(t&&KE(n,o.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;s instanceof Je&&e.deleteSelection();const f=a.depth===0?void 0:lCe(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=zc(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&zc(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),v=e.doc.resolve(m);a.node(-1).canReplaceWith(v.index(),v.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&KE(n,o.extensionManager.splittableMarks),e.scrollIntoView()}return!0},_Ce=t=>({tr:e,state:n,dispatch:r,editor:o})=>{var s;const i=wn(t,n.schema),{$from:a,$to:l}=n.selection,c=n.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==i)return!1;const d=o.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==i||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let v=oe.empty;const b=a.index(-1)?1:a.index(-2)?2:3;for(let M=a.depth-b;M>=a.depth-3;M-=1)v=oe.from(a.node(M).copy(v));const w=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,k=xm(d,a.node().type.name,a.node().attrs),y=((s=i.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(k))||void 0;v=v.append(oe.from(i.createAndFill(null,y)||void 0));const C=a.before(a.depth-(b-1));e.replace(C,a.after(-w),new we(v,4-b,0));let _=-1;e.doc.nodesBetween(C,e.doc.content.size,(M,E)=>{if(_>-1)return!1;M.isTextblock&&M.content.size===0&&(_=E+1)}),_>-1&&e.setSelection(Je.near(e.doc.resolve(_))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=xm(d,u.type.name,u.attrs),p=xm(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=f?[{type:i,attrs:h},{type:f,attrs:p}]:[{type:i,attrs:h}];if(!zc(e.doc,a.pos,2))return!1;if(r){const{selection:v,storedMarks:b}=n,{splittableMarks:w}=o.extensionManager,k=b||v.$to.parentOffset&&v.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!k||!r)return!0;const y=k.filter(C=>w.includes(C.type.name));e.ensureMarks(y)}return!0},lb=(t,e)=>{const n=GC(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&Oa(t.doc,n.pos)&&t.join(n.pos),!0},cb=(t,e)=>{const n=GC(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&Oa(t.doc,r)&&t.join(r),!0},SCe=(t,e,n,r={})=>({editor:o,tr:s,state:i,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=o.extensionManager,h=wn(t,i.schema),p=wn(e,i.schema),{selection:m,storedMarks:v}=i,{$from:b,$to:w}=m,k=b.blockRange(w),y=v||m.$to.parentOffset&&m.$from.marks();if(!k)return!1;const C=GC(_=>WE(_.type.name,d))(m);if(k.depth>=1&&C&&k.depth-C.depth<=1){if(C.node.type===h)return c.liftListItem(p);if(WE(C.node.type.name,d)&&h.validContent(C.node.content)&&a)return l().command(()=>(s.setNodeMarkup(C.pos,h),!0)).command(()=>lb(s,h)).command(()=>cb(s,h)).run()}return!n||!y||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>lb(s,h)).command(()=>cb(s,h)).run():l().command(()=>{const _=u().wrapInList(h,r),M=y.filter(E=>f.includes(E.type.name));return s.ensureMarks(M),_?!0:c.clearNodes()}).wrapInList(h,r).command(()=>lb(s,h)).command(()=>cb(s,h)).run()},TCe=(t,e={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:s=!1}=n,i=Aa(t,r.schema);return Jw(r,i,e)?o.unsetMark(i,{extendEmptyMarkRange:s}):o.setMark(i,e)},MCe=(t,e,n={})=>({state:r,commands:o})=>{const s=wn(t,r.schema),i=wn(e,r.schema);return ch(r,s,n)?o.setNode(i):o.setNode(s,n)},ECe=(t,e={})=>({state:n,commands:r})=>{const o=wn(t,n.schema);return ch(n,o,e)?r.lift(o):r.wrapIn(o,e)},OCe=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let s;if(o.spec.isInputRules&&(s=o.getState(t))){if(e){const i=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)i.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=i.doc.resolve(s.from).marks();i.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else i.delete(s.from,s.to)}return!0}}return!1},ICe=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:o}=n;return r||e&&o.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},ACe=(t,e={})=>({tr:n,state:r,dispatch:o})=>{var s;const{extendEmptyMarkRange:i=!1}=e,{selection:a}=n,l=Aa(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!o)return!0;if(u&&i){let{from:f,to:h}=a;const p=(s=c.marks().find(v=>v.type===l))===null||s===void 0?void 0:s.attrs,m=qC(c,l,p);m&&(f=m.from,h=m.to),n.removeMark(f,h,l)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,l)});return n.removeStoredMark(l),!0},NCe=(t,e={})=>({tr:n,state:r,dispatch:o})=>{let s=null,i=null;const a=h0(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=wn(t,r.schema)),a==="mark"&&(i=Aa(t,r.schema)),o&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{s&&s===d.type&&n.setNodeMarkup(f,void 0,{...d.attrs,...e}),i&&d.marks.length&&d.marks.forEach(h=>{if(i===h.type){const p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);n.addMark(p,m,i.create({...h.attrs,...e}))}})})}),!0):!1},LCe=(t,e={})=>({state:n,dispatch:r})=>{const o=wn(t,n.schema);return txe(o,e)(n,r)},RCe=(t,e={})=>({state:n,dispatch:r})=>{const o=wn(t,n.schema);return nxe(o,e)(n,r)};var PCe=Object.freeze({__proto__:null,blur:Cxe,clearContent:_xe,clearNodes:Sxe,command:Txe,createParagraphNear:Mxe,deleteCurrentNode:Exe,deleteNode:Oxe,deleteRange:Ixe,deleteSelection:Axe,enter:Nxe,exitCode:Lxe,extendMarkRange:Pxe,first:Dxe,focus:$xe,forEach:Hxe,insertContent:Fxe,insertContentAt:zxe,joinUp:Vxe,joinDown:Uxe,joinBackward:qxe,joinForward:Wxe,keyboardShortcut:Gxe,lift:Jxe,liftEmptyBlock:Yxe,liftListItem:Xxe,newlineInCode:Qxe,resetAttributes:Zxe,scrollIntoView:eCe,selectAll:tCe,selectNodeBackward:nCe,selectNodeForward:rCe,selectParentNode:oCe,selectTextblockEnd:sCe,selectTextblockStart:iCe,setContent:aCe,setMark:yCe,setMeta:vCe,setNode:bCe,setNodeSelection:wCe,setTextSelection:kCe,sinkListItem:xCe,splitBlock:CCe,splitListItem:_Ce,toggleList:SCe,toggleMark:TCe,toggleNode:MCe,toggleWrap:ECe,undoInputRule:OCe,unsetAllMarks:ICe,unsetMark:ACe,updateAttributes:NCe,wrapIn:LCe,wrapInList:RCe});const DCe=Un.create({name:"commands",addCommands(){return{...PCe}}}),$Ce=Un.create({name:"editable",addProseMirrorPlugins(){return[new Kn({key:new Wr("editable"),props:{editable:()=>this.editor.options.editable}})]}}),HCe=Un.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Kn({key:new Wr("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),FCe=Un.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:i})=>{const{selection:a,doc:l}=i,{empty:c,$anchor:u}=a,{pos:d,parent:f}=u,h=Be.atStart(l).from===d;return!c||!h||!f.type.isTextblock||f.textContent.length?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},r={...n},o={...n,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return KC()||wR()?o:r},addProseMirrorPlugins(){return[new Kn({key:new Wr("clearDocument"),appendTransaction:(t,e,n)=>{if(!(t.some(d=>d.docChanged)&&!e.doc.eq(n.doc)))return;const{empty:r,from:o,to:s}=e.selection,i=Be.atStart(e.doc).from,a=Be.atEnd(e.doc).to;if(r||!(o===i&&s===a)||n.doc.textBetween(0,n.doc.content.size," "," ").length!==0)return;const l=n.tr,c=l0({state:n,transaction:l}),{commands:u}=new c0({editor:this.editor,state:c});if(u.clearNodes(),!!l.steps.length)return l}})]}}),BCe=Un.create({name:"tabindex",addProseMirrorPlugins(){return[new Kn({key:new Wr("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var jCe=Object.freeze({__proto__:null,ClipboardTextSerializer:xxe,Commands:DCe,Editable:$Ce,FocusEvents:HCe,Keymap:FCe,Tabindex:BCe});const zCe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function VCe(t,e){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.setAttribute("data-tiptap-style",""),r.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(r),r}let UCe=class extends lxe{constructor(t={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=VCe(zCe,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,e){const n=gR(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});this.view.updateState(r)}unregisterPlugin(t){if(this.isDestroyed)return;const e=typeof t=="string"?`${t}$`:t.key,n=this.state.reconfigure({plugins:this.state.plugins.filter(r=>!r.key.startsWith(e))});this.view.updateState(n)}createExtensionManager(){const t=[...this.options.enableCoreExtensions?Object.values(jCe):[],...this.options.extensions].filter(e=>["extension","node","mark"].includes(e==null?void 0:e.type));this.extensionManager=new Sc(t,this)}createCommandManager(){this.commandManager=new c0({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const t=kR(this.options.content,this.schema,this.options.parseOptions),e=bR(t,this.options.autofocus);this.view=new Mke(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:_c.create({doc:t,selection:e||void 0})});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.createNodeViews();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(s=>{var i;return(i=this.capturedTransaction)===null||i===void 0?void 0:i.step(s)});return}const e=this.state.apply(t),n=!this.state.selection.eq(e.selection);this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t}),n&&this.emit("selectionUpdate",{editor:this,transaction:t});const r=t.getMeta("focus"),o=t.getMeta("blur");r&&this.emit("focus",{editor:this,event:r.event,transaction:t}),o&&this.emit("blur",{editor:this,event:o.event,transaction:t}),!(!t.docChanged||t.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return fCe(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return hCe(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return cCe(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return uCe(this.state.doc,{blockSeparator:e,textSerializers:{...vR(this.schema),...n}})}get isEmpty(){return pCe(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var t;return!(!((t=this.view)===null||t===void 0)&&t.docView)}};function Eu(t){return new d0({find:t.find,handler:({state:e,range:n,match:r})=>{const o=nt(t.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:s}=e,i=r[r.length-1],a=r[0];let l=n.to;if(i){const c=a.search(/\S/),u=n.from+a.indexOf(i),d=u+i.length;if(CR(n.from,n.to,e.doc).filter(f=>f.mark.type.excluded.find(h=>h===t.type&&h!==f.mark.type)).filter(f=>f.to>u).length)return null;d<n.to&&s.delete(d,n.to),u>n.from&&s.delete(n.from+c,u),l=n.from+c+i.length,s.addMark(n.from+c,l,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}function qCe(t){return new d0({find:t.find,handler:({state:e,range:n,match:r})=>{const o=nt(t.getAttributes,void 0,r)||{},{tr:s}=e,i=n.from;let a=n.to;if(r[1]){const l=r[0].lastIndexOf(r[1]);let c=i+l;c>a?c=a:a=c+r[1].length;const u=r[0][r[0].length-1];s.insertText(u,i+r[0].length-1),s.replaceWith(c,a,t.type.create(o))}else r[0]&&s.replaceWith(i,a,t.type.create(o))}})}function Yw(t){return new d0({find:t.find,handler:({state:e,range:n,match:r})=>{const o=e.doc.resolve(n.from),s=nt(t.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function uh(t){return new d0({find:t.find,handler:({state:e,range:n,match:r,chain:o})=>{const s=nt(t.getAttributes,void 0,r)||{},i=e.tr.delete(n.from,n.to),a=i.doc.resolve(n.from).blockRange(),l=a&&AC(a,t.type,s);if(!l)return null;if(i.wrap(a,l),t.keepMarks&&t.editor){const{selection:u,storedMarks:d}=e,{splittableMarks:f}=t.editor.extensionManager,h=d||u.$to.parentOffset&&u.$from.marks();if(h){const p=h.filter(m=>f.includes(m.type.name));i.ensureMarks(p)}}if(t.keepAttributes){const u=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";o().updateAttributes(u,s).run()}const c=i.doc.resolve(n.from-1).nodeBefore;c&&c.type===t.type&&Oa(i.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,c))&&i.join(n.from-1)}})}class Uo{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=nt(Me(this,"addOptions",{name:this.name}))),this.storage=nt(Me(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Uo(e)}configure(e={}){const n=this.extend();return n.options=f0(this.options,e),n.storage=nt(Me(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new Uo(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=nt(Me(n,"addOptions",{name:n.name})),n.storage=nt(Me(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const s=o.marks();if(!s.find(a=>(a==null?void 0:a.type.name)===n.name))return!1;const i=s.find(a=>(a==null?void 0:a.type.name)===n.name);return i&&r.removeStoredMark(i),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}}class sn{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=nt(Me(this,"addOptions",{name:this.name}))),this.storage=nt(Me(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new sn(e)}configure(e={}){const n=this.extend();return n.options=f0(this.options,e),n.storage=nt(Me(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new sn(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=nt(Me(n,"addOptions",{name:n.name})),n.storage=nt(Me(n,"addStorage",{name:n.name,options:n.options})),n}}function Ou(t){return new gxe({find:t.find,handler:({state:e,range:n,match:r})=>{const o=nt(t.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:s}=e,i=r[r.length-1],a=r[0];let l=n.to;if(i){const c=a.search(/\S/),u=n.from+a.indexOf(i),d=u+i.length;if(CR(n.from,n.to,e.doc).filter(f=>f.mark.type.excluded.find(h=>h===t.type&&h!==f.mark.type)).filter(f=>f.to>u).length)return null;d<n.to&&s.delete(d,n.to),u>n.from&&s.delete(n.from+c,u),l=n.from+c+i.length,s.addMark(n.from+c,l,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}const WCe=/^\s*>\s$/,KCe=sn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Ht(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[uh({find:WCe,type:this.type})]}}),GCe=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,JCe=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,YCe=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,XCe=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,QCe=Uo.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Ht(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Eu({find:GCe,type:this.type}),Eu({find:YCe,type:this.type})]},addPasteRules(){return[Ou({find:JCe,type:this.type}),Ou({find:XCe,type:this.type})]}}),ZCe=sn.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Ht(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),GE=Uo.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",Ht(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=p0(t,this.type);return Object.entries(n).some(([,r])=>!!r)?!0:e.unsetMark(this.name)}}}}),JE=/^\s*([-+*])\s$/,e_e=sn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Ht(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ZCe.name,this.editor.getAttributes(GE.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=uh({find:JE,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=uh({find:JE,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(GE.name),editor:this.editor})),[t]}}),t_e=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,n_e=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,r_e=Uo.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Ht(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Eu({find:t_e,type:this.type})]},addPasteRules(){return[Ou({find:n_e,type:this.type})]}}),o_e=/^```([a-z]+)?[\s\n]$/,s_e=/^~~~([a-z]+)?[\s\n]$/,i_e=sn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;return[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0]||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Ht(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:o}=n;if(!o||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,i=r.parent.textContent.endsWith(`

`);return!s||!i?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:o,empty:s}=n;if(!s||o.parent.type!==this.type||o.parentOffset!==o.parent.nodeSize-2)return!1;const i=o.after();return i===void 0||r.nodeAt(i)?!1:t.commands.exitCode()}}},addInputRules(){return[Yw({find:o_e,type:this.type,getAttributes:t=>({language:t[1]})}),Yw({find:s_e,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Kn({key:new Wr("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,s=o==null?void 0:o.mode;if(!n||!s)return!1;const{tr:i}=t.state;return i.replaceSelectionWith(this.type.create({language:s})),i.setSelection(Je.near(i.doc.resolve(Math.max(0,i.selection.from-2)))),i.insertText(n.replace(/\r\n?/g,`
`)),i.setMeta("paste",!0),t.dispatch(i),!0}}})]}}),a_e=sn.create({name:"doc",topNode:!0,content:"block+"});function l_e(t={}){return new Kn({view(e){return new c_e(e,t)}})}class c_e{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let s=i=>{this[o](i)};return e.dom.addEventListener(o,s),{name:o,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=a?u.bottom:u.top;a&&l&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let o=this.editorView.dom.offsetParent;this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let s,i;if(!o||o==document.body&&getComputedStyle(o).position=="static")s=-pageXOffset,i=-pageYOffset;else{let a=o.getBoundingClientRect();s=a.left-o.scrollLeft,i=a.top-o.scrollTop}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-i+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=r&&r.type.spec.disableDropCursor,s=typeof o=="function"?o(this.editorView,n,e):o;if(n&&!s){let i=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=C7(this.editorView.state.doc,i,this.editorView.dragging.slice);a!=null&&(i=a)}this.setCursor(i),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const u_e=Un.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[l_e(this.options)]}});class qt extends Be{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return qt.valid(r)?new qt(r):Be.near(r)}content(){return we.empty}eq(e){return e instanceof qt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new qt(e.resolve(n.pos))}getBookmark(){return new JC(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!d_e(e)||!f_e(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let o=n.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&qt.valid(e))return e;let o=e.pos,s=null;for(let i=e.depth;;i--){let a=e.node(i);if(n>0?e.indexAfter(i)<a.childCount:e.index(i)>0){s=a.child(n>0?e.indexAfter(i):e.index(i)-1);break}else if(i==0)return null;o+=n;let l=e.doc.resolve(o);if(qt.valid(l))return l}for(;;){let i=n>0?s.firstChild:s.lastChild;if(!i){if(s.isAtom&&!s.isText&&!He.isSelectable(s)){e=e.doc.resolve(o+s.nodeSize*n),r=!1;continue e}break}s=i,o+=n;let a=e.doc.resolve(o);if(qt.valid(a))return a}return null}}}qt.prototype.visible=!1;qt.findFrom=qt.findGapCursorFrom;Be.jsonID("gapcursor",qt);class JC{constructor(e){this.pos=e}map(e){return new JC(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return qt.valid(n)?new qt(n):Be.near(n)}}function d_e(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function f_e(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function h_e(){return new Kn({props:{decorations:y_e,createSelectionBetween(t,e,n){return e.pos==n.pos&&qt.valid(n)?new qt(n):null},handleClick:m_e,handleKeyDown:p_e,handleDOMEvents:{beforeinput:g_e}}})}const p_e=VC({ArrowLeft:$p("horiz",-1),ArrowRight:$p("horiz",1),ArrowUp:$p("vert",-1),ArrowDown:$p("vert",1)});function $p(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,s){let i=r.selection,a=e>0?i.$to:i.$from,l=i.empty;if(i instanceof Je){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=qt.findGapCursorFrom(a,e,l);return c?(o&&o(r.tr.setSelection(new qt(c))),!0):!1}}function m_e(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!qt.valid(r))return!1;let o=t.posAtCoords({left:n.clientX,top:n.clientY});return o&&o.inside>-1&&He.isSelectable(t.state.doc.nodeAt(o.inside))?!1:(t.dispatch(t.state.tr.setSelection(new qt(r))),!0)}function g_e(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof qt))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let o=oe.empty;for(let i=r.length-1;i>=0;i--)o=oe.from(r[i].createAndFill(null,o));let s=t.state.tr.replace(n.pos,n.pos,new we(o,0,0));return s.setSelection(Je.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function y_e(t){if(!(t.selection instanceof qt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ut.create(t.doc,[mr.widget(t.selection.head,e,{key:"gapcursor"})])}const v_e=Un.create({name:"gapCursor",addProseMirrorPlugins(){return[h_e()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=nt(Me(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),b_e=sn.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Ht(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:o,storedMarks:s}=n;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:a}=r.extensionManager,l=s||o.$to.parentOffset&&o.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&i){const d=l.filter(f=>a.includes(f.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),w_e=sn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Ht(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Yw({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var ey=200,vn=function(){};vn.prototype.append=function(t){return t.length?(t=vn.from(t),!this.length&&t||t.length<ey&&this.leafAppend(t)||this.length<ey&&t.leafPrepend(this)||this.appendInner(t)):this};vn.prototype.prepend=function(t){return t.length?vn.from(t).append(this):this};vn.prototype.appendInner=function(t){return new k_e(this,t)};vn.prototype.slice=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=this.length),t>=e?vn.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))};vn.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};vn.prototype.forEach=function(t,e,n){e===void 0&&(e=0),n===void 0&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)};vn.prototype.map=function(t,e,n){e===void 0&&(e=0),n===void 0&&(n=this.length);var r=[];return this.forEach(function(o,s){return r.push(t(o,s))},e,n),r};vn.from=function(t){return t instanceof vn?t:t&&t.length?new SR(t):vn.empty};var SR=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(r,o){return r==0&&o==this.length?this:new e(this.values.slice(r,o))},e.prototype.getInner=function(r){return this.values[r]},e.prototype.forEachInner=function(r,o,s,i){for(var a=o;a<s;a++)if(r(this.values[a],i+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,s,i){for(var a=o-1;a>=s;a--)if(r(this.values[a],i+a)===!1)return!1},e.prototype.leafAppend=function(r){if(this.length+r.length<=ey)return new e(this.values.concat(r.flatten()))},e.prototype.leafPrepend=function(r){if(this.length+r.length<=ey)return new e(r.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(vn);vn.empty=new SR([]);var k_e=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,r,o,s){var i=this.left.length;if(r<i&&this.left.forEachInner(n,r,Math.min(o,i),s)===!1||o>i&&this.right.forEachInner(n,Math.max(r-i,0),Math.min(this.length,o)-i,s+i)===!1)return!1},e.prototype.forEachInvertedInner=function(n,r,o,s){var i=this.left.length;if(r>i&&this.right.forEachInvertedInner(n,r-i,Math.max(o,i)-i,s+i)===!1||o<i&&this.left.forEachInvertedInner(n,Math.min(r,i),o,s)===!1)return!1},e.prototype.sliceInner=function(n,r){if(n==0&&r==this.length)return this;var o=this.left.length;return r<=o?this.left.slice(n,r):n>=o?this.right.slice(n-o,r-o):this.left.slice(n,o).append(this.right.slice(0,r-o))},e.prototype.leafAppend=function(n){var r=this.right.leafAppend(n);if(r)return new e(this.left,r)},e.prototype.leafPrepend=function(n){var r=this.left.leafPrepend(n);if(r)return new e(r,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(vn);const x_e=500;class Po{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,s;n&&(o=this.remapping(r,this.items.length),s=o.maps.length);let i=e.tr,a,l,c=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){o||(o=this.remapping(r,f+1),s=o.maps.length),s--,u.push(d);return}if(o){u.push(new Jo(d.map));let h=d.step.map(o.slice(s)),p;h&&i.maybeStep(h).doc&&(p=i.mapping.maps[i.mapping.maps.length-1],c.push(new Jo(p,void 0,void 0,c.length+u.length))),s--,p&&o.appendMap(p,s)}else i.maybeStep(d.step);if(d.selection)return a=o?d.selection.map(o.slice(s)):d.selection,l=new Po(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:i,selection:a}}addTransform(e,n,r,o){let s=[],i=this.eventCount,a=this.items,l=!o&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),f=new Jo(e.mapping.maps[u],d,n),h;(h=l&&l.merge(f))&&(f=h,u?s.pop():a=a.slice(0,a.length-1)),s.push(f),n&&(i++,n=void 0),o||(l=f)}let c=i-r.depth;return c>__e&&(a=C_e(a,c),i-=c),new Po(a.append(s),i)}remapping(e,n){let r=new jc;return this.items.forEach((o,s)=>{let i=o.mirrorOffset!=null&&s-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,i)},e,n),r}addMaps(e){return this.eventCount==0?this:new Po(this.items.append(e.map(n=>new Jo(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-n),s=e.mapping,i=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},o);let l=n;this.items.forEach(f=>{let h=s.getMirror(--l);if(h==null)return;i=Math.min(i,h);let p=s.maps[h];if(f.step){let m=e.steps[h].invert(e.docs[h]),v=f.selection&&f.selection.map(s.slice(l+1,h));v&&a++,r.push(new Jo(p,m,v))}else r.push(new Jo(p))},o);let c=[];for(let f=n;f<i;f++)c.push(new Jo(s.maps[f]));let u=this.items.slice(0,o).append(c).append(r),d=new Po(u,a);return d.emptyItemCount()>x_e&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,o=[],s=0;return this.items.forEach((i,a)=>{if(a>=e)o.push(i),i.selection&&s++;else if(i.step){let l=i.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=i.selection&&i.selection.map(n.slice(r));u&&s++;let d=new Jo(c.invert(),l,u),f,h=o.length-1;(f=o.length&&o[h].merge(d))?o[h]=f:o.push(d)}}else i.map&&r--},this.items.length,0),new Po(vn.from(o.reverse()),s)}}Po.empty=new Po(vn.empty,0);function C_e(t,e){let n;return t.forEach((r,o)=>{if(r.selection&&e--==0)return n=o,!1}),t.slice(n)}class Jo{constructor(e,n,r,o){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Jo(n.getMap().invert(),n,this.selection)}}}class Ni{constructor(e,n,r,o,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=s}}const __e=20;function S_e(t,e,n,r){let o=n.getMeta(la),s;if(o)return o.historyState;n.getMeta(M_e)&&(t=new Ni(t.done,t.undone,null,0,-1));let i=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(i&&i.getMeta(la))return i.getMeta(la).redo?new Ni(t.done.addTransform(n,void 0,r,Cm(e)),t.undone,YE(n.mapping.maps[n.steps.length-1]),t.prevTime,t.prevComposition):new Ni(t.done,t.undone.addTransform(n,void 0,r,Cm(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(i&&i.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!i&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!T_e(n,t.prevRanges)),c=i?ub(t.prevRanges,n.mapping):YE(n.mapping.maps[n.steps.length-1]);return new Ni(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,Cm(e)),Po.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new Ni(t.done.rebased(n,s),t.undone.rebased(n,s),ub(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Ni(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),ub(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function T_e(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,o)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&o>=e[s]&&(n=!0)}),n}function YE(t){let e=[];return t.forEach((n,r,o,s)=>e.push(o,s)),e}function ub(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let o=e.map(t[r],1),s=e.map(t[r+1],-1);o<=s&&n.push(o,s)}return n}function TR(t,e,n,r){let o=Cm(e),s=la.get(e).spec.config,i=(r?t.undone:t.done).popEvent(e,o);if(!i)return;let a=i.selection.resolve(i.transform.doc),l=(r?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),s,o),c=new Ni(r?l:i.remaining,r?i.remaining:l,null,0,-1);n(i.transform.setSelection(a).setMeta(la,{redo:r,historyState:c}).scrollIntoView())}let db=!1,XE=null;function Cm(t){let e=t.plugins;if(XE!=e){db=!1,XE=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){db=!0;break}}return db}const la=new Wr("history"),M_e=new Wr("closeHistory");function E_e(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Kn({key:la,state:{init(){return new Ni(Po.empty,Po.empty,null,0,-1)},apply(e,n,r){return S_e(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,o=r=="historyUndo"?MR:r=="historyRedo"?ER:null;return o?(n.preventDefault(),o(e.state,e.dispatch)):!1}}}})}const MR=(t,e)=>{let n=la.getState(t);return!n||n.done.eventCount==0?!1:(e&&TR(n,t,e,!1),!0)},ER=(t,e)=>{let n=la.getState(t);return!n||n.undone.eventCount==0?!1:(e&&TR(n,t,e,!0),!0)},O_e=Un.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>MR(t,e),redo:()=>({state:t,dispatch:e})=>ER(t,e)}},addProseMirrorPlugins(){return[E_e(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),I_e=sn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Ht(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t})=>t().insertContent({type:this.name}).command(({tr:e,dispatch:n})=>{var r;if(n){const{$to:o}=e.selection,s=o.end();if(o.nodeAfter)e.setSelection(Je.create(e.doc,o.pos));else{const i=(r=o.parent.type.contentMatch.defaultType)===null||r===void 0?void 0:r.create();i&&(e.insert(s,i),e.setSelection(Je.create(e.doc,s)))}e.scrollIntoView()}return!0}).run()}},addInputRules(){return[qCe({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),A_e=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,N_e=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,L_e=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,R_e=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,P_e=Uo.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Ht(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Eu({find:A_e,type:this.type}),Eu({find:L_e,type:this.type})]},addPasteRules(){return[Ou({find:N_e,type:this.type}),Ou({find:R_e,type:this.type})]}}),D_e=sn.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Ht(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),$_e=sn.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Ht(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),QE=Uo.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",Ht(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=p0(t,this.type);return Object.entries(n).some(([,r])=>!!r)?!0:e.unsetMark(this.name)}}}}),ZE=/^(\d+)\.\s$/,H_e=sn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Ht(this.options.HTMLAttributes,n),0]:["ol",Ht(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes($_e.name,this.editor.getAttributes(QE.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=uh({find:ZE,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=uh({find:ZE,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(QE.name)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),F_e=sn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Ht(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),B_e=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,j_e=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,z_e=Uo.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Ht(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Eu({find:B_e,type:this.type})]},addPasteRules(){return[Ou({find:j_e,type:this.type})]}}),V_e=sn.create({name:"text",group:"inline"}),U_e=Un.create({name:"starterKit",addExtensions(){var t,e,n,r,o,s,i,a,l,c,u,d,f,h,p,m,v,b;const w=[];return this.options.blockquote!==!1&&w.push(KCe.configure((t=this.options)===null||t===void 0?void 0:t.blockquote)),this.options.bold!==!1&&w.push(QCe.configure((e=this.options)===null||e===void 0?void 0:e.bold)),this.options.bulletList!==!1&&w.push(e_e.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&w.push(r_e.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&w.push(i_e.configure((o=this.options)===null||o===void 0?void 0:o.codeBlock)),this.options.document!==!1&&w.push(a_e.configure((s=this.options)===null||s===void 0?void 0:s.document)),this.options.dropcursor!==!1&&w.push(u_e.configure((i=this.options)===null||i===void 0?void 0:i.dropcursor)),this.options.gapcursor!==!1&&w.push(v_e.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&w.push(b_e.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&w.push(w_e.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&w.push(O_e.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&w.push(I_e.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&w.push(P_e.configure((f=this.options)===null||f===void 0?void 0:f.italic)),this.options.listItem!==!1&&w.push(D_e.configure((h=this.options)===null||h===void 0?void 0:h.listItem)),this.options.orderedList!==!1&&w.push(H_e.configure((p=this.options)===null||p===void 0?void 0:p.orderedList)),this.options.paragraph!==!1&&w.push(F_e.configure((m=this.options)===null||m===void 0?void 0:m.paragraph)),this.options.strike!==!1&&w.push(z_e.configure((v=this.options)===null||v===void 0?void 0:v.strike)),this.options.text!==!1&&w.push(V_e.configure((b=this.options)===null||b===void 0?void 0:b.text)),w}}),q_e=Uo.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Ht(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),W_e=Un.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:"left"}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>t.style.textAlign||this.options.defaultAlignment,renderHTML:t=>t.textAlign===this.options.defaultAlignment?{}:{style:`text-align: ${t.textAlign}`}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.every(n=>e.updateAttributes(n,{textAlign:t})):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.every(e=>t.resetAttributes(e,"textAlign"))}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}});var kr="top",wo="bottom",ko="right",xr="left",YC="auto",Xh=[kr,wo,ko,xr],Iu="start",dh="end",K_e="clippingParents",OR="viewport",gd="popper",G_e="reference",e4=Xh.reduce(function(t,e){return t.concat([e+"-"+Iu,e+"-"+dh])},[]),IR=[].concat(Xh,[YC]).reduce(function(t,e){return t.concat([e,e+"-"+Iu,e+"-"+dh])},[]),J_e="beforeRead",Y_e="read",X_e="afterRead",Q_e="beforeMain",Z_e="main",e5e="afterMain",t5e="beforeWrite",n5e="write",r5e="afterWrite",o5e=[J_e,Y_e,X_e,Q_e,Z_e,e5e,t5e,n5e,r5e];function Cs(t){return t?(t.nodeName||"").toLowerCase():null}function zr(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Vl(t){var e=zr(t).Element;return t instanceof e||t instanceof Element}function po(t){var e=zr(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function XC(t){if(typeof ShadowRoot>"u")return!1;var e=zr(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function s5e(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},o=e.attributes[n]||{},s=e.elements[n];!po(s)||!Cs(s)||(Object.assign(s.style,r),Object.keys(o).forEach(function(i){var a=o[i];a===!1?s.removeAttribute(i):s.setAttribute(i,a===!0?"":a)}))})}function i5e(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var o=e.elements[r],s=e.attributes[r]||{},i=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=i.reduce(function(l,c){return l[c]="",l},{});!po(o)||!Cs(o)||(Object.assign(o.style,a),Object.keys(s).forEach(function(l){o.removeAttribute(l)}))})}}const AR={name:"applyStyles",enabled:!0,phase:"write",fn:s5e,effect:i5e,requires:["computeStyles"]};function ps(t){return t.split("-")[0]}var _l=Math.max,ty=Math.min,Au=Math.round;function Xw(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function NR(){return!/^((?!chrome|android).)*safari/i.test(Xw())}function Nu(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),o=1,s=1;e&&po(t)&&(o=t.offsetWidth>0&&Au(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&Au(r.height)/t.offsetHeight||1);var i=Vl(t)?zr(t):window,a=i.visualViewport,l=!NR()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/o,u=(r.top+(l&&a?a.offsetTop:0))/s,d=r.width/o,f=r.height/s;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c,x:c,y:u}}function QC(t){var e=Nu(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function LR(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&XC(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function si(t){return zr(t).getComputedStyle(t)}function a5e(t){return["table","td","th"].indexOf(Cs(t))>=0}function Na(t){return((Vl(t)?t.ownerDocument:t.document)||window.document).documentElement}function m0(t){return Cs(t)==="html"?t:t.assignedSlot||t.parentNode||(XC(t)?t.host:null)||Na(t)}function t4(t){return!po(t)||si(t).position==="fixed"?null:t.offsetParent}function l5e(t){var e=/firefox/i.test(Xw()),n=/Trident/i.test(Xw());if(n&&po(t)){var r=si(t);if(r.position==="fixed")return null}var o=m0(t);for(XC(o)&&(o=o.host);po(o)&&["html","body"].indexOf(Cs(o))<0;){var s=si(o);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return o;o=o.parentNode}return null}function Qh(t){for(var e=zr(t),n=t4(t);n&&a5e(n)&&si(n).position==="static";)n=t4(n);return n&&(Cs(n)==="html"||Cs(n)==="body"&&si(n).position==="static")?e:n||l5e(t)||e}function ZC(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Cf(t,e,n){return _l(t,ty(e,n))}function c5e(t,e,n){var r=Cf(t,e,n);return r>n?n:r}function RR(){return{top:0,right:0,bottom:0,left:0}}function PR(t){return Object.assign({},RR(),t)}function DR(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var u5e=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,PR(typeof t!="number"?t:DR(t,Xh))};function d5e(t){var e,n=t.state,r=t.name,o=t.options,s=n.elements.arrow,i=n.modifiersData.popperOffsets,a=ps(n.placement),l=ZC(a),c=[xr,ko].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!i)){var d=u5e(o.padding,n),f=QC(s),h=l==="y"?kr:xr,p=l==="y"?wo:ko,m=n.rects.reference[u]+n.rects.reference[l]-i[l]-n.rects.popper[u],v=i[l]-n.rects.reference[l],b=Qh(s),w=b?l==="y"?b.clientHeight||0:b.clientWidth||0:0,k=m/2-v/2,y=d[h],C=w-f[u]-d[p],_=w/2-f[u]/2+k,M=Cf(y,_,C),E=l;n.modifiersData[r]=(e={},e[E]=M,e.centerOffset=M-_,e)}}function f5e(t){var e=t.state,n=t.options,r=n.element,o=r===void 0?"[data-popper-arrow]":r;o!=null&&(typeof o=="string"&&(o=e.elements.popper.querySelector(o),!o)||LR(e.elements.popper,o)&&(e.elements.arrow=o))}const h5e={name:"arrow",enabled:!0,phase:"main",fn:d5e,effect:f5e,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Lu(t){return t.split("-")[1]}var p5e={top:"auto",right:"auto",bottom:"auto",left:"auto"};function m5e(t,e){var n=t.x,r=t.y,o=e.devicePixelRatio||1;return{x:Au(n*o)/o||0,y:Au(r*o)/o||0}}function n4(t){var e,n=t.popper,r=t.popperRect,o=t.placement,s=t.variation,i=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,f=i.x,h=f===void 0?0:f,p=i.y,m=p===void 0?0:p,v=typeof u=="function"?u({x:h,y:m}):{x:h,y:m};h=v.x,m=v.y;var b=i.hasOwnProperty("x"),w=i.hasOwnProperty("y"),k=xr,y=kr,C=window;if(c){var _=Qh(n),M="clientHeight",E="clientWidth";if(_===zr(n)&&(_=Na(n),si(_).position!=="static"&&a==="absolute"&&(M="scrollHeight",E="scrollWidth")),_=_,o===kr||(o===xr||o===ko)&&s===dh){y=wo;var O=d&&_===C&&C.visualViewport?C.visualViewport.height:_[M];m-=O-r.height,m*=l?1:-1}if(o===xr||(o===kr||o===wo)&&s===dh){k=ko;var N=d&&_===C&&C.visualViewport?C.visualViewport.width:_[E];h-=N-r.width,h*=l?1:-1}}var R=Object.assign({position:a},c&&p5e),I=u===!0?m5e({x:h,y:m},zr(n)):{x:h,y:m};if(h=I.x,m=I.y,l){var j;return Object.assign({},R,(j={},j[y]=w?"0":"",j[k]=b?"0":"",j.transform=(C.devicePixelRatio||1)<=1?"translate("+h+"px, "+m+"px)":"translate3d("+h+"px, "+m+"px, 0)",j))}return Object.assign({},R,(e={},e[y]=w?m+"px":"",e[k]=b?h+"px":"",e.transform="",e))}function g5e(t){var e=t.state,n=t.options,r=n.gpuAcceleration,o=r===void 0?!0:r,s=n.adaptive,i=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:ps(e.placement),variation:Lu(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,n4(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:i,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,n4(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const y5e={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:g5e,data:{}};var Hp={passive:!0};function v5e(t){var e=t.state,n=t.instance,r=t.options,o=r.scroll,s=o===void 0?!0:o,i=r.resize,a=i===void 0?!0:i,l=zr(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,Hp)}),a&&l.addEventListener("resize",n.update,Hp),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,Hp)}),a&&l.removeEventListener("resize",n.update,Hp)}}const b5e={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:v5e,data:{}};var w5e={left:"right",right:"left",bottom:"top",top:"bottom"};function _m(t){return t.replace(/left|right|bottom|top/g,function(e){return w5e[e]})}var k5e={start:"end",end:"start"};function r4(t){return t.replace(/start|end/g,function(e){return k5e[e]})}function e_(t){var e=zr(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function t_(t){return Nu(Na(t)).left+e_(t).scrollLeft}function x5e(t,e){var n=zr(t),r=Na(t),o=n.visualViewport,s=r.clientWidth,i=r.clientHeight,a=0,l=0;if(o){s=o.width,i=o.height;var c=NR();(c||!c&&e==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:s,height:i,x:a+t_(t),y:l}}function C5e(t){var e,n=Na(t),r=e_(t),o=(e=t.ownerDocument)==null?void 0:e.body,s=_l(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),i=_l(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),a=-r.scrollLeft+t_(t),l=-r.scrollTop;return si(o||n).direction==="rtl"&&(a+=_l(n.clientWidth,o?o.clientWidth:0)-s),{width:s,height:i,x:a,y:l}}function n_(t){var e=si(t),n=e.overflow,r=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function $R(t){return["html","body","#document"].indexOf(Cs(t))>=0?t.ownerDocument.body:po(t)&&n_(t)?t:$R(m0(t))}function _f(t,e){var n;e===void 0&&(e=[]);var r=$R(t),o=r===((n=t.ownerDocument)==null?void 0:n.body),s=zr(r),i=o?[s].concat(s.visualViewport||[],n_(r)?r:[]):r,a=e.concat(i);return o?a:a.concat(_f(m0(i)))}function Qw(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function _5e(t,e){var n=Nu(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function o4(t,e,n){return e===OR?Qw(x5e(t,n)):Vl(e)?_5e(e,n):Qw(C5e(Na(t)))}function S5e(t){var e=_f(m0(t)),n=["absolute","fixed"].indexOf(si(t).position)>=0,r=n&&po(t)?Qh(t):t;return Vl(r)?e.filter(function(o){return Vl(o)&&LR(o,r)&&Cs(o)!=="body"}):[]}function T5e(t,e,n,r){var o=e==="clippingParents"?S5e(t):[].concat(e),s=[].concat(o,[n]),i=s[0],a=s.reduce(function(l,c){var u=o4(t,c,r);return l.top=_l(u.top,l.top),l.right=ty(u.right,l.right),l.bottom=ty(u.bottom,l.bottom),l.left=_l(u.left,l.left),l},o4(t,i,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function HR(t){var e=t.reference,n=t.element,r=t.placement,o=r?ps(r):null,s=r?Lu(r):null,i=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(o){case kr:l={x:i,y:e.y-n.height};break;case wo:l={x:i,y:e.y+e.height};break;case ko:l={x:e.x+e.width,y:a};break;case xr:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=o?ZC(o):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case Iu:l[c]=l[c]-(e[u]/2-n[u]/2);break;case dh:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function fh(t,e){e===void 0&&(e={});var n=e,r=n.placement,o=r===void 0?t.placement:r,s=n.strategy,i=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?K_e:a,c=n.rootBoundary,u=c===void 0?OR:c,d=n.elementContext,f=d===void 0?gd:d,h=n.altBoundary,p=h===void 0?!1:h,m=n.padding,v=m===void 0?0:m,b=PR(typeof v!="number"?v:DR(v,Xh)),w=f===gd?G_e:gd,k=t.rects.popper,y=t.elements[p?w:f],C=T5e(Vl(y)?y:y.contextElement||Na(t.elements.popper),l,u,i),_=Nu(t.elements.reference),M=HR({reference:_,element:k,strategy:"absolute",placement:o}),E=Qw(Object.assign({},k,M)),O=f===gd?E:_,N={top:C.top-O.top+b.top,bottom:O.bottom-C.bottom+b.bottom,left:C.left-O.left+b.left,right:O.right-C.right+b.right},R=t.modifiersData.offset;if(f===gd&&R){var I=R[o];Object.keys(N).forEach(function(j){var de=[ko,wo].indexOf(j)>=0?1:-1,te=[kr,wo].indexOf(j)>=0?"y":"x";N[j]+=I[te]*de})}return N}function M5e(t,e){e===void 0&&(e={});var n=e,r=n.placement,o=n.boundary,s=n.rootBoundary,i=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?IR:l,u=Lu(r),d=u?a?e4:e4.filter(function(p){return Lu(p)===u}):Xh,f=d.filter(function(p){return c.indexOf(p)>=0});f.length===0&&(f=d);var h=f.reduce(function(p,m){return p[m]=fh(t,{placement:m,boundary:o,rootBoundary:s,padding:i})[ps(m)],p},{});return Object.keys(h).sort(function(p,m){return h[p]-h[m]})}function E5e(t){if(ps(t)===YC)return[];var e=_m(t);return[r4(t),e,r4(e)]}function O5e(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var o=n.mainAxis,s=o===void 0?!0:o,i=n.altAxis,a=i===void 0?!0:i,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,p=h===void 0?!0:h,m=n.allowedAutoPlacements,v=e.options.placement,b=ps(v),w=b===v,k=l||(w||!p?[_m(v)]:E5e(v)),y=[v].concat(k).reduce(function(Re,Ke){return Re.concat(ps(Ke)===YC?M5e(e,{placement:Ke,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:m}):Ke)},[]),C=e.rects.reference,_=e.rects.popper,M=new Map,E=!0,O=y[0],N=0;N<y.length;N++){var R=y[N],I=ps(R),j=Lu(R)===Iu,de=[kr,wo].indexOf(I)>=0,te=de?"width":"height",Q=fh(e,{placement:R,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),ie=de?j?ko:xr:j?wo:kr;C[te]>_[te]&&(ie=_m(ie));var z=_m(ie),ge=[];if(s&&ge.push(Q[I]<=0),a&&ge.push(Q[ie]<=0,Q[z]<=0),ge.every(function(Re){return Re})){O=R,E=!1;break}M.set(R,ge)}if(E)for(var ve=p?3:1,be=function(Re){var Ke=y.find(function(je){var K=M.get(je);if(K)return K.slice(0,Re).every(function(le){return le})});if(Ke)return O=Ke,"break"},Se=ve;Se>0;Se--){var Ee=be(Se);if(Ee==="break")break}e.placement!==O&&(e.modifiersData[r]._skip=!0,e.placement=O,e.reset=!0)}}const I5e={name:"flip",enabled:!0,phase:"main",fn:O5e,requiresIfExists:["offset"],data:{_skip:!1}};function s4(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function i4(t){return[kr,ko,wo,xr].some(function(e){return t[e]>=0})}function A5e(t){var e=t.state,n=t.name,r=e.rects.reference,o=e.rects.popper,s=e.modifiersData.preventOverflow,i=fh(e,{elementContext:"reference"}),a=fh(e,{altBoundary:!0}),l=s4(i,r),c=s4(a,o,s),u=i4(l),d=i4(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const N5e={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:A5e};function L5e(t,e,n){var r=ps(t),o=[xr,kr].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,i=s[0],a=s[1];return i=i||0,a=(a||0)*o,[xr,ko].indexOf(r)>=0?{x:a,y:i}:{x:i,y:a}}function R5e(t){var e=t.state,n=t.options,r=t.name,o=n.offset,s=o===void 0?[0,0]:o,i=IR.reduce(function(u,d){return u[d]=L5e(d,e.rects,s),u},{}),a=i[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=i}const P5e={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:R5e};function D5e(t){var e=t.state,n=t.name;e.modifiersData[n]=HR({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const $5e={name:"popperOffsets",enabled:!0,phase:"read",fn:D5e,data:{}};function H5e(t){return t==="x"?"y":"x"}function F5e(t){var e=t.state,n=t.options,r=t.name,o=n.mainAxis,s=o===void 0?!0:o,i=n.altAxis,a=i===void 0?!1:i,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,f=n.tether,h=f===void 0?!0:f,p=n.tetherOffset,m=p===void 0?0:p,v=fh(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),b=ps(e.placement),w=Lu(e.placement),k=!w,y=ZC(b),C=H5e(y),_=e.modifiersData.popperOffsets,M=e.rects.reference,E=e.rects.popper,O=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,N=typeof O=="number"?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),R=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,I={x:0,y:0};if(_){if(s){var j,de=y==="y"?kr:xr,te=y==="y"?wo:ko,Q=y==="y"?"height":"width",ie=_[y],z=ie+v[de],ge=ie-v[te],ve=h?-E[Q]/2:0,be=w===Iu?M[Q]:E[Q],Se=w===Iu?-E[Q]:-M[Q],Ee=e.elements.arrow,Re=h&&Ee?QC(Ee):{width:0,height:0},Ke=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:RR(),je=Ke[de],K=Ke[te],le=Cf(0,M[Q],Re[Q]),G=k?M[Q]/2-ve-le-je-N.mainAxis:be-le-je-N.mainAxis,Z=k?-M[Q]/2+ve+le+K+N.mainAxis:Se+le+K+N.mainAxis,ze=e.elements.arrow&&Qh(e.elements.arrow),st=ze?y==="y"?ze.clientTop||0:ze.clientLeft||0:0,P=(j=R==null?void 0:R[y])!=null?j:0,$=ie+G-P-st,U=ie+Z-P,X=Cf(h?ty(z,$):z,ie,h?_l(ge,U):ge);_[y]=X,I[y]=X-ie}if(a){var J,se=y==="x"?kr:xr,fe=y==="x"?wo:ko,A=_[C],L=C==="y"?"height":"width",F=A+v[se],W=A-v[fe],ue=[kr,xr].indexOf(b)!==-1,ne=(J=R==null?void 0:R[C])!=null?J:0,B=ue?F:A-M[L]-E[L]-ne+N.altAxis,q=ue?A+M[L]+E[L]-ne-N.altAxis:W,Oe=h&&ue?c5e(B,A,q):Cf(h?B:F,A,h?q:W);_[C]=Oe,I[C]=Oe-A}e.modifiersData[r]=I}}const B5e={name:"preventOverflow",enabled:!0,phase:"main",fn:F5e,requiresIfExists:["offset"]};function j5e(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function z5e(t){return t===zr(t)||!po(t)?e_(t):j5e(t)}function V5e(t){var e=t.getBoundingClientRect(),n=Au(e.width)/t.offsetWidth||1,r=Au(e.height)/t.offsetHeight||1;return n!==1||r!==1}function U5e(t,e,n){n===void 0&&(n=!1);var r=po(e),o=po(e)&&V5e(e),s=Na(e),i=Nu(t,o,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Cs(e)!=="body"||n_(s))&&(a=z5e(e)),po(e)?(l=Nu(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=t_(s))),{x:i.left+a.scrollLeft-l.x,y:i.top+a.scrollTop-l.y,width:i.width,height:i.height}}function q5e(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function o(s){n.add(s.name);var i=[].concat(s.requires||[],s.requiresIfExists||[]);i.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&o(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||o(s)}),r}function W5e(t){var e=q5e(t);return o5e.reduce(function(n,r){return n.concat(e.filter(function(o){return o.phase===r}))},[])}function K5e(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function G5e(t){var e=t.reduce(function(n,r){var o=n[r.name];return n[r.name]=o?Object.assign({},o,r,{options:Object.assign({},o.options,r.options),data:Object.assign({},o.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var a4={placement:"bottom",modifiers:[],strategy:"absolute"};function l4(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function J5e(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,o=e.defaultOptions,s=o===void 0?a4:o;return function(i,a,l){l===void 0&&(l=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},a4,s),modifiersData:{},elements:{reference:i,popper:a},attributes:{},styles:{}},u=[],d=!1,f={state:c,setOptions:function(m){var v=typeof m=="function"?m(c.options):m;p(),c.options=Object.assign({},s,c.options,v),c.scrollParents={reference:Vl(i)?_f(i):i.contextElement?_f(i.contextElement):[],popper:_f(a)};var b=W5e(G5e([].concat(r,c.options.modifiers)));return c.orderedModifiers=b.filter(function(w){return w.enabled}),h(),f.update()},forceUpdate:function(){if(!d){var m=c.elements,v=m.reference,b=m.popper;if(l4(v,b)){c.rects={reference:U5e(v,Qh(b),c.options.strategy==="fixed"),popper:QC(b)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(E){return c.modifiersData[E.name]=Object.assign({},E.data)});for(var w=0;w<c.orderedModifiers.length;w++){if(c.reset===!0){c.reset=!1,w=-1;continue}var k=c.orderedModifiers[w],y=k.fn,C=k.options,_=C===void 0?{}:C,M=k.name;typeof y=="function"&&(c=y({state:c,options:_,name:M,instance:f})||c)}}}},update:K5e(function(){return new Promise(function(m){f.forceUpdate(),m(c)})}),destroy:function(){p(),d=!0}};if(!l4(i,a))return f;f.setOptions(l).then(function(m){!d&&l.onFirstUpdate&&l.onFirstUpdate(m)});function h(){c.orderedModifiers.forEach(function(m){var v=m.name,b=m.options,w=b===void 0?{}:b,k=m.effect;if(typeof k=="function"){var y=k({state:c,name:v,instance:f,options:w}),C=function(){};u.push(y||C)}})}function p(){u.forEach(function(m){return m()}),u=[]}return f}}var Y5e=[b5e,$5e,y5e,AR,P5e,I5e,B5e,h5e,N5e],X5e=J5e({defaultModifiers:Y5e}),Q5e="tippy-box",FR="tippy-content",Z5e="tippy-backdrop",BR="tippy-arrow",jR="tippy-svg-arrow",Ka={passive:!0,capture:!0},zR=function(){return document.body};function fb(t,e,n){if(Array.isArray(t)){var r=t[e];return r??(Array.isArray(n)?n[e]:n)}return t}function r_(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function VR(t,e){return typeof t=="function"?t.apply(void 0,e):t}function c4(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function eSe(t){return t.split(/\s+/).filter(Boolean)}function wc(t){return[].concat(t)}function u4(t,e){t.indexOf(e)===-1&&t.push(e)}function tSe(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function nSe(t){return t.split("-")[0]}function ny(t){return[].slice.call(t)}function d4(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function Sf(){return document.createElement("div")}function g0(t){return["Element","Fragment"].some(function(e){return r_(t,e)})}function rSe(t){return r_(t,"NodeList")}function oSe(t){return r_(t,"MouseEvent")}function sSe(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function iSe(t){return g0(t)?[t]:rSe(t)?ny(t):Array.isArray(t)?t:ny(document.querySelectorAll(t))}function hb(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function f4(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function aSe(t){var e,n=wc(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function lSe(t,e){var n=e.clientX,r=e.clientY;return t.every(function(o){var s=o.popperRect,i=o.popperState,a=o.props,l=a.interactiveBorder,c=nSe(i.placement),u=i.modifiersData.offset;if(!u)return!0;var d=c==="bottom"?u.top.y:0,f=c==="top"?u.bottom.y:0,h=c==="right"?u.left.x:0,p=c==="left"?u.right.x:0,m=s.top-r+d>l,v=r-s.bottom-f>l,b=s.left-n+h>l,w=n-s.right-p>l;return m||v||b||w})}function pb(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(o){t[r](o,n)})}function h4(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var Zo={isTouch:!1},p4=0;function cSe(){Zo.isTouch||(Zo.isTouch=!0,window.performance&&document.addEventListener("mousemove",UR))}function UR(){var t=performance.now();t-p4<20&&(Zo.isTouch=!1,document.removeEventListener("mousemove",UR)),p4=t}function uSe(){var t=document.activeElement;if(sSe(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function dSe(){document.addEventListener("touchstart",cSe,Ka),window.addEventListener("blur",uSe)}var fSe=typeof window<"u"&&typeof document<"u",hSe=fSe?!!window.msCrypto:!1,pSe={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},mSe={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Ho=Object.assign({appendTo:zR,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},pSe,mSe),gSe=Object.keys(Ho),ySe=function(t){var e=Object.keys(t);e.forEach(function(n){Ho[n]=t[n]})};function qR(t){var e=t.plugins||[],n=e.reduce(function(r,o){var s=o.name,i=o.defaultValue;if(s){var a;r[s]=t[s]!==void 0?t[s]:(a=Ho[s])!=null?a:i}return r},{});return Object.assign({},t,n)}function vSe(t,e){var n=e?Object.keys(qR(Object.assign({},Ho,{plugins:e}))):gSe,r=n.reduce(function(o,s){var i=(t.getAttribute("data-tippy-"+s)||"").trim();if(!i)return o;if(s==="content")o[s]=i;else try{o[s]=JSON.parse(i)}catch{o[s]=i}return o},{});return r}function m4(t,e){var n=Object.assign({},e,{content:VR(e.content,[t])},e.ignoreAttributes?{}:vSe(t,e.plugins));return n.aria=Object.assign({},Ho.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var bSe=function(){return"innerHTML"};function Zw(t,e){t[bSe()]=e}function g4(t){var e=Sf();return t===!0?e.className=BR:(e.className=jR,g0(t)?e.appendChild(t):Zw(e,t)),e}function y4(t,e){g0(e.content)?(Zw(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?Zw(t,e.content):t.textContent=e.content)}function ek(t){var e=t.firstElementChild,n=ny(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(FR)}),arrow:n.find(function(r){return r.classList.contains(BR)||r.classList.contains(jR)}),backdrop:n.find(function(r){return r.classList.contains(Z5e)})}}function WR(t){var e=Sf(),n=Sf();n.className=Q5e,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=Sf();r.className=FR,r.setAttribute("data-state","hidden"),y4(r,t.props),e.appendChild(n),n.appendChild(r),o(t.props,t.props);function o(s,i){var a=ek(e),l=a.box,c=a.content,u=a.arrow;i.theme?l.setAttribute("data-theme",i.theme):l.removeAttribute("data-theme"),typeof i.animation=="string"?l.setAttribute("data-animation",i.animation):l.removeAttribute("data-animation"),i.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof i.maxWidth=="number"?i.maxWidth+"px":i.maxWidth,i.role?l.setAttribute("role",i.role):l.removeAttribute("role"),(s.content!==i.content||s.allowHTML!==i.allowHTML)&&y4(c,t.props),i.arrow?u?s.arrow!==i.arrow&&(l.removeChild(u),l.appendChild(g4(i.arrow))):l.appendChild(g4(i.arrow)):u&&l.removeChild(u)}return{popper:e,onUpdate:o}}WR.$$tippy=!0;var wSe=1,Fp=[],mb=[];function kSe(t,e){var n=m4(t,Object.assign({},Ho,qR(d4(e)))),r,o,s,i=!1,a=!1,l=!1,c=!1,u,d,f,h=[],p=c4($,n.interactiveDebounce),m,v=wSe++,b=null,w=tSe(n.plugins),k={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},y={id:v,reference:t,popper:Sf(),popperInstance:b,props:n,state:k,plugins:w,clearDelayTimeouts:B,setProps:q,setContent:Oe,show:Ne,hide:bt,hideWithInteractivity:tn,enable:ue,disable:ne,unmount:kn,destroy:fi};if(!n.render)return y;var C=n.render(y),_=C.popper,M=C.onUpdate;_.setAttribute("data-tippy-root",""),_.id="tippy-"+y.id,y.popper=_,t._tippy=y,_._tippy=y;var E=w.map(function(D){return D.fn(y)}),O=t.hasAttribute("aria-expanded");return ze(),ve(),ie(),z("onCreate",[y]),n.showOnCreate&&F(),_.addEventListener("mouseenter",function(){y.props.interactive&&y.state.isVisible&&y.clearDelayTimeouts()}),_.addEventListener("mouseleave",function(){y.props.interactive&&y.props.trigger.indexOf("mouseenter")>=0&&de().addEventListener("mousemove",p)}),y;function N(){var D=y.props.touch;return Array.isArray(D)?D:[D,0]}function R(){return N()[0]==="hold"}function I(){var D;return!!((D=y.props.render)!=null&&D.$$tippy)}function j(){return m||t}function de(){var D=j().parentNode;return D?aSe(D):document}function te(){return ek(_)}function Q(D){return y.state.isMounted&&!y.state.isVisible||Zo.isTouch||u&&u.type==="focus"?0:fb(y.props.delay,D?0:1,Ho.delay)}function ie(D){D===void 0&&(D=!1),_.style.pointerEvents=y.props.interactive&&!D?"":"none",_.style.zIndex=""+y.props.zIndex}function z(D,ee,re){if(re===void 0&&(re=!0),E.forEach(function(_e){_e[D]&&_e[D].apply(_e,ee)}),re){var Ce;(Ce=y.props)[D].apply(Ce,ee)}}function ge(){var D=y.props.aria;if(D.content){var ee="aria-"+D.content,re=_.id,Ce=wc(y.props.triggerTarget||t);Ce.forEach(function(_e){var wt=_e.getAttribute(ee);if(y.state.isVisible)_e.setAttribute(ee,wt?wt+" "+re:re);else{var Rt=wt&&wt.replace(re,"").trim();Rt?_e.setAttribute(ee,Rt):_e.removeAttribute(ee)}})}}function ve(){if(!(O||!y.props.aria.expanded)){var D=wc(y.props.triggerTarget||t);D.forEach(function(ee){y.props.interactive?ee.setAttribute("aria-expanded",y.state.isVisible&&ee===j()?"true":"false"):ee.removeAttribute("aria-expanded")})}}function be(){de().removeEventListener("mousemove",p),Fp=Fp.filter(function(D){return D!==p})}function Se(D){if(!(Zo.isTouch&&(l||D.type==="mousedown"))){var ee=D.composedPath&&D.composedPath()[0]||D.target;if(!(y.props.interactive&&h4(_,ee))){if(wc(y.props.triggerTarget||t).some(function(re){return h4(re,ee)})){if(Zo.isTouch||y.state.isVisible&&y.props.trigger.indexOf("click")>=0)return}else z("onClickOutside",[y,D]);y.props.hideOnClick===!0&&(y.clearDelayTimeouts(),y.hide(),a=!0,setTimeout(function(){a=!1}),y.state.isMounted||je())}}}function Ee(){l=!0}function Re(){l=!1}function Ke(){var D=de();D.addEventListener("mousedown",Se,!0),D.addEventListener("touchend",Se,Ka),D.addEventListener("touchstart",Re,Ka),D.addEventListener("touchmove",Ee,Ka)}function je(){var D=de();D.removeEventListener("mousedown",Se,!0),D.removeEventListener("touchend",Se,Ka),D.removeEventListener("touchstart",Re,Ka),D.removeEventListener("touchmove",Ee,Ka)}function K(D,ee){G(D,function(){!y.state.isVisible&&_.parentNode&&_.parentNode.contains(_)&&ee()})}function le(D,ee){G(D,ee)}function G(D,ee){var re=te().box;function Ce(_e){_e.target===re&&(pb(re,"remove",Ce),ee())}if(D===0)return ee();pb(re,"remove",d),pb(re,"add",Ce),d=Ce}function Z(D,ee,re){re===void 0&&(re=!1);var Ce=wc(y.props.triggerTarget||t);Ce.forEach(function(_e){_e.addEventListener(D,ee,re),h.push({node:_e,eventType:D,handler:ee,options:re})})}function ze(){R()&&(Z("touchstart",P,{passive:!0}),Z("touchend",U,{passive:!0})),eSe(y.props.trigger).forEach(function(D){if(D!=="manual")switch(Z(D,P),D){case"mouseenter":Z("mouseleave",U);break;case"focus":Z(hSe?"focusout":"blur",X);break;case"focusin":Z("focusout",X);break}})}function st(){h.forEach(function(D){var ee=D.node,re=D.eventType,Ce=D.handler,_e=D.options;ee.removeEventListener(re,Ce,_e)}),h=[]}function P(D){var ee,re=!1;if(!(!y.state.isEnabled||J(D)||a)){var Ce=((ee=u)==null?void 0:ee.type)==="focus";u=D,m=D.currentTarget,ve(),!y.state.isVisible&&oSe(D)&&Fp.forEach(function(_e){return _e(D)}),D.type==="click"&&(y.props.trigger.indexOf("mouseenter")<0||i)&&y.props.hideOnClick!==!1&&y.state.isVisible?re=!0:F(D),D.type==="click"&&(i=!re),re&&!Ce&&W(D)}}function $(D){var ee=D.target,re=j().contains(ee)||_.contains(ee);if(!(D.type==="mousemove"&&re)){var Ce=L().concat(_).map(function(_e){var wt,Rt=_e._tippy,Er=(wt=Rt.popperInstance)==null?void 0:wt.state;return Er?{popperRect:_e.getBoundingClientRect(),popperState:Er,props:n}:null}).filter(Boolean);lSe(Ce,D)&&(be(),W(D))}}function U(D){var ee=J(D)||y.props.trigger.indexOf("click")>=0&&i;if(!ee){if(y.props.interactive){y.hideWithInteractivity(D);return}W(D)}}function X(D){y.props.trigger.indexOf("focusin")<0&&D.target!==j()||y.props.interactive&&D.relatedTarget&&_.contains(D.relatedTarget)||W(D)}function J(D){return Zo.isTouch?R()!==D.type.indexOf("touch")>=0:!1}function se(){fe();var D=y.props,ee=D.popperOptions,re=D.placement,Ce=D.offset,_e=D.getReferenceClientRect,wt=D.moveTransition,Rt=I()?ek(_).arrow:null,Er=_e?{getBoundingClientRect:_e,contextElement:_e.contextElement||j()}:t,Os={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Is){var Or=Is.state;if(I()){var b0=te(),La=b0.box;["placement","reference-hidden","escaped"].forEach(function(As){As==="placement"?La.setAttribute("data-placement",Or.placement):Or.attributes.popper["data-popper-"+As]?La.setAttribute("data-"+As,""):La.removeAttribute("data-"+As)}),Or.attributes.popper={}}}},Gn=[{name:"offset",options:{offset:Ce}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!wt}},Os];I()&&Rt&&Gn.push({name:"arrow",options:{element:Rt,padding:3}}),Gn.push.apply(Gn,(ee==null?void 0:ee.modifiers)||[]),y.popperInstance=X5e(Er,_,Object.assign({},ee,{placement:re,onFirstUpdate:f,modifiers:Gn}))}function fe(){y.popperInstance&&(y.popperInstance.destroy(),y.popperInstance=null)}function A(){var D=y.props.appendTo,ee,re=j();y.props.interactive&&D===zR||D==="parent"?ee=re.parentNode:ee=VR(D,[re]),ee.contains(_)||ee.appendChild(_),y.state.isMounted=!0,se()}function L(){return ny(_.querySelectorAll("[data-tippy-root]"))}function F(D){y.clearDelayTimeouts(),D&&z("onTrigger",[y,D]),Ke();var ee=Q(!0),re=N(),Ce=re[0],_e=re[1];Zo.isTouch&&Ce==="hold"&&_e&&(ee=_e),ee?r=setTimeout(function(){y.show()},ee):y.show()}function W(D){if(y.clearDelayTimeouts(),z("onUntrigger",[y,D]),!y.state.isVisible){je();return}if(!(y.props.trigger.indexOf("mouseenter")>=0&&y.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(D.type)>=0&&i)){var ee=Q(!1);ee?o=setTimeout(function(){y.state.isVisible&&y.hide()},ee):s=requestAnimationFrame(function(){y.hide()})}}function ue(){y.state.isEnabled=!0}function ne(){y.hide(),y.state.isEnabled=!1}function B(){clearTimeout(r),clearTimeout(o),cancelAnimationFrame(s)}function q(D){if(!y.state.isDestroyed){z("onBeforeUpdate",[y,D]),st();var ee=y.props,re=m4(t,Object.assign({},ee,d4(D),{ignoreAttributes:!0}));y.props=re,ze(),ee.interactiveDebounce!==re.interactiveDebounce&&(be(),p=c4($,re.interactiveDebounce)),ee.triggerTarget&&!re.triggerTarget?wc(ee.triggerTarget).forEach(function(Ce){Ce.removeAttribute("aria-expanded")}):re.triggerTarget&&t.removeAttribute("aria-expanded"),ve(),ie(),M&&M(ee,re),y.popperInstance&&(se(),L().forEach(function(Ce){requestAnimationFrame(Ce._tippy.popperInstance.forceUpdate)})),z("onAfterUpdate",[y,D])}}function Oe(D){y.setProps({content:D})}function Ne(){var D=y.state.isVisible,ee=y.state.isDestroyed,re=!y.state.isEnabled,Ce=Zo.isTouch&&!y.props.touch,_e=fb(y.props.duration,0,Ho.duration);if(!(D||ee||re||Ce)&&!j().hasAttribute("disabled")&&(z("onShow",[y],!1),y.props.onShow(y)!==!1)){if(y.state.isVisible=!0,I()&&(_.style.visibility="visible"),ie(),Ke(),y.state.isMounted||(_.style.transition="none"),I()){var wt=te(),Rt=wt.box,Er=wt.content;hb([Rt,Er],0)}f=function(){var Os;if(!(!y.state.isVisible||c)){if(c=!0,_.offsetHeight,_.style.transition=y.props.moveTransition,I()&&y.props.animation){var Gn=te(),Is=Gn.box,Or=Gn.content;hb([Is,Or],_e),f4([Is,Or],"visible")}ge(),ve(),u4(mb,y),(Os=y.popperInstance)==null||Os.forceUpdate(),z("onMount",[y]),y.props.animation&&I()&&le(_e,function(){y.state.isShown=!0,z("onShown",[y])})}},A()}}function bt(){var D=!y.state.isVisible,ee=y.state.isDestroyed,re=!y.state.isEnabled,Ce=fb(y.props.duration,1,Ho.duration);if(!(D||ee||re)&&(z("onHide",[y],!1),y.props.onHide(y)!==!1)){if(y.state.isVisible=!1,y.state.isShown=!1,c=!1,i=!1,I()&&(_.style.visibility="hidden"),be(),je(),ie(!0),I()){var _e=te(),wt=_e.box,Rt=_e.content;y.props.animation&&(hb([wt,Rt],Ce),f4([wt,Rt],"hidden"))}ge(),ve(),y.props.animation?I()&&K(Ce,y.unmount):y.unmount()}}function tn(D){de().addEventListener("mousemove",p),u4(Fp,p),p(D)}function kn(){y.state.isVisible&&y.hide(),y.state.isMounted&&(fe(),L().forEach(function(D){D._tippy.unmount()}),_.parentNode&&_.parentNode.removeChild(_),mb=mb.filter(function(D){return D!==y}),y.state.isMounted=!1,z("onHidden",[y]))}function fi(){!y.state.isDestroyed&&(y.clearDelayTimeouts(),y.unmount(),st(),delete t._tippy,y.state.isDestroyed=!0,z("onDestroy",[y]))}}function Zu(t,e){e===void 0&&(e={});var n=Ho.plugins.concat(e.plugins||[]);dSe();var r=Object.assign({},e,{plugins:n}),o=iSe(t),s=o.reduce(function(i,a){var l=a&&kSe(a,r);return l&&i.push(l),i},[]);return g0(t)?s[0]:s}Zu.defaultProps=Ho;Zu.setDefaultProps=ySe;Zu.currentInput=Zo;Object.assign({},AR,{effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow)}});Zu.setDefaultProps({render:WR});class xSe{constructor({editor:e,element:n,view:r,tippyOptions:o={},updateDelay:s=250,shouldShow:i}){this.preventHide=!1,this.shouldShow=({view:a,state:l,from:c,to:u})=>{const{doc:d,selection:f}=l,{empty:h}=f,p=!d.textBetween(c,u).length&&WC(l.selection),m=this.element.contains(document.activeElement);return!(!(a.hasFocus()||m)||h||p||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:a})=>{var l;if(this.preventHide){this.preventHide=!1;return}a!=null&&a.relatedTarget&&!((l=this.element.parentNode)===null||l===void 0)&&l.contains(a.relatedTarget)||this.hide()},this.tippyBlurHandler=a=>{this.blurHandler({event:a})},this.handleDebouncedUpdate=(a,l)=>{const c=!(l!=null&&l.selection.eq(a.state.selection)),u=!(l!=null&&l.doc.eq(a.state.doc));!c&&!u||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(a,c,u,l)},this.updateDelay))},this.updateHandler=(a,l,c,u)=>{var d,f,h;const{state:p,composing:m}=a,{selection:v}=p;if(m||!l&&!c)return;this.createTooltip();const{ranges:b}=v,w=Math.min(...b.map(y=>y.$from.pos)),k=Math.max(...b.map(y=>y.$to.pos));if(!(!((d=this.shouldShow)===null||d===void 0)&&d.call(this,{editor:this.editor,view:a,state:p,oldState:u,from:w,to:k}))){this.hide();return}(f=this.tippy)===null||f===void 0||f.setProps({getReferenceClientRect:((h=this.tippyOptions)===null||h===void 0?void 0:h.getReferenceClientRect)||(()=>{if(mCe(p.selection)){let y=a.nodeDOM(w);const C=y.dataset.nodeViewWrapper?y:y.querySelector("[data-node-view-wrapper]");if(C&&(y=C.firstChild),y)return y.getBoundingClientRect()}return _R(a,w,k)})}),this.show()},this.editor=e,this.element=n,this.view=r,this.updateDelay=s,i&&(this.shouldShow=i),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=o,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,n=!!e.parentElement;this.tippy||!n||(this.tippy=Zu(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,n){const{state:r}=e,o=r.selection.$from.pos!==r.selection.$to.pos;if(this.updateDelay>0&&o){this.handleDebouncedUpdate(e,n);return}const s=!(n!=null&&n.selection.eq(e.state.selection)),i=!(n!=null&&n.doc.eq(e.state.doc));this.updateHandler(e,s,i,n)}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,n;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(n=this.tippy)===null||n===void 0||n.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const CSe=t=>new Kn({key:typeof t.pluginKey=="string"?new Wr(t.pluginKey):t.pluginKey,view:e=>new xSe({view:e,...t})});Un.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[CSe({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});class _Se{constructor({editor:e,element:n,view:r,tippyOptions:o={},shouldShow:s}){this.preventHide=!1,this.shouldShow=({view:i,state:a})=>{const{selection:l}=a,{$anchor:c,empty:u}=l,d=c.depth===1,f=c.parent.isTextblock&&!c.parent.type.spec.code&&!c.parent.textContent;return!(!i.hasFocus()||!u||!d||!f||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:i})=>{var a;if(this.preventHide){this.preventHide=!1;return}i!=null&&i.relatedTarget&&!((a=this.element.parentNode)===null||a===void 0)&&a.contains(i.relatedTarget)||this.hide()},this.tippyBlurHandler=i=>{this.blurHandler({event:i})},this.editor=e,this.element=n,this.view=r,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=o,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,n=!!e.parentElement;this.tippy||!n||(this.tippy=Zu(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,n){var r,o,s;const{state:i}=e,{doc:a,selection:l}=i,{from:c,to:u}=l;if(!(n&&n.doc.eq(a)&&n.selection.eq(l))){if(this.createTooltip(),!(!((r=this.shouldShow)===null||r===void 0)&&r.call(this,{editor:this.editor,view:e,state:i,oldState:n}))){this.hide();return}(o=this.tippy)===null||o===void 0||o.setProps({getReferenceClientRect:((s=this.tippyOptions)===null||s===void 0?void 0:s.getReferenceClientRect)||(()=>_R(e,c,u))}),this.show()}}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,n;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(n=this.tippy)===null||n===void 0||n.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const SSe=t=>new Kn({key:typeof t.pluginKey=="string"?new Wr(t.pluginKey):t.pluginKey,view:e=>new _Se({view:e,...t})});Un.create({name:"floatingMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[SSe({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}});function v4(t){return wk((e,n)=>({get(){return e(),t},set(r){t=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}class TSe extends UCe{constructor(e={}){return super(e),this.vueRenderers=tr(new Map),this.contentComponent=null,this.reactiveState=v4(this.view.state),this.reactiveExtensionStorage=v4(this.extensionStorage),this.on("transaction",()=>{this.reactiveState.value=this.view.state,this.reactiveExtensionStorage.value=this.extensionStorage}),yh(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,n){super.registerPlugin(e,n),this.reactiveState.value=this.view.state}unregisterPlugin(e){super.unregisterPlugin(e),this.reactiveState.value=this.view.state}}const MSe=Ie({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(t){const e=ae(),n=Co();return Ak(()=>{const r=t.editor;r&&r.options.element&&e.value&&cr(()=>{if(!e.value||!r.options.element.firstChild)return;const o=x(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,r.setOptions({element:o}),r.createNodeViews()})}),_s(()=>{const r=t.editor;if(!r||(r.isDestroyed||r.view.setProps({nodeViews:{}}),r.contentComponent=null,!r.options.element.firstChild))return;const o=document.createElement("div");o.append(...r.options.element.childNodes),r.setOptions({element:o})}),{rootEl:e}},render(){const t=[];return this.editor&&this.editor.vueRenderers.forEach(e=>{const n=Lt(Rk,{to:e.teleportElement,key:e.id},Lt(e.component,{ref:e.id,...e.props}));t.push(n)}),Lt("div",{ref:e=>{this.rootEl=e}},...t)}});var tk,nk;if(typeof WeakMap<"u"){let t=new WeakMap;tk=e=>t.get(e),nk=(e,n)=>(t.set(e,n),n)}else{const t=[];let e=0;tk=n=>{for(let r=0;r<t.length;r+=2)if(t[r]==n)return t[r+1]},nk=(n,r)=>(e==10&&(e=0),t[e++]=n,t[e++]=r)}var Kt=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,o=e/this.width|0;let s=r+1,i=o+1;for(let a=1;s<this.width&&this.map[e+a]==n;a++)s++;for(let a=1;i<this.height&&this.map[e+this.width*a]==n;a++)i++;return{left:r,top:o,right:s,bottom:i}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:o,top:s,bottom:i}=this.findCell(t);return e=="horiz"?(n<0?r==0:o==this.width)?null:this.map[s*this.width+(n<0?r-1:o)]:(n<0?s==0:i==this.height)?null:this.map[r+this.width*(n<0?s-1:i)]}rectBetween(t,e){const{left:n,right:r,top:o,bottom:s}=this.findCell(t),{left:i,right:a,top:l,bottom:c}=this.findCell(e);return{left:Math.min(n,i),top:Math.min(o,l),right:Math.max(r,a),bottom:Math.max(s,c)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let o=t.left;o<t.right;o++){const s=r*this.width+o,i=this.map[s];n[i]||(n[i]=!0,!(o==t.left&&o&&this.map[s-1]==i||r==t.top&&r&&this.map[s-this.width]==i)&&e.push(i))}return e}positionAt(t,e,n){for(let r=0,o=0;;r++){const s=o+n.child(r).nodeSize;if(r==t){let i=e+t*this.width;const a=(t+1)*this.width;for(;i<a&&this.map[i]<o;)i++;return i==a?s-1:this.map[i]}o=s}}static get(t){return tk(t)||nk(t,ESe(t))}};function ESe(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=OSe(t),n=t.childCount,r=[];let o=0,s=null;const i=[];for(let c=0,u=e*n;c<u;c++)r[c]=0;for(let c=0,u=0;c<n;c++){const d=t.child(c);u++;for(let p=0;;p++){for(;o<r.length&&r[o]!=0;)o++;if(p==d.childCount)break;const m=d.child(p),{colspan:v,rowspan:b,colwidth:w}=m.attrs;for(let k=0;k<b;k++){if(k+c>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:u,n:b-k});break}const y=o+k*e;for(let C=0;C<v;C++){r[y+C]==0?r[y+C]=u:(s||(s=[])).push({type:"collision",row:c,pos:u,n:v-C});const _=w&&w[C];if(_){const M=(y+C)%e*2,E=i[M];E==null||E!=_&&i[M+1]==1?(i[M]=_,i[M+1]=1):E==_&&i[M+1]++}}}o+=v,u+=m.nodeSize}const f=(c+1)*e;let h=0;for(;o<f;)r[o++]==0&&h++;h&&(s||(s=[])).push({type:"missing",row:c,n:h}),u++}const a=new Kt(e,n,r,s);let l=!1;for(let c=0;!l&&c<i.length;c+=2)i[c]!=null&&i[c+1]<n&&(l=!0);return l&&ISe(a,i,t),a}function OSe(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const o=t.child(r);let s=0;if(n)for(let i=0;i<r;i++){const a=t.child(i);for(let l=0;l<a.childCount;l++){const c=a.child(l);i+c.attrs.rowspan>r&&(s+=c.attrs.colspan)}}for(let i=0;i<o.childCount;i++){const a=o.child(i);s+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}e==-1?e=s:e!=s&&(e=Math.max(e,s))}return e}function ISe(t,e,n){t.problems||(t.problems=[]);const r={};for(let o=0;o<t.map.length;o++){const s=t.map[o];if(r[s])continue;r[s]=!0;const i=n.nodeAt(s);if(!i)throw new RangeError(`No cell with offset ${s} found`);let a=null;const l=i.attrs;for(let c=0;c<l.colspan;c++){const u=(o+c)%t.width,d=e[u*2];d!=null&&(!l.colwidth||l.colwidth[c]!=d)&&((a||(a=ASe(l)))[c]=d)}a&&t.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:a})}}function ASe(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function qn(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],o=r.spec.tableRole;o&&(e[o]=r)}}return e}var Fi=new Wr("selectingCells");function ed(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function NSe(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function Ko(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function y0(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=ed(e.$head)||LSe(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function LSe(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function rk(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function RSe(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function o_(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function KR(t,e,n){const r=t.node(-1),o=Kt.get(r),s=t.start(-1),i=o.nextCell(t.pos-s,e,n);return i==null?null:t.node(0).resolve(s+i)}function Ul(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(o=>o>0)||(r.colwidth=null)),r}function GR(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let o=0;o<n;o++)r.colwidth.splice(e,0,0)}return r}function PSe(t,e,n){const r=qn(e.type.schema).header_cell;for(let o=0;o<t.height;o++)if(e.nodeAt(t.map[n+o*t.width]).type!=r)return!1;return!0}var ht=class extends Be{constructor(t,e=t){const n=t.node(-1),r=Kt.get(n),o=t.start(-1),s=r.rectBetween(t.pos-o,e.pos-o),i=t.node(0),a=r.cellsInRect(s).filter(c=>c!=e.pos-o);a.unshift(e.pos-o);const l=a.map(c=>{const u=n.nodeAt(c);if(!u)throw RangeError(`No cell with offset ${c} found`);const d=o+c+1;return new O7(i.resolve(d),i.resolve(d+u.content.size))});super(l[0].$from,l[0].$to,l),this.$anchorCell=t,this.$headCell=e}map(t,e){const n=t.resolve(e.map(this.$anchorCell.pos)),r=t.resolve(e.map(this.$headCell.pos));if(rk(n)&&rk(r)&&o_(n,r)){const o=this.$anchorCell.node(-1)!=n.node(-1);return o&&this.isRowSelection()?ht.rowSelection(n,r):o&&this.isColSelection()?ht.colSelection(n,r):new ht(n,r)}return Je.between(n,r)}content(){const t=this.$anchorCell.node(-1),e=Kt.get(t),n=this.$anchorCell.start(-1),r=e.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o={},s=[];for(let a=r.top;a<r.bottom;a++){const l=[];for(let c=a*e.width+r.left,u=r.left;u<r.right;u++,c++){const d=e.map[c];if(o[d])continue;o[d]=!0;const f=e.findCell(d);let h=t.nodeAt(d);if(!h)throw RangeError(`No cell with offset ${d} found`);const p=r.left-f.left,m=f.right-r.right;if(p>0||m>0){let v=h.attrs;if(p>0&&(v=Ul(v,0,p)),m>0&&(v=Ul(v,v.colspan-m,m)),f.left<r.left){if(h=h.type.createAndFill(v),!h)throw RangeError(`Could not create cell with attrs ${JSON.stringify(v)}`)}else h=h.type.create(v,h.content)}if(f.top<r.top||f.bottom>r.bottom){const v={...h.attrs,rowspan:Math.min(f.bottom,r.bottom)-Math.max(f.top,r.top)};f.top<r.top?h=h.type.createAndFill(v):h=h.type.create(v,h.content)}l.push(h)}s.push(t.child(a).copy(oe.from(l)))}const i=this.isColSelection()&&this.isRowSelection()?t:s;return new we(oe.from(i),1,1)}replace(t,e=we.empty){const n=t.steps.length,r=this.ranges;for(let s=0;s<r.length;s++){const{$from:i,$to:a}=r[s],l=t.mapping.slice(n);t.replace(l.map(i.pos),l.map(a.pos),s?we.empty:e)}const o=Be.findFrom(t.doc.resolve(t.mapping.slice(n).map(this.to)),-1);o&&t.setSelection(o)}replaceWith(t,e){this.replace(t,new we(oe.from(e),0,0))}forEachCell(t){const e=this.$anchorCell.node(-1),n=Kt.get(e),r=this.$anchorCell.start(-1),o=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r));for(let s=0;s<o.length;s++)t(e.nodeAt(o[s]),r+o[s])}isColSelection(){const t=this.$anchorCell.index(-1),e=this.$headCell.index(-1);if(Math.min(t,e)>0)return!1;const n=t+this.$anchorCell.nodeAfter.attrs.rowspan,r=e+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount}static colSelection(t,e=t){const n=t.node(-1),r=Kt.get(n),o=t.start(-1),s=r.findCell(t.pos-o),i=r.findCell(e.pos-o),a=t.node(0);return s.top<=i.top?(s.top>0&&(t=a.resolve(o+r.map[s.left])),i.bottom<r.height&&(e=a.resolve(o+r.map[r.width*(r.height-1)+i.right-1]))):(i.top>0&&(e=a.resolve(o+r.map[i.left])),s.bottom<r.height&&(t=a.resolve(o+r.map[r.width*(r.height-1)+s.right-1]))),new ht(t,e)}isRowSelection(){const t=this.$anchorCell.node(-1),e=Kt.get(t),n=this.$anchorCell.start(-1),r=e.colCount(this.$anchorCell.pos-n),o=e.colCount(this.$headCell.pos-n);if(Math.min(r,o)>0)return!1;const s=r+this.$anchorCell.nodeAfter.attrs.colspan,i=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(s,i)==e.width}eq(t){return t instanceof ht&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,e=t){const n=t.node(-1),r=Kt.get(n),o=t.start(-1),s=r.findCell(t.pos-o),i=r.findCell(e.pos-o),a=t.node(0);return s.left<=i.left?(s.left>0&&(t=a.resolve(o+r.map[s.top*r.width])),i.right<r.width&&(e=a.resolve(o+r.map[r.width*(i.top+1)-1]))):(i.left>0&&(e=a.resolve(o+r.map[i.top*r.width])),s.right<r.width&&(t=a.resolve(o+r.map[r.width*(s.top+1)-1]))),new ht(t,e)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,e){return new ht(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,n=e){return new ht(t.resolve(e),t.resolve(n))}getBookmark(){return new JR(this.$anchorCell.pos,this.$headCell.pos)}};ht.prototype.visible=!1;Be.jsonID("cell",ht);var JR=class{constructor(t,e){this.anchor=t,this.head=e}map(t){return new JR(t.map(this.anchor),t.map(this.head))}resolve(t){const e=t.resolve(this.anchor),n=t.resolve(this.head);return e.parent.type.spec.tableRole=="row"&&n.parent.type.spec.tableRole=="row"&&e.index()<e.parent.childCount&&n.index()<n.parent.childCount&&o_(e,n)?new ht(e,n):Be.near(n,1)}};function DSe(t){if(!(t.selection instanceof ht))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(mr.node(r,r+n.nodeSize,{class:"selectedCell"}))}),Ut.create(t.doc,e)}function $Se({$from:t,$to:e}){if(t.pos==e.pos||t.pos<t.pos-6)return!1;let n=t.pos,r=e.pos,o=t.depth;for(;o>=0&&!(t.after(o+1)<t.end(o));o--,n++);for(let s=e.depth;s>=0&&!(e.before(s+1)>e.start(s));s--,r--);return n==r&&/row|table/.test(t.node(o).type.spec.tableRole)}function HSe({$from:t,$to:e}){let n,r;for(let o=t.depth;o>0;o--){const s=t.node(o);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){n=s;break}}for(let o=e.depth;o>0;o--){const s=e.node(o);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}return n!==r&&e.parentOffset===0}function FSe(t,e,n){const r=(e||t).selection,o=(e||t).doc;let s,i;if(r instanceof He&&(i=r.node.type.spec.tableRole)){if(i=="cell"||i=="header_cell")s=ht.create(o,r.from);else if(i=="row"){const a=o.resolve(r.from+1);s=ht.rowSelection(a,a)}else if(!n){const a=Kt.get(r.node),l=r.from+1,c=l+a.map[a.width*a.height-1];s=ht.create(o,l+1,c)}}else r instanceof Je&&$Se(r)?s=Je.create(o,r.from):r instanceof Je&&HSe(r)&&(s=Je.create(o,r.$from.start(),r.$from.end()));return s&&(e||(e=t.tr)).setSelection(s),e}var BSe=new Wr("fix-tables");function YR(t,e,n,r){const o=t.childCount,s=e.childCount;e:for(let i=0,a=0;i<s;i++){const l=e.child(i);for(let c=a,u=Math.min(o,i+3);c<u;c++)if(t.child(c)==l){a=c+1,n+=l.nodeSize;continue e}r(l,n),a<o&&t.child(a).sameMarkup(l)?YR(t.child(a),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function XR(t,e){let n;const r=(o,s)=>{o.type.spec.tableRole=="table"&&(n=jSe(t,o,s,n))};return e?e.doc!=t.doc&&YR(e.doc,t.doc,0,r):t.doc.descendants(r),n}function jSe(t,e,n,r){const o=Kt.get(e);if(!o.problems)return r;r||(r=t.tr);const s=[];for(let l=0;l<o.height;l++)s.push(0);for(let l=0;l<o.problems.length;l++){const c=o.problems[l];if(c.type=="collision"){const u=e.nodeAt(c.pos);if(!u)continue;const d=u.attrs;for(let f=0;f<d.rowspan;f++)s[c.row+f]+=c.n;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,Ul(d,d.colspan-c.n,c.n))}else if(c.type=="missing")s[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const u=e.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,rowspan:u.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const u=e.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,colwidth:c.colwidth})}}let i,a;for(let l=0;l<s.length;l++)s[l]&&(i==null&&(i=l),a=l);for(let l=0,c=n+1;l<o.height;l++){const u=e.child(l),d=c+u.nodeSize,f=s[l];if(f>0){let h="cell";u.firstChild&&(h=u.firstChild.type.spec.tableRole);const p=[];for(let v=0;v<f;v++){const b=qn(t.schema)[h].createAndFill();b&&p.push(b)}const m=(l==0||i==l-1)&&a==l?c+1:d-1;r.insert(r.mapping.map(m),p)}c=d}return r.setMeta(BSe,{fixTables:!0})}function zSe(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const o=e.child(0),s=o.type.spec.tableRole,i=o.type.schema,a=[];if(s=="row")for(let l=0;l<e.childCount;l++){let c=e.child(l).content;const u=l?0:Math.max(0,n-1),d=l<e.childCount-1?0:Math.max(0,r-1);(u||d)&&(c=ok(qn(i).row,new we(c,u,d)).content),a.push(c)}else if(s=="cell"||s=="header_cell")a.push(n||r?ok(qn(i).row,new we(e,n,r)).content:e);else return null;return VSe(i,a)}function VSe(t,e){const n=[];for(let o=0;o<e.length;o++){const s=e[o];for(let i=s.childCount-1;i>=0;i--){const{rowspan:a,colspan:l}=s.child(i).attrs;for(let c=o;c<o+a;c++)n[c]=(n[c]||0)+l}}let r=0;for(let o=0;o<n.length;o++)r=Math.max(r,n[o]);for(let o=0;o<n.length;o++)if(o>=e.length&&e.push(oe.empty),n[o]<r){const s=qn(t).cell.createAndFill(),i=[];for(let a=n[o];a<r;a++)i.push(s);e[o]=e[o].append(oe.from(i))}return{height:e.length,width:r,rows:e}}function ok(t,e){const n=t.createAndFill();return new E7(n).replace(0,n.content.size,e).doc}function USe({width:t,height:e,rows:n},r,o){if(t!=r){const s=[],i=[];for(let a=0;a<n.length;a++){const l=n[a],c=[];for(let u=s[a]||0,d=0;u<r;d++){let f=l.child(d%l.childCount);u+f.attrs.colspan>r&&(f=f.type.createChecked(Ul(f.attrs,f.attrs.colspan,u+f.attrs.colspan-r),f.content)),c.push(f),u+=f.attrs.colspan;for(let h=1;h<f.attrs.rowspan;h++)s[a+h]=(s[a+h]||0)+f.attrs.colspan}i.push(oe.from(c))}n=i,t=r}if(e!=o){const s=[];for(let i=0,a=0;i<o;i++,a++){const l=[],c=n[a%e];for(let u=0;u<c.childCount;u++){let d=c.child(u);i+d.attrs.rowspan>o&&(d=d.type.create({...d.attrs,rowspan:Math.max(1,o-d.attrs.rowspan)},d.content)),l.push(d)}s.push(oe.from(l))}n=s,e=o}return{width:t,height:e,rows:n}}function qSe(t,e,n,r,o,s,i){const a=t.doc.type.schema,l=qn(a);let c,u;if(o>e.width)for(let d=0,f=0;d<e.height;d++){const h=n.child(d);f+=h.nodeSize;const p=[];let m;h.lastChild==null||h.lastChild.type==l.cell?m=c||(c=l.cell.createAndFill()):m=u||(u=l.header_cell.createAndFill());for(let v=e.width;v<o;v++)p.push(m);t.insert(t.mapping.slice(i).map(f-1+r),p)}if(s>e.height){const d=[];for(let p=0,m=(e.height-1)*e.width;p<Math.max(e.width,o);p++){const v=p>=e.width?!1:n.nodeAt(e.map[m+p]).type==l.header_cell;d.push(v?u||(u=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const f=l.row.create(null,oe.from(d)),h=[];for(let p=e.height;p<s;p++)h.push(f);t.insert(t.mapping.slice(i).map(r+n.nodeSize-2),h)}return!!(c||u)}function b4(t,e,n,r,o,s,i,a){if(i==0||i==e.height)return!1;let l=!1;for(let c=o;c<s;c++){const u=i*e.width+c,d=e.map[u];if(e.map[u-e.width]==d){l=!0;const f=n.nodeAt(d),{top:h,left:p}=e.findCell(d);t.setNodeMarkup(t.mapping.slice(a).map(d+r),null,{...f.attrs,rowspan:i-h}),t.insert(t.mapping.slice(a).map(e.positionAt(i,p,n)),f.type.createAndFill({...f.attrs,rowspan:h+f.attrs.rowspan-i})),c+=f.attrs.colspan-1}}return l}function w4(t,e,n,r,o,s,i,a){if(i==0||i==e.width)return!1;let l=!1;for(let c=o;c<s;c++){const u=c*e.width+i,d=e.map[u];if(e.map[u-1]==d){l=!0;const f=n.nodeAt(d),h=e.colCount(d),p=t.mapping.slice(a).map(d+r);t.setNodeMarkup(p,null,Ul(f.attrs,i-h,f.attrs.colspan-(i-h))),t.insert(p+f.nodeSize,f.type.createAndFill(Ul(f.attrs,0,i-h))),c+=f.attrs.rowspan-1}}return l}function k4(t,e,n,r,o){let s=n?t.doc.nodeAt(n-1):t.doc;if(!s)throw new Error("No table found");let i=Kt.get(s);const{top:a,left:l}=r,c=l+o.width,u=a+o.height,d=t.tr;let f=0;function h(){if(s=n?d.doc.nodeAt(n-1):d.doc,!s)throw new Error("No table found");i=Kt.get(s),f=d.mapping.maps.length}qSe(d,i,s,n,c,u,f)&&h(),b4(d,i,s,n,l,c,a,f)&&h(),b4(d,i,s,n,l,c,u,f)&&h(),w4(d,i,s,n,a,u,l,f)&&h(),w4(d,i,s,n,a,u,c,f)&&h();for(let p=a;p<u;p++){const m=i.positionAt(p,l,s),v=i.positionAt(p,c,s);d.replace(d.mapping.slice(f).map(m+n),d.mapping.slice(f).map(v+n),new we(o.rows[p-a],0,0))}h(),d.setSelection(new ht(d.doc.resolve(n+i.positionAt(a,l,s)),d.doc.resolve(n+i.positionAt(u-1,c-1,s)))),e(d)}var WSe=VC({ArrowLeft:Bp("horiz",-1),ArrowRight:Bp("horiz",1),ArrowUp:Bp("vert",-1),ArrowDown:Bp("vert",1),"Shift-ArrowLeft":jp("horiz",-1),"Shift-ArrowRight":jp("horiz",1),"Shift-ArrowUp":jp("vert",-1),"Shift-ArrowDown":jp("vert",1),Backspace:zp,"Mod-Backspace":zp,Delete:zp,"Mod-Delete":zp});function Sm(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function Bp(t,e){return(n,r,o)=>{if(!o)return!1;const s=n.selection;if(s instanceof ht)return Sm(n,r,Be.near(s.$headCell,e));if(t!="horiz"&&!s.empty)return!1;const i=QR(o,t,e);if(i==null)return!1;if(t=="horiz")return Sm(n,r,Be.near(n.doc.resolve(s.head+e),e));{const a=n.doc.resolve(i),l=KR(a,t,e);let c;return l?c=Be.near(l,1):e<0?c=Be.near(n.doc.resolve(a.before(-1)),-1):c=Be.near(n.doc.resolve(a.after(-1)),1),Sm(n,r,c)}}}function jp(t,e){return(n,r,o)=>{if(!o)return!1;const s=n.selection;let i;if(s instanceof ht)i=s;else{const l=QR(o,t,e);if(l==null)return!1;i=new ht(n.doc.resolve(l))}const a=KR(i.$headCell,t,e);return a?Sm(n,r,new ht(i.$anchorCell,a)):!1}}function zp(t,e){const n=t.selection;if(!(n instanceof ht))return!1;if(e){const r=t.tr,o=qn(t.schema).cell.createAndFill().content;n.forEachCell((s,i)=>{s.content.eq(o)||r.replace(r.mapping.map(i+1),r.mapping.map(i+s.nodeSize-1),new we(o,0,0))}),r.docChanged&&e(r)}return!0}function KSe(t,e){const n=t.state.doc,r=ed(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new ht(r))),!0):!1}function GSe(t,e,n){if(!Ko(t.state))return!1;let r=zSe(n);const o=t.state.selection;if(o instanceof ht){r||(r={width:1,height:1,rows:[oe.from(ok(qn(t.state.schema).cell,n))]});const s=o.$anchorCell.node(-1),i=o.$anchorCell.start(-1),a=Kt.get(s).rectBetween(o.$anchorCell.pos-i,o.$headCell.pos-i);return r=USe(r,a.right-a.left,a.bottom-a.top),k4(t.state,t.dispatch,i,a,r),!0}else if(r){const s=y0(t.state),i=s.start(-1);return k4(t.state,t.dispatch,i,Kt.get(s.node(-1)).findCell(s.pos-i),r),!0}else return!1}function JSe(t,e){var n;if(e.ctrlKey||e.metaKey)return;const r=x4(t,e.target);let o;if(e.shiftKey&&t.state.selection instanceof ht)s(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(o=ed(t.state.selection.$anchor))!=null&&((n=gb(t,e))==null?void 0:n.pos)!=o.pos)s(o,e),e.preventDefault();else if(!r)return;function s(l,c){let u=gb(t,c);const d=Fi.getState(t.state)==null;if(!u||!o_(l,u))if(d)u=l;else return;const f=new ht(l,u);if(d||!t.state.selection.eq(f)){const h=t.state.tr.setSelection(f);d&&h.setMeta(Fi,l.pos),t.dispatch(h)}}function i(){t.root.removeEventListener("mouseup",i),t.root.removeEventListener("dragstart",i),t.root.removeEventListener("mousemove",a),Fi.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(Fi,-1))}function a(l){const c=l,u=Fi.getState(t.state);let d;if(u!=null)d=t.state.doc.resolve(u);else if(x4(t,c.target)!=r&&(d=gb(t,e),!d))return i();d&&s(d,c)}t.root.addEventListener("mouseup",i),t.root.addEventListener("dragstart",i),t.root.addEventListener("mousemove",a)}function QR(t,e,n){if(!(t.state.selection instanceof Je))return null;const{$head:r}=t.state.selection;for(let o=r.depth-1;o>=0;o--){const s=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const i=r.before(o),a=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(a)?i:null}}return null}function x4(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function gb(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?ed(t.state.doc.resolve(n.pos)):null}var YSe=class{constructor(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),sk(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!=this.node.type?!1:(this.node=t,sk(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){return t.type=="attributes"&&(t.target==this.table||this.colgroup.contains(t.target))}};function sk(t,e,n,r,o,s){var i;let a=0,l=!0,c=e.firstChild;const u=t.firstChild;if(u){for(let d=0,f=0;d<u.childCount;d++){const{colspan:h,colwidth:p}=u.child(d).attrs;for(let m=0;m<h;m++,f++){const v=o==f?s:p&&p[m],b=v?v+"px":"";a+=v||r,v||(l=!1),c?(c.style.width!=b&&(c.style.width=b),c=c.nextSibling):e.appendChild(document.createElement("col")).style.width=b}}for(;c;){const d=c.nextSibling;(i=c.parentNode)==null||i.removeChild(c),c=d}l?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}}var ro=new Wr("tableColumnResizing");function XSe({handleWidth:t=5,cellMinWidth:e=25,View:n=YSe,lastColumnResizable:r=!0}={}){const o=new Kn({key:ro,state:{init(s,i){return o.spec.props.nodeViews[qn(i.schema).table.name]=(a,l)=>new n(a,e,l),new Tm(-1,!1)},apply(s,i){return i.apply(s)}},props:{attributes:s=>{const i=ro.getState(s);return i&&i.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(s,i)=>{QSe(s,i,t,e,r)},mouseleave:s=>{ZSe(s)},mousedown:(s,i)=>{eTe(s,i,e)}},decorations:s=>{const i=ro.getState(s);if(i&&i.activeHandle>-1)return iTe(s,i.activeHandle)},nodeViews:{}}});return o}var Tm=class{constructor(t,e){this.activeHandle=t,this.dragging=e}apply(t){const e=this,n=t.getMeta(ro);if(n&&n.setHandle!=null)return new Tm(n.setHandle,!1);if(n&&n.setDragging!==void 0)return new Tm(e.activeHandle,n.setDragging);if(e.activeHandle>-1&&t.docChanged){let r=t.mapping.map(e.activeHandle,-1);return rk(t.doc.resolve(r))||(r=-1),new Tm(r,e.dragging)}return e}};function QSe(t,e,n,r,o){const s=ro.getState(t.state);if(s&&!s.dragging){const i=nTe(e.target);let a=-1;if(i){const{left:l,right:c}=i.getBoundingClientRect();e.clientX-l<=n?a=C4(t,e,"left"):c-e.clientX<=n&&(a=C4(t,e,"right"))}if(a!=s.activeHandle){if(!o&&a!==-1){const l=t.state.doc.resolve(a),c=l.node(-1),u=Kt.get(c),d=l.start(-1);if(u.colCount(l.pos-d)+l.nodeAfter.attrs.colspan-1==u.width-1)return}ZR(t,a)}}}function ZSe(t){const e=ro.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&ZR(t,-1)}function eTe(t,e,n){const r=ro.getState(t.state);if(!r||r.activeHandle==-1||r.dragging)return!1;const o=t.state.doc.nodeAt(r.activeHandle),s=tTe(t,r.activeHandle,o.attrs);t.dispatch(t.state.tr.setMeta(ro,{setDragging:{startX:e.clientX,startWidth:s}}));function i(l){window.removeEventListener("mouseup",i),window.removeEventListener("mousemove",a);const c=ro.getState(t.state);c!=null&&c.dragging&&(rTe(t,c.activeHandle,_4(c.dragging,l,n)),t.dispatch(t.state.tr.setMeta(ro,{setDragging:null})))}function a(l){if(!l.which)return i(l);const c=ro.getState(t.state);if(c&&c.dragging){const u=_4(c.dragging,l,n);oTe(t,c.activeHandle,u,n)}}return window.addEventListener("mouseup",i),window.addEventListener("mousemove",a),e.preventDefault(),!0}function tTe(t,e,{colspan:n,colwidth:r}){const o=r&&r[r.length-1];if(o)return o;const s=t.domAtPos(e);let i=s.node.childNodes[s.offset].offsetWidth,a=n;if(r)for(let l=0;l<n;l++)r[l]&&(i-=r[l],a--);return i/a}function nTe(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function C4(t,e,n){const r=t.posAtCoords({left:e.clientX,top:e.clientY});if(!r)return-1;const{pos:o}=r,s=ed(t.state.doc.resolve(o));if(!s)return-1;if(n=="right")return s.pos;const i=Kt.get(s.node(-1)),a=s.start(-1),l=i.map.indexOf(s.pos-a);return l%i.width==0?-1:a+i.map[l-1]}function _4(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function ZR(t,e){t.dispatch(t.state.tr.setMeta(ro,{setHandle:e}))}function rTe(t,e,n){const r=t.state.doc.resolve(e),o=r.node(-1),s=Kt.get(o),i=r.start(-1),a=s.colCount(r.pos-i)+r.nodeAfter.attrs.colspan-1,l=t.state.tr;for(let c=0;c<s.height;c++){const u=c*s.width+a;if(c&&s.map[u]==s.map[u-s.width])continue;const d=s.map[u],f=o.nodeAt(d).attrs,h=f.colspan==1?0:a-s.colCount(d);if(f.colwidth&&f.colwidth[h]==n)continue;const p=f.colwidth?f.colwidth.slice():sTe(f.colspan);p[h]=n,l.setNodeMarkup(i+d,null,{...f,colwidth:p})}l.docChanged&&t.dispatch(l)}function oTe(t,e,n,r){const o=t.state.doc.resolve(e),s=o.node(-1),i=o.start(-1),a=Kt.get(s).colCount(o.pos-i)+o.nodeAfter.attrs.colspan-1;let l=t.domAtPos(o.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&sk(s,l.firstChild,l,r,a,n)}function sTe(t){return Array(t).fill(0)}function iTe(t,e){const n=[],r=t.doc.resolve(e),o=r.node(-1);if(!o)return Ut.empty;const s=Kt.get(o),i=r.start(-1),a=s.colCount(r.pos-i)+r.nodeAfter.attrs.colspan;for(let l=0;l<s.height;l++){const c=a+l*s.width-1;if((a==s.width||s.map[c]!=s.map[c+1])&&(l==0||s.map[c-1]!=s.map[c-1-s.width])){const u=s.map[c],d=i+u+o.nodeAt(u).nodeSize-1,f=document.createElement("div");f.className="column-resize-handle",n.push(mr.widget(d,f))}}return Ut.create(t.doc,n)}function Es(t){const e=t.selection,n=y0(t),r=n.node(-1),o=n.start(-1),s=Kt.get(r);return{...e instanceof ht?s.rectBetween(e.$anchorCell.pos-o,e.$headCell.pos-o):s.findCell(n.pos-o),tableStart:o,map:s,table:r}}function eP(t,{map:e,tableStart:n,table:r},o){let s=o>0?-1:0;PSe(e,r,o+s)&&(s=o==0||o==e.width?null:0);for(let i=0;i<e.height;i++){const a=i*e.width+o;if(o>0&&o<e.width&&e.map[a-1]==e.map[a]){const l=e.map[a],c=r.nodeAt(l);t.setNodeMarkup(t.mapping.map(n+l),null,GR(c.attrs,o-e.colCount(l))),i+=c.attrs.rowspan-1}else{const l=s==null?qn(r.type.schema).cell:r.nodeAt(e.map[a+s]).type,c=e.positionAt(i,o,r);t.insert(t.mapping.map(n+c),l.createAndFill())}}return t}function aTe(t,e){if(!Ko(t))return!1;if(e){const n=Es(t);e(eP(t.tr,n,n.left))}return!0}function lTe(t,e){if(!Ko(t))return!1;if(e){const n=Es(t);e(eP(t.tr,n,n.right))}return!0}function cTe(t,{map:e,table:n,tableStart:r},o){const s=t.mapping.maps.length;for(let i=0;i<e.height;){const a=i*e.width+o,l=e.map[a],c=n.nodeAt(l),u=c.attrs;if(o>0&&e.map[a-1]==l||o<e.width-1&&e.map[a+1]==l)t.setNodeMarkup(t.mapping.slice(s).map(r+l),null,Ul(u,o-e.colCount(l)));else{const d=t.mapping.slice(s).map(r+l);t.delete(d,d+c.nodeSize)}i+=u.rowspan}}function uTe(t,e){if(!Ko(t))return!1;if(e){const n=Es(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let o=n.right-1;cTe(r,n,o),o!=n.left;o--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=Kt.get(s)}e(r)}return!0}function dTe(t,e,n){var r;const o=qn(e.type.schema).header_cell;for(let s=0;s<t.width;s++)if(((r=e.nodeAt(t.map[s+n*t.width]))==null?void 0:r.type)!=o)return!1;return!0}function tP(t,{map:e,tableStart:n,table:r},o){var s;let i=n;for(let c=0;c<o;c++)i+=r.child(c).nodeSize;const a=[];let l=o>0?-1:0;dTe(e,r,o+l)&&(l=o==0||o==e.height?null:0);for(let c=0,u=e.width*o;c<e.width;c++,u++)if(o>0&&o<e.height&&e.map[u]==e.map[u-e.width]){const d=e.map[u],f=r.nodeAt(d).attrs;t.setNodeMarkup(n+d,null,{...f,rowspan:f.rowspan+1}),c+=f.colspan-1}else{const d=l==null?qn(r.type.schema).cell:(s=r.nodeAt(e.map[u+l*e.width]))==null?void 0:s.type,f=d==null?void 0:d.createAndFill();f&&a.push(f)}return t.insert(i,qn(r.type.schema).row.create(null,a)),t}function fTe(t,e){if(!Ko(t))return!1;if(e){const n=Es(t);e(tP(t.tr,n,n.top))}return!0}function hTe(t,e){if(!Ko(t))return!1;if(e){const n=Es(t);e(tP(t.tr,n,n.bottom))}return!0}function pTe(t,{map:e,table:n,tableStart:r},o){let s=0;for(let l=0;l<o;l++)s+=n.child(l).nodeSize;const i=s+n.child(o).nodeSize,a=t.mapping.maps.length;t.delete(s+r,i+r);for(let l=0,c=o*e.width;l<e.width;l++,c++){const u=e.map[c];if(o>0&&u==e.map[c-e.width]){const d=n.nodeAt(u).attrs;t.setNodeMarkup(t.mapping.slice(a).map(u+r),null,{...d,rowspan:d.rowspan-1}),l+=d.colspan-1}else if(o<e.width&&u==e.map[c+e.width]){const d=n.nodeAt(u),f=d.attrs,h=d.type.create({...f,rowspan:d.attrs.rowspan-1},d.content),p=e.positionAt(o+1,l,n);t.insert(t.mapping.slice(a).map(r+p),h),l+=f.colspan-1}}}function mTe(t,e){if(!Ko(t))return!1;if(e){const n=Es(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let o=n.bottom-1;pTe(r,n,o),o!=n.top;o--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=Kt.get(n.table)}e(r)}return!0}function S4(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function gTe({width:t,height:e,map:n},r){let o=r.top*t+r.left,s=o,i=(r.bottom-1)*t+r.left,a=o+(r.right-r.left-1);for(let l=r.top;l<r.bottom;l++){if(r.left>0&&n[s]==n[s-1]||r.right<t&&n[a]==n[a+1])return!0;s+=t,a+=t}for(let l=r.left;l<r.right;l++){if(r.top>0&&n[o]==n[o-t]||r.bottom<e&&n[i]==n[i+t])return!0;o++,i++}return!1}function T4(t,e){const n=t.selection;if(!(n instanceof ht)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=Es(t),{map:o}=r;if(gTe(o,r))return!1;if(e){const s=t.tr,i={};let a=oe.empty,l,c;for(let u=r.top;u<r.bottom;u++)for(let d=r.left;d<r.right;d++){const f=o.map[u*o.width+d],h=r.table.nodeAt(f);if(!(i[f]||!h))if(i[f]=!0,l==null)l=f,c=h;else{S4(h)||(a=a.append(h.content));const p=s.mapping.map(f+r.tableStart);s.delete(p,p+h.nodeSize)}}if(l==null||c==null)return!0;if(s.setNodeMarkup(l+r.tableStart,null,{...GR(c.attrs,c.attrs.colspan,r.right-r.left-c.attrs.colspan),rowspan:r.bottom-r.top}),a.size){const u=l+1+c.content.size,d=S4(c)?l+1:u;s.replaceWith(d+r.tableStart,u+r.tableStart,a)}s.setSelection(new ht(s.doc.resolve(l+r.tableStart))),e(s)}return!0}function M4(t,e){const n=qn(t.schema);return yTe(({node:r})=>n[r.type.spec.tableRole])(t,e)}function yTe(t){return(e,n)=>{var r;const o=e.selection;let s,i;if(o instanceof ht){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;s=o.$anchorCell.nodeAfter,i=o.$anchorCell.pos}else{if(s=NSe(o.$from),!s)return!1;i=(r=ed(o.$from))==null?void 0:r.pos}if(s==null||i==null||s.attrs.colspan==1&&s.attrs.rowspan==1)return!1;if(n){let a=s.attrs;const l=[],c=a.colwidth;a.rowspan>1&&(a={...a,rowspan:1}),a.colspan>1&&(a={...a,colspan:1});const u=Es(e),d=e.tr;for(let h=0;h<u.right-u.left;h++)l.push(c?{...a,colwidth:c&&c[h]?[c[h]]:null}:a);let f;for(let h=u.top;h<u.bottom;h++){let p=u.map.positionAt(h,u.left,u.table);h==u.top&&(p+=s.nodeSize);for(let m=u.left,v=0;m<u.right;m++,v++)m==u.left&&h==u.top||d.insert(f=d.mapping.map(p+u.tableStart,1),t({node:s,row:h,col:m}).createAndFill(l[v]))}d.setNodeMarkup(i,t({node:s,row:u.top,col:u.left}),l[0]),o instanceof ht&&d.setSelection(new ht(d.doc.resolve(o.$anchorCell.pos),f?d.doc.resolve(f):void 0)),n(d)}return!0}}function vTe(t,e){return function(n,r){if(!Ko(n))return!1;const o=y0(n);if(o.nodeAfter.attrs[t]===e)return!1;if(r){const s=n.tr;n.selection instanceof ht?n.selection.forEachCell((i,a)=>{i.attrs[t]!==e&&s.setNodeMarkup(a,null,{...i.attrs,[t]:e})}):s.setNodeMarkup(o.pos,null,{...o.nodeAfter.attrs,[t]:e}),r(s)}return!0}}function bTe(t){return function(e,n){if(!Ko(e))return!1;if(n){const r=qn(e.schema),o=Es(e),s=e.tr,i=o.map.cellsInRect(t=="column"?{left:o.left,top:0,right:o.right,bottom:o.map.height}:t=="row"?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),a=i.map(l=>o.table.nodeAt(l));for(let l=0;l<i.length;l++)a[l].type==r.header_cell&&s.setNodeMarkup(o.tableStart+i[l],r.cell,a[l].attrs);if(s.steps.length==0)for(let l=0;l<i.length;l++)s.setNodeMarkup(o.tableStart+i[l],r.header_cell,a[l].attrs);n(s)}return!0}}function E4(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let o=0;o<r.length;o++){const s=e.table.nodeAt(r[o]);if(s&&s.type!==n.header_cell)return!1}return!0}function hh(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?bTe(t):function(n,r){if(!Ko(n))return!1;if(r){const o=qn(n.schema),s=Es(n),i=n.tr,a=E4("row",s,o),l=E4("column",s,o),c=(t==="column"?a:t==="row"&&l)?1:0,u=t=="column"?{left:0,top:c,right:1,bottom:s.map.height}:t=="row"?{left:c,top:0,right:s.map.width,bottom:1}:s,d=t=="column"?l?o.cell:o.header_cell:t=="row"?a?o.cell:o.header_cell:o.cell;s.map.cellsInRect(u).forEach(f=>{const h=f+s.tableStart,p=i.doc.nodeAt(h);p&&i.setNodeMarkup(h,d,p.attrs)}),r(i)}return!0}}hh("row",{useDeprecatedLogic:!0});hh("column",{useDeprecatedLogic:!0});var wTe=hh("cell",{useDeprecatedLogic:!0});function kTe(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,o=t.before();r>=0;r--){const s=t.node(-1).child(r),i=s.lastChild;if(i)return o-1-i.nodeSize;o-=s.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),o=t.after();r<n.childCount;r++){const s=n.child(r);if(s.childCount)return o+1;o+=s.nodeSize}}return null}function O4(t){return function(e,n){if(!Ko(e))return!1;const r=kTe(y0(e),t);if(r==null)return!1;if(n){const o=e.doc.resolve(r);n(e.tr.setSelection(Je.between(o,RSe(o))).scrollIntoView())}return!0}}function xTe(t,e){const n=t.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function CTe({allowTableNodeSelection:t=!1}={}){return new Kn({key:Fi,state:{init(){return null},apply(e,n){const r=e.getMeta(Fi);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:o,pos:s}=e.mapping.mapResult(n);return o?null:s}},props:{decorations:DSe,handleDOMEvents:{mousedown:JSe},createSelectionBetween(e){return Fi.getState(e.state)!=null?e.state.selection:null},handleTripleClick:KSe,handleKeyDown:WSe,handlePaste:GSe},appendTransaction(e,n,r){return FSe(r,XR(r,n),t)}})}function I4(t,e,n,r,o,s){let i=0,a=!0,l=e.firstChild;const c=t.firstChild;for(let u=0,d=0;u<c.childCount;u+=1){const{colspan:f,colwidth:h}=c.child(u).attrs;for(let p=0;p<f;p+=1,d+=1){const m=o===d?s:h&&h[p],v=m?`${m}px`:"";i+=m||r,m||(a=!1),l?(l.style.width!==v&&(l.style.width=v),l=l.nextSibling):e.appendChild(document.createElement("col")).style.width=v}}for(;l;){const u=l.nextSibling;l.parentNode.removeChild(l),l=u}a?(n.style.width=`${i}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${i}px`)}class _Te{constructor(e,n){this.node=e,this.cellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),I4(e,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!==this.node.type?!1:(this.node=e,I4(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return e.type==="attributes"&&(e.target===this.table||this.colgroup.contains(e.target))}}function A4(t,e){return t.createAndFill()}function STe(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;const e={};return Object.keys(t.nodes).forEach(n=>{const r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),t.cached.tableNodeTypes=e,e}function TTe(t,e,n,r,o){const s=STe(t),i=[],a=[];for(let c=0;c<n;c+=1){const u=A4(s.cell);if(u&&a.push(u),r){const d=A4(s.header_cell);d&&i.push(d)}}const l=[];for(let c=0;c<e;c+=1)l.push(s.row.createChecked(null,r&&c===0?i:a));return s.table.createChecked(null,l)}function MTe(t){return t instanceof ht}const Vp=({editor:t})=>{const{selection:e}=t.state;if(!MTe(e))return!1;let n=0;const r=xR(e.ranges[0].$from,o=>o.type.name==="table");return r==null||r.node.descendants(o=>{if(o.type.name==="table")return!1;["tableCell","tableHeader"].includes(o.type.name)&&(n+=1)}),n===e.ranges.length?(t.commands.deleteTable(),!0):!1},ETe=sn.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:_Te,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({HTMLAttributes:t}){return["table",Ht(this.options.HTMLAttributes,t),["tbody",0]]},addCommands(){return{insertTable:({rows:t=3,cols:e=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:o,editor:s})=>{const i=TTe(s.schema,t,e,n);if(o){const a=r.selection.anchor+1;r.replaceSelectionWith(i).scrollIntoView().setSelection(Je.near(r.doc.resolve(a)))}return!0},addColumnBefore:()=>({state:t,dispatch:e})=>aTe(t,e),addColumnAfter:()=>({state:t,dispatch:e})=>lTe(t,e),deleteColumn:()=>({state:t,dispatch:e})=>uTe(t,e),addRowBefore:()=>({state:t,dispatch:e})=>fTe(t,e),addRowAfter:()=>({state:t,dispatch:e})=>hTe(t,e),deleteRow:()=>({state:t,dispatch:e})=>mTe(t,e),deleteTable:()=>({state:t,dispatch:e})=>xTe(t,e),mergeCells:()=>({state:t,dispatch:e})=>T4(t,e),splitCell:()=>({state:t,dispatch:e})=>M4(t,e),toggleHeaderColumn:()=>({state:t,dispatch:e})=>hh("column")(t,e),toggleHeaderRow:()=>({state:t,dispatch:e})=>hh("row")(t,e),toggleHeaderCell:()=>({state:t,dispatch:e})=>wTe(t,e),mergeOrSplit:()=>({state:t,dispatch:e})=>T4(t,e)?!0:M4(t,e),setCellAttribute:(t,e)=>({state:n,dispatch:r})=>vTe(t,e)(n,r),goToNextCell:()=>({state:t,dispatch:e})=>O4(1)(t,e),goToPreviousCell:()=>({state:t,dispatch:e})=>O4(-1)(t,e),fixTables:()=>({state:t,dispatch:e})=>(e&&XR(t),!0),setCellSelection:t=>({tr:e,dispatch:n})=>{if(n){const r=ht.create(e.doc,t.anchorCell,t.headCell);e.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:Vp,"Mod-Backspace":Vp,Delete:Vp,"Mod-Delete":Vp}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[XSe({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],CTe({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:nt(Me(t,"tableRole",e))}}}),OTe=sn.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?[parseInt(e,10)]:null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",Ht(this.options.HTMLAttributes,t),0]}}),ITe=sn.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?[parseInt(e,10)]:null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",Ht(this.options.HTMLAttributes,t),0]}}),ATe=sn.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",Ht(this.options.HTMLAttributes,t),0]}}),NTe=(t,e)=>{const n=t.__vccOpts||t;for(const[r,o]of e)n[r]=o;return n},LTe={components:{EditorContent:MSe},props:{modelValue:{type:String,default:""}},emits:["update:modelValue","close"],data(){return{editor:null,tableOptionsOpen:!1,selectedClasses:"fm-p-2 fm-w-[36px] fm-h-[36px] fm-flex fm-items-center fm-justify-center dark:fm-text-gray-300 fm-rounded fm-cursor-pointer dark:hover:fm-text-gray-300 dark:fm-bg-gray-600 dark:hover:fm-bg-gray-500 fm-text-gray-300 hover:fm-text-white hover:fm-bg-gray-500 !fm-bg-gray-600",unSelectedClasses:"fm-p-2 fm-w-[36px] fm-h-[36px] fm-flex fm-items-center fm-justify-center fm-text-gray-500 fm-rounded fm-cursor-pointer hover:fm-text-gray-900 hover:fm-bg-gray-100 dark:fm-text-gray-400 dark:hover:fm-text-white dark:hover:fm-bg-gray-600",unSelectedClassesNoSize:"fm-p-2 fm-flex fm-items-center fm-justify-center fm-text-gray-500 fm-rounded fm-cursor-pointer hover:fm-text-gray-900 hover:fm-bg-gray-100 dark:fm-text-gray-400 dark:hover:fm-text-white dark:hover:fm-bg-gray-600"}},watch:{modelValue(t){this.editor.getHTML()!==t&&this.editor.commands.setContent(t,!1)}},methods:{toggleTableOptions(){this.tableOptionsOpen=!this.tableOptionsOpen}},mounted(){this.editor=new TSe({extensions:[U_e,q_e,ETe.configure({resizable:!0}),ATe,ITe,OTe,W_e.configure({types:["heading","paragraph"],alignments:["left","center","right"]})],content:this.modelValue,onUpdate:()=>{this.$emit("update:modelValue",this.editor.getHTML())}}),this.editor.commands.focus("end")},beforeUnmount(){this.editor.destroy()}},RTe={class:"wysiwyg"},PTe={key:0,class:"fm-w-full fm-mb-4 fm-border fm-border-gray-200 fm-rounded-lg fm-bg-gray-50 dark:fm-bg-gray-700 dark:fm-border-gray-600"},DTe={class:"fm-flex fm-items-center fm-justify-between fm-px-3 fm-py-2 fm-border-b dark:fm-border-gray-600"},$Te={class:"fm-flex fm-flex-wrap fm-items-center fm-divide-gray-200 sm:fm-divide-x dark:fm-divide-gray-600"},HTe={class:"fm-flex fm-items-center fm-space-x-1 sm:fm-pr-4"},FTe=g("span",{class:"fm-sr-only"},"Heading 1",-1),BTe=g("span",{class:"fm-sr-only"},"Heading 2",-1),jTe=g("span",{class:"fm-sr-only"},"Heading 3",-1),zTe=g("span",{class:"fm-sr-only"},"Heading 4",-1),VTe=g("span",{class:"fm-sr-only"},"Heading 5",-1),UTe=g("span",{class:"fm-sr-only"},"Heading 6",-1),qTe=g("span",{class:"fm-sr-only"},"Paragraph",-1),WTe={class:"fm-flex fm-flex-wrap fm-items-center fm-space-x-1 sm:fm-px-4"},KTe=g("span",{class:"fm-sr-only"},"Bold",-1),GTe=g("span",{class:"fm-sr-only"},"Italic",-1),JTe=g("span",{class:"fm-sr-only"},"Underline",-1),YTe=g("span",{class:"fm-sr-only"},"Strike through",-1),XTe={class:"fm-flex fm-flex-wrap fm-items-center fm-space-x-1 sm:fm-px-4"},QTe=g("svg",{fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12"})],-1),ZTe=g("span",{class:"fm-sr-only"},"Left align",-1),eMe=[QTe,ZTe],tMe=g("svg",{fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",class:"fm-w-5 fm-h-5"},[g("path",{d:"M3.75 6.75H20.25M8 12H15.75M6.5 17.25H17.25","stroke-linecap":"round","stroke-linejoin":"round"})],-1),nMe=g("span",{class:"fm-sr-only"},"Align center",-1),rMe=[tMe,nMe],oMe=g("svg",{fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5M12 17.25h8.25"})],-1),sMe=g("span",{class:"fm-sr-only"},"Right align",-1),iMe=[oMe,sMe],aMe={class:"fm-flex fm-flex-wrap fm-items-center fm-space-x-1 sm:fm-px-4"},lMe=g("svg",{fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})],-1),cMe=g("span",{class:"fm-sr-only"},"Unordered list",-1),uMe=[lMe,cMe],dMe=Fu('<svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="fm-w-5 fm-h-5"><path d="M8.25 6.75H20.25M8.25 12H20.25M8.25 17.25H20.25" stroke-linecap="round" stroke-linejoin="round"></path><path d="M5.31374 4.45459V7.00004H4.77557V4.96542H4.76065L4.17773 5.33083V4.85356L4.80788 4.45459H5.31374Z" fill="currentColor"></path><path d="M4.20632 13V12.6123L5.11239 11.7733C5.18945 11.6987 5.25408 11.6316 5.30629 11.572C5.35932 11.5123 5.3995 11.4539 5.42685 11.3967C5.45419 11.3387 5.46786 11.2761 5.46786 11.209C5.46786 11.1345 5.45088 11.0702 5.4169 11.0164C5.38293 10.9617 5.33653 10.9198 5.2777 10.8908C5.21887 10.861 5.15217 10.8461 5.07759 10.8461C4.9997 10.8461 4.93176 10.8618 4.87376 10.8933C4.81576 10.9248 4.77101 10.97 4.73952 11.0288C4.70804 11.0876 4.69229 11.1577 4.69229 11.2389H4.18146C4.18146 11.0723 4.21916 10.9277 4.29457 10.8051C4.36997 10.6825 4.47562 10.5876 4.61151 10.5205C4.7474 10.4533 4.904 10.4198 5.08132 10.4198C5.26361 10.4198 5.42229 10.4521 5.55735 10.5167C5.69324 10.5805 5.79889 10.6692 5.87429 10.7827C5.94969 10.8962 5.98739 11.0263 5.98739 11.173C5.98739 11.2691 5.96834 11.364 5.93022 11.4576C5.89293 11.5512 5.82623 11.6552 5.73011 11.7696C5.634 11.8831 5.49852 12.0194 5.32369 12.1785L4.95206 12.5427V12.5601H6.02095V13H4.20632Z" fill="currentColor"></path><path d="M5.14719 19.0348C4.96159 19.0348 4.79628 19.0029 4.65128 18.9391C4.5071 18.8745 4.39317 18.7859 4.30948 18.6732C4.22662 18.5596 4.18395 18.4287 4.18146 18.2804H4.72337C4.72668 18.3426 4.74698 18.3972 4.78427 18.4445C4.82238 18.4909 4.87293 18.5269 4.9359 18.5526C4.99888 18.5783 5.06972 18.5911 5.14844 18.5911C5.23047 18.5911 5.30297 18.5766 5.36594 18.5476C5.42892 18.5186 5.47822 18.4784 5.51385 18.4271C5.54948 18.3757 5.56729 18.3165 5.56729 18.2493C5.56729 18.1814 5.54824 18.1213 5.51012 18.0691C5.47283 18.0161 5.41897 17.9747 5.34854 17.9448C5.27894 17.915 5.19608 17.9001 5.09996 17.9001H4.86257V17.5048H5.09996C5.18117 17.5048 5.25284 17.4908 5.31499 17.4626C5.37796 17.4344 5.42685 17.3955 5.46165 17.3457C5.49645 17.2952 5.51385 17.2364 5.51385 17.1693C5.51385 17.1055 5.49852 17.0495 5.46786 17.0015C5.43803 16.9526 5.39577 16.9145 5.34109 16.8871C5.28723 16.8598 5.22425 16.8461 5.15217 16.8461C5.07925 16.8461 5.01255 16.8594 4.95206 16.8859C4.89157 16.9116 4.8431 16.9484 4.80664 16.9965C4.77018 17.0446 4.75071 17.1009 4.74822 17.1655H4.23242C4.23491 17.0189 4.27675 16.8896 4.35795 16.7777C4.43916 16.6659 4.54853 16.5785 4.68608 16.5155C4.82446 16.4517 4.98065 16.4198 5.15465 16.4198C5.33031 16.4198 5.48402 16.4517 5.61577 16.5155C5.74751 16.5793 5.84985 16.6655 5.92276 16.774C5.99651 16.8817 6.03297 17.0027 6.03214 17.1369C6.03297 17.2795 5.98864 17.3984 5.89915 17.4937C5.81049 17.5889 5.6949 17.6494 5.55238 17.6751V17.695C5.73964 17.719 5.88216 17.7841 5.97994 17.8901C6.07854 17.9954 6.12743 18.1271 6.1266 18.2854C6.12743 18.4304 6.08558 18.5592 6.00107 18.6719C5.91738 18.7846 5.80179 18.8733 5.6543 18.9379C5.50681 19.0025 5.33777 19.0348 5.14719 19.0348Z" fill="currentColor"></path></svg><span class="fm-sr-only">Ordered list</span>',2),fMe=[dMe],hMe={class:"fm-flex fm-flex-wrap fm-items-center fm-space-x-1 sm:fm-pl-4"},pMe={class:"fm-relative"},mMe=g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"fm-w-5 fm-h-5"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 01-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0112 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5"})],-1),gMe=[mMe],yMe={key:0,class:"fm-absolute fm-top-[40px] fm-left-0 fm-flex fm-flex-col fm-gap-1 fm-z-10 fm-w-[160px] fm-p-2 fm-bg-gray-50 fm-rounded-b-lg fm-max-h-[200px] fm-overflow-auto"},vMe=g("svg",{"aria-hidden":"true",class:"fm-w-4 fm-h-4",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[g("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),bMe=g("span",{class:"fm-sr-only"},"Close wysiwyg",-1),wMe=[vMe,bMe],kMe=g("div",{id:"tooltip-fullscreen",role:"tooltip",class:"fm-absolute fm-z-10 fm-invisible fm-inline-block fm-px-3 fm-py-2 fm-text-sm fm-font-medium fm-text-white fm-transition-opacity fm-duration-300 fm-bg-gray-900 fm-rounded-lg fm-shadow-sm fm-opacity-0 tooltip dark:fm-bg-gray-700"},[Ge(" Show full screen "),g("div",{class:"tooltip-arrow","data-popper-arrow":""})],-1),xMe={class:"fm-p-2 fm-bg-white fm-rounded-b-lg dark:fm-bg-gray-800 dark:fm-text-white"};function CMe(t,e,n,r,o,s){const i=If("editor-content");return S(),T("div",RTe,[o.editor?(S(),T("div",PTe,[g("div",DTe,[g("div",$Te,[g("div",HTe,[g("button",{onClick:e[0]||(e[0]=a=>o.editor.chain().focus().toggleHeading({level:1}).run()),type:"button",class:V(o.editor.isActive("heading",{level:1})?o.selectedClasses:o.unSelectedClasses)},[Ge(" H1 "),FTe],2),g("button",{onClick:e[1]||(e[1]=a=>o.editor.chain().focus().toggleHeading({level:2}).run()),type:"button",class:V(o.editor.isActive("heading",{level:2})?o.selectedClasses:o.unSelectedClasses)},[Ge(" H2 "),BTe],2),g("button",{onClick:e[2]||(e[2]=a=>o.editor.chain().focus().toggleHeading({level:3}).run()),type:"button",class:V(o.editor.isActive("heading",{level:3})?o.selectedClasses:o.unSelectedClasses)},[Ge(" H3 "),jTe],2),g("button",{onClick:e[3]||(e[3]=a=>o.editor.chain().focus().toggleHeading({level:4}).run()),type:"button",class:V(o.editor.isActive("heading",{level:4})?o.selectedClasses:o.unSelectedClasses)},[Ge(" H4 "),zTe],2),g("button",{onClick:e[4]||(e[4]=a=>o.editor.chain().focus().toggleHeading({level:5}).run()),type:"button",class:V(o.editor.isActive("heading",{level:5})?o.selectedClasses:o.unSelectedClasses)},[Ge(" H5 "),VTe],2),g("button",{onClick:e[5]||(e[5]=a=>o.editor.chain().focus().toggleHeading({level:6}).run()),type:"button",class:V(o.editor.isActive("heading",{level:6})?o.selectedClasses:o.unSelectedClasses)},[Ge(" H6 "),UTe],2),g("button",{onClick:e[6]||(e[6]=a=>o.editor.chain().focus().setParagraph().run()),type:"button",class:V(o.editor.isActive("paragraph")?o.selectedClasses:o.unSelectedClasses)},[Ge(" P "),qTe],2)]),g("div",WTe,[g("button",{onClick:e[7]||(e[7]=a=>o.editor.chain().focus().toggleBold().run()),type:"button",class:V(o.editor.isActive("bold")?o.selectedClasses:o.unSelectedClasses)},[Ge(" B "),KTe],2),g("button",{onClick:e[8]||(e[8]=a=>o.editor.chain().focus().toggleItalic().run()),type:"button",class:V(o.editor.isActive("italic")?o.selectedClasses:o.unSelectedClasses)},[Ge(" I "),GTe],2),g("button",{onClick:e[9]||(e[9]=a=>o.editor.chain().focus().toggleUnderline().run()),type:"button",class:V(o.editor.isActive("underline")?o.selectedClasses:o.unSelectedClasses)},[Ge(" U "),JTe],2),g("button",{onClick:e[10]||(e[10]=a=>o.editor.chain().focus().toggleStrike().run()),type:"button",class:V(o.editor.isActive("strike")?o.selectedClasses:o.unSelectedClasses)},[Ge(" S "),YTe],2)]),g("div",XTe,[g("button",{onClick:e[11]||(e[11]=a=>o.editor.chain().focus().setTextAlign("left").run()),type:"button",class:V(o.editor.isActive({textAlign:"left"})?o.selectedClasses:o.unSelectedClasses)},eMe,2),g("button",{onClick:e[12]||(e[12]=a=>o.editor.chain().focus().setTextAlign("center").run()),type:"button",class:V(o.editor.isActive({textAlign:"center"})?o.selectedClasses:o.unSelectedClasses)},rMe,2),g("button",{onClick:e[13]||(e[13]=a=>o.editor.chain().focus().setTextAlign("right").run()),type:"button",class:V(o.editor.isActive({textAlign:"right"})?o.selectedClasses:o.unSelectedClasses)},iMe,2)]),g("div",aMe,[g("button",{onClick:e[14]||(e[14]=a=>o.editor.chain().focus().toggleBulletList().run()),type:"button",class:V(o.editor.isActive("bulletList")?o.selectedClasses:o.unSelectedClasses)},uMe,2),g("button",{onClick:e[15]||(e[15]=a=>o.editor.chain().focus().toggleOrderedList().run()),type:"button",class:V(o.editor.isActive("orderedList")?o.selectedClasses:o.unSelectedClasses)},fMe,2)]),g("div",hMe,[g("div",pMe,[g("button",{type:"button",class:V(o.unSelectedClasses),onClick:e[16]||(e[16]=a=>s.toggleTableOptions())},gMe,2),o.tableOptionsOpen?(S(),T("div",yMe,[g("button",{class:V(o.unSelectedClassesNoSize),onClick:e[17]||(e[17]=a=>(s.toggleTableOptions(),o.editor.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run()))},"Insert table",2),g("button",{class:V(o.unSelectedClassesNoSize),onClick:e[18]||(e[18]=a=>o.editor.chain().focus().addColumnBefore().run())},"Add column before",2),g("button",{class:V(o.unSelectedClassesNoSize),onClick:e[19]||(e[19]=a=>o.editor.chain().focus().addColumnAfter().run())},"Add column after",2),g("button",{class:V(o.unSelectedClassesNoSize),onClick:e[20]||(e[20]=a=>o.editor.chain().focus().addRowBefore().run())},"Add row before",2),g("button",{class:V(o.unSelectedClassesNoSize),onClick:e[21]||(e[21]=a=>o.editor.chain().focus().addRowAfter().run())},"Add row after",2),g("button",{class:V(o.unSelectedClassesNoSize),onClick:e[22]||(e[22]=a=>o.editor.chain().focus().deleteColumn().run())},"Delete column",2),g("button",{class:V(o.unSelectedClassesNoSize),onClick:e[23]||(e[23]=a=>o.editor.chain().focus().deleteRow().run())},"Delete row",2),g("button",{class:V(o.unSelectedClassesNoSize),onClick:e[24]||(e[24]=a=>(s.toggleTableOptions(),o.editor.chain().focus().deleteTable().run()))},"Delete table",2),g("button",{class:V(o.unSelectedClassesNoSize),onClick:e[25]||(e[25]=a=>o.editor.chain().focus().mergeCells().run())},"Merge cells",2),g("button",{class:V(o.unSelectedClassesNoSize),onClick:e[26]||(e[26]=a=>o.editor.chain().focus().splitCell().run())},"Split cells",2),g("button",{class:V(o.unSelectedClassesNoSize),onClick:e[27]||(e[27]=a=>o.editor.chain().focus().toggleHeaderColumn().run())},"Toggle header column",2),g("button",{class:V(o.unSelectedClassesNoSize),onClick:e[28]||(e[28]=a=>o.editor.chain().focus().toggleHeaderRow().run())},"Toggle header row",2),g("button",{class:V(o.unSelectedClassesNoSize),onClick:e[29]||(e[29]=a=>o.editor.chain().focus().toggleHeaderCell().run())},"Toggle header cell",2)])):H("",!0)])])]),g("button",{type:"button",onClick:e[30]||(e[30]=a=>t.$emit("close")),"data-tooltip-target":"tooltip-fullscreen",class:"fm-p-2 fm-text-gray-500 fm-rounded fm-cursor-pointer sm:fm-ml-auto hover:fm-text-gray-900 hover:fm-bg-gray-100 dark:fm-text-gray-400 dark:hover:fm-text-white dark:hover:fm-bg-gray-600"},wMe),kMe]),g("div",xMe,[he(i,{editor:o.editor},null,8,["editor"])])])):H("",!0)])}const _Me=NTe(LTe,[["render",CMe]]),SMe={key:0},TMe={class:"fm-opacity-50"},MMe={key:1},s3e=Ie({__name:"FmWysiwyg",props:{block:{type:Object,required:!0},fieldName:{type:String,required:!0},label:{type:String,required:!0},editMode:{type:Boolean,required:!0,default:!1},configStore:{type:Object,required:!1,default:!1}},setup(t){const e=t;let n=ae(!1);const r=s=>{s.key==="Escape"&&(n.value=!1)},o=()=>{e.block[e.fieldName]&&e.block[e.fieldName].replace(/<\/?[^>]+(>|$)/g,"").length===0&&(e.block[e.fieldName]=null),n.value=!1,document.dispatchEvent(new CustomEvent("flowmate-input-updated",{}))};return(s,i)=>(S(),T("div",null,[e.editMode?(S(),T("div",SMe,[x(n)?(S(),T("span",MMe,[he(_Me,{onKeyup:r,onClose:o,class:"fm-text-black",modelValue:e.block[e.fieldName],"onUpdate:modelValue":i[1]||(i[1]=a=>e.block[e.fieldName]=a)},null,8,["modelValue"])])):(S(),T("span",{key:0,onClick:i[0]||(i[0]=a=>Ot(n)?n.value=!0:n=!0),class:"fm-cursor-pointer"},[Xt(s.$slots,"default",{},()=>[g("span",TMe,Le(e.label)+": Click to add",1)])]))])):Xt(s.$slots,"default",{key:1})]))}}),EMe={class:"fm-relative"},OMe=g("svg",{fill:"none",stroke:"currentColor",class:"fm-w-5 fm-h-5","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})],-1),IMe={class:"fm-sr-only"},AMe={key:1},NMe={key:2,class:"fm-w-full"},LMe=g("div",{class:"fm-flex fm-relative fm-items-center fm-justify-center fm-w-full fm-h-36 fm-bg-gray-300 fm-rounded dark:fm-bg-gray-700 fm-opacity-80"},[g("svg",{class:"fm-w-12 fm-h-12 fm-text-gray-200",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 640 512"},[g("path",{d:"M480 80C480 35.82 515.8 0 560 0C604.2 0 640 35.82 640 80C640 124.2 604.2 160 560 160C515.8 160 480 124.2 480 80zM0 456.1C0 445.6 2.964 435.3 8.551 426.4L225.3 81.01C231.9 70.42 243.5 64 256 64C268.5 64 280.1 70.42 286.8 81.01L412.7 281.7L460.9 202.7C464.1 196.1 472.2 192 480 192C487.8 192 495 196.1 499.1 202.7L631.1 419.1C636.9 428.6 640 439.7 640 450.9C640 484.6 612.6 512 578.9 512H55.91C25.03 512 .0006 486.1 .0006 456.1L0 456.1z"})])],-1),RMe=[LMe],i3e=Ie({__name:"FmImage",props:{block:{type:Object,required:!0},fieldName:{type:String,required:!0},parent:{type:String,required:!1},blockIndex:{type:Number,required:!0,default:0},repeaterIndex:{type:Number,required:!1},editMode:{type:Boolean,required:!0,default:!1},configStore:{type:Object,required:!1,default:!1}},setup(t){const e=t;return(n,r)=>(S(),T("div",null,[g("div",EMe,[e.editMode&&e.configStore?(S(),T("button",{key:0,type:"button",onClick:r[0]||(r[0]=o=>e.configStore.setValues(e.block,e.blockIndex,e.fieldName,["jpg","jpeg","png","gif","webp","avif"],e.configStore.getActiveFieldType,"media",e.block.acf_fc_layout,!1,e.parent,e.repeaterIndex)),"data-dial-toggle":"speed-dial-menu-dropdown","aria-controls":"speed-dial-menu-dropdown","aria-expanded":"false",class:"fm-flex fm-items-center fm-justify-center fm-ml-auto fm-text-white !fm-bg-blue-700 fm-rounded-full fm-w-10 fm-h-10 hover:!fm-bg-blue-800 dark:!fm-bg-blue-600 dark:hover:!fm-bg-blue-700 focus:fm-ring-4 focus:fm-ring-blue-300 focus:fm-outline-none dark:focus:fm-ring-blue-800 fm-z-20 fm-absolute fm-top-2 fm-right-2"},[OMe,g("span",IMe,"Edit "+Le(e.configStore.getActiveFieldType),1)])):H("",!0),e.block[e.fieldName]&&e.block[e.fieldName].ID?(S(),T("div",AMe,[Xt(n.$slots,"default")])):(S(),T("div",NMe,RMe))])]))}}),PMe=g("svg",{"aria-hidden":"true",width:"20",height:"20",class:"fm-w-6 fm-h-6",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[g("path",{d:"M10 6C9.46957 6 8.96086 5.78929 8.58579 5.41421C8.21071 5.03914 8 4.53043 8 4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2C10.5304 2 11.0391 2.21071 11.4142 2.58579C11.7893 2.96086 12 3.46957 12 4C12 4.53043 11.7893 5.03914 11.4142 5.41421C11.0391 5.78929 10.5304 6 10 6ZM10 12C9.46957 12 8.96086 11.7893 8.58579 11.4142C8.21071 11.0391 8 10.5304 8 10C8 9.46957 8.21071 8.96086 8.58579 8.58579C8.96086 8.21071 9.46957 8 10 8C10.5304 8 11.0391 8.21071 11.4142 8.58579C11.7893 8.96086 12 9.46957 12 10C12 10.5304 11.7893 11.0391 11.4142 11.4142C11.0391 11.7893 10.5304 12 10 12ZM8 16C8 16.5304 8.21071 17.0391 8.58579 17.4142C8.96086 17.7893 9.46957 18 10 18C10.5304 18 11.0391 17.7893 11.4142 17.4142C11.7893 17.0391 12 16.5304 12 16C12 15.4696 11.7893 14.9609 11.4142 14.5858C11.0391 14.2107 10.5304 14 10 14C9.46957 14 8.96086 14.2107 8.58579 14.5858C8.21071 14.9609 8 15.4696 8 16Z",fill:"currentColor"})],-1),DMe=g("span",{class:"fm-sr-only"},"Open actions menu",-1),$Me=[PMe,DMe],HMe=["innerHTML"],FMe={class:"fm-absolute fm-bottom-0 fm-right-2 fm-flex fm-gap-1"},BMe={class:"fm-relative fm-inline-flex fm-items-center fm-justify-center fm-w-6 fm-h-6 fm-ml-1 fm-mt-1 fm-overflow-hidden fm-bg-gray-100 fm-rounded-full dark:fm-bg-gray-600"},jMe=["title"],zMe={class:"fm-flex fm-gap-2 fm-flex-col fm-justify-end fm-space-y-2"},VMe={key:0},UMe={key:0},qMe=["for","innerHTML"],WMe=["id","onUpdate:modelValue"],KMe={key:0,value:""},GMe=["value","innerHTML"],JMe={key:1,class:"fm-flex fm-items-center"},YMe=["id","onChange","checked"],XMe=["for","innerHTML"],QMe={key:2,class:"fm-flex fm-flex-col"},ZMe=["innerHTML"],e2e=["id","value","onUpdate:modelValue"],t2e=["for","innerHTML"],n2e={key:3,class:"fm-flex fm-flex-col"},r2e=["innerHTML"],o2e={key:0},s2e=["id","onUpdate:modelValue"],i2e=["for"],a2e=["id","value","onUpdate:modelValue"],l2e=["for","innerHTML"],c2e={key:4,class:"fm-flex fm-flex-col"},u2e=["onClick"],d2e={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"fm-w-6 fm-h-6"},f2e=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"},null,-1),h2e=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 6h.008v.008H6V6z"},null,-1),p2e=[f2e,h2e],m2e={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"fm-w-6 fm-h-6"},g2e=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"},null,-1),y2e=[g2e],v2e=["innerHTML"],b2e={key:0},w2e={key:0},k2e=["for","innerHTML"],x2e=["id","onUpdate:modelValue"],C2e={key:0,value:""},_2e=["value","innerHTML"],S2e={key:1,class:"fm-flex fm-items-center"},T2e=["id","onChange","checked"],M2e=["for","innerHTML"],E2e={key:2,class:"fm-flex fm-flex-col"},O2e=["innerHTML"],I2e=["id","value","onUpdate:modelValue"],A2e=["for","innerHTML"],N2e={key:3,class:"fm-flex fm-flex-col"},L2e=["innerHTML"],R2e={key:0},P2e=["id","onUpdate:modelValue"],D2e=["for"],$2e=["id","value","onUpdate:modelValue"],H2e=["for","innerHTML"],F2e={key:4,class:"fm-flex fm-flex-col"},B2e=["onClick"],j2e={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"fm-w-6 fm-h-6"},z2e=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"},null,-1),V2e=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 6h.008v.008H6V6z"},null,-1),U2e=[z2e,V2e],q2e={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"fm-w-6 fm-h-6"},W2e=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"},null,-1),K2e=[W2e],G2e=["innerHTML"],a3e=Ie({__name:"FmSettings",props:{layout:{type:String,required:!0},block:{type:Object,required:!0},editMode:{type:Boolean,required:!0,default:!1},blockIndex:{type:Number,required:!0,default:0},configStore:{type:Object,required:!1,default:!1},collaborationsStore:{type:Object,required:!1,default:!1},additionalFields:{type:Array,required:!1}},setup(t){const e=t,n=ae(!1),r=e.configStore?e.configStore.getConfig:!1,o=Math.random().toString(36).substring(7),s=()=>{n.value=!n.value},i=(m,v,b)=>{m&&m.target&&m.target&&m.target instanceof HTMLInputElement&&(m.target.checked?b?e.block[v]=!0:e.block.settings[v]=!0:b?e.block[v]=!1:e.block.settings[v]=!1,h())},a=ae(),l=m=>{if(n.value){if(m.target!==a.value&&m.composedPath().includes(a.value))return;n.value=!1}};xo(()=>{window.addEventListener("click",l)}),_s(()=>{window.removeEventListener("click",l)});const c=Y(()=>e.collaborationsStore&&e.collaborationsStore.getCollaborationGuests&&e.collaborationsStore.getCollaborationGuests.length>0?e.collaborationsStore.getCollaborationGuests.find(m=>m.activeBlockIndex===e.blockIndex):!1),u=Y(()=>{if(c.value)return e.collaborationsStore.getGuestColor(c.value.name).border}),d=Y(()=>{if(c.value)return e.collaborationsStore.getGuestColor(c.value.name).bg}),f=Y(()=>e.collaborationsStore&&e.collaborationsStore.getCollaborationGuests&&e.collaborationsStore.getCollaborationGuests.length>0?e.collaborationsStore.getCollaborationGuests.filter(m=>m.activeBlockIndex===e.blockIndex):!1),h=()=>{document.dispatchEvent(new CustomEvent("flowmate-input-updated",{}))},p=Y(()=>{var m;return(m=r.config[e.layout])==null?void 0:m.settings});return(m,v)=>e.editMode&&x(r)&&x(r).config?(S(),T("div",{key:0,ref_key:"fmSettings",ref:a,class:V(["fm-absolute fm-right-0 fm-bottom-0 fm-top-0 fm-left-0 fm-pointer-events-none group fm-settings",[n.value?"fm-z-40":"fm-z-10",u.value?u.value:"show-border"]])},[g("button",{type:"button",onClick:s,"aria-controls":"speed-dial-menu-dropdown","aria-expanded":"false",style:{"pointer-events":"all!important"},class:"fm-flex fm-absolute fm-top-4 fm-right-4 fm-items-center fm-justify-center fm-ml-auto fm-text-white !fm-bg-blue-700 fm-rounded-full fm-w-10 fm-h-10 hover:!fm-bg-blue-800 dark:!fm-bg-blue-600 dark:hover:!fm-bg-blue-700 focus:fm-ring-4 focus:fm-ring-blue-300 focus:fm-outline-none dark:focus:fm-ring-blue-800"},$Me),x(r).config[e.layout].acf_fc_label?(S(),T("span",{key:0,class:V(["fm-absolute fm-top-0 fm-left-0 fm-px-[8px] fm-py-[2px] fm-text-white fm-text-xs fm-layout-label fm-invisible",d.value?d.value:"!fm-bg-blue-700 dark:!fm-bg-blue-600"]),innerHTML:x(r).config[e.layout].acf_fc_label},null,10,HMe)):H("",!0),g("div",FMe,[(S(!0),T(ye,null,Pe(f.value,(b,w)=>(S(),T("div",{class:V(["fm-relative fm-w-8 fm-h-8 fm-rounded-full fm-rounded-bl-none fm-rounded-br-none",t.collaborationsStore.getGuestColor(b.name).bg]),key:w},[g("div",BMe,[g("span",{class:"fm-cursor-default fm-font-medium fm-text-gray-600 dark:fm-text-gray-300 fm-uppercase fm-text-sm",title:b.name},Le(t.collaborationsStore.getGuestInitials(b.name)),9,jMe)])],2))),128))]),g("div",{style:{"pointer-events":"all!important"},class:V(["fm-pointer-events-all fm-absolute fm-right-4 fm-top-14 fm-w-[300px] fm-max-h-[400px] fm-overflow-auto fm-p-4 fm-mt-2 fm-bg-white fm-border fm-border-gray-100 fm-rounded-lg fm-shadow-sm dark:fm-border-gray-600 dark:fm-bg-gray-700",n.value?"":"fm-hidden"])},[g("div",zMe,[(S(!0),T(ye,null,Pe(p.value.sub_fields,(b,w)=>(S(),T("div",null,[typeof b=="object"?(S(),T("div",VMe,[b.type==="select"?(S(),T("div",UMe,[g("label",{for:w+x(o),class:"fm-block fm-mb-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-white",innerHTML:b.label},null,8,qMe),qe(g("select",{id:w+x(o),"onUpdate:modelValue":k=>e.block.settings[w]=k,onChange:h,class:"fm-bg-gray-50 fm-border fm-border-gray-300 fm-text-gray-900 fm-text-sm fm-rounded-lg focus:fm-ring-blue-500 focus:fm-border-blue-500 fm-block fm-w-full fm-p-2.5 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-ring-blue-500 dark:focus:fm-border-blue-500"},[b.allow_null===1?(S(),T("option",KMe,"- Select -")):H("",!0),(S(!0),T(ye,null,Pe(b.choices,(k,y)=>(S(),T("option",{value:y,innerHTML:k},null,8,GMe))),256))],40,WMe),[[mo,e.block.settings[w]]])])):H("",!0),b.type==="true_false"?(S(),T("div",JMe,[g("input",{id:w+x(o),onChange:k=>i(k,w,!1),checked:e.block.settings[w]===!0,type:"checkbox",value:!0,class:"fm-w-4 fm-h-4 fm-text-blue-600 fm-bg-gray-100 fm-border-gray-300 fm-rounded-full focus:fm-ring-blue-500 dark:focus:fm-ring-blue-600 dark:fm-ring-offset-gray-800 focus:fm-ring-2 dark:fm-bg-gray-700 dark:fm-border-gray-600"},null,40,YMe),g("label",{for:w+x(o),class:"fm-ml-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-gray-300",innerHTML:b.label},null,8,XMe)])):H("",!0),b.type==="checkbox"?(S(),T("div",QMe,[g("p",{class:"fm-block fm-mb-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-white",innerHTML:b.label},null,8,ZMe),(S(!0),T(ye,null,Pe(b.choices,(k,y)=>(S(),T("div",null,[qe(g("input",{id:y+w+x(o),value:y,type:"checkbox","onUpdate:modelValue":C=>e.block.settings[w]=C,onChange:h,class:"fm-w-4 fm-h-4 fm-text-blue-600 fm-bg-gray-100 fm-border-gray-300 fm-rounded-full focus:fm-ring-blue-500 dark:focus:fm-ring-blue-600 dark:fm-ring-offset-gray-800 focus:fm-ring-2 dark:fm-bg-gray-700 dark:fm-border-gray-600"},null,40,e2e),[[Il,e.block.settings[w]]]),g("label",{for:y+w+x(o),class:"fm-ml-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-gray-300",innerHTML:k},null,8,t2e)]))),256))])):H("",!0),b.type==="radio"?(S(),T("div",n2e,[g("p",{class:"fm-block fm-mb-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-white",innerHTML:b.label},null,8,r2e),b.allow_null===1?(S(),T("div",o2e,[qe(g("input",{id:"null_"+w+x(o),value:"",type:"radio","onUpdate:modelValue":k=>e.block.settings[w]=k,onChange:h,class:"fm-w-4 fm-h-4 fm-text-blue-600 fm-bg-gray-100 fm-border-gray-300 fm-rounded-full focus:fm-ring-blue-500 dark:focus:fm-ring-blue-600 dark:fm-ring-offset-gray-800 focus:fm-ring-2 dark:fm-bg-gray-700 dark:fm-border-gray-600"},null,40,s2e),[[zs,e.block.settings[w]]]),g("label",{for:"null_"+w+x(o),class:"fm-ml-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-gray-300"},"- None -",8,i2e)])):H("",!0),(S(!0),T(ye,null,Pe(b.choices,(k,y)=>(S(),T("div",null,[qe(g("input",{id:y+w+x(o),value:y,type:"radio","onUpdate:modelValue":C=>e.block.settings[w]=C,onChange:h,class:"fm-w-4 fm-h-4 fm-text-blue-600 fm-bg-gray-100 fm-border-gray-300 fm-rounded-full focus:fm-ring-blue-500 dark:focus:fm-ring-blue-600 dark:fm-ring-offset-gray-800 focus:fm-ring-2 dark:fm-bg-gray-700 dark:fm-border-gray-600"},null,40,a2e),[[zs,e.block.settings[w]]]),g("label",{for:y+w+x(o),class:"fm-ml-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-gray-300",innerHTML:k},null,8,l2e)]))),256))])):H("",!0),b.type==="taxonomy"||b.type==="post_object"||b.type==="relationship"?(S(),T("div",c2e,[e.configStore?(S(),T("button",{key:0,onClick:k=>e.configStore.setValues(e.block,e.blockIndex,w,[],"","posts",e.layout,!0,"",!1),type:"button",class:"fm-text-white !fm-bg-blue-700 hover:!fm-bg-blue-800 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-blue-300 fm-font-medium fm-rounded-lg fm-text-sm fm-p-3 fm-text-center fm-inline-flex fm-items-center dark:!fm-bg-blue-600 dark:hover:!fm-bg-blue-700 dark:focus:fm-ring-blue-800 fm-justify-center fm-gap-2"},[b.type==="taxonomy"?(S(),T("svg",d2e,p2e)):(S(),T("svg",m2e,y2e)),g("span",{innerHTML:b.label},null,8,v2e)],8,u2e)):H("",!0)])):H("",!0)])):H("",!0)]))),256)),e.additionalFields&&e.additionalFields.length>0?(S(!0),T(ye,{key:0},Pe(e.additionalFields,b=>(S(),T("div",null,[typeof b=="string"&&typeof x(r).config[e.layout][b]=="object"?(S(),T("div",b2e,[x(r).config[e.layout][b].type==="select"?(S(),T("div",w2e,[g("label",{for:b+x(o),class:"fm-block fm-mb-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-white",innerHTML:x(r).config[e.layout][b].label},null,8,k2e),qe(g("select",{id:b+x(o),"onUpdate:modelValue":w=>e.block[b]=w,onChange:h,class:"fm-bg-gray-50 fm-border fm-border-gray-300 fm-text-gray-900 fm-text-sm fm-rounded-lg focus:fm-ring-blue-500 focus:fm-border-blue-500 fm-block fm-w-full fm-p-2.5 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-ring-blue-500 dark:focus:fm-border-blue-500"},[x(r).config[e.layout][b].allow_null===1?(S(),T("option",C2e,"- Select -")):H("",!0),(S(!0),T(ye,null,Pe(x(r).config[e.layout][b].choices,(w,k)=>(S(),T("option",{value:k,innerHTML:w},null,8,_2e))),256))],40,x2e),[[mo,e.block[b]]])])):H("",!0),x(r).config[e.layout][b].type==="true_false"?(S(),T("div",S2e,[g("input",{id:b+x(o),onChange:w=>i(w,b,!0),checked:e.block[b]===!0,type:"checkbox",value:!0,class:"fm-w-4 fm-h-4 fm-text-blue-600 fm-bg-gray-100 fm-border-gray-300 fm-rounded-full focus:fm-ring-blue-500 dark:focus:fm-ring-blue-600 dark:fm-ring-offset-gray-800 focus:fm-ring-2 dark:fm-bg-gray-700 dark:fm-border-gray-600"},null,40,T2e),g("label",{for:b+x(o),class:"fm-ml-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-gray-300",innerHTML:x(r).config[e.layout][b].label},null,8,M2e)])):H("",!0),x(r).config[e.layout][b].type==="checkbox"?(S(),T("div",E2e,[g("p",{class:"fm-block fm-mb-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-white",innerHTML:x(r).config[e.layout][b].label},null,8,O2e),(S(!0),T(ye,null,Pe(x(r).config[e.layout][b].choices,(w,k)=>(S(),T("div",null,[qe(g("input",{id:b+k+x(o),value:k,type:"checkbox","onUpdate:modelValue":y=>e.block[b]=y,onChange:h,class:"fm-w-4 fm-h-4 fm-text-blue-600 fm-bg-gray-100 fm-border-gray-300 fm-rounded-full focus:fm-ring-blue-500 dark:focus:fm-ring-blue-600 dark:fm-ring-offset-gray-800 focus:fm-ring-2 dark:fm-bg-gray-700 dark:fm-border-gray-600"},null,40,I2e),[[Il,e.block[b]]]),g("label",{for:b+k+x(o),class:"fm-ml-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-gray-300",innerHTML:w},null,8,A2e)]))),256))])):H("",!0),x(r).config[e.layout][b].type==="radio"?(S(),T("div",N2e,[g("p",{class:"fm-block fm-mb-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-white",innerHTML:x(r).config[e.layout][b].label},null,8,L2e),x(r).config[e.layout][b].allow_null===1?(S(),T("div",R2e,[qe(g("input",{id:"null_"+b+x(o),value:"",type:"radio","onUpdate:modelValue":w=>e.block[b]=w,onChange:h,class:"fm-w-4 fm-h-4 fm-text-blue-600 fm-bg-gray-100 fm-border-gray-300 fm-rounded-full focus:fm-ring-blue-500 dark:focus:fm-ring-blue-600 dark:fm-ring-offset-gray-800 focus:fm-ring-2 dark:fm-bg-gray-700 dark:fm-border-gray-600"},null,40,P2e),[[zs,e.block[b]]]),g("label",{for:"null_"+b+x(o),class:"fm-ml-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-gray-300"},"- None -",8,D2e)])):H("",!0),(S(!0),T(ye,null,Pe(x(r).config[e.layout][b].choices,(w,k)=>(S(),T("div",null,[qe(g("input",{id:b+k+x(o),value:k,type:"radio","onUpdate:modelValue":y=>e.block[b]=y,onChange:h,class:"fm-w-4 fm-h-4 fm-text-blue-600 fm-bg-gray-100 fm-border-gray-300 fm-rounded-full focus:fm-ring-blue-500 dark:focus:fm-ring-blue-600 dark:fm-ring-offset-gray-800 focus:fm-ring-2 dark:fm-bg-gray-700 dark:fm-border-gray-600"},null,40,$2e),[[zs,e.block[b]]]),g("label",{for:b+k+x(o),class:"fm-ml-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-gray-300",innerHTML:w},null,8,H2e)]))),256))])):H("",!0),x(r).config[e.layout][b].type==="taxonomy"||x(r).config[e.layout][b].type==="post_object"||x(r).config[e.layout][b].type==="relationship"?(S(),T("div",F2e,[e.configStore?(S(),T("button",{key:0,onClick:w=>e.configStore.setValues(e.block,e.blockIndex,b,[],"","posts",e.layout,!1,"",!1),type:"button",class:"fm-text-white !fm-bg-blue-700 hover:!fm-bg-blue-800 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-blue-300 fm-font-medium fm-rounded-lg fm-text-sm fm-p-3 fm-text-center fm-inline-flex fm-items-center dark:!fm-bg-blue-600 dark:hover:!fm-bg-blue-700 dark:focus:fm-ring-blue-800 fm-justify-center fm-gap-2"},[x(r).config[e.layout][b].type==="taxonomy"?(S(),T("svg",j2e,U2e)):(S(),T("svg",q2e,K2e)),g("span",{innerHTML:x(r).config[e.layout][b].label},null,8,G2e)],8,B2e)):H("",!0)])):H("",!0)])):H("",!0)]))),256)):H("",!0)])],2)],2)):H("",!0)}}),J2e={key:0},Y2e={key:0,class:"fm-flex fm-gap-y-4 fm-gap-2 fm-flex-wrap fm-p-6 fm-bg-white fm-border fm-border-gray-200 fm-rounded-lg fm-shadow dark:fm-bg-gray-800 dark:fm-border-gray-700 fm-relative"},X2e=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"},null,-1),Q2e=[X2e],Z2e={key:0},eEe=["for","innerHTML"],tEe=["onUpdate:modelValue","type","id","placeholder"],nEe={key:1,class:"fm-flex fm-items-center"},rEe=["id","onChange","checked"],oEe=["for"],sEe={key:1},iEe=g("svg",{fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),l3e=Ie({__name:"FmLink",props:{block:{type:Object,required:!0},field:{type:Object,required:!0},label:{type:String,required:!0},fieldName:{type:String,required:!0},parent:{type:String,required:!1},required:{type:Boolean,required:!0,default:!1},repeaterIndex:{type:Number,required:!1,default:0},editMode:{type:Boolean,required:!0,default:!1},configStore:{type:Object,required:!1,default:!1}},setup(t){const e=t,n=Math.random().toString(36).substring(7);let r=tr({title:"",url:"",target:""});const o=(a,l)=>{a&&a.target&&a.target&&a.target instanceof HTMLInputElement&&(console.log(a.target.checked),a.target.checked?e.field[l]="_blank":e.field[l]="")},s=()=>{e.parent?e.block[e.parent][e.repeaterIndex][e.fieldName]=r:e.block[e.fieldName]=r,console.log("SHOULD ADD LINK"),r=tr({title:"",url:"",target:""})},i=()=>{e.parent?e.block[e.parent][e.repeaterIndex][e.fieldName]=!1:e.block[e.fieldName]=!1};return(a,l)=>(S(),T("div",null,[e.editMode?(S(),T("div",J2e,[e.field?(S(),T("div",Y2e,[e.required?H("",!0):(S(),T("svg",{key:0,onClick:i,"aria-label":"Delete block",title:"Delete block",fill:"none",class:"fm-absolute fm-top-2 fm-right-2 fm-w-4 fm-h-4 fm-cursor-pointer",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},Q2e)),(S(!0),T(ye,null,Pe(x(r),(c,u)=>(S(),T("div",{class:V(typeof u=="string"&&u==="target"?"fm-w-full":"fm-w-[calc(50%-0.25rem)]")},[typeof u=="string"&&u==="url"||typeof u=="string"&&u==="title"?(S(),T("div",Z2e,[g("label",{for:x(n)+u,class:"fm-block fm-mb-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-white",innerHTML:u==="url"?"URL":u==="title"?"Title":u},null,8,eEe),qe(g("input",{"onUpdate:modelValue":d=>e.field[u]=d,type:u==="url"?"url":"text",id:x(n)+u,class:"fm-bg-gray-50 fm-border fm-border-gray-300 fm-text-gray-900 fm-text-sm fm-rounded-lg focus:fm-ring-blue-500 focus:fm-border-blue-500 fm-block fm-w-full fm-p-2.5 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-ring-blue-500 dark:focus:fm-border-blue-500",placeholder:u==="url"?"URL":u==="title"?"Title":u,required:""},null,8,tEe),[[rI,e.field[u]]])])):H("",!0),typeof u=="string"&&u==="target"?(S(),T("div",nEe,[g("input",{id:x(n)+u+t.repeaterIndex,onChange:d=>o(d,u),checked:e.field[u]==="_blank",type:"checkbox",value:"_blank",class:"fm-w-4 fm-h-4 fm-text-blue-600 fm-bg-gray-100 fm-border-gray-300 fm-rounded-full focus:fm-ring-blue-500 dark:focus:fm-ring-blue-600 dark:fm-ring-offset-gray-800 focus:fm-ring-2 dark:fm-bg-gray-700 dark:fm-border-gray-600"},null,40,rEe),g("label",{for:x(n)+u+t.repeaterIndex,class:"fm-ml-2 fm-text-sm fm-font-medium fm-text-gray-900 dark:fm-text-gray-300"},"Open in new tab",8,oEe)])):H("",!0)],2))),256))])):(S(),T("div",sEe,[g("button",{onClick:s,type:"button",class:"fm-mt-4 fm-text-white !fm-bg-blue-700 hover:!fm-bg-blue-800 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-blue-300 fm-font-medium fm-rounded-lg fm-text-sm fm-p-3 fm-text-center fm-inline-flex fm-items-center dark:!fm-bg-blue-600 dark:hover:!fm-bg-blue-700 dark:focus:fm-ring-blue-800 fm-justify-center fm-gap-2"},[iEe,g("span",null,"Add "+Le(e.label),1)])]))])):Xt(a.$slots,"default",{key:1})]))}}),aEe={key:0},lEe=g("svg",{fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),c3e=Ie({__name:"FmPostSelector",props:{block:{type:Object,required:!0},fieldName:{type:String,required:!0},parent:{type:String,required:!1},label:{type:String,required:!1,default:"file"},repeaterIndex:{type:Number,required:!1},blockIndex:{type:Number,required:!0,default:0},editMode:{type:Boolean,required:!0,default:!1},configStore:{type:Object,required:!1,default:!1}},setup(t){const e=t;return(n,r)=>e.editMode&&e.configStore?(S(),T("div",aEe,[g("button",{onClick:r[0]||(r[0]=o=>e.configStore.setValues(e.block,e.blockIndex,e.fieldName,[],"","posts",e.block.acf_fc_layout,!1,e.parent,e.repeaterIndex)),type:"button",class:"fm-mt-4 fm-text-white !fm-bg-blue-700 hover:!fm-bg-blue-800 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-blue-300 fm-font-medium fm-rounded-lg fm-text-sm fm-p-3 fm-text-center fm-inline-flex fm-items-center dark:!fm-bg-blue-600 dark:hover:!fm-bg-blue-700 dark:focus:fm-ring-blue-800 fm-justify-center fm-gap-2"},[lEe,g("span",null,"Add "+Le(e.label),1)])])):H("",!0)}}),cEe={key:0},uEe=g("svg",{fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),u3e=Ie({__name:"FmRepeater",props:{block:{type:Object,required:!0},fieldName:{type:String,required:!0},label:{type:String,required:!0},layout:{type:String,required:!0},editMode:{type:Boolean,required:!0,default:!1},configStore:{type:Object,required:!1,default:!1}},setup(t){const e=t,n=e.configStore?e.configStore.getConfig:!1,r=()=>{e.block[e.fieldName]||(e.block[e.fieldName]=[]),e.block[e.fieldName].push({});for(const s in n.config[e.layout][e.fieldName].sub_fields)if(n.config[e.layout][e.fieldName].sub_fields[s].type==="link")e.block[e.fieldName][e.block[e.fieldName].length-1][s]={title:"",url:"",target:""};else if(n.config[e.layout][e.fieldName].sub_fields[s].type==="group"){e.block[e.fieldName][e.block[e.fieldName].length-1][s]={};for(const i in n.config[e.layout][e.fieldName].sub_fields[s].sub_fields)console.log("SUBKEY",i),console.log("SUBKEY BLOCK",e.block[e.fieldName][e.block[e.fieldName].length-1][s]),e.block[e.fieldName][e.block[e.fieldName].length-1][s][i]=""}else n.config[e.layout][e.fieldName].sub_fields[s].choices?e.block[e.fieldName][e.block[e.fieldName].length-1][s]=Object.keys(n.config[e.layout][e.fieldName].sub_fields[s].choices)[0]:e.block[e.fieldName][e.block[e.fieldName].length-1][s]=""};ot(n,(s,i)=>{console.log("CONFIG CHANGE FROM",i),console.log("CONFIG CHANGE TO",s)});const o=Y(()=>{if(n&&n.config&&n.config[e.layout])if(n.config[e.layout][e.fieldName].max){if(!e.block[e.fieldName]||e.block[e.fieldName].length<n.config[e.layout][e.fieldName].max)return!0}else return!0;return!1});return(s,i)=>(S(),T("div",null,[e.editMode?(S(),T("div",cEe,[Xt(s.$slots,"default"),g("button",{onClick:r,type:"button",class:V([o.value?"":"fm-opacity-30 fm-pointer-events-none","fm-mt-4 fm-text-white !fm-bg-blue-700 hover:!fm-bg-blue-800 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-blue-300 fm-font-medium fm-rounded-lg fm-text-sm fm-p-3 fm-text-center fm-inline-flex fm-items-center dark:!fm-bg-blue-600 dark:hover:!fm-bg-blue-700 dark:focus:fm-ring-blue-800 fm-justify-center fm-gap-2"])},[uEe,g("span",null,"Add "+Le(e.label),1)],2)])):Xt(s.$slots,"default",{key:1})]))}}),dEe={key:0},fEe=["value","innerHTML"],hEe=["value","innerHTML"],d3e=Ie({__name:"FmSelect",props:{layout:{type:String,required:!0},block:{type:Object,required:!0},fieldName:{type:String,required:!0},label:{type:String,required:!0},repeaterIndex:{type:Number,required:!1,default:0},parent:{type:String,required:!1},editMode:{type:Boolean,required:!0,default:!1},configStore:{type:Object,required:!1,default:!1}},setup(t){const e=t;ae(!1);const n=Y(()=>{const o=e.configStore?e.configStore.getConfig:!1;return o&&o.config&&o.config[e.layout]?e.parent?o.config[e.layout][e.parent].sub_fields[e.fieldName].choices:o.config[e.layout][e.fieldName].choices:!1}),r=()=>{document.dispatchEvent(new CustomEvent("flowmate-input-updated",{}))};return(o,s)=>(S(),T("div",null,[e.editMode&&n.value?(S(),T("div",dEe,[e.parent?qe((S(),T("select",{key:0,"onUpdate:modelValue":s[0]||(s[0]=i=>e.block[e.parent][e.repeaterIndex][e.fieldName]=i),onChange:r,class:"fm-bg-gray-50 fm-border fm-border-gray-300 fm-text-gray-900 fm-text-sm fm-rounded-lg focus:fm-ring-blue-500 focus:fm-border-blue-500 fm-block fm-w-full fm-p-2.5 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-ring-blue-500 dark:focus:fm-border-blue-500"},[(S(!0),T(ye,null,Pe(n.value,(i,a)=>(S(),T("option",{value:a,innerHTML:i},null,8,fEe))),256))],544)),[[mo,e.block[e.parent][e.repeaterIndex][e.fieldName]]]):qe((S(),T("select",{key:1,"onUpdate:modelValue":s[1]||(s[1]=i=>e.block[e.fieldName]=i),onChange:r,class:"fm-bg-gray-50 fm-border fm-border-gray-300 fm-text-gray-900 fm-text-sm fm-rounded-lg focus:fm-ring-blue-500 focus:fm-border-blue-500 fm-block fm-w-full fm-p-2.5 dark:fm-bg-gray-700 dark:fm-border-gray-600 dark:fm-placeholder-gray-400 dark:fm-text-white dark:focus:fm-ring-blue-500 dark:focus:fm-border-blue-500"},[(S(!0),T(ye,null,Pe(n.value,(i,a)=>(S(),T("option",{value:a,innerHTML:i},null,8,hEe))),256))],544)),[[mo,e.block[e.fieldName]]])])):Xt(o.$slots,"default",{key:1})]))}}),pEe={key:0},mEe=g("svg",{fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",class:"fm-w-5 fm-h-5"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),f3e=Ie({__name:"FmFile",props:{block:{type:Object,required:!0},fieldName:{type:String,required:!0},parent:{type:String,required:!1},label:{type:String,required:!1,default:"file"},acceptedMediaTypes:{type:Array,required:!1,default:[]},blockIndex:{type:Number,required:!0,default:0},repeaterIndex:{type:Number,required:!1},editMode:{type:Boolean,required:!0,default:!1},configStore:{type:Object,required:!1,default:!1}},setup(t){const e=t;return(n,r)=>e.editMode&&e.configStore?(S(),T("div",pEe,[g("button",{onClick:r[0]||(r[0]=o=>e.configStore.setValues(e.block,e.blockIndex,e.fieldName,e.acceptedMediaTypes,"file","media",e.block.acf_fc_layout,!1,e.parent,e.repeaterIndex)),type:"button",class:"fm-mt-4 fm-text-white !fm-bg-blue-700 hover:!fm-bg-blue-800 focus:fm-ring-4 focus:fm-outline-none focus:fm-ring-blue-300 fm-font-medium fm-rounded-lg fm-text-sm fm-p-3 fm-text-center fm-inline-flex fm-items-center dark:!fm-bg-blue-600 dark:hover:!fm-bg-blue-700 dark:focus:fm-ring-blue-800 fm-justify-center fm-gap-2"},[mEe,g("span",null,"Add "+Le(e.label),1)])])):H("",!0)}}),gEe={key:0},yEe=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"},null,-1),vEe=[yEe],h3e=Ie({__name:"FmRemoveRepeaterIndexButton",props:{layout:{type:String,required:!0},block:{type:Object,required:!0},fieldName:{type:String,required:!0},repeaterIndex:{type:Number,required:!0,default:0},editMode:{type:Boolean,required:!0,default:!1},configStore:{type:Object,required:!1,default:!1}},setup(t){const e=t,n=()=>{e.block[e.fieldName].length===1?e.block[e.fieldName]=!1:e.block[e.fieldName].splice(e.repeaterIndex,1)},r=Y(()=>{const o=e.configStore?e.configStore.getConfig:!1;if(o&&o.config&&o.config[e.layout])if(o.config[e.layout][e.fieldName].min){if(e.block[e.fieldName].length>o.config[e.layout][e.fieldName].min)return!0}else return!0;return!1});return(o,s)=>e.editMode?(S(),T("div",gEe,[(S(),T("svg",{onClick:s[0]||(s[0]=i=>n()),class:V([r.value?"":"fm-opacity-30 fm-pointer-events-none","fm-z-10 fm-absolute fm-top-2 fm-right-2 fm-w-4 fm-h-4 fm-cursor-pointer"]),"aria-label":"Delete block",title:"Delete block",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},vEe,2))])):H("",!0)}}),bEe={install:(t,e)=>{}},wEe=ur(t=>{const e=Yt(),n=[];if(e.public!==void 0&&e.public.hasOwnProperty("flowmatePlugins"))for(const[r,o]of Object.entries(e.public.flowmatePlugins))n.push({name:r,config:o});t.vueApp.use(bEe),t.vueApp.use(r1e,{backend:e.public.backendUrl,frontend:e.public.frontendUrl,flex_group_id:e.public.flowmateFlexID,backendDriver:e.public.flowmateBackendDriver,availableBlocks:e.public.flowmateAvailableBlocks},n)});function kEe(t){const e=Yt(),n=new URL(t);let r=t;const o=e.public.frontendUrl!==void 0&&e.public.frontendUrl!==null?e.public.frontendUrl:!1;return o&&(r=o+n.pathname),{url:r,isProxy:o!==!1}}function xEe(t,e){const n=Yt(),r=new URL(t);let o=t;const s=n.public.imageProxyUrl!==void 0&&n.public.imageProxyUrl!==null?n.public.imageProxyUrl:!1;return s&&(o=s+r.pathname.replace("/wp-content/uploads/","/")),e&&(o=o+"?v="+e),{url:o,isProxy:s!==!1}}const CEe=ur(t=>{function e(n){if(n===void 0)return[];const r=n.title??n.title,o=[];let s="";if(n.robots&&n.robots&&o.push({hid:"robots",name:"robots",content:Object.values(n.robots).join(", ")}),n.og_description&&o.push({hid:"description",name:"description",content:n.og_description}),n.og_title&&o.push({hid:"og:title",name:"og:title",content:n.og_title.replaceAll("&amp;","&").replaceAll("&shy;","")}),n.og_image&&n.og_image.length>0){const{url:l}=xEe(n.og_image[0].url);o.push({hid:"og:image",property:"og:image",content:l})}if(n.og_description&&o.push({hid:"og:description",property:"og:description",content:n.og_description}),n.og_url){const{url:l}=kEe(n.og_url);o.push({hid:"og:url",property:"og:url",content:l}),s=l}o.push({name:"google-site-verification",content:"LRdapY1aU6DIFtRWV3YH3iETUK3dAkWYC53YzANFhxc"});const i=DV({addSeoAttributes:!0,addDirAttribute:!0});let a=[];return s&&a.push({rel:"canonical",href:s}),{htmlAttrs:{lang:i.value.htmlAttrs.lang,dir:i.value.htmlAttrs.dir},title:r,meta:[...o,...i.value.meta||[]],link:a}}return{provide:{yoastHead:n=>e(n)}}});var N4=/^GTM-[0-9A-Z]+$/;function yb(t){if(typeof t!="string"||!N4.test(t)){let e=String(t).toUpperCase().replace(/.*-|[^0-9A-Z]/g,""),n=e.length===0?"":` Did you mean 'GTM-${e}'?`;throw new Error(`'${t}' is not a valid GTM-ID (${N4}).${n}`)}}function Bd(t,e="dataLayer"){return t[e]||(t[e]=[]),t[e]}function qc(t,e){let n=document,r=n.createElement("script"),o=c=>{var u;(u=e.onReady)==null||u.call(e,{id:t,script:r}),r.removeEventListener("load",o)};r.addEventListener("load",o);let s=e.dataLayerName??"dataLayer";if(Bd(window,s).push({event:"gtm.js","gtm.start":new Date().getTime()}),!t)return r;r.async=!e.defer,r.defer=!!(e.defer||e.compatibility),e.nonce&&r.setAttribute("nonce",e.nonce),e.scriptType&&(r.type=e.scriptType);let i=new URLSearchParams({id:t,...e.dataLayerName?{l:e.dataLayerName}:{},...e.queryParams??{}}),a=e.source??"https://www.googletagmanager.com/gtm.js";r.src=`${a}?${i}`;let l=e.parentElement??n.body;if(typeof(l==null?void 0:l.appendChild)!="function")throw new Error("parentElement must be a DOM element");return l.appendChild(r),r}function _Ee(t="https://www.googletagmanager.com/gtm.js"){return Array.from(document.getElementsByTagName("script")).some(e=>e.src.includes(t))}var SEe=class{constructor(t){td(this,"id");td(this,"options");td(this,"scriptElements",[]);td(this,"isInBrowserContext",()=>typeof window<"u");if(Array.isArray(t.id))for(let e of t.id)yb(typeof e=="string"?e:e.id);else yb(t.id);this.id=t.id,this.options={enabled:!0,debug:!1,loadScript:!0,defer:!1,compatibility:!1,dataLayerName:"dataLayer",...t},delete this.options.id}enabled(){return this.options.enabled??!0}enable(t=!0,e){if(this.options.enabled=t,this.isInBrowserContext()&&t&&!_Ee(e)&&this.options.loadScript)if(Array.isArray(this.id))this.id.forEach(n=>{let r;typeof n=="string"?r=qc(n,{...this.options}):r=qc(n.id,{...this.options,queryParams:n.queryParams}),this.scriptElements.push(r)});else{let n=qc(this.id,{...this.options});this.scriptElements.push(n)}}debugEnabled(){return this.options.debug??!1}debug(t){this.options.debug=t}dataLayer(){return this.isInBrowserContext()&&this.options.enabled?Bd(window,this.options.dataLayerName):!1}trackView(t,e,n={}){let r=this.isInBrowserContext()&&(this.options.enabled??!1);this.options.debug&&console.log(`[GTM-Support${r?"":"(disabled)"}]: Dispatching TrackView`,{screenName:t,path:e}),r&&Bd(window,this.options.dataLayerName).push({...n,event:this.options.trackViewEventProperty??"content-view","content-name":e,"content-view-name":t})}trackEvent({event:t,category:e=null,action:n=null,label:r=null,value:o=null,noninteraction:s=!1,...i}={}){let a=this.isInBrowserContext()&&(this.options.enabled??!1);this.options.debug&&console.log(`[GTM-Support${a?"":"(disabled)"}]: Dispatching event`,{event:t,category:e,action:n,label:r,value:o,...i}),a&&Bd(window,this.options.dataLayerName).push({event:t??"interaction",target:e,action:n,"target-properties":r,value:o,"interaction-type":s,...i})}push(t){let e=this.isInBrowserContext()&&(this.options.enabled??!1);this.options.debug&&console.log(`[GTM-Support${e?"":"(disabled)"}]: Dispatching event`,t),e&&Bd(window,this.options.dataLayerName).push(t)}},Tn;function TEe(t,e={id:""}){e={trackOnNextTick:!1,...e},Tn=new SEe(e),t.config.globalProperties.$gtm=Tn,Tn.isInBrowserContext()&&(e.vueRouter&&MEe(t,e.vueRouter,e.ignoredViews,e.trackOnNextTick,e.vueRouterAdditionalEventData),Tn.options.enabled&&Tn.options.loadScript&&(Array.isArray(e.id)?e.id.forEach(n=>{if(typeof n=="string")qc(n,e);else{let r={...e};n.queryParams!=null&&(r.queryParams={...r.queryParams,...n.queryParams}),qc(n.id,r)}}):qc(e.id,e))),t.provide("gtm",e)}function MEe(t,e,n=[],r,o=()=>({})){function s(i,a){return i instanceof Error?!!(i.type&a):!1}e.afterEach(async(i,a,l)=>{var f,h,p;if(typeof i.name!="string"||Array.isArray(n)&&n.includes(i.name)||typeof n=="function"&&n(i,a))return;let c=i.meta&&typeof i.meta.gtm=="string"&&i.meta.gtm?i.meta.gtm:i.name;s(l,4)?Tn!=null&&Tn.debugEnabled()&&console.log(`[VueGtm]: '${c}' not tracked due to navigation aborted`):s(l,8)&&(Tn!=null&&Tn.debugEnabled())&&console.log(`[VueGtm]: '${c}' not tracked due to navigation cancelled`);let u={...await o(i,a),...(f=i.meta)==null?void 0:f.gtmAdditionalEventData},d=((p=(h=e.options)==null?void 0:h.history)==null?void 0:p.base)??"";d.endsWith("/")||(d+="/"),d+=i.fullPath.startsWith("/")?i.fullPath.substring(1):i.fullPath,r?cr(()=>{Tn==null||Tn.trackView(c,d,u)}):Tn==null||Tn.trackView(c,d,u)})}function EEe(t){return{install:e=>TEe(e,t)}}const OEe=ur(t=>{const e=Yt();t.vueApp.use(EEe({id:e.public.gtmId,defer:!1,compatibility:!1,enabled:e.public.gtmEnabled,debug:!1,loadScript:!0,vueRouter:nr(),trackOnNextTick:!1,pageTracking:!0,pageViewEventName:"nuxtRoute",respectDoNotTrack:!1}))}),IEe=[vF,wF,HB,BB,zB,VB,UB,qB,ZV,eU,lU,cU,wEe,CEe,OEe],AEe=Ie({props:{vnode:{type:Object,required:!0},route:{type:Object,required:!0},vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(t){const e=t.renderKey,n=t.route,r={};for(const o in t.route)Object.defineProperty(r,o,{get:()=>e===t.renderKey?t.route[o]:n[o]});return ul(xh,js(r)),()=>Lt(t.vnode,{ref:t.vnodeRef})}}),NEe=Ie({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(t,{attrs:e,slots:n,expose:r}){const o=ut(),s=ae(),i=An(xh,null);let a;r({pageRef:s});const l=An(xI,null);let c;const u=o.deferHydration();if(o.isHydrating){const d=o.hooks.hookOnce("app:error",u);nr().beforeEach(d)}return t.pageKey&&ot(()=>t.pageKey,(d,f)=>{d!==f&&o.callHook("page:loading:start")}),()=>Lt(GI,{name:t.name,route:t.route,...e},{default:d=>{const f=REe(i,d.route,d.Component),h=i&&i.matched.length===d.route.matched.length;if(!d.Component){if(c&&!h)return c;u();return}if(c&&l&&!l.isCurrent(d.route))return c;if(f&&i&&(!l||l!=null&&l.isCurrent(i)))return h?c:null;const p=Xb(d,t.pageKey);!o.isHydrating&&!PEe(i,d.route,d.Component)&&a===p&&o.callHook("page:loading:end"),a=p;const m=!!(t.transition??d.route.meta.pageTransition??Bb),v=m&&LEe([t.transition,d.route.meta.pageTransition,Bb,{onAfterLeave:()=>{o.callHook("page:transition:finish",d.Component)}}].filter(Boolean)),b=t.keepalive??d.route.meta.keepalive??H9;return c=JI(wh,m&&v,TB(b,Lt(_k,{suspensible:!0,onPending:()=>o.callHook("page:start",d.Component),onResolve:()=>{cr(()=>o.callHook("page:finish",d.Component).then(()=>o.callHook("page:loading:end")).finally(u))}},{default:()=>{const w=Lt(AEe,{key:p||void 0,vnode:n.default?Lt(ye,void 0,n.default(d)):d.Component,route:d.route,renderKey:p||void 0,trackRootNodes:m,vnodeRef:s});return b&&(w.type.name=d.Component.type.name||d.Component.type.__name||"RouteProvider"),w}}))).default(),c}})}});function LEe(t){const e=t.map(n=>({...n,onAfterLeave:n.onAfterLeave?Wk(n.onAfterLeave):void 0}));return wI(...e)}function REe(t,e,n){if(!t)return!1;const r=e.matched.findIndex(o=>{var s;return((s=o.components)==null?void 0:s.default)===(n==null?void 0:n.type)});return!r||r===-1?!1:e.matched.slice(0,r).some((o,s)=>{var i,a,l;return((i=o.components)==null?void 0:i.default)!==((l=(a=t.matched[s])==null?void 0:a.components)==null?void 0:l.default)})||n&&Xb({route:e,Component:n})!==Xb({route:t,Component:n})}function PEe(t,e,n){return t?e.matched.findIndex(o=>{var s;return((s=o.components)==null?void 0:s.default)===(n==null?void 0:n.type)})<e.matched.length-1:!1}const DEe=Ie({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},async setup(t,e){const n=await Bi[t.name]().then(r=>r.default||r);return()=>Lt(n,t.layoutProps,e.slots)}}),$Ee=Ie({name:"NuxtLayout",inheritAttrs:!1,props:{name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},setup(t,e){const n=ut(),r=An(xh),o=r===uy()?_B():r,s=Y(()=>{let l=x(t.name)??o.meta.layout??"default";return l&&!(l in Bi)&&t.fallback&&(l=x(t.fallback)),l}),i=ae();e.expose({layoutRef:i});const a=n.deferHydration();if(n.isHydrating){const l=n.hooks.hookOnce("app:error",a);nr().beforeEach(l)}return()=>{const l=s.value&&s.value in Bi,c=o.meta.layoutTransition??$9;return JI(wh,l&&c,{default:()=>Lt(_k,{suspensible:!0,onResolve:()=>{cr(a)}},{default:()=>Lt(HEe,{layoutProps:UO(e.attrs,{ref:i}),key:s.value||void 0,name:s.value,shouldProvide:!t.name,hasTransition:!!c},e.slots)})}).default()}}}),HEe=Ie({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean}},setup(t,e){const n=t.name;return t.shouldProvide&&ul(xI,{isCurrent:r=>n===(r.meta.layout??"default")}),()=>{var r,o;return!n||typeof n=="string"&&!(n in Bi)?(o=(r=e.slots).default)==null?void 0:o.call(r):Lt(DEe,{key:n,layoutProps:t.layoutProps,name:n},e.slots)}}}),nP=(t,e)=>{const n=t.__vccOpts||t;for(const[r,o]of e)n[r]=o;return n},FEe={};function BEe(t,e){const n=NEe,r=$Ee;return S(),$e(r,null,{default:At(()=>[he(n)]),_:1})}const jEe=nP(FEe,[["render",BEe]]),zEe={},VEe={width:"154",height:"16",viewBox:"0 0 154 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},UEe=Fu('<g clip-path="url(#clip0_218_3367)"><path d="M0 8.04456V8C0 3.6244 3.36201 0 8.04395 0C10.9303 0 12.6561 0.995226 14.2465 2.45305L13.0204 3.73475C11.6808 2.49761 10.1798 1.61273 8.02213 1.61273C4.50086 1.61273 1.86536 4.39682 1.86536 7.95544V8C1.86536 11.5798 4.52267 14.3873 8.02213 14.3873C10.2038 14.3873 11.635 13.5703 13.1579 12.1549L14.3403 13.2817C12.6823 14.9178 10.8649 16 7.97849 16C3.38601 16 0 12.4859 0 8.04456Z" fill="currentColor"></path><path d="M18.0405 0.265259H19.8579L25.6525 8.70664L31.4449 0.265259H33.2623V15.7348H31.4667V3.20425L25.6721 11.4907H25.5805L19.7859 3.22547V15.7326H18.0361V0.265259H18.0405Z" fill="currentColor"></path><path d="M45.7134 0.265259H52.4832C54.3006 0.265259 55.7318 0.774543 56.6415 1.63608C57.3004 2.29815 57.6648 3.11725 57.6648 4.11035V4.15491C57.6648 6.16658 56.3928 7.20425 55.1427 7.73475C57.0277 8.28648 58.5505 9.34749 58.5505 11.4695V11.5141C58.5505 14.1666 56.2554 15.7348 52.7799 15.7348H45.7134V0.265259ZM55.8474 4.35438C55.8474 2.82865 54.5973 1.83555 52.3261 1.83555H47.4871V7.16181H52.1909C54.3486 7.16181 55.8496 6.21115 55.8496 4.39895V4.35438H55.8474ZM52.5072 8.70664H47.4849V14.1645H52.8236C55.2322 14.1645 56.731 13.1247 56.731 11.4016V11.357C56.731 9.67852 55.2758 8.70452 52.505 8.70452L52.5072 8.70664Z" fill="currentColor"></path><path d="M62.8442 0.265259H64.6398V15.7348H62.8442V0.265259Z" fill="currentColor"></path><path d="M69.1602 8.04456V8C69.1602 3.73475 72.4545 0 77.2936 0C82.1326 0 85.3811 3.69019 85.3811 7.95544V8C85.3811 12.2653 82.0868 16 77.2477 16C72.4087 16 69.1602 12.3098 69.1602 8.04456ZM83.5201 8.04456V8C83.5201 4.48594 80.8846 1.61273 77.2499 1.61273C73.6152 1.61273 71.0233 4.44138 71.0233 7.95544V8C71.0233 11.5141 73.6588 14.3873 77.2936 14.3873C80.9283 14.3873 83.518 11.5586 83.518 8.04456H83.5201Z" fill="currentColor"></path><path d="M89.7465 0.265259H91.5639L97.3585 8.70664L103.151 0.265259H104.968V15.7348H103.173V3.20425L97.3782 11.4907H97.2865L91.4919 3.22547V15.7326H89.7422V0.265259H89.7465Z" fill="currentColor"></path><path d="M115.92 0.154907H117.603L124.85 15.7347H122.919L121.056 11.6456H112.399L110.514 15.7347H108.673L115.92 0.154907ZM120.352 10.0541L116.739 2.1878L113.104 10.0541H120.352Z" fill="currentColor"></path><path d="M127.189 13.4812L128.302 12.1995C129.96 13.6573 131.55 14.3873 133.754 14.3873C135.957 14.3873 137.299 13.2817 137.299 11.7581V11.7135C137.299 10.2769 136.505 9.45994 133.165 8.77453C129.506 8.00211 127.826 6.85198 127.826 4.30981V4.26525C127.826 1.83342 130.03 0.0445557 133.051 0.0445557C135.368 0.0445557 137.026 0.685404 138.641 1.94588L137.596 3.29336C136.119 2.12201 134.642 1.61273 133.005 1.61273C130.937 1.61273 129.619 2.7183 129.619 4.11034V4.1549C129.619 5.61273 130.438 6.43182 133.937 7.15968C137.482 7.91087 139.116 9.17135 139.116 11.5353V11.5798C139.116 14.2324 136.845 15.9554 133.686 15.9554C131.164 15.9554 129.096 15.1385 127.189 13.4812Z" fill="currentColor"></path><path d="M142.073 13.4812L143.185 12.1995C144.844 13.6573 146.434 14.3873 148.637 14.3873C150.841 14.3873 152.183 13.2817 152.183 11.7581V11.7135C152.183 10.2769 151.389 9.45994 148.048 8.77453C144.39 8.00211 142.71 6.85198 142.71 4.30981V4.26525C142.71 1.83342 144.913 0.0445557 147.935 0.0445557C150.252 0.0445557 151.91 0.685404 153.525 1.94588L152.479 3.29336C151.002 2.12201 149.525 1.61273 147.889 1.61273C145.821 1.61273 144.503 2.7183 144.503 4.11034V4.1549C144.503 5.61273 145.321 6.43182 148.821 7.15968C152.366 7.91087 154 9.17135 154 11.5353V11.5798C154 14.2324 151.729 15.9554 148.57 15.9554C146.048 15.9554 143.98 15.1385 142.073 13.4812Z" fill="currentColor"></path></g><defs><clipPath id="clip0_218_3367"><rect width="154" height="16" fill="currentColor"></rect></clipPath></defs>',2),qEe=[UEe];function WEe(t,e){return S(),T("svg",VEe,qEe)}const rP=nP(zEe,[["render",WEe]]),Zh=Vr("MenuStore",{state:()=>({burgerState:!1,headerTextColor:"white",animateMenu:!1}),getters:{getBurgerState(t){return t.burgerState},getHeaderTextColor(t){return t.headerTextColor}},actions:{toggleBurgerState(){this.burgerState=!this.burgerState,this.burgerState,document.querySelector("body").classList.toggle("overflow-hidden")},setHeaderTextColor(t){this.headerTextColor=t},reset(){this.burgerState=!1,document.querySelector("body").classList.remove("overflow-hidden")}}}),KEe={__name:"BurgerButton",setup(t){const e=Zh();return(n,r)=>(S(),T("button",{onClick:r[0]||(r[0]=o=>x(e).toggleBurgerState()),class:V(["flex lg:!hidden gap-2 p-2 flex-col relative z-30",(x(e).getBurgerState,"")])},[g("span",{class:V(["bg-current w-6 h-[1px] block",x(e).getBurgerState?"rotate-45 translate-y-[4.5px]":""]),style:{transition:"0.3s transform"}},null,2),g("span",{class:V(["bg-current w-6 h-[1px] block",x(e).getBurgerState?"-rotate-45 translate-y-[-5px]":""]),style:{transition:"0.3s transform"}},null,2)],2))}},GEe=["href","innerHTML","tabindex"],JEe=["href","innerHTML","tabindex"],YEe={__name:"BurgerLangSwitcher",props:{langActive:{type:Boolean,default:!1}},setup(t){const{locale:e,locales:n}=da(),r=sx(),o=t,s=ae("0px"),i=ae();return ot(()=>o.langActive,()=>{i.value&&o.langActive?s.value=i.value.scrollHeight+"px":s.value="0px"}),(a,l)=>(S(),T("div",{class:"w-full flex flex-col duration-300 overflow-hidden",ref_key:"langItemContent",ref:i,style:mh("max-height:"+x(s)+";")},[g("ul",null,[(S(!0),T(ye,null,Pe(x(n),(c,u)=>(S(),T("li",{key:"lang-"+c.code,class:"py-2"},[x(r)(c.code)==="/"+c.code?(S(),T("a",{key:0,href:"/"+c.code+"/",innerHTML:c.name,tabindex:t.langActive?"":"-1"},null,8,GEe)):(S(),T("a",{key:1,href:x(r)(c.code),innerHTML:c.name,tabindex:t.langActive?"":"-1"},null,8,JEe))]))),128))])],4))}},XEe={},v0=Vr("CoreStore",{state:()=>({showMenu:!1,showSearchbar:!1,locations:["menu-1"],menues:{},settings:{},cacheKey:"default",meta:{},currentPage:{},routeUpdate:0,showLeadPopup:!1,buildNumber:0,cookieConsentSet:!1}),getters:{getShowLeadPopup(t){return t.showLeadPopup},getCookieConsentSet(t){return t.cookieConsentSet},getShowMenu(t){return t.showMenu},getRouteUpdate(t){return t.routeUpdate},getMenu:t=>e=>t.menues[e],getCacheKey(t){return t.cacheKey},getShowSearchbar(t){return t.showSearchbar},getCurrentPage(t){return t.currentPage},getPreviewContent(t){var e;return(e=t.currentPage)==null?void 0:e.preview_acf.content},getContent(t){let e=JSON.parse(JSON.stringify(t.currentPage.acf.content)),n=!1;for(let r=0;r<e.length;r++){let o=[],s=e[r];s.acf_fc_layout==="block_global_block"&&s.content&&(o=s.content),o&&o.length>0&&(e.splice(r,1,...o),r+=o.length-1,n=!0)}return n?e:t.currentPage.acf.content},getCurrentPageId(t){return t.currentPage.id},getSettings(t){return t.settings}},actions:{setCookieConsentSet(t){this.cookieConsentSet=t},setShowLeadPopup(t){this.showLeadPopup=t},routeUpdated(){this.routeUpdate=this.routeUpdate+1},setCacheKey(){const t=Yt();try{let e=XEe.readFileSync("./cache.config.json"),n=JSON.parse(e);this.cacheKey=n.cache_key+t.public.build.number}catch{}},setCurrentPage(t){this.currentPage=t},setMeta(t){this.meta=t},toggleShowMenu(){this.showMenu=!this.showMenu},toggleShowSearchbar(){this.showSearchbar=!this.showSearchbar},async fetchProjectInitData(){const t=Yt(),e=t.public.menu.locations,n=t.public.menu.locales,{data:r,pending:o,error:s,refresh:i}=await qV("/api/init",{query:{locations:e.join(","),structured:!0,depth:3,cmv:this.cacheKey}},"$LcUiGpIxaJ");r&&(this.settings=r.value.settings,r.value.cache_key&&this.cacheKey==="default"&&(console.log("setting cache key",r.value.cache_key),this.cacheKey=r.value.cache_key),e.forEach(a=>{n.forEach(l=>{this.menues[a+"_"+l]=r.value.menus[a+"_"+l]})}))},async fetchSettings(){const{$apiReqUrl:t}=ut(),e=t("/wp/v2/theme-settings");await $fetch(e,{method:"GET"}).then(n=>{this.settings=n,n.cache_key&&this.cacheKey==="default"&&(console.log("setting cache key",n.cache_key),this.cacheKey=n.cache_key)}).catch(n=>{console.log("SETTINGS ERROR: ",n)})},async fetchMenus(){const{$apiReqUrl:t}=ut(),e=t("/wp/v2/cm-menus"),r=Yt().public.menu.locations;await $fetch(e,{method:"GET",params:{locations:r.join(","),structured:!0,depth:3,cmv:this.cacheKey}}).then(o=>{r.forEach(s=>{this.menues[s]=o[0][s]})}).catch(o=>{console.log("MENU ERROR: ",o)})}}}),QEe=["innerHTML"],ZEe=g("path",{d:"M16.4994 9L1 24.5",stroke:"black","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e4e=g("path",{d:"M16.5 20.9231V9H4.5769",stroke:"black","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),t4e=[ZEe,e4e],n4e=["innerHTML"],r4e=["href","target"],o4e=["innerHTML"],s4e={key:3},i4e={class:"pt-3"},a4e={class:"w-full"},l4e=["innerHTML"],c4e=["href","target"],u4e=["innerHTML"],d4e=["innerHTML"],f4e=["href","target"],h4e=["innerHTML"],p4e={__name:"BurgerItem",props:{link:{type:Object,default:{}},activeId:{type:Number,default:null}},emits:["toggleSubmenu"],setup(t,{emit:e}){v0();const n=t,r=e;Zh();const o=ae("0px"),s=ae(),i=()=>{r("toggleSubmenu",n.link.ID)};return ot(()=>n.activeId,()=>{s.value&&n.activeId===n.link.ID?o.value=s.value.scrollHeight+"px":o.value="0px"}),(a,l)=>{const c=ix;return S(),T(ye,null,[t.link.children&&t.link.children.length>0?(S(),T("button",{key:0,onClick:l[0]||(l[0]=u=>i()),class:"menu-item flex gap-2 items-center justify-between w-full text-xl"},[g("span",{innerHTML:t.link.title},null,8,QEe),(S(),T("svg",{width:"17",height:"32",viewBox:"0 0 17 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:V(["duration-300 rotate-90",n.activeId===n.link.ID?"!rotate-0":""])},t4e,2))])):a.$isInternalLink(t.link)?(S(),$e(c,{key:1,to:a.$getInternalPath(t.link),class:"menu-item w-full md:w-auto flex text-xl"},{default:At(()=>[g("span",{class:"flex-auto",innerHTML:t.link.title},null,8,n4e)]),_:1},8,["to"])):(S(),T("a",{key:2,href:t.link.url,target:t.link.target,class:"menu-item w-full md:w-auto flex text-xl"},[g("span",{class:"flex-auto",innerHTML:t.link.title},null,8,o4e)],8,r4e)),t.link.children&&t.link.children.length>0?(S(),T("div",s4e,[g("div",{class:"w-full flex flex-col duration-300 overflow-hidden",ref_key:"burgerItemContent",ref:s,style:mh("max-height:"+x(o)+";")},[g("div",i4e,[g("div",a4e,[a.$isInternalLink(t.link)?(S(),$e(c,{key:0,to:a.$getInternalPath(t.link),class:"menu-item w-fit py-2 md:w-auto flex"},{default:At(()=>[g("span",{class:"flex-auto",innerHTML:t.link.title},null,8,l4e)]),_:1},8,["to"])):(S(),T("a",{key:1,href:t.link.url,target:t.link.target,class:"menu-item w-fit py-2 md:w-auto flex"},[g("span",{class:"flex-auto",innerHTML:t.link.title},null,8,u4e)],8,c4e))]),(S(!0),T(ye,null,Pe(t.link.children,u=>(S(),T("div",{class:"w-full",key:u.ID},[a.$isInternalLink(u)?(S(),$e(c,{key:0,to:a.$getInternalPath(u),class:"w-fit py-2 menu-item burger-submenu-item !font-normal md:w-auto flex"},{default:At(()=>[g("span",{class:"flex-auto",innerHTML:u.title},null,8,d4e)]),_:2},1032,["to"])):(S(),T("a",{key:1,href:u.url,target:u.target,class:"w-fit py-2 menu-item burger-submenu-item !font-normal md:w-auto flex"},[g("span",{class:"flex-auto",innerHTML:u.title},null,8,h4e)],8,f4e))]))),128))])],4)])):H("",!0)],64)}}},m4e={class:"bg-white text-black overflow-hidden h-auto container pt-[5.6rem] pb-12"},g4e={class:"!text-black w-full z-10"},y4e={class:"!text-black w-full z-10"},v4e={__name:"BurgerMenu",props:{menu:{type:Array,default:[]},langActive:{type:Boolean,default:!1}},setup(t){const e=v0(),n=t,r=Zh(),o=ae(null),s=a=>{o.value===a?o.value=null:o.value=a},i=Y(()=>r.getBurgerState);return ot(()=>n.langActive,()=>{n.langActive&&!i.value&&window.innerWidth<1280&&r.toggleBurgerState()}),ot(()=>e.getRouteUpdate,(a,l)=>{a&&i.value&&(o.value=null,r.reset())}),(a,l)=>{const c=YEe,u=p4e;return S(),T("div",{class:V(["absolute top-0 left-0 w-full z-20 duration-500 overflow-scroll max-lg:h-dvh lg:h-auto bg-white",x(i)?"pointer-events-auto translate-x-0":"pointer-events-none overflow-hidden -translate-x-full"])},[g("div",m4e,[g("div",{class:V(["h-fit flex items-end pb-5 border-b duration-300",n.langActive?"border-black mb-12":"border-transparent"])},[g("div",g4e,[he(c,{"lang-active":n.langActive},null,8,["lang-active"])])],2),(S(!0),T(ye,null,Pe(n.menu,(d,f)=>(S(),T("div",{class:"h-fit flex items-end py-5 border-b last-of-type:border-b-0 border-black",key:d.ID},[g("div",y4e,[he(u,{onToggleSubmenu:s,"active-id":x(o),link:d},null,8,["active-id","link"])])]))),128))])],2)}}},b4e=g("a",{class:"sr-only",tabindex:"-1",id:"before-content"},null,-1),w4e=g("a",{class:"!absolute top-0 left-0 !rounded-tr-none !rounded-tl-none !rounded-br-20 !rounded-bl-none btn primary z-100 sr-only focus-visible:not-sr-only focus:not-sr-only !py-2 !px-5 !duration-0",tabindex:"1",href:"#main-content"},"Skip to main content",-1),k4e=g("span",{class:"sr-only"},"CM Biomass logo",-1),x4e={class:"max-lg:hidden"},C4e={class:"flex flex-row gap-[60px]"},_4e=["innerHTML"],S4e={key:0,width:"10",height:"5",viewBox:"0 0 10 5",fill:"none",xmlns:"http://www.w3.org/2000/svg"},T4e=g("path",{d:"M8.75393 0.501973L4.79443 4.46147L0.834941 0.501973",stroke:"currentColor","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),M4e=[T4e],E4e=["tabindex","href","target"],O4e=["innerHTML"],I4e={key:0,width:"10",height:"5",viewBox:"0 0 10 5",fill:"none",xmlns:"http://www.w3.org/2000/svg"},A4e=g("path",{d:"M8.75393 0.501973L4.79443 4.46147L0.834941 0.501973",stroke:"currentColor","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),N4e=[A4e],L4e={class:"bg-white text-black rounded-20 p-7 flex gap-2.5 flex-col inner duration-300 opacity-0"},R4e=["innerHTML"],P4e=["tabindex","href","target","innerHTML"],D4e={class:"flex gap-3 items-center"},$4e=g("path",{d:"M8.50197 0.501973L4.54248 4.46147L0.582988 0.501973",stroke:"black","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),H4e=[$4e],F4e=Fu('<span class="ml-[10px]"><svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11 21C13.9639 21 16.3666 16.5228 16.3666 11C16.3666 5.47715 13.9639 1 11 1C8.03604 1 5.6333 5.47715 5.6333 11C5.6333 16.5228 8.03604 21 11 21Z" stroke="black" stroke-width="0.761905" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M1.8335 15H20.1668M1.8335 7H20.1668M11.0002 1V21" stroke="black" stroke-width="0.761905" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M11 21C16.5228 21 21 16.5228 21 11C21 5.47715 16.5228 1 11 1C5.47715 1 1 5.47715 1 11C1 16.5228 5.47715 21 11 21Z" stroke="black" stroke-width="0.761905" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path></svg></span>',1),B4e=["href","innerHTML","tabindex"],j4e=["href","innerHTML","tabindex"],z4e=75,V4e={__name:"SiteHeader",setup(t){const e=Zh(),n=v0(),{locale:r,locales:o}=da(),s=sx(),i=Y(()=>n.getMenu("menu-1_"+r.value)),a=Y(()=>r.value==="en"?"/":"/"+r.value+"/"),l=ae(!1),c=Y(()=>e.getBurgerState);ot(()=>c.value,()=>{c.value||(l.value=!1)});const u=Y(()=>e.getHeaderTextColor),d=ae(!1),f=ae(!1),h=ae(!1),p=ae(!1);xo(()=>{f.value=u.value==="white",setTimeout(()=>{d.value=!0},500),k(),window.addEventListener("scroll",k)}),ot(u,(y,C)=>{f.value=y==="white"});const m=ae(!1),v=ae(!1),b=ae(0),w=ae(0),k=()=>{h.value=window.scrollY>0,window.scrollY===0?(v.value=!0,m.value=!1):v.value=!1,window.scrollY<105?(h.value=!1,p.value=!1):(h.value=!0,window.scrollY<b.value&&w.value<window.scrollY&&(w.value=window.scrollY),window.scrollY>b.value?(p.value=!0,w.value=window.scrollY):(p.value=window.scrollY>=w.value-z4e,m.value=!0)),p.value&&(l.value=!1),b.value=window.scrollY};return(y,C)=>{const _=rP,M=ix,E=KEe,O=v4e;return S(),T("header",{class:V(["site-header max-h-[116px] fixed top-0 left-0 w-full z-[200]",[x(h)?"bg-white !text-black max-h-[80px]":"",x(c)?"!text-black":"",x(f)?"text-white":"text-black",x(p)?"-translate-y-full":"translate-y-0"]]),style:{transition:"0.3s background-color, 0.3s transform, 0.3s max-height"}},[g("div",{class:V(["container z-[40] relative w-full px-5 lg:!max-w-none lg:!px-[1.5rem] maxw:!px-[4.063rem] pt-[20px] lg:pt-[60px] pb-[20px] h-full flex items-center justify-between",[x(h)?"!pt-[20px]":"",x(d)?"translate-y-0":"-translate-y-full"]]),style:{transition:"0.3s padding, 1s transform"}},[b4e,w4e,g("div",null,[he(M,{to:x(a),rel:"home",class:"block"},{default:At(()=>[k4e,he(_,{class:"w-[154px] h-auto"})]),_:1},8,["to"])]),g("div",x4e,[g("nav",null,[g("ul",C4e,[(S(!0),T(ye,null,Pe(x(i),(N,R)=>(S(),T("li",{key:N.ID,class:V(["relative menu-item-group",N.children&&N.children.length>0?"":"menu-item-hover"])},[y.$isInternalLink(N)?(S(),$e(M,{key:0,tabindex:N.tabindex,to:y.$getInternalPath(N),class:"menu-item flex gap-[10px] items-center"},{default:At(()=>[g("span",{innerHTML:N.title},null,8,_4e),N.children&&N.children.length>0?(S(),T("svg",S4e,M4e)):H("",!0)]),_:2},1032,["tabindex","to"])):(S(),T("a",{key:1,tabindex:N.tabindex,href:N.url,target:N.target,class:"menu-item flex gap-[10px] items-center"},[g("span",{innerHTML:N.title},null,8,O4e),N.children&&N.children.length>0?(S(),T("svg",I4e,N4e)):H("",!0)],8,E4e)),N.children&&N.children.length>0?(S(),T("div",{key:2,class:V(["absolute left-1/2 -translate-x-1/2 w-max max-w-[200px] pt-[22px] sub-menu duration-300",x(h)?"pt-[35px]":""])},[g("ul",L4e,[(S(!0),T(ye,null,Pe(N.children,(I,j)=>(S(),T("li",{key:I.ID,class:"menu-item-hover sub"},[y.$isInternalLink(I)?(S(),$e(M,{key:0,tabindex:I.tabindex,to:y.$getInternalPath(I),class:"menu-item"},{default:At(()=>[g("span",{innerHTML:I.title},null,8,R4e)]),_:2},1032,["tabindex","to"])):(S(),T("a",{key:1,tabindex:I.tabindex,href:I.url,target:I.target,class:"menu-item",innerHTML:I.title},null,8,P4e))]))),128))])],2)):H("",!0)],2))),128))])])]),g("div",D4e,[g("div",{class:V(["relative opacity-0 pointer-events-none",x(c)?"delay-400 duration-300":"max-lg:opacity-0 "])},[g("button",{class:"flex items-center justify-center h-full p-2 pl-3 rounded-[65px] bg-white","aria-label":"button for changing the language",onClick:C[0]||(C[0]=N=>l.value=!x(l))},[g("span",null,[(S(),T("svg",{width:"9",height:"5",viewBox:"0 0 9 5",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:V([x(l)?"rotate-180":"","duration-300"])},H4e,2))]),F4e]),g("ul",{class:V(["max-lg:hidden bg-white text-black absolute right-0 p-7 rounded-20 flex gap-2.5 flex-col duration-300 mt-[22px] inner",[x(l)?"":"opacity-0 pointer-events-none -translate-y-2",x(h)?"mt-[30px]":""]])},[(S(!0),T(ye,null,Pe(x(o),(N,R)=>(S(),T("li",{key:"lang-"+N.code,class:"menu-item-hover"},[x(s)(N.code)==="/"+N.code?(S(),T("a",{key:0,href:"/"+N.code+"/",innerHTML:N.name,tabindex:x(l)?"":"-1"},null,8,B4e)):(S(),T("a",{key:1,href:x(s)(N.code),innerHTML:N.name,tabindex:x(l)?"":"-1"},null,8,j4e))]))),128))],2)],2),he(E)])],2),he(O,{class:"block lg:hidden z-[35]","lang-active":x(l),menu:x(i)},null,8,["lang-active","menu"])],2)}}},U4e={class:"bg-green text-white py-[80px] md:py-[125px]"},q4e={class:"container"},W4e={class:"grid grid-cols-12 gap-5 gap-y-[60px] md:gap-[40px]"},K4e={class:"col-span-full md:col-span-7 grid grid-cols-3 gap-y-[60px] md:grid-cols-7"},G4e={class:"col-span-3 flex flex-col gap-[60px]"},J4e={key:0,class:"text-sm last-p-no-margin"},Y4e=["innerHTML"],X4e={class:"flex flex-col col-span-3 md:col-start-5"},Q4e={class:"flex flex-col","aria-label":"Information about CM Biomass"},Z4e=["innerHTML"],eOe=["innerHTML"],tOe=["innerHTML"],nOe=["innerHTML"],rOe={key:2,class:"mt-5"},oOe=["href","innerHTML"],sOe={class:"col-span-full md:col-span-5 grid grid-cols-3 gap-y-[60px] md:grid-cols-5 max-md:border-t max-md:pt-[60px] md:border-l border-[#193E39]"},iOe={class:"flex flex-col md:flex-row gap-y-[60px] justify-between col-span-3 md:col-start-2"},aOe={class:"flex flex-row max-sm:justify-between sm:gap-[150px]"},lOe={"aria-label":"Information about CM Biomass"},cOe={class:"flex flex-col gap-[22px]"},uOe=["innerHTML"],dOe=["tabindex","href","target","innerHTML"],fOe={class:"col-span-3 md:col-span-1"},hOe={key:0},pOe=["innerHTML"],mOe={class:"flex flex-row md:flex-col gap-[22px]"},gOe=["innerHTML"],yOe=["href","target","innerHTML"],vOe={class:"bg-white text-black py-[26px]"},bOe={class:"container"},wOe={class:"grid grid-cols-12 md:gap-[40px] items-center justify-center"},kOe=["innerHTML"],xOe={class:"col-span-full md:col-span-6 max-md:-order-1"},COe={class:"flex flex-col md:flex-row justify-end gap-y-[20px] gap-x-[30px]","aria-label":"footer links"},_Oe=["innerHTML"],SOe=["tabindex","href","target","innerHTML"],TOe={__name:"SiteFooter",setup(t){const e=v0(),{locale:n,locales:r}=da(),o=Y(()=>e.getMenu("footer-1_"+n.value)),s=Y(()=>e.getMenu("footer-bottom_"+n.value)),i=Y(()=>e.getSettings),a=Y(()=>i.value["company_info_"+n.value]),l=Y(()=>i.value["company_description_text_"+n.value]),c=Y(()=>i.value["copyright_text_"+n.value]),u=Y(()=>i.value["social_media_channels_"+n.value]),d=Y(()=>i.value["social_media_column_title_"+n.value]);return(f,h)=>{const p=rP,m=ix;return S(),T("footer",null,[g("section",U4e,[g("div",q4e,[g("div",W4e,[g("div",K4e,[g("div",G4e,[he(m,{to:"/","aria-label":"CM Biomass logo"},{default:At(()=>[he(p,{class:"w-[245px] h-auto"})]),_:1}),x(l)?(S(),T("div",J4e,[g("p",{innerHTML:x(l)},null,8,Y4e)])):H("",!0)]),g("div",X4e,[g("ul",Q4e,[x(a)&&x(a).company_name?(S(),T("li",{key:0,innerHTML:x(a).company_name},null,8,Z4e)):H("",!0),x(a)&&x(a).address?(S(),T("li",{key:1,innerHTML:x(a).address},null,8,eOe)):H("",!0),g("li",null,[x(a)&&x(a).postalnumber?(S(),T("span",{key:0,innerHTML:x(a).postalnumber},null,8,tOe)):H("",!0),Ge(),x(a)&&x(a).city?(S(),T("span",{key:1,innerHTML:x(a).city},null,8,nOe)):H("",!0)]),x(a).company_phone?(S(),T("li",rOe,[g("a",{class:"text-[28px]",href:"tel:"+x(a).company_phone,innerHTML:x(a).company_phone},null,8,oOe)])):H("",!0)])])]),g("div",sOe,[g("div",iOe,[g("div",aOe,[g("nav",lOe,[g("ul",cOe,[(S(!0),T(ye,null,Pe(x(o),(v,b)=>(S(),T("li",{class:"menu-item-hover relative menu-item-group",key:v.ID},[f.$isInternalLink(v)?(S(),$e(m,{key:0,tabindex:v.tabindex,to:f.$getInternalPath(v),class:"menu-item"},{default:At(()=>[g("span",{innerHTML:v.title},null,8,uOe)]),_:2},1032,["tabindex","to"])):(S(),T("a",{key:1,tabindex:v.tabindex,href:v.url,target:v.target,class:"menu-item",innerHTML:v.title},null,8,dOe))]))),128))])])])]),g("div",fOe,[x(u)&&x(u).length>0?(S(),T("nav",hOe,[x(d)?(S(),T("span",{key:0,class:"text-[21px] mb-[22px] block",innerHTML:x(d)},null,8,pOe)):H("",!0),g("ul",mOe,[(S(!0),T(ye,null,Pe(x(u),(v,b)=>(S(),T("li",{class:"menu-item-hover relative menu-item-group",key:"some-"+b},[f.$isInternalLink(v.link)?(S(),$e(m,{key:0,to:f.$getInternalPath(v.link),class:"menu-item"},{default:At(()=>[g("span",{innerHTML:v.link.title},null,8,gOe)]),_:2},1032,["to"])):(S(),T("a",{key:1,href:v.link.url,target:v.link.target,class:"menu-item",innerHTML:v.link.title},null,8,yOe))]))),128))])])):H("",!0)])])])])]),g("section",vOe,[g("div",bOe,[g("div",wOe,[g("div",{class:V(["col-span-full md:col-span-6",x(c)?"max-md:mt-[20px]":""])},[x(c)?(S(),T("span",{key:0,class:"text-black text-xs",innerHTML:x(c)},null,8,kOe)):H("",!0)],2),g("div",xOe,[g("nav",null,[g("ul",COe,[(S(!0),T(ye,null,Pe(x(s),(v,b)=>(S(),T("li",{class:"menu-item-hover relative menu-item-group text-black text-xs",key:v.ID},[f.$isInternalLink(v)?(S(),$e(m,{key:0,tabindex:v.tabindex,to:f.$getInternalPath(v),class:"menu-item"},{default:At(()=>[g("span",{innerHTML:v.title},null,8,_Oe)]),_:2},1032,["tabindex","to"])):(S(),T("a",{key:1,tabindex:v.tabindex,href:v.url,target:v.target,class:"menu-item",innerHTML:v.title},null,8,SOe))]))),128))])])])])])])])}}},MOe={id:"mainLayout",class:"relative",ref:"layout"},EOe={class:"container pb-[80px] md:pb-[150px] pt-[150px] md:pt-[200px]"},OOe={class:"grid grid-cols-12 z-10 relative"},IOe={class:"col-span-12 lg:col-span-6 lg:col-start-4"},AOe=["innerHTML"],NOe=["innerHTML"],LOe=["innerHTML"],ROe={class:"inner"},POe={class:"top"},DOe={class:"bottom"},$Oe=g("div",{class:"col-span-12 gh-1 pt-global"},null,-1),HOe={__name:"error",props:{error:Object},setup(t){const e=Zh(),n=t,{t:r}=da();e.setHeaderTextColor("black");const{locale:o,locales:s}=da(),i=Y(()=>o.value==="en"?"/":"/"+o.value+"/"),a=()=>SI({redirect:i.value}),l={title:r("404Title"),og_title:r("404Title"),robots:{index:"noindex",follow:"nofollow","max-image-preview":"max-image-preview:none","max-snippet":"max-snippet:-1","max-video-preview":"max-video-preview:-1"}},{$yoastHead:c}=ut();return dF(c(l)),(u,d)=>{const f=V4e,h=TOe;return S(),T("div",MOe,[he(f),g("div",EOe,[g("div",OOe,[g("div",IOe,[g("h1",{class:"mb-7",innerHTML:n.error.statusCode},null,8,AOe),g("h4",{class:"mb-4",innerHTML:u.$t("404SubTitle")},null,8,NOe),g("p",{innerHTML:u.$t("404Paragraph")},null,8,LOe),g("button",{onClick:a,class:"w-fit mt-7 btn primary"},[g("span",ROe,[g("span",POe,Le(u.$t("404Link")),1),g("span",DOe,Le(u.$t("404Link")),1)])])]),$Oe])]),he(h)],512)}}},FOe={key:0},L4={__name:"nuxt-root",setup(t){const e=()=>null,n=ut(),r=n.deferHydration();if(n.isHydrating){const l=n.hooks.hookOnce("app:error",r);nr().beforeEach(l)}const o=!1;ul(xh,uy()),n.hooks.callHookWith(l=>l.map(c=>c()),"vue:setup");const s=dy(),i=!1;yO((l,c,u)=>{if(n.hooks.callHook("vue:error",l,c,u).catch(d=>console.error("[nuxt] Error in `vue:error` hook",d)),CH(l)&&(l.fatal||l.unhandled))return n.runWithContext(()=>xc(l)),!1});const a=!1;return(l,c)=>(S(),$e(_k,{onResolve:x(r)},{default:At(()=>[x(i)?(S(),T("div",FOe)):x(s)?(S(),$e(x(HOe),{key:1,error:x(s)},null,8,["error"])):x(a)?(S(),$e(x(e),{key:2,context:x(a)},null,8,["context"])):x(o)?(S(),$e(nD(x(o)),{key:3})):(S(),$e(x(jEe),{key:4}))]),_:1},8,["onResolve"]))}};let R4;{let t;R4=async function(){var i,a;if(t)return t;const r=!!((i=window.__NUXT__)!=null&&i.serverRendered||((a=document.getElementById("__NUXT_DATA__"))==null?void 0:a.dataset.ssr)==="true")?L$(L4):N$(L4),o=U9({vueApp:r});async function s(l){await o.callHook("app:error",l),o.payload.error=o.payload.error||Ch(l)}r.config.errorHandler=s;try{await K9(o,IEe)}catch(l){s(l)}try{await o.hooks.callHook("app:created",r),await o.hooks.callHook("app:beforeMount",r),r.mount(z9),await o.hooks.callHook("app:mounted",r),await cr()}catch(l){s(l)}return r.config.errorHandler===s&&(r.config.errorHandler=void 0),r},t=R4().catch(e=>{throw console.error("Error while mounting app:",e),e})}export{mo as $,da as A,Ge as B,Yt as C,Bu as D,Xt as E,ye as F,s3e as G,i3e as H,u3e as I,l3e as J,c3e as K,d3e as L,a3e as M,h3e as N,f3e as O,_s as P,If as Q,Tk as R,An as S,rt as T,uy as U,zOe as V,qV as W,Ur as X,qe as Y,o3e as Z,ix as _,nr as a,Ot as a0,mn as a1,Il as a2,Fu as a3,k$ as a4,zV as a5,XEe as a6,j3 as a7,UOe as a8,Zh as a9,dF as aa,ut as ab,Ch as ac,VOe as ad,V4e as ae,NEe as af,TOe as ag,xEe as ah,Y as b,T as c,Ie as d,S as e,g as f,Pe as g,H as h,$e as i,nD as j,nP as k,v0 as l,x as m,V as n,xo as o,ul as p,he as q,ae as r,jOe as s,Vm as t,IS as u,mh as v,At as w,ot as x,Le as y,Vr as z};
